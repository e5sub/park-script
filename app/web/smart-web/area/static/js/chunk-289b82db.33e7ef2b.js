(window["webpackJsonp_area"]=window["webpackJsonp_area"]||[]).push([["chunk-289b82db"],{"03c2":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("498a");var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"800px",title:"edit"===e.enterParam.type?"编辑楼栋":"新增楼栋",visible:e.isShow,id:"size","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目",disabled:"edit"==e.enterParam.type},on:{change:e.getAreaId},model:{value:e.formData.areaId,callback:function(t){e.$set(e.formData,"areaId",t)},expression:"formData.areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"楼栋编码:",prop:"buildingCode"}},[t("el-input",{attrs:{placeholder:"请输入楼栋编码",maxlength:"15",disabled:"edit"==e.enterParam.type},model:{value:e.formData.buildingCode,callback:function(t){e.$set(e.formData,"buildingCode","string"===typeof t?t.trim():t)},expression:"formData.buildingCode"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"楼栋类型:",prop:"buildingType"}},[t("el-select",{attrs:{placeholder:"请选择楼栋类型"},model:{value:e.formData.buildingType,callback:function(t){e.$set(e.formData,"buildingType",t)},expression:"formData.buildingType"}},e._l(e.buildingTypeOption,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"楼栋名称:",prop:"buildingName"}},[t("el-input",{attrs:{maxlength:"15",placeholder:"请输入楼栋名称"},model:{value:e.formData.buildingName,callback:function(t){e.$set(e.formData,"buildingName","string"===typeof t?t.trim():t)},expression:"formData.buildingName"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"建筑面积:",prop:"coveredArea"}},[t("el-input",{attrs:{type:"number",precision:2,min:1,step:1,placeholder:"请输入建筑面积"},model:{value:e.formData.coveredArea,callback:function(t){e.$set(e.formData,"coveredArea",t)},expression:"formData.coveredArea"}},[t("template",{slot:"append"},[e._v("㎡")])],2)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"电梯:",prop:"hasElevator"}},[t("el-radio-group",{model:{value:e.formData.hasElevator,callback:function(t){e.$set(e.formData,"hasElevator",t)},expression:"formData.hasElevator"}},[t("el-radio",{attrs:{label:1}},[e._v("有")]),t("el-radio",{attrs:{label:0}},[e._v("无")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"单元数量:",prop:"unitCnt"}},[t("el-radio-group",{staticStyle:{display:"inline-block"},on:{change:function(){0===e.formData.hasUnitCnt&&(e.formData.unitCnt=null)}},model:{value:e.formData.hasUnitCnt,callback:function(t){e.$set(e.formData,"hasUnitCnt",t)},expression:"formData.hasUnitCnt"}},[t("el-radio",{attrs:{label:1}},[e._v("有")]),t("el-radio",{attrs:{label:0}},[e._v("无")])],1),1==e.formData.hasUnitCnt?t("el-input",{staticStyle:{display:"inline-block",width:"60%","margin-left":"10px"},attrs:{type:"number",min:"1",placeholder:"请输入单元数量"},model:{value:e.formData.unitCnt,callback:function(t){e.$set(e.formData,"unitCnt",e._n(t))},expression:"formData.unitCnt"}}):e._e()],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"地上层数:",prop:"groundFloor"}},[t("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入地上层数"},model:{value:e.formData.groundFloor,callback:function(t){e.$set(e.formData,"groundFloor",e._n(t))},expression:"formData.groundFloor"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"地下层数:",prop:"undergroundFloor"}},[t("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入地下层数"},model:{value:e.formData.undergroundFloor,callback:function(t){e.$set(e.formData,"undergroundFloor",e._n(t))},expression:"formData.undergroundFloor"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"总套数:",prop:"standardRoom"}},[t("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入总套数"},model:{value:e.formData.standardRoom,callback:function(t){e.$set(e.formData,"standardRoom",e._n(t))},expression:"formData.standardRoom"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"物业管家:",prop:"contacts"}},[t("el-input",{attrs:{placeholder:"请输入物业管家"},model:{value:e.formData.contacts,callback:function(t){e.$set(e.formData,"contacts",t)},expression:"formData.contacts"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"管家电话:",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入管家电话"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"楼栋图片:"}},[t("ImgUpload",{attrs:{fileList:e.fileList,limit:5,busSubType:1002},on:{"update:fileList":function(t){e.fileList=t},"update:file-list":function(t){e.fileList=t}}})],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"楼栋介绍:",prop:"remark"}},[t("el-input",{attrs:{type:"textarea","show-word-limit":"",rows:3,maxlength:"200"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保 存")])],1)],1)},n=[],s=a("c7eb"),r=a("1da1"),o=(a("d81d"),a("d3b7"),a("ac1f"),a("00b4"),a("159b"),a("0835")),l=a("cb37"),c=a("53ba"),d=a("5f87"),u={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},mixins:[c["a"]],components:{ImgUpload:o["a"]},data:function(){return{isShow:!1,loading:!1,formData:{areaId:"",buildingCode:"",buildingName:"",buildingType:"",coveredArea:"",hasElevator:1,hasUnitCnt:0,unitCnt:1,groundFloor:0,undergroundFloor:0,standardRoom:"",contacts:"",phone:"",remark:""},fileList:[],rules:{areaId:[{required:!0,message:"请选择所属项目",trigger:"change"}],buildingCode:[{required:!0,message:"楼栋编码不能为空",trigger:"blur"},{pattern:/^[0-9A-Za-z]+$/,message:"编码只能是数字或字母",trigger:"blur"}],buildingType:[{required:!0,message:"请选择楼栋类型",trigger:"change"}],phone:[{validator:function(e,t,a){var i=/^1[3-9]\d{9}$/,n=/^[0-9]{3,8}$/,s=/^(([0-9]{11})|([0-9]{3}\-[0-9]{8})|([0-9]{4}\-[0-9]{7}))$/,r=/^(([0-9]{8,13})|([0-9]{7,8}\-[0-9]{1,5}))$/,o=/^(([0-9]{12,16})|([0-9]{3}\-[0-9]{8}\-[0-9]{1,5})|([0-9]{4}\-[0-9]{7}\-[0-9]{1,5}))$/;i.test(t)||n.test(t)||s.test(t)||r.test(t)||o.test(t)||""==t?a():a(new Error("请输入正确的联系电话"))},trigger:"blur"}],buildingName:[{required:!0,message:"楼栋名称不能为空",trigger:"blur"}],coveredArea:[{required:!0,message:"建筑面积不能为空",trigger:"blur"}]},buildingTypeOption:[]}},watch:{value:function(e){this.isShow=e,e&&(this.formData.areaId=this.enterParam.areaId,this.formData.areaName=this.enterParam.areaName,"edit"==this.enterParam.type&&this.getBuildingDetail(this.enterParam.buildingId),console.log(this.enterParam))},isShow:function(e){this.$emit("input",e)}},created:function(){var e=this;this.getDicts({code:"building_type"}).then((function(t){0==t.code&&(e.buildingTypeOption=t.data.items||[])}))},methods:{getAreaId:function(e){},getBuildingDetail:function(e){var t=this;return Object(r["a"])(Object(s["a"])().mark((function a(){var i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["a"])({id:e});case 2:i=a.sent,0==i.code&&(t.formData=i.data,t.fileList=[],i.data.attachmentListItems&&i.data.attachmentListItems.length>0&&i.data.attachmentListItems.forEach((function(e){var a={fileId:e.fileId,url:"/prod-api/adm-service/system/file/image?fileId="+e.fileId+"&token="+Object(d["d"])()};t.fileList.push(a)})));case 4:case"end":return a.stop()}}),a)})))()},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refresh",e.formData.areaId),setTimeout((function(){e.hide()}),200)):e.$message.error(t.msg)},i=function(){e.loading=!1};e.fileList.length>0&&(e.formData.files=e.fileList.map((function(e){return e.fileId}))),e.formData.unitCnt&&0!=e.formData.unitCnt||(e.formData.unitCnt=1),"edit"===e.enterParam.type?Object(l["e"])(e.formData).then(a).catch((function(){e.loading=!1})).finally(i):Object(l["c"])(e.formData).then(a).catch((function(){e.loading=!1})).finally(i)}}))},hide:function(){this.isShow=!1,this.resetForm("form"),this.fileList=[]}}},p=u,m=a("2877"),f=Object(m["a"])(p,i,n,!1,null,"26ef196c",null);t["default"]=f.exports},"0460":function(e,t,a){"use strict";a.r(t);a("4de4"),a("b0c0"),a("d3b7");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bgimg"},[t("el-card",[t("el-cascader",{ref:"elcascader",staticStyle:{width:"25%"},attrs:{"popper-append-to-body":!1,size:"small",props:e.cascaderProps,options:e.areaList},on:{change:e.handleChange},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}}),t("el-row",{staticStyle:{"margin-top":"30px","text-align":"center"},attrs:{gutter:20}},[t("el-col",{attrs:{span:4}},[t("span",{staticClass:"sp"},[e._v("总面积")]),t("div",{staticClass:"num"},[e._v(" "+e._s(e.dataJson.sumArea?e.dataJson.sumArea:0)+" "),t("span",{staticClass:"sp"},[e._v("㎡")])])]),t("el-col",{attrs:{span:4}},[t("span",{staticClass:"sp"},[e._v("总房间数")]),t("div",{staticClass:"num"},[e._v(" "+e._s(e.dataJson.roomSpaceNum?e.dataJson.roomSpaceNum:0)+" "),t("span",{staticClass:"sp"},[e._v("间")])])]),t("el-col",{attrs:{span:4}},[t("span",{staticClass:"sp"},[e._v("入驻企业数量")]),t("div",{staticClass:"num"},[e._v(" "+e._s(e.dataJson.entNumber?e.dataJson.entNumber:0)+" "),t("span",{staticClass:"sp"},[e._v("家")])])])],1),t("el-row",{staticStyle:{"margin-top":"30px","text-align":"center"},attrs:{gutter:10}},[t("el-col",{staticStyle:{"border-right":"1px solid #f5f5f5"},attrs:{span:12}},[t("el-col",{attrs:{span:8}},[t("span",{staticClass:"sp"},[e._v("出租率")]),t("div",{staticClass:"num"},[e._v(" "+e._s(e.dataJson.rentRate?e.dataJson.rentRate:0)+" "),t("span",{staticClass:"sp"},[e._v("%")])])]),t("el-col",{attrs:{span:8}},[t("span",{staticClass:"sp"},[e._v("本月签约面积")]),t("div",{staticClass:"num"},[e._v(" "+e._s(e.dataJson.nowMonthArea?e.dataJson.nowMonthArea:0)+" "),t("span",{staticClass:"sp"},[e._v("㎡")])])])],1),t("el-col",{staticClass:"redClass",attrs:{span:12}},[t("el-col",{attrs:{span:8}},[t("span",{staticClass:"sp"},[e._v("可出租面积")]),t("div",{staticClass:"num"},[e._v(" "+e._s(e.dataJson.sumWaitArea?e.dataJson.sumWaitArea:0)+" "),t("span",{staticClass:"sp"},[e._v("㎡")])])]),t("el-col",{attrs:{span:8}},[t("span",{staticClass:"sp"},[e._v("可出租占比")]),t("div",{staticClass:"num"},[e._v(" "+e._s(e.dataJson.sumWaitAreaRate?e.dataJson.sumWaitAreaRate:0)+" "),t("span",{staticClass:"sp"},[e._v("%")])])]),t("el-col",{attrs:{span:8}},[t("span",{staticClass:"sp"},[e._v("可出租房间数")]),t("div",{staticClass:"num"},[e._v(" "+e._s(e.dataJson.roomSpaceLeaseNum?e.dataJson.roomSpaceLeaseNum:0)+" "),t("span",{staticClass:"sp"},[e._v("间")])])])],1)],1)],1),t("el-card",{staticStyle:{"margin-top":"20px"}},[t("el-row",e._l(e.roomStati.filter((function(e){return!e.hide})),(function(a,i){return t("el-col",{key:i,style:{marginTop:i>3?"40px":""},attrs:{span:6}},[t("div",{staticClass:"textAlign stati-card",style:{borderLeft:i%4==0?"":"1px solid #e7e7e7",padding:"10px 0"}},[t("div",{staticClass:"name",staticStyle:{"margin-bottom":"10px"}},[e._v(e._s(a.name))]),t("span",{staticClass:"count",staticStyle:{"font-size":"20px"}},[e._v(e._s(a.count))]),t("span",{staticClass:"gray-text",staticStyle:{"margin-left":"6px"}},[e._v(e._s(a.unit))])])])})),1)],1)],1)},n=[],s=a("5530"),r=(a("d81d"),a("e9c4"),a("b64b"),a("159b"),a("5f87")),o=a("cb37"),l={name:"analysisAreaPage",props:{forward:Function},computed:{parks:function(){return Object(r["a"])()}},components:{},data:function(){return{areaList:[],buildingList:[],floorList:[],cascaderProps:{lazy:!0,checkStrictly:!0,value:"id",label:"label",lazyLoad:this.cascLazyLoad},dataJson:{},roomStati:[{name:"独立空间",count:0,unit:"间"},{name:"已租",count:0,unit:"间"},{name:"空置",count:0,unit:"间"},{name:"锁定",count:0,unit:"间"},{name:"留置",count:0,unit:"间",hide:!0},{name:"工位",count:0,unit:"个"},{name:"已租",count:0,unit:"个"},{name:"空置",count:0,unit:"个"},{name:"锁定",count:0,unit:"个"},{name:"留置",count:0,unit:"个",hide:!0}],searchParams:[]}},created:function(){this.getAreaList()},mounted:function(){this.handleChange()},methods:{getAreaList:function(){var e=JSON.parse(JSON.stringify(this.parks));this.areaList=e.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),this.searchParams[0]=this.areaList.length>0?this.areaList[0].id:null},handleChange:function(){var e=this,t={areaId:this.searchParams[0],buildingId:this.searchParams[1],floorId:this.searchParams[2]};Object(o["m"])(t).then((function(t){if(0==t.code){e.dataJson=t.data;var a=t.data,i={name:"",count:0},n=[-1,1,0,3,4,-1,1,0,3,4],r=["独立空间","已租","空置","锁定","留置","工位","已租","空置","锁定","留置"];e.roomStati=n.map((function(e,t){var n=Object(s["a"])(Object(s["a"])({},i),{},{hide:-1!==r[t].indexOf("留置"),name:r[t],unit:~r[t].indexOf("空间")?"间":"个"});return a.roomSpaceGroupStatusResps.length&&a.roomSpaceGroupStatusResps.forEach((function(a){a.leaseStatus!=e&&-1!=e||(t>=5&&"0"===a.spaceSubType||t<=4&&"1"==a.spaceSubType)&&(n.count+=a.num)})),n}))}}))},cascLazyLoad:function(e,t){if(3!=e.level){var a=[],i=e.level;e&&this&&1==i?Object(o["f"])({areaId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.buildingName,e}))})).finally((function(){t(a)})):e&&this&&2==i&&Object(o["k"])({buildingId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.floorName,e.leaf=i>=1,e}))})).finally((function(){t(a)}))}else e.loading=!1}}},c=l,d=(a("c41a"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"66ab69b4",null);t["default"]=u.exports},"0677":function(e,t,a){},"0835":function(e,t,a){"use strict";a("a15b");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"component-upload-image"},[t("el-upload",{class:{hide:this.fileList.length>=this.limit},attrs:{action:e.uploadImgUrl,"list-type":"picture-card","before-upload":e.handleBeforeUpload,"file-list":e.fileList,limit:e.limit,headers:e.headers,"on-exceed":e.handleExceed,"on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"on-remove":e.handleRemove,"on-preview":e.handlePictureCardPreview,data:e.uploadParam,"show-file-list":!0,accept:"image/*",name:"file",disabled:!e.isShowTip}},[e.isShowTip?t("i",{staticClass:"el-icon-plus"}):t("span",{staticStyle:{"font-size":"14px",color:"#999"}},[e._v("暂无图片")])]),e.showTip?t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 请上传 "),e.fileSize?[e._v(" 大小不超过 "),t("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileSize)+"MB")])]:e._e(),e.fileType?[e._v(" 格式为 "),t("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileType.join("/")))])]:e._e(),e._v(" 的图片 ")],2):e._e(),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"预览",width:"800","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{staticStyle:{display:"block","max-width":"100%",margin:"0 auto"},attrs:{src:e.dialogImageUrl}})])],1)},n=[],s=(a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("d3b7"),a("5f87")),r={props:{limit:{type:Number,default:5},fileSize:{type:Number,default:2},fileType:{type:Array,default:function(){return["png","jpg","jpeg"]}},isShowTip:{type:Boolean,default:!0},fileList:{type:Array,default:function(){return[]}},busType:{type:Number,require:!0,default:10},busSubType:{type:Number,default:1024}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,hideUpload:!1,uploadImgUrl:"/prod-api/adm-service/system/file/upl",headers:{token:Object(s["d"])(),deviceId:3},uploadParam:{busSubType:this.busSubType}}},computed:{showTip:function(){return this.isShowTip&&(this.fileType||this.fileSize)}},methods:{handleRemove:function(e,t){var a=this.fileList.map((function(e){return e.name})).indexOf(e.name);a>-1&&this.fileList.splice(a,1)},handleUploadSuccess:function(e){var t={busType:this.busType,busSubType:this.busSubType,fileId:e.data.fileId,fileName:e.data.fileName,fileUrl:e.data.visitUrl,size:e.data.fileSize,fileType:e.data.suffix,createBy:e.data.createBy,name:e.data.fileId,url:"/prod-api/adm-service/system/file/image?fileId="+e.data.fileId+"&token="+Object(s["d"])()};console.log(t),this.fileList.push(t),this.loading.close()},handleBeforeUpload:function(e){var t=!1;if(this.fileType.length){var a="";e.name.lastIndexOf(".")>-1&&(a=e.name.slice(e.name.lastIndexOf(".")+1)),t=this.fileType.some((function(t){return e.type.indexOf(t)>-1||!!(a&&a.indexOf(t)>-1)}))}else t=e.type.indexOf("image")>-1;if(!t)return this.$message.error("文件格式不正确, 请上传".concat(this.fileType.join("/"),"图片格式文件!")),!1;if(this.fileSize){var i=e.size/1024/1024<this.fileSize;if(!i)return this.$message.error("上传图片大小不能超过 ".concat(this.fileSize," MB!")),!1}this.loading=this.$loading({lock:!0,text:"上传中",background:"rgba(0, 0, 0, 0.7)"})},handleExceed:function(){this.$message.error("上传文件数量不能超过 ".concat(this.limit," 个!"))},handleUploadError:function(){this.$message({type:"error",message:"上传失败"}),this.loading.close()},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},o=r,l=(a("789c"),a("2877")),c=Object(l["a"])(o,i,n,!1,null,"27ea9945",null);t["a"]=c.exports},"0a2d":function(e,t,a){},"0ac0":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"合并商办空间",visible:e.isShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[e.loading?t("div",{staticStyle:{"text-align":"center",height:"100px","line-height":"100px",color:"#409eff","font-size":"20px"}},[t("i",{staticClass:"el-icon-loading"})]):t("div",[t("el-card",[t("div",{staticClass:"el-form-item"},[t("label",[e._v("所在房间：")]),t("span",[e._v(e._s(e.form.roomName))])]),t("div",{staticClass:"el-form-item"},[t("label",[e._v("空间名称：")]),t("el-input",{attrs:{size:"mini",placeholder:"请输入合并空间名称"},model:{value:e.form.spaceName,callback:function(t){e.$set(e.form,"spaceName",t)},expression:"form.spaceName"}})],1),t("div",{staticClass:"el-form-item"},[t("label",[e._v("合并面积：")]),t("span",[e._v(e._s(e.countArea)+"㎡")])]),t("div",{staticClass:"el-form-item"},[t("label",[e._v("预租单价：")]),t("el-input",{attrs:{size:"mini",placeholder:"请输入预租单价",type:"number",min:0},model:{value:e.form.leasePrice,callback:function(t){e.$set(e.form,"leasePrice",t)},expression:"form.leasePrice"}},[t("template",{slot:"append"},[e._v("元/月")])],2)],1),t("div",{staticClass:"el-form-item"},[t("label",[e._v("空间类型：")]),t("el-select",{attrs:{size:"mini"},model:{value:e.form.spaceSubType,callback:function(t){e.$set(e.form,"spaceSubType",t)},expression:"form.spaceSubType"}},e._l(e.spaceSubTypeList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)]),t("el-card",{staticClass:"mt10"},[t("ns-table",{attrs:{data:e.enterParam.data,columns:e.columns,highlightCurrentRow:!1,isShowPagination:!1}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)])},n=[],s=a("2909"),r=(a("c740"),a("d81d"),a("b0c0"),a("a9e3"),a("9129"),a("d3b7"),a("159b"),a("cb37")),o={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},data:function(){return{isShow:!1,loading:!0,form:{},columns:[{name:"空间编码",desc:"spaceName"},{name:"空间类型",desc:"spaceSubType",filter:function(e){return["工位","独立空间"][e]}},{name:"空间面积",desc:"spaceArea"},{name:"预租单价",desc:"leasePrice"}],spaceSubTypeList:[]}},computed:{countArea:function(){if(Array.isArray(this.enterParam.data)){var e=0;return this.enterParam.data.forEach((function(t){e+=Number(t.spaceArea)})),e}return 0}},watch:{value:function(e){var t=this;this.isShow=e,e&&this.enterParam.data?(this.loading=!0,Object(r["p"])({id:this.enterParam.data[0].roomId}).then((function(e){t.form=e.data})).finally((function(){t.loading=!1})),this.getDicts({code:"area_space_sub_type"}).then((function(e){t.spaceSubTypeList=e.data.items?e.data.items.map((function(e){return e.value=e.code,e.label=e.name,e})):[]}))):(this.loading=!0,this.form={})},isShow:function(e){this.$emit("input",e)}},methods:{checkRoom:function(e){var t=e[0].roomId;return!!~e.findIndex((function(e){return e.roomId!=t}))},save:function(){var e=this,t=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refresh"),e.hide()):e.$message.error(t.msg)};if(this.checkRoom(this.enterParam.data))this.$message.error("存在不同房间内的空间数据");else{if(Number.isNaN(this.form.leasePrice))return this.$message.error("请正确填写预组单价"),!0;if(!this.form.spaceName)return this.$message.error("请填写空间名称"),!0;var a={leasePrice:Number(this.form.leasePrice),roomCode:this.form.roomCode,roomId:this.form.id,spaceArea:this.countArea,spaceName:this.form.spaceName,spaceSubType:this.form.spaceSubType};a.ids=Object(s["a"])(this.enterParam.data.map((function(e){return e.id}))),Object(r["t"])(a).then(t)}},hide:function(){this.form={},this.isShow=!1}}},l=o,c=(a("e8d0"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"65e844ec",null);t["a"]=d.exports},"0b2d":function(e,t,a){"use strict";a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("b775")},"0d11":function(e,t,a){},1028:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box-left"},[t("div",{staticClass:"box-top"},[t("label",{staticClass:"el-form-item__label",staticStyle:{width:"28%"}},[e._v("项目")]),t("el-select",{attrs:{size:"mini",placeholder:"请选择项目",clearable:""},on:{change:e.getAreaId},model:{value:e.queryParams.areaId,callback:function(t){e.$set(e.queryParams,"areaId",t)},expression:"queryParams.areaId"}},e._l(e.areaList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.areaName,value:e.areaId}})})),1)],1),t("div",{staticClass:"scroll-box-l"},[t("div",{staticClass:"treeList"},[t("div",{staticStyle:{padding:"0 10px"}},[t("el-tree",{ref:"treeRef",attrs:{lazy:"",data:e.treeOptions,props:e.defaultProps,load:e.loadTreeData,"expand-on-click-node":!1,"highlight-current":!0,"default-expand-all":!1,"default-expanded-keys":e.nodeKey,"node-key":"id"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.node;return t("div",{staticClass:"custom-tree-node"},[t("div",{staticClass:"label",class:1==i.level?"label-1":"label-2",attrs:{title:i.label}},[e._v(" "+e._s(i.label)+" ")])])}}])})],1)])])])},n=[],s=a("5530"),r=a("c7eb"),o=a("1da1"),l=(a("7db0"),a("d81d"),a("a9e3"),a("d3b7"),a("53ba")),c=a("cb37"),d={props:{level:{type:String|Number,default:3},roomParams:{type:Object,default:function(){return{}}},showArea:{type:Boolean,default:!0}},data:function(){return{treeOptions:[],defaultProps:{children:"children",label:"typeName",isLeaf:"leaf"},nodeKey:[],queryParams:{areaId:void 0,buildingId:void 0,unitId:void 0,floorId:void 0,roomName:void 0}}},mixins:[l["a"]],mounted:function(){this.areaList&&this.areaList.length>0&&(this.queryParams.areaId=this.areaList[0].areaId,this.getAreaId(this.queryParams.areaId))},methods:{getAreaId:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var i,n,s,o,l;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:if(i=t.areaList.find((function(t){return t.areaId===e})),!i){a.next=25;break}if(n={areaId:i.areaId,id:i.areaId,typeName:i.areaName,path:i.areaName},t.queryParams={areaId:i.areaId},!t.showArea){a.next=12;break}t.treeOptions=[n],t.nodeKey=[i.areaId],t.$nextTick((function(){t.$refs.treeRef.setCurrentKey(i.areaId)})),a.next=21;break;case 12:return a.next=14,Object(c["f"])({areaId:i.areaId});case 14:s=a.sent,o=s.data.items,t.treeOptions=o.map((function(e){return e.leaf=0==t.level,e.typeName=e.buildingName,e.path=e.buildingName,e})),l=o[0]?o[0]:{},t.nodeKey=[l.id],t.queryParams.buildingId=l.id||"",t.$nextTick((function(){t.$refs.treeRef.setCurrentKey(l.id)}));case 21:t.$emit("search",t.queryParams),t.$emit("areaChange",n),a.next=26;break;case 25:t.treeOptions=[];case 26:case"end":return a.stop()}}),a)})))()},loadTreeData:function(e,t){var a=this;return Object(o["a"])(Object(r["a"])().mark((function i(){var n,o,l,d,u;return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=a,!(1==e.level&&a.level>=1)){i.next=12;break}return i.next=4,Object(c["f"])({areaId:e.data.id});case 4:if(o=i.sent,0!=o.code){i.next=9;break}return i.abrupt("return",t(o.data.items.map((function(t){return t.leaf=1==a.level,n.$set(t,"typeName",t.buildingName),n.$set(t,"path",e.data.path+" / "+t.buildingName),t}))));case 9:return i.abrupt("return",t([]));case 10:i.next=43;break;case 12:if(!(2==e.level&&a.level>=2)){i.next=23;break}return i.next=15,Object(c["x"])({buildingId:e.data.id});case 15:if(l=i.sent,0!=l.code){i.next=20;break}return i.abrupt("return",t(l.data.items.map((function(t){return t.leaf=2==a.level,n.$set(t,"typeName",t.unitName),n.$set(t,"path",e.data.path+" / "+t.unitName),t}))));case 20:return i.abrupt("return",t([]));case 21:i.next=43;break;case 23:if(!(3==e.level&&a.level>=3)){i.next=34;break}return i.next=26,Object(c["k"])({unitId:e.data.id});case 26:if(d=i.sent,0!=d.code){i.next=31;break}return i.abrupt("return",t(d.data.items.map((function(t){return t.leaf=3==a.level,n.$set(t,"typeName",t.floorName),n.$set(t,"path",e.data.path+" / "+t.floorName),t}))));case 31:return i.abrupt("return",t([]));case 32:i.next=43;break;case 34:if(!(4==e.level&&a.level>=4)){i.next=43;break}return i.next=37,Object(c["s"])(Object(s["a"])(Object(s["a"])({},a.roomParams),{},{floorId:e.data.id}));case 37:if(u=i.sent,0!=u.code){i.next=42;break}return i.abrupt("return",t(u.data.items.map((function(t){return t.leaf=4==a.level,n.$set(t,"typeName",t.roomName),n.$set(t,"path",e.data.path+" / "+t.roomName),t}))));case 42:return i.abrupt("return",t([]));case 43:case"end":return i.stop()}}),i)})))()},handleNodeClick:function(e,t){this.queryParams.buildingId="",this.queryParams.unitId="",this.queryParams.floorId="",this.queryParams.roomId="",this.curNode=e,2==t.level?this.queryParams.buildingId=e.id:3==t.level?(this.queryParams.buildingId=e.buildingId,this.queryParams.unitId=e.id):4==t.level?(this.queryParams.buildingId=e.buildingId,this.queryParams.unitId=e.unitId,this.queryParams.floorId=e.id):5==t.level&&(this.queryParams.buildingId=e.buildingId,this.queryParams.unitId=e.unitId,this.queryParams.floorId=e.floorId,this.queryParams.roomId=e.id),this.$emit("node-click",e,t),this.$emit("search",this.queryParams)}}},u=d,p=(a("dbf0"),a("2877")),m=Object(p["a"])(u,i,n,!1,null,"5853a16a",null);t["a"]=m.exports},"10b7f":function(e,t,a){},"185a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})},n=[],s=a("0460"),r={name:"analysisArea",components:{List:s["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},o=r,l=a("2877"),c=Object(l["a"])(o,i,n,!1,null,null,null);t["default"]=c.exports},"18d6":function(e,t,a){},"1bb4":function(e,t,a){"use strict";a("0677")},"1ddb":function(e,t,a){"use strict";a("9b5a")},"1f7f":function(e,t,a){},2207:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"600px",title:"edit"===e.enterParam.type?"编辑楼栋单元":"新增楼栋单元",visible:e.isShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择项目",disabled:"edit"==e.enterParam.type},on:{change:e.getAreaId},model:{value:e.form.areaId,callback:function(t){e.$set(e.form,"areaId",t)},expression:"form.areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"所在楼栋:",prop:"buildingId"}},[t("el-select",{attrs:{placeholder:"请选择所在楼栋",disabled:"edit"==e.enterParam.type},model:{value:e.form.buildingId,callback:function(t){e.$set(e.form,"buildingId",t)},expression:"form.buildingId"}},e._l(e.buildingOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.buildingName,value:e.id}})})),1)],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"单元名称:",prop:"unitName"}},[t("el-input",{attrs:{maxlength:"15",placeholder:"请输入单元名称"},model:{value:e.form.unitName,callback:function(t){e.$set(e.form,"unitName",t)},expression:"form.unitName"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保 存")])],1)],1)},n=[],s=a("c7eb"),r=a("1da1"),o=(a("d3b7"),a("cb37")),l=a("53ba"),c={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},mixins:[l["a"]],data:function(){return{isShow:!1,loading:!1,buildingOption:[],form:{areaId:"",areaName:"",buildingId:"",id:void 0,unitName:"",unitCode:void 0},rules:{unitName:[{required:!0,message:"单元名称不能为空",trigger:"blur"}],areaId:[{required:!0,message:"请选择所属项目",trigger:"change"}],buildingId:[{required:!0,message:"请选择所在楼栋",trigger:"change"}]}}},watch:{value:function(e){this.isShow=e,e&&(this.getBuildingAll(this.enterParam.areaId),this.form.areaId=this.enterParam.areaId,this.form.areaName=this.enterParam.areaName,this.form.buildingId=this.enterParam.buildingId,this.form.buildingName=this.enterParam.buildingName,"edit"==this.enterParam.type&&(this.form.id=this.enterParam.unitId,this.form.unitName=this.enterParam.unitName,this.form.unitCode=this.enterParam.unitCode))},isShow:function(e){this.$emit("input",e)}},created:function(){},methods:{getBuildingAll:function(e){var t=this;return Object(r["a"])(Object(s["a"])().mark((function a(){var i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["f"])({areaId:e});case 2:i=a.sent,0==i.code&&(t.buildingOption=i.data.items);case 4:case"end":return a.stop()}}),a)})))()},getAreaId:function(e){this.form.buildingId="",this.getBuildingAll(e)},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refresh",e.form.buildingId),setTimeout((function(){e.hide()}),200)):e.$message.error(t.msg)},i=function(){e.loading=!1};"edit"===e.enterParam.type?Object(o["z"])(e.form).then(a).finally(i):Object(o["w"])(e.form).then(a).finally(i)}}))},hide:function(){this.resetForm("form"),this.form={areaId:"",buildingId:"",id:void 0,unitName:"",unitCode:void 0},this.isShow=!1}}},d=c,u=a("2877"),p=Object(u["a"])(d,i,n,!1,null,"31c809de",null);t["default"]=p.exports},2457:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("ns-drawer",{attrs:{loading:e.loading,title:"查看房源详情","top-resume":{title:e.form.roomCode,list:[{label:"所属项目",value:e.form.areaName||e.form.areaId},{label:"楼栋信息",value:e.form.buildingName+" / "+e.form.unitName+" / "+e.form.floorName}]}},on:{close:e.hide},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("房号")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.roomName)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("物业类型")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.selectDictLabel(e.propertyTypeOption,e.form.propertyType)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("物业用途")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.selectDictLabel(e.useTypeOption,e.form.useType)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("建筑面积")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.area))+" ㎡")])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("套内面积")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.usableArea))+" ㎡")])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("户型")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.houseFilter(e.form.houseType)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("户型结构")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.houseStruct)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("朝向")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.orientation)))])])])]),t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("户型图")]),t("div",{staticClass:"item-value"},[t("ImgUpload",{attrs:{fileList:e.fileList,limit:1,busSubType:1003,isShowTip:!1},on:{"update:fileList":function(t){e.fileList=t},"update:file-list":function(t){e.fileList=t}}})],1)])])])])},n=[],s=(a("7db0"),a("d81d"),a("b0c0"),a("b64b"),a("d3b7"),a("cb37")),r=a("b775"),o="/adm-service/area/parking",l={parkingList:o+"/list",parkingAdd:o+"/add",parkingDel:o+"/del",parkingEdit:o+"/edit",parkingGet:o+"/get",parkingAll:o+"/list/all",parkingByRoom:o+"/space/listByRoom"};function c(e){return Object(r["a"])({url:l.parkingByRoom,method:"post",data:e})}a("4de4"),a("4e82"),a("c7cd");var d,u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-bg"},[t("el-table",{ref:"multipleTable",attrs:{data:e.formatData,border:e.border,size:e.size,"highlight-current-row":e.highlightCurrentRow,"select-on-indeterminate":"","show-header":e.showHeader},on:{"sort-change":e.sort_change,"selection-change":e.changeFun,"select-all":e.selectAll,select:e.handleSelect,"current-change":e.handleCurrentTrChange,"row-dblclick":e.rowDblclick}},[e._l(e.columns,(function(a,i){return["selection"===a.type?t("el-table-column",{key:a.desc,attrs:{type:a.type,align:e.align,label:a.name,width:void 0===a.width?"auto":a.width,sortable:!!a.sortable&&"custom",fixed:a.fixed}}):e._e(),"expand"===a.type?t("el-table-column",{key:a.desc,attrs:{type:a.type,align:e.align,label:a.name,width:void 0===a.width?"auto":a.width,sortable:!!a.sortable&&"custom",fixed:a.fixed},scopedSlots:e._u([{key:"default",fn:function(t){return[a.slotName?e._t(a.slotName,null,{scope:t}):e._e()]}}],null,!0)}):e._e(),a.type?e._e():t("el-table-column",{key:e.sort&&a.desc?a.desc+i:a.desc,attrs:{prop:a.desc,label:a.name,align:e.align,width:void 0===a.width?"auto":a.width,sortable:!!a.sortable&&"custom",fixed:a.fixed,"show-overflow-tooltip":!1!==a.tooltip},scopedSlots:e._u([{key:"default",fn:function(i){return[a.slotName?e._t(a.slotName,null,{scope:i}):t("div",[void 0!=a.templet&&"function"===typeof a.templet&&a.templet(i.row)?t("div",{style:"text-align:right;text-decoration: underline;color:#ccc;"+a.style},[e._v(" "+e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc])+" ")]):void 0==a.templet||"function"!==typeof a.templet||a.templet(i.row)?a.click?t("div",{style:"color:#409EFF;text-align:right;text-decoration: underline;"+a.style,on:{click:function(t){return e.btnClickfunc(a,i.row,a.desc)}}},[e._v(" "+e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))]):a.edit?t("div",{staticClass:"elinput",style:a.style},["input"===a.editType&&"number"===a.inputType?t("n-input",{attrs:{size:"small",placeholder:"",disabled:"function"===typeof a.disabFilter?a.disabFilter(i.row):a.disabled,maxlength:a.maxlength,min:a.min,max:a.max,type:a.inputType},on:{change:function(t){return e.editInput(i.row,a.editType)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,e._n(t))},expression:"scope.row[column.desc]"}}):e._e(),"input"===a.editType?t("el-input",{attrs:{size:"small",placeholder:"",disabled:"function"===typeof a.disabFilter?a.disabFilter(i.row):a.disabled,maxlength:a.maxlength,type:a.inputType},on:{change:function(t){return e.editInput(i.row,a.editType)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):e._e(),"select"===a.editType?t("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:function(t){return e.editInput(i.row,a.editType)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}},e._l(a.editSelOptions,(function(e){return t("el-option",{key:a.value?e[a.value]:e.value,attrs:{label:a.label?e[a.label]:e.label,value:a.value?e[a.value]:e.value,disabled:"function"===typeof a.disabFilter?a.disabFilter(e):e.disabled}})})),1):e._e()],1):a.btns?t("div",{style:"text-align:center;"+a.style},e._l(a.btns,(function(a,n){return t("el-button",{key:n,class:a.btnClass,attrs:{size:"small",type:a.btnType},on:{click:function(t){return e.handleBtnClick(a.clickType,i.row)}}},[e._v(e._s(a.name))])})),1):a.filter&&"function"===typeof a.filter?t("div",[e._v(" "+e._s(a.desc.split(",").length>1?a.filter(a.desc.split(","),i.row):a.filter(i.row[a.desc]))+" ")]):t("div",{class:a.tooltip?"btable-tooltip":"",style:a.style},[e._v(" "+e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc])+" ")]):t("div",{style:"color:#409EFF;text-align:right;text-decoration: underline;"+a.style,on:{click:function(t){return e.btnClickfunc(a,i.row,a.desc)}}},[e._v(" "+e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc])+" ")])])]}}],null,!0)})]}))],2),e.isShowPagination?t("div",{staticClass:"table-page"},[t("el-pagination",{attrs:{"current-page":e.value,"page-size":e.limit,"page-sizes":e.pageSizes,layout:"total,sizes,slot,prev",total:e.total},on:{"update:pageSize":function(t){e.limit=t},"update:page-size":function(t){e.limit=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("el-button",{staticClass:"my-btn",attrs:{disabled:e.firstPageBtnDisabled,type:"button"},on:{click:e.jumpFirstPage}},[e._v("首页")])],1),t("el-pagination",{attrs:{"current-page":e.value,"page-size":e.limit,"page-sizes":e.pageSizes,layout:"pager,next,slot,jumper",total:e.total},on:{"update:pageSize":function(t){e.limit=t},"update:page-size":function(t){e.limit=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("el-button",{staticClass:"my-btn",staticStyle:{margin:"0px 5px"},attrs:{disabled:e.lastPageBtnDisabled,type:"button"},on:{click:e.jumpLastPage}},[e._v("尾页")])],1)],1):e._e()],1)},p=[],m=(a("a9e3"),a("159b"),a("ed08")),f=function(){var e=this,t=e._self._c;return t("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?t("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?t("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?t("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?t("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?t("span",{staticClass:"el-input__suffix"},[t("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?t("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?t("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?t("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?t("span",{staticClass:"el-input__count"},[t("span",{staticClass:"el-input__count-inner"},[e._v(" "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+" ")])]):e._e()],2),e.validateState?t("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?t("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:t("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?t("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},h=[],b=(a("99af"),a("fb6a"),a("b680"),a("f6f4")),g=a("6725"),v=(a("a15b"),"\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n"),y=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function w(e){var t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),i=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),n=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),s=y.map((function(e){return"".concat(e,":").concat(t.getPropertyValue(e))})).join(";");return{contextStyle:s,paddingSize:i,borderSize:n,boxSizing:a}}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d||(d=document.createElement("textarea"),document.body.appendChild(d));var i=w(e),n=i.paddingSize,s=i.borderSize,r=i.boxSizing,o=i.contextStyle;d.setAttribute("style","".concat(o,";").concat(v)),d.value=e.value||e.placeholder||"";var l=d.scrollHeight,c={};"border-box"===r?l+=s:"content-box"===r&&(l-=n),d.value="";var u=d.scrollHeight-n;if(null!==t){var p=u*t;"border-box"===r&&(p=p+n+s),l=Math.max(p,l),c.minHeight="".concat(p,"px")}if(null!==a){var m=u*a;"border-box"===r&&(m=m+n+s),l=Math.min(m,l)}return c.height="".concat(l,"px"),d.parentNode&&d.parentNode.removeChild(d),d=null,c}var S=a("eab7"),x=a("a3ce"),C={name:"NInput",componentName:"NInput",mixins:[b["a"],g["a"]],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"number"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String,max:{type:Number,default:1/0},min:{type:Number,default:-1/0},toFixed:{type:Number,default:2}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return Object(S["a"])({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e),a=String(t),i=a.indexOf(".");~i&&a.length>i+this.toFixed&&(t=Number(a).toFixed(this.toFixed)),t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.$emit("input",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])}},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var a=e.minRows,i=e.maxRows;this.textareaCalcStyle=_(this.$refs.textarea,a,i)}else this.textareaCalcStyle={minHeight:_(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(e){this.$emit("compositionstart",e),this.isComposing=!0},handleCompositionUpdate:function(e){this.$emit("compositionupdate",e);var t=e.target.value,a=t[t.length-1]||"";this.isComposing=!Object(x["a"])(a)},handleCompositionEnd:function(e){this.$emit("compositionend",e),this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__".concat(e))||[]);if(t.length){for(var a=null,i=0;i<t.length;i++)if(t[i].parentNode===this.$el){a=t[i];break}if(a){var n={suffix:"append",prefix:"prepend"},s=n[e];this.$slots[s]?a.style.transform="translateX(".concat("suffix"===e?"-":"").concat(this.$el.querySelector(".el-input-group__".concat(s)).offsetWidth,"px)"):a.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},I=C,D=a("2877"),k=Object(D["a"])(I,f,h,!1,null,null,null),P=k.exports,O={name:"Xmtz",components:{nInput:P},props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},border:{type:Boolean,default:!1},isShowPagination:{type:Boolean,default:!0},total:{type:Number,default:0},pageSize:{type:Number,default:10},align:{type:String,default:"center"},size:{type:String,default:""},value:{type:Number,default:1},height:{type:String,default:"500"},highlightCurrentRow:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},sort:{type:Boolean,default:!1},pageSizes:{type:Array,default:function(){return[10,20,30,50,100]}}},data:function(){return{multipleSelection:[],isUpdateSelection:!0,firstPageBtnDisabled:!0,lastPageBtnDisabled:!1}},computed:{formatData:function(){return this.data},limit:{get:function(){return this.pageSize},set:function(e){this.$emit("update:page-size",e)}}},methods:{handleCurrentTrChange:function(e){this.$emit("current-change",e)},rowDblclick:function(e){this.$emit("row-dblclick",e)},fmtMoney:function(e){return Object(m["a"])(e)},sort_change:function(e){this.formatData.sort(Object(m["f"])(e.prop,"",e.order))},handleCurrentChange:function(e){var t=Math.ceil(this.total/this.pageSize);this.firstPageBtnDisabled=1===e,this.lastPageBtnDisabled=e===t,this.isUpdateSelection=!1,this.$emit("input",e),this.$emit("searchList",e),this.updateSeletion()},handleSizeChange:function(e){this.isUpdateSelection=!1,this.limit=e,this.updateSeletion(),this.$emit("searchList",e)},btnClickfunc:function(e,t,a){this.$emit("btnClickFunc",{column:e,row:t,type:a})},handleBtnClick:function(e,t){this.$emit("handleBtnClick",{clickType:e,row:t})},changeFun:function(e){this.isUpdateSelection?this.multipleSelection=e:this.isUpdateSelection=!0,this.$emit("printData",this.multipleSelection)},handleSelect:function(e){this.$emit("printData",e)},clearSelection:function(){this.$refs.multipleTable.clearSelection()},toggleSelection:function(e){var t=this;this.$nextTick((function(){e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)})):t.$refs.multipleTable.clearSelection()}))},selectAll:function(e){this.$emit("printData",e)},editInput:function(e,t){this.$emit("editInput",e,t),this.$refs.multipleTable.toggleRowSelection(e,!0)},updateSeletion:function(){var e=this,t=this;this.$nextTick((function(){t.data.forEach((function(a){e.multipleSelection.indexOf(a)>=0&&(t.isUpdateSelection=!1,t.$refs.multipleTable.toggleRowSelection(a,!0))})),t.isUpdateSelection=!0}))},jumpFirstPage:function(){this.handleCurrentChange(1)},jumpLastPage:function(){var e=Math.ceil(this.total/this.pageSize);e=e>0?e:1,this.handleCurrentChange(e)}}},N=O,T=(a("be56"),a("3580"),Object(D["a"])(N,u,p,!1,null,"637064ee",null)),z=T.exports,L=a("5f87"),$=a("0835"),j={components:{eTables:z,ImgUpload:$["a"]},props:{value:{type:Boolean,required:!0},rowId:{type:String,required:!0,default:function(){return""}}},filters:{findForCodeFilter:function(e,t){var a=t.find((function(t){return t.value==e}));return a?a.label:"--"}},data:function(){return{useTypeOption:[],propertyTypeOption:[],rightTypeOption:[],loading:!1,isShow:!1,form:{},cusUser:{},shapeList:[],rightList:[],areaSpaceList:[],columns:[{name:"车位号",desc:"num"},{name:"车场名称",desc:"parkingName"},{name:"车场分区",desc:"zoneName"}],carList:[],fileList:[]}},watch:{value:function(e){this.isShow=e,e&&(this.getDetail(),this.getParkingByRoom(this.rowId))},isShow:function(e){this.$emit("input",e)}},created:function(){var e=this;this.getDicts({code:"property_type"}).then((function(t){0==t.code&&(e.propertyTypeOption=t.data.items||[])})),this.getDicts({code:"property_usage"}).then((function(t){0==t.code&&(e.useTypeOption=t.data.items||[])})),this.getDicts({code:"property_right_type"}).then((function(t){0==t.code&&(e.rightTypeOption=t.data.items||[])})),this.getDicts({code:"area_space_truct"}).then((function(t){0==t.code&&(e.areaSpaceList=t.data.items.map((function(e){return{name:e.name,level:e.code}})))}))},methods:{hide:function(){this.isShow=!1},getDetail:function(){var e=this;this.loading=!0,Object(s["p"])({id:this.rowId}).then((function(t){e.loading=!1,0===t.code?(e.form=t.data,e.fileList=t.data.attachmentListItems.map((function(e){return{fileId:e.fileId,url:"/prod-api/adm-service/system/file/image?fileId="+e.fileId+"&token="+Object(L["d"])()}})),e.form.propRightPersons&&(e.cusUser=JSON.parse(e.form.propRightPersons))):e.$message.error(t.msg)})).catch((function(t){e.loading=!1,console.log(t)}))},getParkingByRoom:function(e){var t=this;c({roomId:e}).then((function(e){0==e.code&&(t.carList=e.data||[])}))},houseFilter:function(e){if(e)return this.areaSpaceList[e].name}}},q=j,A=Object(D["a"])(q,i,n,!1,null,null,null);t["default"]=A.exports},"252d":function(e,t,a){},"25c3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("ns-searchBar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-card",{staticStyle:{"margin-top":"-12px"},attrs:{shadow:"never","body-style":{paddingTop:"0 !important"}}},[t("div",{staticClass:"tag-row"},[t("div",{staticClass:"tag-left"},e._l(e.tagOptions,(function(e,a){return t("Tag",{key:a,attrs:{value:e.value,iconOption:e.iconOption}})})),1),t("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.refresh}},[e._v("刷新")])],1),t("div",{staticClass:"room-box"},e._l(e.spaceData,(function(a,i){return t("el-row",{key:i,style:{marginTop:i?"20px":"",paddingTop:"20px",borderTop:"1px solid #e7e7e7"},attrs:{gutter:30}},[t("el-col",{attrs:{span:3}},[t("div",{staticClass:"floor-box"},[t("div",[t("h2",{staticClass:"building"},[e._v(e._s(a[0].floor))])])])]),t("el-col",{attrs:{span:21}},[t("el-row",{staticClass:"rowCard",attrs:{gutter:20}},e._l(a,(function(a,i){return t("el-col",{key:i,staticClass:"colCard",class:i>3?"mt20":"",attrs:{span:6}},[t("div",{on:{click:function(t){return e.openRoom(a)}}},[t("RoomCard",{attrs:{tagOption:{color:e.tagMap[a.tagOption.color]?e.tagMap[a.tagOption.color].iconOption:{},statusTag:e.tagMap[a.tagOption.statusTag],typeTag:e.tagMap[a.tagOption.typeTag]},data:a}})],1)])})),1)],1)],1)})),1),t("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{"page-sizes":[5,10,20,30,50,100],"page-size":e.queryParams.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper","current-page":e.queryParams.pageNum},on:{"current-change":e.handleQuery,"size-change":e.handleSizeChange,"update:currentPage":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:current-page":function(t){return e.$set(e.queryParams,"pageNum",t)}}})],1),t("viewDialog",{attrs:{rowId:e.currentId},model:{value:e.vdShow,callback:function(t){e.vdShow=t},expression:"vdShow"}}),t("spaceDialog",{attrs:{rowId:e.currentId},model:{value:e.vdShow2,callback:function(t){e.vdShow2=t},expression:"vdShow2"}})],1)},n=[],s=(a("a9e3"),a("d3b7"),a("159b"),a("f875")),r=a("ac51"),o=a("cd6a"),l=a("fa2e"),c=(a("c1df"),{props:{tagOptions:{type:Array},spaceData:{type:Array},colModel:{type:Array},total:{type:Number}},components:{Tag:l["default"],RoomCard:s["default"],viewDialog:r["default"],spaceDialog:o["default"]},computed:{tagMap:function(){var e={};return this.tagOptions.forEach((function(t,a){e[t.key]=t})),e}},data:function(){return{queryParams:{pageNum:1,pageSize:10},vdShow:!1,vdShow2:!1,currentId:null}},methods:{openRoom:function(e){console.log("openRoom",e),this.currentId=e.id,2==e.useType?this.vdShow=!0:1==e.useType&&(this.vdShow2=!0)},clearSearch:function(){this.queryParams={pageNum:1,pageSize:10},console.log(this.queryParams,"queryParams==="),this.$forceUpdate()},handleRefresh:function(){this.handleQuery()},handleQuery:function(){this.$emit("search",this.queryParams)},refresh:function(){this.queryParams.pageNum=1,this.handleQuery()},handleSizeChange:function(e){this.queryParams.pageSize=e,this.handleQuery()}}}),d=c,u=(a("cf92"),a("2877")),p=Object(u["a"])(d,i,n,!1,null,"6e272622",null);t["default"]=p.exports},"26fc":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAACKCAMAAABhAnODAAABzlBMVEUAAAD8/f/////////////3+v7////4+/7////////9///3+v7////////////4+v7+///////6/P/+/v/+/v/////5+/7////3+f72+v7y9/7+///7/f/////////////3+v76/P/7/f/4/P/9///////o8vz3+/73+f73+v7////4+/7////////3+//3+/7////+/v/////+/v/////o8fz9/v/p8f3o8fz3+/7////r8/33+v74+v72+v70+P7////+///3+v72+v7t9P3w9v3x9/7////+///7/f/////////////////3+v7p8v3////p8vv4+//////5+//r8/z4+//p8vz////6/P/4+v/////5/P7////8/P7////6/P/2+//8/f/////8///8///////n8fz2+v7////p8vz2+f73+v7////u9f7r9P3z+P32+f7////2+f73+v3////////2+v3////4+//t9P31+v78/P/4+//4+/7t9P35+//////////o8fz////0+P7o8fzo8fzo8Pv////z9/3o8f3z9//////w9/7w9/73+v/////p8v35/P7o8f3o8P3////n8Pv2+f3z+P4909UsAAAAlnRSTlMA/fumA/3h+PTlC/sG/vrz29a8NRLv7+fmzMJOLBj26cS+VB8O/fvp39TNwsG/u6CagmdbQP759O7s3dzZ0tDLysjIwcG/u6h1OiEB8evi4t/X1tHQ0M3GxcS4r5WNiX17c0UpJBsJ+O7t6OTc2MzKvra1raeflpBtbVtNLxX01tLDura0tKqai4WCbWZhSz4yFu/jfHnJ+3wGAAAFOElEQVR42u3cB1MTQRjG8TXehZBC6CQhkEBCbyJdelVUQDoCKiBFQJqCgoC99/qyfFshCId4yS2X3cs6k98n+E9y7HMz2QGxNpV+M8+aXTg6nuw0Ik5Mt4/fn8fH2PKKxh7FxaNQmiwZtZuwvDv21TEn0p53YmylCgfS1wuRHqQlwfmxKEfEAT2+roc9MZp9o982iwutWIkt7yocGJpGzJnjNlazMYHaxgw4MiIgljzpD90RmESEewH+cg6x4t0omseEstJccNItxMh9jEVbrbu5uakmEQfUc70cZJxHTIzjYxJrmpoLm+2dMl+ryZ0L8nTJiIF22QPU1GlPGy7Me5olHh6nsXrwK7UdUbc9r/BQ5eQNDxe6065CIB23EWVCISZg0oMCfQqi6z0mMQCKer2IpgkRE8gBAgVmRM9UFSZg7QASF6/Q26AmTKIPZDE8aB9iEnYgdBZRko5J2Axah01aMQExBjQOm67FJK6D1mFFmESNTuuwj2QvX9dA47CtCMIvUuuwomyR6KTQPGynrLrl1XBt4M8tyxWCsAOVS21t9jvYj0YIRZgks7qlzd2J/5EHIQyTVC62NvdEYEm2gY8wn8wnDkddoq/L1AschR2YW3TU22KBvzCfcl7DzoTDwmHhsHBYOCwc9r+GpUYeOitwFXbMOV7DoJjXMDjPa1hGOqdhUF7KaRgkbHEaBkmXOQ2D6G1Ow6DByGkYPOc1TBcOC4eFwwi1L1VwGDb9KRdA97S1f4arsMkbs0fvwgOt3Zl8hAmb9yzwl4Sm1u6yUIfFX7oAclzuluoQhn1dSwX/9I6WrlCEmUsaQVH0csuctmGedy4gk9HTNlipVdjEiA5OI6qvbbCCeZh3fQFUMKxYmIY5HxhAjegGAHZhQnoBqKIfsgC7sJRbkaBK0jMd0OJCJ5VejAJVEvJTgRbDO+/JT6tID6oYCq4CLVGj39BJq1gciD19W1R+B9CiW/Ogf3zG+8S607VlDEUCNSNyN92MR5dZxb7Ya0Co4QJQ8zwOybmJjxHriNpyF4CaxlIka8uET8iJVfg0YnqBmphkJE9owhKFNumYp+VCiYD82MB+9MRGgwx9owVoSVo3I3+mrNi/mrSTba4hHdCSMGYMfD9ZIt/G6Ji/GY8CSMbK7v5pM+RTPOYfpKBAjJ3Yh6At6lkH0JKxdlnxOiQpUxJQM+JECuJMmNQPoKUgDikRBjApK1DSMEF0M5/YLFARk44IeKyYVBbQoP8kIBKvMLFyCJ5r3Ux6EVjLDyzhlhGR8drIjwoIVqp0zCsaxcQSgz7mpxCxdlGrLsvZSUROqNXgyZfOU3KXMLEqCu+n5FaqMCHRAqolnRfQKe3MLC3bGD9hhmKjut8fy/qXs7GSCFBJdy4lmJ+Su1vvsgl7eTvoWwHVjhzqbxW5pXQueMw56kQsKwNUuFZyhd6VmO+OOhOdJ3/2kpny7aaKRXtE0EdF1I14Jpe6++utwTz5louXmd0HK3tSn6i2qyCO8UW16nrfMJxRMT+MwiRd9bbHKuaHYZhk97Tzw1+Yb344DNufHw7D9ueHwzD93vxwGJawPz/8hfnmh78w3/xwGJbvmx/uwg7nh7MwaX64CpPmh4EKFWHS/DBkfPQiU1XYPSdiLf7DYBlxmDQ/mvD86icLk+ZHM863XYph0vxo6sqXN5UKYdL8aMz8+XWFTJja+WH9Z7pLNj/sbX8YlAnzzU/IeX52Hws7mh8ufH3bdSzMUMzN/85DSPjzZ7rrmx++mDdfz+zs7s0Ph7yO9yjsyG/PhVsZ2R0KAAAAAABJRU5ErkJggg=="},"297d":function(e,t,a){"use strict";a("d252")},"2a13":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("keep-alive",{attrs:{include:"List"}},[t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})],1)},n=[],s=a("9ea3"),r={name:"AdmAreaBuilding",components:{List:s["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},o=r,l=a("2877"),c=Object(l["a"])(o,i,n,!1,null,null,null);t["default"]=c.exports},"300b":function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"800px",top:"20px !important",title:"edit"===e.enterParam.type?"编辑房源":"新增房源",visible:e.isShow,id:"size","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目",disabled:"edit"==e.enterParam.type},on:{change:e.getAreaId},model:{value:e.formData.areaId,callback:function(t){e.$set(e.formData,"areaId",t)},expression:"formData.areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"楼栋信息:",prop:"floorId"}},[e.isShow?t("el-cascader",{ref:"cascader",staticStyle:{width:"100%"},attrs:{props:e.buildingProps,disabled:"edit"==e.enterParam.type},on:{change:e.handleChange},model:{value:e.buildingPath,callback:function(t){e.buildingPath=t},expression:"buildingPath"}}):e._e()],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"房号:",prop:"roomName"}},[t("el-input",{attrs:{placeholder:"请输入房号"},model:{value:e.formData.roomName,callback:function(t){e.$set(e.formData,"roomName",t)},expression:"formData.roomName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"物业类型:",prop:"propertyType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择物业类型"},model:{value:e.formData.propertyType,callback:function(t){e.$set(e.formData,"propertyType",t)},expression:"formData.propertyType"}},e._l(e.propertyTypeOption,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"预租价格:",prop:"rentPrice"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入预租价格"},model:{value:e.formData.rentPrice,callback:function(t){e.$set(e.formData,"rentPrice",t)},expression:"formData.rentPrice"}},[t("template",{slot:"append"},[e._v("元/月")])],2)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"物业用途:",prop:"useType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择物业用途"},model:{value:e.formData.useType,callback:function(t){e.$set(e.formData,"useType",t)},expression:"formData.useType"}},e._l(e.useTypeOption,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"建筑面积:",prop:"area"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入建筑面积"},model:{value:e.formData.area,callback:function(t){e.$set(e.formData,"area",t)},expression:"formData.area"}},[t("template",{slot:"append"},[e._v("㎡")])],2)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"套内面积:",prop:"usableArea"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入套内面积"},model:{value:e.formData.usableArea,callback:function(t){e.$set(e.formData,"usableArea",t)},expression:"formData.usableArea"}},[t("template",{slot:"append"},[e._v("㎡")])],2)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"户型结构:",prop:"houseStruct"}},[t("el-input",{attrs:{placeholder:"请输入户型结构"},on:{change:e.change},model:{value:e.formData.houseStruct,callback:function(t){e.$set(e.formData,"houseStruct",t)},expression:"formData.houseStruct"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"户型:",prop:"houseType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择户型"},model:{value:e.formData.houseType,callback:function(t){e.$set(e.formData,"houseType",t)},expression:"formData.houseType"}},e._l(e.spaceStructList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"朝向:",prop:"orientation"}},[t("el-input",{attrs:{placeholder:"请输入朝向"},on:{change:e.change},model:{value:e.formData.orientation,callback:function(t){e.$set(e.formData,"orientation",t)},expression:"formData.orientation"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"户型图:"}},[t("ImgUpload",{attrs:{fileList:e.fileList2,limit:1,busSubType:1005},on:{"update:fileList":function(t){e.fileList2=t},"update:file-list":function(t){e.fileList2=t}}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保 存")])],1),t("select-user-dialog",{attrs:{enterParam:e.params},on:{getData:e.getUserData},model:{value:e.userShow,callback:function(t){e.userShow=t},expression:"userShow"}})],1)},n=[],s=a("2909"),r=a("c7eb"),o=a("1da1"),l=(a("d81d"),a("e9c4"),a("b64b"),a("d3b7"),a("159b"),a("cb37")),c=a("0835"),d=a("5f87"),u=a("53ba"),p=a("928e"),m={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},mixins:[u["a"]],components:{ImgUpload:c["a"],SelectUserDialog:p["default"]},data:function(){var e=this;return{isShow:!1,loading:!1,useTypeOption:[],propertyTypeOption:[],rightTypeOption:[],spaceStructList:[],formData:{areaId:"",buildingId:"",unitId:"",floorId:"",propertyType:"",useType:"",roomName:"",area:"",rentPrice:"",usableArea:"",enterStatus:0,isBillingMain:"0",hasPropRight:"1"},cusUser:{},rules:{areaId:[{required:!0,message:"请选择所属项目",trigger:"change"}],floorId:[{required:!0,validator:function(t,a,i){0==e.buildingPath.length?i(new Error("请选择楼栋!")):i()},trigger:"change"}],roomName:[{required:!0,message:"房号不能为空",trigger:"blur"}],propertyType:[{required:!0,message:"请选择物业类型",trigger:"change"}],area:[{required:!0,message:"建筑面积不能为空",trigger:"blur"}],rentPrice:[{required:!0,message:"预租价格不能为空",trigger:"blur"}]},fileList1:[],fileList2:[],buildingPath:[],buildingProps:{lazy:!0,lazyLoad:this.lazyLoad},userShow:!1,params:{}}},watch:{value:function(e){var t=this;if(this.isShow=e,e)if("edit"==this.enterParam.type)this.getRoomDetail(this.enterParam.roomId);else{var a=this.enterParam;this.formData.areaId=a.areaId,this.formData.floorId=a.floorId,this.formData.buildingId=a.buildingId,this.formData.unitId=a.unitId,setTimeout((function(){t.$refs.cascader.panel.lazyLoad(),a.buildingId&&t.buildingPath.push(a.buildingId),a.unitId&&t.buildingPath.push(a.unitId),a.floorId&&t.buildingPath.push(a.floorId)}),1e3)}},isShow:function(e){this.$emit("input",e)}},created:function(){var e=this;this.getDicts({code:"area_space_truct"}).then((function(t){0==t.code&&(e.spaceStructList=t.data.items||[])})),this.getDicts({code:"property_type"}).then((function(t){0==t.code&&(e.propertyTypeOption=t.data.items||[])})),this.getDicts({code:"property_usage"}).then((function(t){0==t.code&&(e.useTypeOption=t.data.items||[])})),this.getDicts({code:"property_right_type"}).then((function(t){0==t.code&&(e.rightTypeOption=t.data.items||[])}))},methods:{lazyLoad:function(e,t){var a=e.level;if(0===a&&this.formData.areaId)Object(l["f"])({areaId:this.formData.areaId}).then((function(e){0==e.code?t(e.data.items.map((function(e){return{value:e.id,label:e.buildingName,leaf:a>=2}}))):t()}));else if(1===a){var i=e.data.value;if(!i)return t();Object(l["x"])({buildingId:i}).then((function(e){0==e.code?t(e.data.items.map((function(e){return{value:e.id,label:e.unitName,leaf:a>=2}}))):t()}))}else if(2===a){var n=e.data.value;if(!n)return t();Object(l["k"])({unitId:n}).then((function(e){0==e.code?t(e.data.items.map((function(e){return{value:e.id,label:e.floorName,leaf:a>=2}}))):t()}))}else t()},getRoomDetail:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var i;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["p"])({id:e});case 2:i=a.sent,0==i.code&&(t.formData=i.data,t.formData.propRightPersons&&(t.cusUser=JSON.parse(t.formData.propRightPersons)),t.$nextTick((function(){t.$refs.cascader.panel.lazyLoad(),t.formData.buildingId&&t.buildingPath.push(t.formData.buildingId),t.formData.unitId&&t.buildingPath.push(t.formData.unitId),t.formData.floorId&&t.buildingPath.push(t.formData.floorId)})),t.fileList1=[],t.fileList2=[],i.data.attachmentListItems&&i.data.attachmentListItems.length>0&&i.data.attachmentListItems.forEach((function(e){if(1004==e.busSubType){var a={fileId:e.fileId,url:"/prod-api/adm-service/system/file/image?fileId="+e.fileId+"&token="+Object(d["d"])()};t.fileList1.push(a)}else if(1005==e.busSubType){var i={fileId:e.fileId,url:"/prod-api/adm-service/system/file/image?fileId="+e.fileId+"&token="+Object(d["d"])()};t.fileList2.push(i)}})));case 4:case"end":return a.stop()}}),a)})))()},getAreaId:function(e){this.buildingPath=[],this.formData.floorId="",this.formData.buildingId="",this.formData.unitId="",this.$refs.cascader.panel.lazyLoad()},handleChange:function(e){console.log(e),console.log(this.$refs.cascader.getCheckedNodes()),this.formData.buildingId=e[0],this.formData.unitId=e[1],this.formData.floorId=e[2]},change:function(){this.$forceUpdate()},save:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(t){e.loading=!0;var a=function(t){e.loading=!1,0===t.code?(e.$message.success("保存成功"),e.$emit("refresh"),setTimeout((function(){e.hide()}),200),e.$refs["ruleForm"].resetFields()):e.$message.error(t.msg)};if(e.formData.files=[],e.fileList1.length>0){var i,n=e.fileList1.map((function(e){return e.fileId}));(i=e.formData.files).push.apply(i,Object(s["a"])(n))}if(e.fileList2.length>0){var r,o=e.fileList2.map((function(e){return e.fileId}));(r=e.formData.files).push.apply(r,Object(s["a"])(o))}e.cusUser&&e.cusUser.cusId&&(e.formData.propRightPersons=JSON.stringify(e.cusUser)),e.formData.splitStatus=1,"edit"===e.enterParam.type?Object(l["q"])(e.formData).then(a).catch((function(t){e.loading=!1})):Object(l["n"])(e.formData).then(a).catch((function(t){e.loading=!1}))}}))},hide:function(){this.isShow=!1,this.resetForm("ruleForm"),this.cusUser={},this.buildingPath=[],this.fileList1=[],this.fileList2=[]},handleSelectUser:function(){this.userShow=!0;var e=this.cusUser&&this.cusUser.cusId?this.cusUser.cusId:"";this.params={areaId:this.formData.areaId,cusId:e}},getUserData:function(e){this.cusUser=JSON.parse(e)}}},f=m,h=a("2877"),b=Object(h["a"])(f,i,n,!1,null,"9fbdf5b8",null);t["default"]=b.exports},"323a":function(e,t,a){},3580:function(e,t,a){"use strict";a("cf65")},"3e20":function(e,t,a){},"447e":function(e,t,a){},4769:function(e,t,a){"use strict";a("74cd")},"4b3b":function(e,t,a){var i={"./404":"8cdb","./404.vue":"8cdb","./biz/adm/area/apartment/space":"f77c","./biz/adm/area/apartment/space/":"f77c","./biz/adm/area/apartment/space/components/editDialog":"fd08","./biz/adm/area/apartment/space/components/editDialog.vue":"fd08","./biz/adm/area/apartment/space/components/viewDialog":"cd6a","./biz/adm/area/apartment/space/components/viewDialog.vue":"cd6a","./biz/adm/area/apartment/space/index":"f77c","./biz/adm/area/apartment/space/index.vue":"f77c","./biz/adm/area/building":"2a13","./biz/adm/area/building/":"2a13","./biz/adm/area/building/components/buildingDialog":"03c2","./biz/adm/area/building/components/buildingDialog.vue":"03c2","./biz/adm/area/building/components/editDialog":"2207","./biz/adm/area/building/components/editDialog.vue":"2207","./biz/adm/area/building/components/floorDialog":"5872","./biz/adm/area/building/components/floorDialog.vue":"5872","./biz/adm/area/building/components/importDialog":"7c76","./biz/adm/area/building/components/importDialog.vue":"7c76","./biz/adm/area/building/components/viewDialog":"bdcf","./biz/adm/area/building/components/viewDialog.vue":"bdcf","./biz/adm/area/building/index":"2a13","./biz/adm/area/building/index.vue":"2a13","./biz/adm/area/building/list":"9ea3","./biz/adm/area/building/list.vue":"9ea3","./biz/adm/area/control":"185a","./biz/adm/area/control/":"185a","./biz/adm/area/control/index":"185a","./biz/adm/area/control/index.vue":"185a","./biz/adm/area/control/list":"0460","./biz/adm/area/control/list.vue":"0460","./biz/adm/area/houses":"acce","./biz/adm/area/houses/":"acce","./biz/adm/area/houses/components/editDialog":"300b","./biz/adm/area/houses/components/editDialog.vue":"300b","./biz/adm/area/houses/components/importDialog":"f547","./biz/adm/area/houses/components/importDialog.vue":"f547","./biz/adm/area/houses/components/selectUserDialog":"928e","./biz/adm/area/houses/components/selectUserDialog.vue":"928e","./biz/adm/area/houses/components/viewDialog":"2457","./biz/adm/area/houses/components/viewDialog.vue":"2457","./biz/adm/area/houses/index":"acce","./biz/adm/area/houses/index.vue":"acce","./biz/adm/area/houses/list":"aadb","./biz/adm/area/houses/list.vue":"aadb","./biz/adm/area/ient/space":"f092","./biz/adm/area/ient/space/":"f092","./biz/adm/area/ient/space/components/viewDialog":"ac51","./biz/adm/area/ient/space/components/viewDialog.vue":"ac51","./biz/adm/area/ient/space/index":"f092","./biz/adm/area/ient/space/index.vue":"f092","./biz/adm/area/rent/apart":"c048","./biz/adm/area/rent/apart/":"c048","./biz/adm/area/rent/apart/index":"c048","./biz/adm/area/rent/apart/index.vue":"c048","./biz/adm/area/rent/components/RentView":"ea27","./biz/adm/area/rent/components/RentView/":"ea27","./biz/adm/area/rent/components/RentView/index":"ea27","./biz/adm/area/rent/components/RentView/index.vue":"ea27","./biz/adm/area/rent/components/RentView/index2":"25c3","./biz/adm/area/rent/components/RentView/index2.vue":"25c3","./biz/adm/area/rent/components/RoomCard":"f875","./biz/adm/area/rent/components/RoomCard/":"f875","./biz/adm/area/rent/components/RoomCard/index":"f875","./biz/adm/area/rent/components/RoomCard/index.vue":"f875","./biz/adm/area/rent/components/RoomStati":"d9c0","./biz/adm/area/rent/components/RoomStati/":"d9c0","./biz/adm/area/rent/components/RoomStati/index":"d9c0","./biz/adm/area/rent/components/RoomStati/index.vue":"d9c0","./biz/adm/area/rent/components/Tag":"fa2e","./biz/adm/area/rent/components/Tag/":"fa2e","./biz/adm/area/rent/components/Tag/index":"fa2e","./biz/adm/area/rent/components/Tag/index.vue":"fa2e","./biz/adm/area/rent/incub":"ca2f","./biz/adm/area/rent/incub/":"ca2f","./biz/adm/area/rent/incub/index":"ca2f","./biz/adm/area/rent/incub/index.vue":"ca2f","./redirect":"ef3c","./redirect/":"ef3c","./redirect/index":"ef3c","./redirect/index.vue":"ef3c"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=s,e.exports=n,n.id="4b3b"},"53ba":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("c7eb"),n=a("1da1"),s=(a("e9c4"),a("b64b"),a("cb37")),r=a("5f87"),o={data:function(){return{areaList:[],buildingList:[],floorList:[],roomList:[]}},computed:{parks:function(){return Object(r["a"])()}},methods:{getAreaList:function(){this.areaList=JSON.parse(JSON.stringify(this.parks))},getBuildingList:function(e){var t=this;return Object(n["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["f"])(e);case 2:n=a.sent,0!==n.code&&200!==n.code||(t.buildingList=n.data.items);case 4:case"end":return a.stop()}}),a)})))()},getFloorList:function(e){var t=this;Object(s["k"])(e).then((function(e){0!==e.code&&200!==e.code||(t.floorList=e.data.items)}))},getRoomList:function(e){var t=this;Object(s["s"])(e).then((function(e){0!==e.code&&200!==e.code||(t.roomList=e.data.items)}))},changeArea:function(e){this.formData.buildingId="",this.formData.floorId="",this.formData.roomId="",this.buildingList=[],this.roomList=[],this.floorList=[],this.getBuildingList({areaId:e})},changeBuilding:function(e){this.formData.floorId="",this.formData.roomId="",this.roomList=[],this.floorList=[],this.getFloorList({buildingId:e})},changeFloor:function(e){this.formData.roomId="",this.roomList=[],this.getRoomList({floorId:e})}},created:function(){this.getAreaList()}}},5872:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"800px",title:"edit"===e.enterParam.type?"编辑楼层":"新增楼层",visible:e.isShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目",disabled:"edit"==e.enterParam.type},on:{change:e.getAreaId},model:{value:e.formData.areaId,callback:function(t){e.$set(e.formData,"areaId",t)},expression:"formData.areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"楼栋信息:",prop:"buildingId"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:"edit"==e.enterParam.type,options:e.buildingOption,props:e.buildingProps},on:{change:e.handleChange},model:{value:e.buildingPath,callback:function(t){e.buildingPath=t},expression:"buildingPath"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"所在楼层:",prop:"floorLevel"}},[t("el-col",{attrs:{span:6}},[t("el-radio-group",{model:{value:e.formData.floorLevel,callback:function(t){e.$set(e.formData,"floorLevel",t)},expression:"formData.floorLevel"}},[t("el-radio",{attrs:{label:1}},[e._v("地上")]),t("el-radio",{attrs:{label:0}},[e._v("地下")])],1)],1),t("el-col",{attrs:{span:11,offset:1}},[t("div",{staticStyle:{display:"flex",wrap:"nowrap"}},[t("el-input-number",{staticStyle:{"margin-right":"10px"},attrs:{"controls-position":"right",min:1},model:{value:e.formData.floor,callback:function(t){e.$set(e.formData,"floor",t)},expression:"formData.floor"}}),t("span",[e._v("楼")])],1)])],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"功能业态:",prop:"busType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择功能业态"},model:{value:e.formData.busType,callback:function(t){e.$set(e.formData,"busType",t)},expression:"formData.busType"}},e._l(e.busTypeOption,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"建筑面积:",prop:"area"}},[t("el-input",{attrs:{placeholder:"请输入建筑面积"},model:{value:e.formData.area,callback:function(t){e.$set(e.formData,"area",t)},expression:"formData.area"}},[t("template",{slot:"append"},[e._v("㎡")])],2)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"层高:",prop:"floorHeight"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入层高"},model:{value:e.formData.floorHeight,callback:function(t){e.$set(e.formData,"floorHeight",t)},expression:"formData.floorHeight"}},[t("template",{slot:"append"},[e._v("m")])],2)],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"楼层平面图:"}},[t("ImgUpload",{attrs:{fileList:e.fileList,limit:1,busSubType:1003},on:{"update:fileList":function(t){e.fileList=t},"update:file-list":function(t){e.fileList=t}}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保 存")])],1)],1)},n=[],s=a("c7eb"),r=a("1da1"),o=(a("d81d"),a("d3b7"),a("159b"),a("cb37")),l=a("0835"),c=a("53ba"),d=a("5f87"),u={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},mixins:[c["a"]],components:{ImgUpload:l["a"]},data:function(){var e=this;return{isShow:!1,loading:!1,formData:{areaId:"",buildingId:"",floorLevel:1,floor:1,busType:"",area:"",floorHeight:""},busTypeOption:[],buildingPath:[],fileList:[],rules:{areaId:[{required:!0,message:"请选择所属项目",trigger:"change"}],buildingId:[{required:!0,validator:function(t,a,i){0==e.buildingPath.length?i(new Error("请选择楼栋!")):i()},trigger:"change"}],floorLevel:[{required:!0,validator:function(t,a,i){e.formData.floor?i():i(new Error("楼层不能为空!"))},trigger:"change"},{required:!0,message:"请选择地上或地下",trigger:"change"}]},buildingOption:[],buildingProps:{children:"units",label:"name",value:"id"}}},watch:{value:function(e){this.isShow=e,e&&(this.getBuildingAll(this.enterParam.areaId),this.formData.areaId=this.enterParam.areaId,this.enterParam.buildingId&&(this.enterParam.unitId?this.buildingPath=[this.enterParam.buildingId,this.enterParam.unitId]:this.enterParam.buildingId&&(this.buildingPath=[this.enterParam.buildingId])),"edit"==this.enterParam.type&&this.getFloorDetai(this.enterParam.floorId))},isShow:function(e){this.$emit("input",e)}},created:function(){var e=this;this.getDicts({code:"business_type"}).then((function(t){0==t.code&&(e.busTypeOption=t.data.items||[])}))},methods:{getBuildingAll:function(e){var t=this;return Object(r["a"])(Object(s["a"])().mark((function a(){var i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["f"])({areaId:e});case 2:i=a.sent,0==i.code&&(t.buildingOption=i.data.items,t.buildingOption.forEach((function(e){e.name=e.buildingName,e.units&&e.units.forEach((function(e){e.name=e.unitName}))})));case 4:case"end":return a.stop()}}),a)})))()},getFloorDetai:function(e){var t=this;return Object(r["a"])(Object(s["a"])().mark((function a(){var i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["i"])({id:e});case 2:i=a.sent,0==i.code&&(t.formData=i.data,t.fileList=[],i.data.attachmentListItems&&i.data.attachmentListItems.length>0&&i.data.attachmentListItems.forEach((function(e){var a={fileId:e.fileId,url:"/prod-api/adm-service/system/file/image?fileId="+e.fileId+"&token="+Object(d["d"])()};t.fileList.push(a)})));case 4:case"end":return a.stop()}}),a)})))()},handleChange:function(e){console.log(e)},getAreaId:function(e){this.formData.buildingId="",this.getBuildingAll(e)},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refresh"),e.loading=!1,setTimeout((function(){e.hide()}),200)):e.$message.error(t.msg)},i=function(){e.loading=!1};e.fileList.length>0&&(e.formData.files=e.fileList.map((function(e){return e.fileId}))),e.buildingPath.length>0&&(e.formData.buildingId=e.buildingPath[0],e.formData.unitId=e.buildingPath[1]),"edit"===e.enterParam.type?Object(o["j"])(e.formData).then(a).finally(i):Object(o["g"])(e.formData).then(a).finally(i)}}))},hide:function(){this.isShow=!1,this.resetForm("form"),this.fileList=[]}}},p=u,m=a("2877"),f=Object(m["a"])(p,i,n,!1,null,"30a922ce",null);t["default"]=f.exports},"58c1":function(e,t,a){"use strict";a("bd4b")},"74cd":function(e,t,a){},"789c":function(e,t,a){"use strict";a("447e")},"79b7":function(e,t,a){"use strict";a("252d")},"7c76":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.isShow,width:"800px",align:"center","append-to-body":""},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("div",{staticStyle:{padding:"20px 0"}},[t("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",action:e.upload.url,headers:e.upload.headers,"file-list":e.fileList,disabled:e.upload.isUploading,"on-progress":e.handleProgress,"on-success":e.handleRequest,data:e.upload.uploadParam,drag:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip text-center",attrs:{slot:"tip"},slot:"tip"},[t("span",[e._v("仅允许导入xls、xlsx格式文件。")]),t("div",{staticClass:"el-link el-link--primary",staticStyle:{"font-size":"12px","vertical-align":"baseline"}},[t("div",{staticClass:"el-link--inner",staticStyle:{"font-size":"12px","vertical-align":"baseline"},on:{click:e.downloadFunc}},[e._v("下载模板")])])])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{disabled:e.upload.isUploading,loading:e.upload.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")]),t("el-button",{attrs:{disabled:e.upload.loading},on:{click:e.hide}},[e._v("取 消")])],1)])],1)},n=[],s=a("5f87"),r=a("cb37"),o=(a("0b2d"),{props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},watch:{value:function(e){e&&(this.isShow=e,this.impParams.areaId=this.enterParam.areaId)},isShow:function(e){this.$emit("input",e)}},data:function(){return{isShow:!1,title:"楼栋批量导入",fileList:[],impParams:{areaId:"",fileId:"",fileName:""},upload:{loading:!1,isUploading:!1,percent:0,headers:{token:Object(s["d"])(),deviceId:3},uploadParam:{busSubType:"1102"},url:"/prod-api/adm-service/system/file/upl"},downloadUrl:"/area/building_import_template.xlsx"}},methods:{handleProgress:function(e){this.upload.isUploading=!0,this.upload.percent=Math.floor(e.percent)},handleRequest:function(e){console.log("uploat:",e),this.upload.isUploading=!1,0==e.code?(this.$message.success("文件导入成功!"),this.impParams.fileId=e.data.fileId,this.impParams.fileName=e.data.fileName):(this.$refs.upload.clearFiles(),this.loading=!1,this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}))},downloadFunc:function(){var e=document.createElement("a");e.href="/area/static/楼栋模板.xlsx",e.click()},handleSubmit:function(){var e=this;console.log("handleSubmit."),this.impParams.fileId?Object(r["b"])(this.impParams).then((function(t){0===t.code?(e.$message.success("导入成功"),setTimeout((function(){e.$emit("refresh"),e.hide()}),300)):e.$message.error(t.msg)})):this.$message.error("请先上传数据文件")},cleanFileNode:function(){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.upload.loading=!1,this.impParams.fileId=""},hide:function(){this.cleanFileNode(),this.isShow=!1}}}),l=o,c=a("2877"),d=Object(c["a"])(l,i,n,!1,null,"816e40da",null);t["default"]=d.exports},"7eb1":function(e,t,a){"use strict";a("db92")},8482:function(e,t,a){},8885:function(e,t,a){},"8cdb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wscn-http404-container"},[t("div",{staticClass:"wscn-http404"},[e._m(0),t("div",{staticClass:"bullshit"},[t("div",{staticClass:"bullshit__oops"},[e._v("OOPS!")]),e._m(1),t("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),t("div",{staticClass:"bullshit__info"},[e._v("Please check that the URL you entered is correct, or click the button below to return to the homepage.")]),t("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[e._v("Back to home")])])])])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"pic-404"},[t("img",{staticClass:"pic-404__parent",attrs:{src:a("a36b"),alt:"404"}}),t("img",{staticClass:"pic-404__child left",attrs:{src:a("26fc"),alt:"404"}}),t("img",{staticClass:"pic-404__child mid",attrs:{src:a("26fc"),alt:"404"}}),t("img",{staticClass:"pic-404__child right",attrs:{src:a("26fc"),alt:"404"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"bullshit__info"},[e._v("All rights reserved "),t("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"https://wallstreetcn.com",target:"_blank"}},[e._v("wallstreetcn")])])}],s={name:"Page404",computed:{message:function(){return"The webmaster said that you can not enter this page..."}}},r=s,o=(a("dd53"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"c095f994",null);t["default"]=l.exports},"90f9":function(e,t,a){"use strict";a("e856")},"928e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"800px",title:"选择客户",top:"20px !important",visible:e.isShow,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:22,offset:1}},[t("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"客户姓名",prop:"cusName"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入客户姓名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.cusName,callback:function(t){e.$set(e.queryParams,"cusName",t)},expression:"queryParams.cusName"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"selectMultipleTable",staticStyle:{"margin-top":"-5px"},attrs:{data:e.dataList},on:{"row-click":e.handleSingleSelected}},[t("el-table-column",{attrs:{label:"",width:"30",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:a.row.id},model:{value:e.selectedId,callback:function(t){e.selectedId=t},expression:"selectedId"}},[e._v(" "+e._s()+" ")])]}}])}),t("el-table-column",{attrs:{label:"客户名称",align:"center",prop:"cusName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"客户编码",align:"center",prop:"cusCode","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"客户属性",align:"center",prop:"cusProp"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"==t.row.cusProp?"个人":"企业")+" ")]}}])}),t("el-table-column",{attrs:{label:"客户类型",align:"center",prop:"cusType"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"==t.row.cusProp?"业主":"租户")+" ")]}}])}),t("el-table-column",{attrs:{label:"手机号码",align:"center",prop:"phone","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"邮箱",align:"center",prop:"email","show-overflow-tooltip":""}})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticStyle:{"margin-top":"5px"},attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitSelectUser}},[e._v("确 定")]),t("el-button",{on:{click:e.hide}},[e._v("取 消")])],1)],1)},n=[],s=(a("e9c4"),a("b775")),r="/adm-service/ent/",o={customerGet:r+"customer/get",customerAdd:r+"customer/add",customerDel:r+"customer/del",customerEdit:r+"customer/edit",customerList:r+"customer/list"},l=function(e){return s["a"].post(o.customerList,e)},c={name:"selectUserTable",props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},watch:{value:function(e){var t=this;this.isShow=e,e&&(this.queryParams.areaId=this.enterParam.areaId,this.handleQuery(),setTimeout((function(){t.$nextTick((function(){t.selectedId=t.enterParam.cusId}))}),100))},isShow:function(e){this.$emit("input",e)}},data:function(){return{isShow:!1,selectedId:"",selectedData:"",loading:!0,total:0,dataList:[],queryParams:{pageNum:1,pageSize:10,areaId:"",cusName:void 0}}},methods:{hide:function(){this.isShow=!1,this.resetForm("queryForm"),this.selectedId=""},submitSelectUser:function(){this.selectedId?(this.$emit("getData",this.selectedData),this.hide()):this.$alert("请选择用户!","提醒",{confirmButtonText:"确定"})},getList:function(){var e=this;this.loading=!0,l(this.queryParams).then((function(t){e.loading=!1,0==t.code?(e.dataList=t.data.items,e.total=t.data.total):e.$message.error(t.msg)})).catch((function(){e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSingleSelected:function(e){var t={cusId:e.id,cusName:e.cusName};this.selectedData=JSON.stringify(t),console.log("select: ",this.selectedData)}}},d=c,u=a("2877"),p=Object(u["a"])(d,i,n,!1,null,"0ee572b4",null);t["default"]=p.exports},"9b5a":function(e,t,a){},"9ea3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-row",{staticStyle:{display:"flex"}},[t("el-col",{staticClass:"box-left"},[t("div",{staticClass:"box-top"},[t("label",{staticClass:"el-form-item__label"},[e._v(e._s(e.select.area))]),t("el-select",{attrs:{size:"mini",placeholder:e.select.areaPlc,clearable:""},on:{change:e.getAreaId},model:{value:e.queryParams.areaId,callback:function(t){e.$set(e.queryParams,"areaId",t)},expression:"queryParams.areaId"}},e._l(e.areaList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.areaName,value:e.areaId}})})),1)],1),t("div",{staticClass:"scroll-box"},[t("div",{staticClass:"treeList"},[t("div",{staticStyle:{padding:"0 10px"}},[t("el-tree",{ref:"treeRef",attrs:{lazy:"",data:e.treeOptions,props:e.defaultProps,load:e.loadTreeData,"expand-on-click-node":!1,"highlight-current":!0,"default-expand-all":!1,"default-expanded-keys":e.nodeKey,"node-key":"id"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.node,n=a.data;return t("div",{staticClass:"custom-tree-node"},[t("div",{staticClass:"label",class:1==i.level?"label-1":"label-2",attrs:{title:i.label}},[e._v(e._s(i.label))]),1==i.level?t("div",{staticClass:"opt-btns"},[t("el-tooltip",{attrs:{effect:"dark",content:"新增楼栋",placement:"top"}},[e.$_has(e.b_addCode)?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),function(){return e.onTreeCreate(i,n)}.apply(null,arguments)}}},[t("i",{staticClass:"el-icon-circle-plus-outline"})]):e._e()],1),t("el-tooltip",{attrs:{effect:"dark",content:"导入楼栋",placement:"top"}},[e.$_has(e.impCode)?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"medium"},on:{click:function(t){return t.stopPropagation(),function(){return e.onTreeImport(n)}.apply(null,arguments)}}},[t("i",{staticClass:"el-icon-upload"})]):e._e()],1)],1):t("div",{staticClass:"opt-btns"},[t("el-tooltip",{attrs:{effect:"dark",content:"新增单元",placement:"top"}},[2==i.level&&e.$_has(e.u_editCode)?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),function(){return e.onTreeCreate(i,n)}.apply(null,arguments)}}},[t("i",{staticClass:"el-icon-circle-plus-outline"})]):e._e()],1),e.$_has(e.u_editCode)?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),function(){return e.onTreeEdit(i,n)}.apply(null,arguments)}}},[t("i",{staticClass:"el-icon-edit"})]):e._e(),e.$_has(e.u_editCode)?t("el-button",{staticClass:"btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),function(){return e.onTreeDel(i,n)}.apply(null,arguments)}}},[t("i",{staticClass:"el-icon-delete color-red"})]):e._e()],1)])}}])})],1)])])]),t("el-col",{staticClass:"box-right"},[t("el-card",{attrs:{shadow:"never"}},[t("div",{staticStyle:{background:"#fff"}},[t("div",{staticClass:"tool-rows",staticStyle:{height:"60px","box-sizing":"border-box"}},[t("span",[e.curNode?t("span",{staticClass:"text-nav"},[t("i",{staticClass:"el-icon-location-outline"}),e._v(" "+e._s(e.curNode.path))]):e._e()]),t("div",[e.$_has(e.f_addCode)?t("el-button",{attrs:{type:"primary",size:"mini",plain:"",disabled:!e.addPerm},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")]):e._e()],1)]),t("div",{staticClass:"scroll-box"},[t("div",{staticClass:"tableContainer treeList"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",size:"mini",data:e.dataList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),t("el-table-column",{attrs:{align:"center",label:"楼层编码",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.areaCode+"-"+t.row.buildingCode+"-"+t.row.unitCode+"-"+t.row.floorCode)+" ")]}}])}),t("el-table-column",{attrs:{prop:"floorName",align:"center",label:"楼层",width:"100"}}),t("el-table-column",{attrs:{prop:"floorHeight",align:"center",label:"层高(米)",width:"100"}}),t("el-table-column",{attrs:{prop:"busType",align:"center",label:"功能业态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.selectDictLabel(e.busTypeOption,t.row.busType)))]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerView(a.row)}}},[e._v("查看")]),t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),e.$_has(e.f_editCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row)}}},[e._v("编辑")]):e._e(),e.$_has(e.f_delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.f_delCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")]):e._e()]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)])])])],1)],1),t("edit-dialog",{attrs:{enterParam:e.params},on:{refresh:e.refreshTreeNode},model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}}),t("floor-dialog",{attrs:{enterParam:e.params},on:{refresh:e.getList},model:{value:e.floorShow,callback:function(t){e.floorShow=t},expression:"floorShow"}}),t("building-dialog",{attrs:{enterParam:e.params},on:{refresh:e.refreshTreeNode},model:{value:e.buildingShow,callback:function(t){e.buildingShow=t},expression:"buildingShow"}}),t("view-dialog",{attrs:{rowId:e.rowId},model:{value:e.viewShow,callback:function(t){e.viewShow=t},expression:"viewShow"}}),t("import-dialog",{attrs:{enterParam:e.params},on:{refresh:e.refreshTreeNode},model:{value:e.importShow,callback:function(t){e.importShow=t},expression:"importShow"}})],1)},n=[],s=a("c7eb"),r=a("1da1"),o=(a("7db0"),a("d81d"),a("d3b7"),a("b0c0"),a("c7cd"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-bg"},[e.height?t("el-table",{ref:"multipleTable",attrs:{data:e.formatData,border:e.border,height:e.height,"highlight-current-row":""},on:{"sort-change":e.sort_change,"selection-change":e.changeFun,"select-all":e.selectAll,select:e.handleSelect,"current-change":e.handleCurrentTrChange}},[e._l(e.columns,(function(a){return[a.type?t("el-table-column",{key:a.desc,attrs:{type:a.type,align:"center",label:a.name,filters:a.filters,"filter-method":a.filterMethod,width:void 0===a.width?"auto":a.width,sortable:!!a.sortable&&a.sortable,fixed:a.fixed}}):e._e(),a.type?e._e():t("el-table-column",{key:a.desc,attrs:{prop:a.desc,align:a.align,label:a.name,filters:a.filters,"filter-method":a.filterMethod,width:void 0===a.width?"auto":a.width,sortable:!!a.sortable&&a.sortable,fixed:a.fixed,"show-overflow-tooltip":!!a.tooltip},scopedSlots:e._u([{key:"default",fn:function(i){return[a.slotName?e._t(a.slotName,null,{scope:i}):t("div",[void 0!=a.templet&&"function"===typeof a.templet&&a.templet(i.row)?t("div",{style:"text-align:right;text-decoration: underline;color:#ccc;"+a.style},[e._v(e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))]):void 0==a.templet||"function"!==typeof a.templet||a.templet(i.row)?a.click?t("div",{style:"color:#409EFF;text-align:right;text-decoration: underline;"+a.style,on:{click:function(t){return e.btnClickfunc(a,i.row,a.desc)}}},[e._v(e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))]):a.edit?t("div",{style:a.style},["input"===a.editType?t("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):"number"===a.editType?t("el-input",{attrs:{size:"mini",placeholder:"请输入内容",oninput:"value=value.replace(/[^\\d]/g,'')"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):"inputNum"===a.editType?t("el-input",{attrs:{size:"mini",placeholder:"请输入内容",oninput:"value=value.replace(/[^\\d.]/g,'')"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):"inputdata"===a.editType?t("el-date-picker",{staticStyle:{width:"98%"},attrs:{type:"date",format:e.yyyy-e.MM-e.dd,"value-format":"yyyy-MM-dd",placeholder:"选择日期",size:"mini"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):"select"===a.editType?t("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}},e._l(a.editSelOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1):a.btns?t("div",{style:"text-align:center;"+a.style},e._l(a.btns,(function(a,n){return t("el-button",{key:n,class:a.btnClass,attrs:{size:"mini",type:a.btnType},on:{click:function(t){return e.handleBtnClick(a.clickType,i.row)}}},[e._v(e._s(a.name))])})),1):a.dataFormat?t("div",{class:a.tooltip?"btable-tooltip":""},[e._v(e._s(e.dateFormat(a.dataFormat,i.row[a.desc])))]):t("div",{class:a.tooltip?"btable-tooltip":"",style:a.style},[e._v(e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))]):t("div",{style:"color:#409EFF;text-align:right;text-decoration: underline;"+a.style,on:{click:function(t){return e.btnClickfunc(a,i.row,a.desc)}}},[e._v(e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))])])]}}],null,!0)})]}))],2):t("el-table",{ref:"multipleTable",attrs:{data:e.formatData,border:e.border,"highlight-current-row":""},on:{"sort-change":e.sort_change,"selection-change":e.changeFun,"select-all":e.selectAll,select:e.handleSelect,"current-change":e.handleCurrentTrChange}},[e._l(e.columns,(function(a){return[a.type?t("el-table-column",{key:a.desc,attrs:{type:a.type,align:"center",label:a.name,filters:a.filters,"filter-method":a.filterMethod,width:void 0===a.width?"auto":a.width,sortable:!!a.sortable&&a.sortable,fixed:a.fixed}}):e._e(),a.type?e._e():t("el-table-column",{key:a.desc,attrs:{prop:a.desc,align:a.align,label:a.name,filters:a.filters,"filter-method":a.filterMethod,width:void 0===a.width?"auto":a.width,sortable:!!a.sortable&&a.sortable,fixed:a.fixed,"show-overflow-tooltip":!!a.tooltip},scopedSlots:e._u([{key:"default",fn:function(i){return[a.slotName?e._t(a.slotName,null,{scope:i}):t("div",[void 0!=a.templet&&"function"===typeof a.templet&&a.templet(i.row)?t("div",{style:"text-align:right;text-decoration: underline;color:#ccc;"+a.style},[e._v(e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))]):void 0==a.templet||"function"!==typeof a.templet||a.templet(i.row)?a.click?t("div",{style:"color:#409EFF;text-align:right;text-decoration: underline;"+a.style,on:{click:function(t){return e.btnClickfunc(a,i.row,a.desc)}}},[e._v(e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))]):a.edit?t("div",{style:a.style},["input"===a.editType?t("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):"number"===a.editType?t("el-input",{attrs:{size:"mini",placeholder:"请输入内容",oninput:"value=value.replace(/[^\\d]/g,'')"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):"inputNum"===a.editType?t("el-input",{attrs:{size:"mini",placeholder:"请输入内容",oninput:"value=value.replace(/[^\\d.]/g,'')"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):"inputdata"===a.editType?t("el-date-picker",{staticStyle:{width:"98%"},attrs:{type:"date",format:e.yyyy-e.MM-e.dd,"value-format":"yyyy-MM-dd",placeholder:"选择日期",size:"mini"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}}):"select"===a.editType?t("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:function(t){return e.editInput(i.row)}},model:{value:i.row[a.desc],callback:function(t){e.$set(i.row,a.desc,t)},expression:"scope.row[column.desc]"}},e._l(a.editSelOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1):a.btns?t("div",{style:"text-align:center;"+a.style},e._l(a.btns,(function(a,n){return t("el-button",{key:n,class:a.btnClass,attrs:{size:"mini",type:a.btnType},on:{click:function(t){return e.handleBtnClick(a.clickType,i.row)}}},[e._v(e._s(a.name))])})),1):a.dataFormat?t("div",{class:a.tooltip?"btable-tooltip":""},[e._v(e._s(e.dateFormat(a.dataFormat,i.row[a.desc])))]):t("div",{class:a.tooltip?"btable-tooltip":"",style:a.style},[e._v(e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))]):t("div",{style:"color:#409EFF;text-align:right;text-decoration: underline;"+a.style,on:{click:function(t){return e.btnClickfunc(a,i.row,a.desc)}}},[e._v(e._s(a.format?e.fmtMoney(i.row[a.desc]):i.row[a.desc]))])])]}}],null,!0)})]}))],2),e.isShowPagination?t("div",{staticClass:"table-page"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,50],"pager-count":e.pagerCount,layout:e.layout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"row-dblclick":e.rowDblclick}},[t("el-button",{staticClass:"my-btn",attrs:{disabled:e.firstPageBtnDisabled,type:"button"},on:{click:e.jumpFirstPage}},[e._v("首页")])],1),t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout2,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("el-button",{staticClass:"my-btn",staticStyle:{margin:"0px 5px"},attrs:{disabled:e.lastPageBtnDisabled,type:"button"},on:{click:e.jumpLastPage}},[e._v("尾页")])],1)],1):e._e()],1)}),l=[],c=(a("4e82"),a("a9e3"),a("159b"),a("ed08")),d=a("c1df"),u=a.n(d),p={props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},pagerCount:{type:Number,default:5},border:{type:Boolean,default:!1},isShowPagination:{type:Boolean,default:!0},total:{type:Number,default:0},height:{type:[Number,String],default:null},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1},layout:{type:String,default:"total,sizes,slot,prev,pager"},layout2:{type:String,default:"next,slot,jumper"}},data:function(){return{moment:u.a,multipleSelection:[],isUpdateSelection:!0,firstPageBtnDisabled:!0,lastPageBtnDisabled:!1}},computed:{formatData:function(){return this.data}},mounted:function(){},methods:{handleSelect:function(e){this.$emit("printData",e)},rowDblclick:function(e){this.$emit("row-dblclick",e)},handleCurrentTrChange:function(e){this.$emit("current-change",e)},dateFormat:function(e,t){return t?u()(t).format(e):""},fmtMoney:function(e){return Object(c["a"])(e)},sort_change:function(e){this.formatData.sort(Object(c["f"])(e.prop,"",e.order))},handleCurrentChange:function(e){var t=Math.ceil(this.total/this.pageSize);this.firstPageBtnDisabled=1===e,this.lastPageBtnDisabled=e===t,this.isUpdateSelection=!1,this.updateSeletion(),this.$emit("searchList",e)},handleSizeChange:function(e){this.isUpdateSelection=!1,this.pageSize=e,this.updateSeletion(),this.$emit("searchList",e,1)},selectAll:function(e){this.$emit("printData",e)},btnClickfunc:function(e,t,a){this.$emit("btnClickFunc",{column:e,row:t,type:a})},handleBtnClick:function(e,t){this.$emit("handleBtnClick",{clickType:e,row:t})},changeFun:function(e){this.isUpdateSelection?this.multipleSelection=e:this.isUpdateSelection=!0,this.$emit("printData",this.multipleSelection)},editInput:function(e){this.$refs.multipleTable.toggleRowSelection(e,!0)},updateSeletion:function(){var e=this,t=this;this.$nextTick((function(){t.data.forEach((function(a){e.multipleSelection.indexOf(a)>=0&&(t.isUpdateSelection=!1,t.$refs.multipleTable.toggleRowSelection(a,!0))})),t.isUpdateSelection=!0}))},jumpFirstPage:function(){this.handleCurrentChange(1)},jumpLastPage:function(){var e=Math.ceil(this.total/this.pageSize);this.handleCurrentChange(e)}}},m=p,f=(a("4769"),a("cef5"),a("2877")),h=Object(f["a"])(m,o,l,!1,null,"10de156c",null),b=h.exports,g=a("9f17"),v=a("2207"),y=a("bdcf"),w=a("5872"),_=a("03c2"),S=a("7c76"),x=a("53ba"),C=a("cb37"),I={props:{forward:Function},components:{eTables:b,wxSelect:g["a"],editDialog:v["default"],viewDialog:y["default"],floorDialog:w["default"],buildingDialog:_["default"],importDialog:S["default"]},mixins:[x["a"]],data:function(){return{impCode:["adm:area:building:imp"],b_addCode:["adm:area:building:add"],b_editCode:["adm:area:building:imp"],b_delCode:["adm:area:building:imp"],u_addCode:["adm:area:unit:add"],u_editCode:["adm:area:unit:edit"],u_delCode:["adm:area:unit:del"],f_addCode:["adm:area:floor:add"],f_editCode:["adm:area:floor:edit"],f_delCode:["adm:area:floor:del"],loading:!1,queryParams:{pageNum:1,pageSize:10,areaId:void 0,buildingId:void 0,unitId:void 0},total:0,dataList:[],busTypeOption:[],treeOptions:[],defaultProps:{children:"children",label:"typeName",isLeaf:"leaf"},nodeKey:[],curNode:null,updateShow:!1,viewShow:!1,floorShow:!1,buildingShow:!1,importShow:!1,params:{},rowId:"",selectedList:[],select:{area:"项目",areaPlc:"请选择项目"},multipleSelection:[],addPerm:!1}},created:function(){var e=this;this.getDicts({code:"business_type"}).then((function(t){0==t.code&&(e.busTypeOption=t.data.items||[])}))},mounted:function(){console.log("areaList: ",this.areaList),this.areaList&&this.areaList.length>0&&(this.queryParams.areaId=this.areaList[0].areaId,this.getAreaId(this.queryParams.areaId))},methods:{getAreaId:function(e){var t=this;if(e){var a=this.areaList.find((function(t){return t.areaId===e}));a?(this.treeOptions=[{areaId:a.areaId,id:a.areaId,typeName:a.areaName,path:a.areaName}],this.nodeKey=[a.areaId],this.curNode=this.treeOptions[0],this.queryParams={pageNum:1,pageSize:10,areaId:a.areaId},this.handleQuery(),this.$nextTick((function(){t.$refs.treeRef.setCurrentKey(a.areaId)}))):(this.treeOptions=[],this.curNode=null)}},loadTreeData:function(e,t){var a=this;return Object(r["a"])(Object(s["a"])().mark((function i(){var n,r,o;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=a,0!=e.level){i.next=4;break}i.next=23;break;case 4:if(1!=e.level){i.next=15;break}return i.next=7,Object(C["f"])({areaId:e.data.id});case 7:if(r=i.sent,0!=r.code){i.next=12;break}return i.abrupt("return",t(r.data.items.map((function(t){return n.$set(t,"typeName",t.buildingName),n.$set(t,"path",e.data.path+" / "+t.buildingName),t}))));case 12:return i.abrupt("return",t([]));case 13:i.next=23;break;case 15:return i.next=17,Object(C["x"])({buildingId:e.data.id});case 17:if(o=i.sent,0!=o.code){i.next=22;break}return i.abrupt("return",t(o.data.items.map((function(t){return t.leaf=!0,n.$set(t,"typeName",t.unitName),n.$set(t,"path",e.data.path+" / "+t.unitName),t}))));case 22:return i.abrupt("return",t([]));case 23:case"end":return i.stop()}}),i)})))()},refreshTreeNode:function(e){this.getAreaId(this.queryParams.areaId)},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(C["l"])(this.queryParams).then((function(t){e.loading=!1,0==t.code?(e.total=t.data.total,e.dataList=t.data.items):e.dataList=[]})).catch((function(){e.loading=!1,e.dataList=[],e.$message.error("网络异常，请稍后再试")}))},handlerEdit:function(e){this.params={type:"edit",areaId:e.areaId,buildingId:e.buildingId,unitId:e.unitId,floorId:e.id},this.floorShow=!0},handlerView:function(e){this.rowId=e.id,this.viewShow=!0},handlerDel:function(e){var t=this;this.$confirm("确定要删除 ".concat(e.floorName," 吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(C["h"])({id:e.id}).then((function(e){0==e.code?(t.$message.success("删除成功"),t.queryParams.pageSize*(t.queryParams.pageNum-1)+1==t.total?t.handleQuery():t.getList()):t.$message.error(e.msg)}))}))},handleAdd:function(){this.params={type:"add",areaId:this.queryParams.areaId,buildingId:this.queryParams.buildingId,unitId:this.queryParams.unitId},this.floorShow=!0},handleNodeClick:function(e,t){this.curNode=e,this.addPerm=!1,this.queryParams={pageNum:1,pageSize:10,areaId:e.areaId},2==t.level?this.queryParams.buildingId=e.id:3==t.level&&(this.addPerm=!0,this.queryParams.buildingId=e.buildingId,this.queryParams.unitId=e.id),this.handleQuery()},onTreeCreate:function(e,t){1==e.level?(this.buildingShow=!0,this.params={type:"add",areaId:t.areaId,areaName:t.typeName}):(this.params={type:"add",areaId:t.areaId,areaName:t.typeName,buildingId:t.id},this.updateShow=!0),console.log(t)},onTreeEdit:function(e,t){2==e.level?(this.buildingShow=!0,this.params={type:"edit",areaId:t.areaId,areaName:t.areaName,buildingId:t.id},console.log(t)):(this.params={type:"edit",areaId:t.areaId,areaName:t.areaName,buildingId:t.buildingId,unitId:t.id,unitName:t.unitName,unitCode:t.unitCode},this.updateShow=!0)},onTreeDel:function(e,t){2==e.level?this.onBuildingDel(t):this.onUnitDel(t)},onBuildingDel:function(e){var t=this;this.$confirm("确定删除“"+e.buildingName+"”吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(C["d"])({id:e.id}).then((function(a){0==a.code?(t.$message.success("删除成功"),t.refreshTreeNode(e.areaId)):t.$message.error(a.msg)}))}))},onUnitDel:function(e){var t=this;this.$confirm("确定删除“"+e.unitName+"”吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(C["y"])({id:e.id}).then((function(a){0==a.code?(t.$message.success("删除成功"),t.refreshTreeNode(e.buildingId)):t.$message.error(a.msg)}))}))},onTreeImport:function(e){this.importShow=!0,this.params={areaId:e.areaId}},handleSelectionChange:function(e){console.log("multi select:",e),this.multipleSelection=e}}},D=I,k=(a("dfd6"),Object(f["a"])(D,i,n,!1,null,"041be9c0",null));t["default"]=k.exports},"9f17":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wx-setect"},[t("span",{staticClass:"wx-setect-name"},[e._v(e._s(e.label))]),t("span",{staticClass:"wx-setect-fuhao"},[e._v("|")]),t("el-select",{staticStyle:{width:"180px"},attrs:{clearable:e.clearable,size:"mini",placeholder:e.placeholder},on:{change:e.handleChange},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},e._l(e.list,(function(a){return t("el-option",{key:a[e.valueName],attrs:{label:a[e.labelName],value:a[e.valueName]}})})),1)],1)},n=[],s=(a("a9e3"),{name:"wxSelect",props:{list:{type:Array,default:function(){return[]}},label:{type:String,required:!0},labelName:{type:String,required:!0},valueName:{type:String,default:"id"},placeholder:{type:String,default:"请选择"},clearable:{type:Boolean,default:!0},value:{type:Number|String,default:""}},watch:{value:{handler:function(e){this.select=e||""},immediate:!0}},data:function(){return{select:""}},methods:{handleChange:function(e){this.$emit("input",e),this.$emit("change",e)}}}),r=s,o=(a("c44c"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"39c9dddd",null);t["a"]=l.exports},a36b:function(e,t,a){e.exports=a.p+"static/img/404.5f76e018.png"},a449:function(e,t,a){},aadb:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-row",{staticStyle:{display:"flex"}},[t("el-col",{staticClass:"box-left"},[t("SpaceTree",{staticStyle:{display:"inline-block"},on:{areaChange:function(t){e.curNode=t},"node-click":e.handleNodeClick,search:e.handleQuery}})],1),t("el-col",{staticClass:"box-right"},[t("ns-searchBar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticStyle:{background:"#fff"}},[t("div",{staticClass:"tool-rows",staticStyle:{height:"60px","box-sizing":"border-box"}},[t("span",[e.curNode?t("span",{staticClass:"text-nav"},[t("i",{staticClass:"el-icon-location-outline"}),e._v(" "+e._s(e.curNode.path))]):e._e()]),t("div",[t("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.onTreeImport()}}},[e._v("导入")])],1)]),t("div",{staticClass:"scroll-box-r"},[t("div",{staticClass:"tableContainer treeList"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",size:"mini",data:e.dataList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t("el-table-column",{attrs:{prop:"roomCode",align:"center",label:"房源编码",width:"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"roomName",align:"center",label:"房号",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"propertyType",align:"center",label:"物业类型",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.selectDictLabel(t.row.propertyType))+" ")]}}])}),t("el-table-column",{attrs:{prop:"area",align:"center",label:"建筑面积",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"houseType",align:"center",label:"户型",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatterHouse(t.row.houseType))+" ")]}}])}),t("el-table-column",{attrs:{prop:"rentPrice",align:"center",label:"预租单价",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerView(a.row)}}},[e._v("查看")]),t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row)}}},[e._v("编辑")]),t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")])]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)])])])],1)],1),t("edit-dialog",{attrs:{enterParam:e.params},on:{refresh:e.getList},model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}}),t("view-dialog",{attrs:{rowId:e.rowId},model:{value:e.viewShow,callback:function(t){e.viewShow=t},expression:"viewShow"}}),t("import-dialog",{attrs:{enterParam:e.params},on:{refresh:e.getList},model:{value:e.importShow,callback:function(t){e.importShow=t},expression:"importShow"}})],1)},n=[],s=a("5530"),r=(a("d81d"),a("b0c0"),a("e9c4"),a("b64b"),a("d3b7"),a("159b"),a("9f17")),o=a("300b"),l=a("2457"),c=a("53ba"),d=a("1028"),u=a("cb37"),p=a("f547"),m={name:"AdmAreaHouses",props:{forward:Function},components:{wxSelect:r["a"],viewDialog:l["default"],editDialog:o["default"],importDialog:p["default"],SpaceTree:d["a"]},mixins:[c["a"]],filters:{enterStatusFilter:function(e){var t={0:"空置",1:"已入住",2:"装修中"};return t[e]}},data:function(){return{addCode:["adm:area:rooms:add"],editCode:["adm:area:rooms:edit"],delCode:["adm:area:rooms:del"],impCode:["adm:area:rooms:imp"],loading:!1,colModel:[{columnId:"roomName",displayName:"房号",searchType:"input",placeholder:"请输入房号"}],queryParams:{pageNum:1,pageSize:10,areaId:void 0,buildingId:void 0,unitId:void 0,floorId:void 0,propertyType:void 0,roomName:void 0},total:0,propertyTypeOption:[],spaceStructList:[],dataList:[],treeOptions:[],defaultProps:{children:"children",label:"typeName",isLeaf:"leaf"},nodeKey:[],curNode:null,updateShow:!1,viewShow:!1,importShow:!1,rowId:"",params:{},addPermit:!1,impPermit:!1,selectedList:[],select:{area:"项目",areaPlc:"请选择项目"}}},created:function(){var e=this;this.getDicts({code:"property_type"}).then((function(t){0==t.code&&(e.propertyTypeOption=t.data.items||[])})),this.getDicts({code:"area_space_truct"}).then((function(t){0==t.code&&(e.spaceStructList=t.data.items||[])}))},methods:{handleRefresh:function(){this.handleQuery()},handleQuery:function(e){e&&(this.queryParams=Object(s["a"])(Object(s["a"])({},this.queryParams),e)),this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(u["u"])(this.queryParams).then((function(t){e.loading=!1,0==t.code&&(e.total=t.data.total,e.dataList=t.data.items,e.dataList.forEach((function(e){if(e.propRightPersons){var t=JSON.parse(e.propRightPersons);e.cusName=t.cusName}})))})).catch((function(){e.loading=!1}))},handlerEdit:function(e){this.params={type:"edit",areaId:this.queryParams.areaId,buildingId:this.queryParams.buildingId,unitId:this.queryParams.unitId,floorId:this.queryParams.floorId,roomId:e.id},this.updateShow=!0},handlerView:function(e){this.rowId=e.id,this.viewShow=!0},handlerDel:function(e){var t=this,a=this;this.$confirm("确定要删除设备 ".concat(e.roomName," 吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["o"])({id:e.id}).then((function(e){0==e.code?(t.$message.success("删除成功"),a.queryParams.pageSize*(a.queryParams.pageNum-1)+1==a.total?a.handleQuery():a.getList()):t.$message.error(e.msg)}))}))},handleAdd:function(){this.params={type:"add",areaId:this.queryParams.areaId,buildingId:this.queryParams.buildingId,unitId:this.queryParams.unitId,floorId:this.queryParams.floorId},this.updateShow=!0},handleNodeClick:function(e){this.curNode=e},onTreeImport:function(){this.importShow=!0,this.params={areaId:this.queryParams.areaId}},handleSelectionChange:function(e){this.multipleSelection=e},qrBatch:function(){if(0!=this.multipleSelection.length){var e=this.multipleSelection.map((function(e){return{qrdata:"feishu:rooms:"+e.id,code:e.roomCode}}));this.qrCodeData=JSON.stringify(e)}else this.$message.info("请选择房源!")},formatterHouse:function(e){return console.log(e),null!=e?this.spaceStructList[e].name:""},selectDictLabel:function(e){return this.propertyTypeOption[e-1].name}}},f=m,h=(a("1ddb"),a("2877")),b=Object(h["a"])(f,i,n,!1,null,"8d169e34",null);t["default"]=b.exports},ab39:function(e,t,a){"use strict";a.d(t,"j",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return p})),a.d(t,"f",(function(){return m})),a.d(t,"g",(function(){return f})),a.d(t,"i",(function(){return h})),a.d(t,"k",(function(){return b})),a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return v})),a.d(t,"h",(function(){return y}));a("99af");var i=a("b775"),n=(a("b0c0"),a("2b19"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("9861"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return i["a"].post(e,t,{responseType:"blob"}).then((function(e){console.log(e);var t=new Blob([e.data],{type:"application/vnd.ms-excel"}),i=a||"".concat((new Date).getTime(),"_导出结果.xlsx");if("download"in document.createElement("a")){var n=document.createElement("a");n.download=i,n.href=URL.createObjectURL(t),n.click()}else navigator.msSaveBlob(t,i)})).catch((function(e){console.log("报错"),console.error(e)}))}),s=a("c1df"),r=a.n(s),o="/adm-service/area/room/space",l={spaceList:o+"/list",listByFloor:o+"/listByFloor",spaceAdd:o+"/add",spaceDel:o+"/del",spaceDelOne:o+"/delOne",spaceEdit:o+"/edit",spaceGet:o+"/get",spaceStat:o+"/stat",spaceListAll:o+"/listall"};function c(e){return Object(i["a"])({url:l.spaceList,method:"post",data:e})}function d(e){return Object(i["a"])({url:l.listByFloor,method:"post",data:e})}function u(e){return Object(i["a"])({url:l.spaceAdd,method:"post",data:e})}function p(e){return Object(i["a"])({url:l.spaceDel,method:"post",data:e})}function m(e){return Object(i["a"])({url:l.spaceDelOne,method:"post",data:e})}function f(e){return Object(i["a"])({url:l.spaceEdit,method:"post",data:e})}function h(e){return Object(i["a"])({url:l.spaceGet,method:"get",params:e})}function b(e){return Object(i["a"])({url:l.spaceStat,method:"post",data:e})}function g(e){return Object(i["a"])({url:"/adm-service/bes/staff/apply/list/audited",method:"post",data:e})}function v(e){return Object(i["a"])({url:"/adm-service/bes/bent/contract/list/audited",method:"post",data:e})}function y(e){return n("/adm-service/area/room/space/exp",e,"".concat(1==e.useType?"公寓":"孵化","空间_").concat(r()().format("YYYYMMDD"),"_导出.xls"))}},ac51:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("ns-drawer",{attrs:{loading:e.loading,title:"空间详情"},on:{close:e.hide},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("所在房间")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.roomName))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("空间名称")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.spaceName))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("空间类型")]),t("div",{staticClass:"item-value"},[e._v(" "+e._s(e.filterSpaceSubType(e.form.spaceSubType))+" ")])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("空间面积")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.spaceArea)+"㎡")])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("预租单价")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.leasePrice))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("房间介绍")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.remark))])])])]),t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-title"},[e._v("租住信息")]),t("ns-table",{attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.pageSize},on:{searchList:function(t){return e.getBentList()}},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.toDetail(i.row)}}},[e._v("详情")])]}}]),model:{value:e.pageNum,callback:function(t){e.pageNum=t},expression:"pageNum"}})],1)])},n=[],s=(a("b0c0"),a("ab39")),r={props:{value:{type:Boolean,required:!0},rowId:{type:String,required:!0,default:function(){return""}}},data:function(){return{loading:!1,isShow:!1,form:{},listData:[],total:0,pageNum:1,pageSize:10,columns:[{name:"企业名称",desc:"entName"},{name:"合同开始时间",desc:"startTime"},{name:"合同结束时间",desc:"endTime"},{name:"操作",slotName:"action",width:"200",fixed:"right"}],subTypeList:[]}},watch:{value:function(e){var t=this;this.isShow=e,e&&(this.getDicts({code:"area_space_sub_type"}).then((function(e){t.subTypeList=e.data.items||[]})),this.getDetail())},isShow:function(e){this.$emit("input",e)}},methods:{hide:function(){this.isShow=!1},getDetail:function(){var e=this;this.loading=!0,Object(s["i"])({id:this.rowId}).then((function(t){e.loading=!1,0===t.code?(e.form=t.data,e.getBentList(t.data.id)):e.$message.error(t.msg)})).catch((function(t){e.loading=!1,console.log(t)}))},filterSpaceSubType:function(e){if(e)return this.subTypeList[e].name},getBentList:function(e){var t=this,a={spaceId:e,pageNum:this.pageNum,pageSize:this.pageSize};Object(s["b"])(a).then((function(e){0==e.code&&(t.listData=e.data.items,t.total=e.data.total)}))},toDetail:function(e){this.$router.push("/ent/ient/manage?id="+e.entId)}}},o=r,l=(a("7eb1"),a("2877")),c=Object(l["a"])(o,i,n,!1,null,"5201a45c",null);t["default"]=c.exports},acce:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})},n=[],s=a("aadb"),r={name:"AdmAreaHouses",components:{List:s["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},o=r,l=a("2877"),c=Object(l["a"])(o,i,n,!1,null,null,null);t["default"]=c.exports},b0a8:function(e,t,a){},bce7:function(e,t,a){},bd4b:function(e,t,a){},bdcf:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("ns-drawer",{attrs:{loading:e.loading,title:"查看楼层详情","top-resume":{title:e.form.floorName,list:[{label:"所属项目",value:e.form.areaName||e.form.areaId},{label:"楼栋信息",value:e.form.buildingName+" / "+e.form.unitName}]}},on:{close:e.hide},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("楼层编号")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.floorCode)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("所在楼层")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.floor)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("功能业态")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.selectDictLabel(e.busTypeOption,e.form.busType)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("建筑面积")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.area))+" ㎡")])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("层高")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.floorHeight))+" M")])])])]),t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("楼栋图片")]),t("ImgUpload",{attrs:{fileList:e.fileList,limit:1,busSubType:1003,isShowTip:!1},on:{"update:fileList":function(t){e.fileList=t},"update:file-list":function(t){e.fileList=t}}})],1)])])])},n=[],s=(a("d81d"),a("d3b7"),a("cb37")),r=a("5f87"),o=a("0835"),l={components:{ImgUpload:o["a"]},props:{value:{type:Boolean,required:!0},rowId:{type:String,required:!0,default:function(){return""}}},data:function(){return{loading:!1,isShow:!1,form:{},imgList:[],busTypeOption:[],fileList:[]}},watch:{value:function(e){this.isShow=e,e&&this.getDetail()},isShow:function(e){this.$emit("input",e)}},created:function(){var e=this;this.getDicts({code:"business_type"}).then((function(t){0==t.code&&(e.busTypeOption=t.data.items||[])}))},methods:{hide:function(){this.isShow=!1},getDetail:function(){var e=this;this.loading=!0,Object(s["i"])({id:this.rowId}).then((function(t){0===t.code?(e.form=t.data,e.fileList=t.data.attachmentListItems.map((function(e){return{fileId:e.fileId,url:"/prod-api/adm-service/system/file/image?fileId="+e.fileId+"&token="+Object(r["d"])()}}))):e.$message.error(t.msg)})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))}}},c=l,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},be56:function(e,t,a){"use strict";a("8885")},bf62:function(e,t,a){"use strict";a("0a2d")},c048:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleQuery}}),t("el-card",{staticClass:"mb10",attrs:{shadow:"never"}},[t("RoomStati",{attrs:{data:e.roomStati}})],1),t("RentView",{ref:"rentView",attrs:{spaceData:e.spaceData,tagOptions:e.tagOptions,colModel:e.RentColModel,total:e.spaceTotal},on:{search:e.viewSearch}})],1)},n=[],s=a("5530"),r=(a("d81d"),a("fb6a"),a("b0c0"),a("d3b7"),a("07ac"),a("159b"),a("53ba")),o=a("25c3"),l=a("d9c0"),c=a("cb37"),d=a("ab39"),u=a("cec1"),p=a("c1df"),m=a.n(p),f={components:{RentView:o["default"],RoomStati:l["default"],bar:u["a"]},mixins:[r["a"]],data:function(){for(var e=this,t=[],a=4,i=new Date,n=0;n<a;n++)t[n]="".concat(i.getFullYear()+n);return{roomStati:[{name:"总间数",count:0,unit:"间"},{name:"已租",count:0,unit:"间"},{name:"空置",count:0,unit:"间"},{name:"锁定",count:0,unit:"间"}],colModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",clearable:!1,options:[]},{columnId:"buildingId",displayName:"楼栋",searchType:"select",placeholder:"请选择楼栋",clearable:!1,change:function(t){return e.buildingChange(t)},options:[]}],areaIdTemp:"",queryParams:{useType:1},RentColModel:[{columnId:"floorId",displayName:"楼层",searchType:"select",placeholder:"请选择楼层",options:[]},{columnId:"spaceStruct",displayName:"户型",searchType:"select",placeholder:"请选择户型",options:[]},{columnId:"leaseStatus",displayName:"空间状态",searchType:"select",placeholder:"请选择空间状态",options:[{value:"0",label:"空置"},{value:"1",label:"已租"},{value:"3",label:"锁定"}]}],spaceData:[],spaceTotal:0,tagOptions:[{key:t[0],value:"~".concat(t[0]),iconOption:{type:"cude",bgColor:"#de7c9d"}},{key:t[1],value:t[1],iconOption:{type:"cude",bgColor:"#f5b877"}},{key:t[2],value:t[2],iconOption:{type:"cude",bgColor:"#81d3f8"}},{key:t[3],value:"".concat(t[3],"+"),iconOption:{type:"cude",bgColor:"#bbdc67"}},{key:"kz",value:"空置",iconOption:{type:"cude",bgColor:"#fff",border:"1px solid rgb(245, 154, 35)"}}]}},methods:{buildingChange:function(e){this.getFloorList(e),this.$refs.rentView.clearSearch()},handleQuery:function(e){var t=this;this.$refs.rentView.clearSearch(),e&&e.areaId!=this.areaIdTemp?this.getBuildingList(e.areaId):(Object(d["k"])(this.queryParams).then((function(e){var a=e.data,i={name:"",count:0,unit:"间"},n=[-1,1,0,3],r=["总间数","已租","空置","锁定"];t.roomStati=n.map((function(e,t){var n=Object(s["a"])(Object(s["a"])({},i),{},{name:r[t],unit:"间"});return a&&a.roomSpaceGroupStatusVos.length&&a.roomSpaceGroupStatusVos.forEach((function(t){t.leaseStatus!=e&&-1!=e||(n.count+=t.num)})),n}))})),this.$refs.rentView.refresh())},getBuildingList:function(e){var t=this,a=[];Object(c["f"])({areaId:e}).then((function(i){a=i.data.items,t.colModel[1].options=a.map((function(e){return e.value=e.id,e.label=e.buildingName,e})),t.queryParams.buildingId=a.length?a[0].id:"",t.areaIdTemp=e,t.$refs.rentView.refresh(),t.getFloorList(a[0].id),t.handleQuery()}))},getFloorList:function(e){var t=this;Object(c["k"])({buildingId:e}).then((function(e){t.RentColModel[0].options=e.data.items.map((function(e){return e.value=e.id,e.label=e.unitCode+"-"+e.floorName,e}))}))},viewSearch:function(e){var t=this;Object(d["c"])(Object(s["a"])(Object(s["a"])({},e),this.queryParams)).then((function(e){var a=e.data;t.spaceTotal=a.total;var i={};a.items.forEach((function(e){var t=Object(s["a"])({floor:e.floorName,room:e.roomName,floorId:e.floorId,roomId:e.roomId},e);t.endDate=t.endDate?m()(t.endDate).format("YYYY-MM-DD"):"",t["tagOption"]={color:e.endDate?e.endDate.slice(0,4):4==e.leaseStatus?"lz":"kz",statusTag:1==e.arrearsStatus?"qf":""},i[e.floorId]?i[e.floorId].push(t):i[e.floorId]=[t]})),t.spaceData=Object.values(i)}))}},mounted:function(){this.colModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e})),this.areaIdTemp=this.areaList[0].areaId,this.queryParams.areaId=this.areaIdTemp,this.getBuildingList(this.areaIdTemp)},created:function(){var e=this;this.getDicts({code:"area_space_truct"}).then((function(t){e.RentColModel[1].options=t.data.items?t.data.items.map((function(e){return e.value=e.code,e.label=e.name,e})):[]}))}},h=f,b=a("2877"),g=Object(b["a"])(h,i,n,!1,null,null,null);t["default"]=g.exports},c41a:function(e,t,a){"use strict";a("10b7f")},c44c:function(e,t,a){"use strict";a("bce7")},c5da:function(e,t,a){},ca2f:function(e,t,a){"use strict";a.r(t);a("4de4"),a("d3b7");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("bar",{attrs:{columns:e.colModel,seachData:e.queryParams,isShowReset:!1},on:{search:e.handleQuery}}),t("el-card",{staticClass:"mb10",attrs:{shadow:"never"}},[t("RoomStati",{attrs:{data:e.roomStati.filter((function(e){return!e.hide})),showTotal:!0,totalData:e.roomTotalData,test:function(){}}})],1),t("RentView",{ref:"rentView",attrs:{spaceData:e.spaceData,tagOptions:e.tagOptions,colModel:e.RentColModel,total:e.spaceTotal},on:{search:e.viewSearch}})],1)},n=[],s=a("5530"),r=(a("d81d"),a("fb6a"),a("07ac"),a("159b"),a("53ba")),o=a("d9c0"),l=a("25c3"),c=a("cb37"),d=a("ab39"),u=a("cec1"),p=a("c1df"),m=a.n(p),f={components:{RentView:l["default"],RoomStati:o["default"],bar:u["a"]},mixins:[r["a"]],data:function(){for(var e=this,t=[],a=4,i=new Date,n=0;n<a;n++)t[n]="".concat(i.getFullYear()+n);return{roomStati:[{name:"独立空间",count:0,unit:"间"},{name:"已租空间",count:0,unit:"间"},{name:"空置空间",count:0,unit:"间"},{name:"锁定空间",count:0,unit:"间"},{name:"留置空间",count:0,unit:"间",hide:!0},{name:"工位数",count:0,unit:"个"},{name:"已租工位",count:0,unit:"个"},{name:"空置工位",count:0,unit:"个"},{name:"锁定工位",count:0,unit:"个"},{name:"留置工位",count:0,unit:"个",hide:!0}],roomTotalData:{buildingArea:0,rentRate:0},colModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]},{columnId:"buildingId",displayName:"楼栋",searchType:"select",placeholder:"请选择楼栋",change:function(t){return e.buildingChange(t)},options:[]}],queryParams:{useType:2},RentColModel:[{columnId:"floorId",displayName:"楼层",searchType:"select",placeholder:"请选择楼层",options:[]},{columnId:"leaseStatus",displayName:"空间状态",searchType:"select",placeholder:"请选择空间状态",options:[{value:"0",label:"空置"},{value:"1",label:"已租"},{value:"3",label:"锁定"}]},{columnId:"spaceName",displayName:"空间名称",searchType:"input",placeholder:"请输入空间名称"}],spaceData:[],spaceTotal:0,tagOptions:[{key:t[0],value:"~".concat(t[0]),iconOption:{type:"cude",bgColor:"#de7c9d"}},{key:t[1],value:t[1],iconOption:{type:"cude",bgColor:"#f5b877"}},{key:t[2],value:t[2],iconOption:{type:"cude",bgColor:"#81d3f8"}},{key:t[3],value:"".concat(t[3],"+"),iconOption:{type:"cude",bgColor:"#bbdc67"}},{key:"kz",value:"空置",iconOption:{type:"cude",bgColor:"#fff",border:"1px solid rgb(245, 154, 35)"}},{key:"qf",value:"欠费",iconOption:{type:"radius",bgColor:"#d9001b",text:"欠",textColor:"#fff"}},{key:"dlkj",value:"独立空间",iconOption:{type:"icon",icon:"el-icon-food"}},{key:"gw",value:"工位",iconOption:{type:"icon",icon:"el-icon-tableware"}}]}},methods:{buildingChange:function(e){this.getFloorList(e),this.$refs.rentView.clearSearch()},handleQuery:function(e){var t=this;this.$refs.rentView.clearSearch(),e&&e.areaId!=this.areaIdTemp?(console.log("查询楼栋"),this.getBuildingList(e.areaId)):(console.log("平常搜索"),Object(d["k"])(this.queryParams).then((function(e){var a=e.data,i={name:"",count:0},n=[-1,1,0,3,4,-1,1,0,3,4],r=["独立空间","已租空间","空置空间","锁定空间","留置空间","工位数","已租工位","空置工位","锁定工位","留置工位"];t.roomTotalData={buildingArea:a.buildingArea||0,rentRate:a.rentRate||0},t.roomStati=n.map((function(e,t){var n=Object(s["a"])(Object(s["a"])({},i),{},{hide:-1!==r[t].indexOf("留置"),name:r[t],unit:~r[t].indexOf("空间")?"间":"个"});return a&&a.roomSpaceGroupStatusVos.length&&a.roomSpaceGroupStatusVos.forEach((function(a){a.leaseStatus!=e&&-1!=e||(t>=5&&"0"===a.spaceSubType||t<=4&&"1"==a.spaceSubType)&&(n.count+=a.num)})),n}))})),this.$refs.rentView.refresh())},getBuildingList:function(e){var t=this,a=[];Object(c["f"])({areaId:e}).then((function(i){a=i.data.items,t.colModel[1].options=a.map((function(e){return e.value=e.id,e.label=e.buildingName,e})),t.queryParams.buildingId=a.length?a[0].id:"",t.areaIdTemp=e,t.$refs.rentView.refresh(),t.getFloorList(a[0].id),t.handleQuery()}))},getFloorList:function(e){var t=this;Object(c["k"])({buildingId:e}).then((function(e){t.RentColModel[0].options=e.data.items.map((function(e){return e.value=e.id,e.label=e.unitCode+"-"+e.floorName,e}))}))},viewSearch:function(e){var t=this;Object(d["c"])(Object(s["a"])(Object(s["a"])({},e),this.queryParams)).then((function(e){var a=e.data;t.spaceTotal=a.total;var i={};a.items.forEach((function(e){var t=Object(s["a"])({floor:e.floorName,room:e.roomName,floorId:e.floorId,roomId:e.roomId},e);t.endDate=t.endDate?m()(t.endDate).format("YYYY-MM-DD"):"";var a=t.endDate.slice(0,4)>(new Date).getFullYear()+3?(new Date).getFullYear()+3:t.endDate.slice(0,4)<(new Date).getFullYear()?(new Date).getFullYear():t.endDate.slice(0,4);t["tagOption"]={color:e.endDate?a:4==e.leaseStatus?"lz":"kz",statusTag:1==e.arrearsStatus?"qf":"",typeTag:["gw","dlkj"][e.spaceSubType]},i[e.floorId]?i[e.floorId].push(t):i[e.floorId]=[t]})),console.log("tempList===>>.",i,Object.values(i)),t.spaceData=Object.values(i)}))}},mounted:function(){this.colModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e})),this.areaIdTemp=this.areaList[0].areaId,this.queryParams.areaId=this.areaIdTemp,this.getBuildingList(this.areaIdTemp)}},h=f,b=(a("297d"),a("2877")),g=Object(b["a"])(h,i,n,!1,null,"3483842a",null);t["default"]=g.exports},cb37:function(e,t,a){"use strict";a.d(t,"m",(function(){return s})),a.d(t,"s",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"x",(function(){return m})),a.d(t,"w",(function(){return f})),a.d(t,"z",(function(){return h})),a.d(t,"y",(function(){return b})),a.d(t,"k",(function(){return g})),a.d(t,"l",(function(){return v})),a.d(t,"g",(function(){return y})),a.d(t,"j",(function(){return w})),a.d(t,"h",(function(){return _})),a.d(t,"i",(function(){return S})),a.d(t,"u",(function(){return x})),a.d(t,"n",(function(){return C})),a.d(t,"q",(function(){return I})),a.d(t,"o",(function(){return D})),a.d(t,"p",(function(){return k})),a.d(t,"r",(function(){return P})),a.d(t,"t",(function(){return O})),a.d(t,"v",(function(){return N}));var i=a("b775"),n={buildingList:"/adm-service/area/building/all",buildingDel:"/adm-service/area/building/del",buildingAdd:"/adm-service/area/building/add",buildingEdit:"/adm-service/area/building/edit",buildDetail:"/adm-service/area/building/get",buildImport:"/adm-service/area/building/imp",unitAll:"/adm-service/area/building/unit/all",unitAdd:"/adm-service/area/building/unit/add",unitEdit:"/adm-service/area/building/unit/edit",unitDel:"/adm-service/area/building/unit/del",floorList:"/adm-service/area/building/floor/all",floorPages:"/adm-service/area/building/floor/list",floorAdd:"/adm-service/area/building/floor/add",floorEdit:"/adm-service/area/building/floor/edit",floorDel:"/adm-service/area/building/floor/del",floorDetail:"/adm-service/area/building/floor/get",roomList:"/adm-service/area/building/rooms/all",roomPages:"/adm-service/area/building/rooms/list",roomAdd:"/adm-service/area/building/rooms/add",roomEdit:"/adm-service/area/building/rooms/edit",roomDel:"/adm-service/area/building/rooms/del",roomDetail:"/adm-service/area/building/rooms/get",roomCount:"/adm-service/area/building/rooms/allcount",roomImport:"/adm-service/area/building/rooms/imp",roomMerge:"/adm-service/area/building/rooms/merge",roomSplit:"/adm-service/area/building/rooms/split",leaseAnaly:"/adm-service/area/room/space/leaseAnaly"},s=function(e){return i["a"].post(n.leaseAnaly,e)};function r(e){return Object(i["a"])({url:n.roomList,method:"post",data:e})}var o=function(e){return i["a"].post(n.buildingList,e)},l=function(e){return i["a"].post(n.buildingAdd,e)},c=function(e){return i["a"].post(n.buildingEdit,e)},d=function(e){return i["a"].post(n.buildingDel,e)},u=function(e){return i["a"].get(n.buildDetail,{params:e})},p=function(e){return i["a"].post(n.buildImport,e)},m=function(e){return i["a"].post(n.unitAll,e)},f=function(e){return i["a"].post(n.unitAdd,e)},h=function(e){return i["a"].post(n.unitEdit,e)},b=function(e){return i["a"].post(n.unitDel,e)},g=function(e){return i["a"].post(n.floorList,e)},v=function(e){return i["a"].post(n.floorPages,e)},y=function(e){return i["a"].post(n.floorAdd,e)},w=function(e){return i["a"].post(n.floorEdit,e)},_=function(e){return i["a"].post(n.floorDel,e)},S=function(e){return i["a"].get(n.floorDetail,{params:e})},x=function(e){return i["a"].post(n.roomPages,e)},C=function(e){return i["a"].post(n.roomAdd,e)},I=function(e){return i["a"].post(n.roomEdit,e)},D=function(e){return i["a"].post(n.roomDel,e)},k=function(e){return i["a"].get(n.roomDetail,{params:e})},P=function(e){return i["a"].post(n.roomImport,e)},O=function(e){return i["a"].post(n.roomMerge,e)},N=function(e){return i["a"].post(n.roomSplit,e)}},cd6a:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("ns-drawer",{attrs:{loading:e.loading,title:"查看公寓空间","top-resume":{title:e.form.roomName}},on:{close:e.hide},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("所在房间")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.roomName))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("空间名称")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.spaceName))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("空间面积")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.spaceArea))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("预租单价")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.leasePrice))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("房间介绍")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.form.remark))])])])]),Array.isArray(e.form.installationBasic)||Array.isArray(e.form.installationExtra)?t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[Array.isArray(e.form.installationBasic)?t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("原配设施")]),t("div",{staticClass:"item-value"},e._l(e.form.installationBasic,(function(a){return t("el-tag",{key:a.code},[e._v(e._s(a.name))])})),1)]):e._e(),Array.isArray(e.form.installationExtra)?t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("增配设施")]),t("div",{staticClass:"item-value"},e._l(e.form.installationExtra,(function(a){return t("el-tag",{key:a.code},[e._v(e._s(a.name))])})),1)]):e._e()])]):e._e(),t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-title"},[e._v("租住信息")]),t("ns-table",{attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.pageSize},on:{searchList:function(t){return e.getAuditedList()}},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.toDetail(i)}}},[e._v("详情")])]}}]),model:{value:e.pageNum,callback:function(t){e.pageNum=t},expression:"pageNum"}})],1)])},n=[],s=(a("a9e3"),a("b64b"),a("d3b7"),a("ab39")),r={props:{value:{type:Boolean,required:!0},rowId:{type:String|Number,required:!0,default:function(){return""}}},data:function(){return{loading:!1,isShow:!1,form:{},listData:[],total:0,pageNum:1,pageSize:10,columns:[{name:"租住人",desc:"applyUserRealName"},{name:"租住时间",desc:"startTime"},{name:"退租时间",desc:"endTime"},{name:"操作",slotName:"action",width:"200",fixed:"right"}]}},watch:{value:function(e){this.isShow=e,e&&this.getDetail()},isShow:function(e){this.$emit("input",e)}},methods:{hide:function(){this.isShow=!1},getDetail:function(){var e=this;this.loading=!0,Object(s["i"])({id:this.rowId}).then((function(t){var a=t.data,i=function(e){try{var t=JSON.parse(a[e]);a[e]=t}catch(i){a[e]=[]}};i("installationBasic"),i("installationExtra"),e.form=a,e.getAuditedList(t.data.id)})).finally((function(){e.loading=!1}))},getAuditedList:function(e){var t=this,a={spaceId:e,pageNum:this.pageNum,pageSize:this.pageSize};Object(s["a"])(a).then((function(e){0==e.code&&(t.listData=e.data.items,t.total=e.data.total)}))},toDetail:function(e){this.$router.push("/bes/apartment/apply?id="+e.row.curContractId)}}},o=r,l=(a("90f9"),a("2877")),c=Object(l["a"])(o,i,n,!1,null,"cbd0cb36",null);t["default"]=c.exports},cec1:function(e,t,a){"use strict";a("ac1f"),a("841c"),a("498a");var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"mb10",attrs:{shadow:"never"}},[t("el-form",{ref:"form",attrs:{inline:!0,model:e.seachData,size:"small"}},[e._l(e.columns,(function(a,i){return t("el-form-item",{key:a.columnId+""+i,attrs:{label:a.displayName,prop:a.columnId}},[a.searchType?t("div",["input"==a.searchType?t("el-input",{style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,placeholder:a.placeholder?a.placeholder:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,"string"===typeof t?t.trim():t)},expression:"seachData[item.columnId]"}}):"select"==a.searchType?t("el-select",{style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,placeholder:a.placeholder?a.placeholder:"",multiple:a.multiple||!1},on:{change:function(t){return a.change?a.change(t):e.search(t)}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,"string"===typeof t?t.trim():t)},expression:"seachData[item.columnId]"}},e._l(a.options,(function(e,i){return t("el-option",{key:i,attrs:{label:a.hasOwnProperty("labelName")?e[a.labelName]:e.label,value:a.hasOwnProperty("valueName")?e[a.valueName]:e.value,disabled:e.disabled}})})),1):"date"==a.searchType?t("el-date-picker",{style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,type:"date","value-format":a.format?a.format:"yyyy-MM-dd"},on:{change:e.search},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):"dateArray"==a.searchType?t("el-date-picker",{style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",type:"daterange",clearable:"undefined"==typeof a.clearable||a.clearable,"value-format":a.format?a.format:"yyyy-MM-dd","range-separator":"至","start-placeholder":a.startDesc?a.startDesc:" ","end-placeholder":a.endDesc?a.endDesc:" "},on:{change:e.search},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):"cascader"==a.searchType?t("el-cascader",{style:{width:a.searchWidth+"px"},attrs:{props:a.props?a.props:{},options:a.options,size:"small",clearable:"",placeholder:a.placeholder||"请选择"},on:{change:function(e){"function"===typeof a.change&&a.change}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):e._e()],1):e._e()])})),t("el-form-item",{staticStyle:{display:"none"},attrs:{label:""}},[t("input",{attrs:{type:"",placeholder:""}})]),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowReset,expression:"isShowReset"}],attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")]),e.isCreate?t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("起草")]):e._e()],1)],2)],1)},n=[],s=(a("d81d"),{name:"NsSearchBar",props:{columns:{default:function(){}},isCreate:{type:Boolean,default:!1},seachData:{type:Object||null,default:{}},isShowReset:{type:Boolean,default:!1}},watch:{columns:function(){this.clearData()}},data:function(){return{}},mounted:function(){this.clearData()},methods:{search:function(){var e=this,t={};this.columns.map((function(a){a.searchType&&(t[a.columnId]=e.seachData[a.columnId]||null)})),this.$emit("search",t)},handleBtn:function(e){console.log(e);var t=e;this.$emit(t,{})},handleCreate:function(){this.$emit("handleCreate",{})},onReset:function(){var e=this,t={};this.columns.map((function(a){a.searchType&&(t[a.columnId]=null,e.$set(e.seachData,a.columnId,null))})),this.$emit("onReset",t)},clearData:function(){var e=this;this.columns.map((function(t){t.searchType&&e.$set(e.seachData,t.columnId,null)}))}}}),r=s,o=a("2877"),l=Object(o["a"])(r,i,n,!1,null,"3432873a",null);t["a"]=l.exports},cef5:function(e,t,a){"use strict";a("8482")},cf65:function(e,t,a){},cf92:function(e,t,a){"use strict";a("3e20")},d252:function(e,t,a){},d85a:function(e,t,a){"use strict";a("c5da")},d9c0:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-row",[e.showTotal?t("el-col",{attrs:{span:4}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"stati-card"},[t("div",{staticClass:"name"},[e._v("总面积")]),t("span",{staticClass:"count"},[e._v(e._s(e.totalData.buildingArea||0))]),t("span",{staticClass:"gray-text"},[e._v("㎡")])])]),t("el-col",{style:{marginTop:"20px"},attrs:{span:24}},[t("div",{staticClass:"stati-card"},[t("div",{staticClass:"name"},[e._v("出租率")]),t("span",{staticClass:"count"},[e._v(e._s(e.totalData.rentRate||0))]),t("span",{staticClass:"gray-text"},[e._v("%")])])])],1)],1):e._e(),t("el-col",{attrs:{span:e.showTotal?20:24}},[t("el-row",{staticStyle:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"},style:{borderLeft:e.showTotal?"1px solid #e7e7e7":""}},e._l(e.data,(function(a,i){return t("el-col",{key:i,style:{marginTop:i>3?"20px":""},attrs:{span:6}},[t("div",{staticClass:"textAlign stati-card",style:{borderLeft:i%4==0?"":"1px solid #e7e7e7"}},[t("div",{staticClass:"name"},[e._v(e._s(a.name))]),t("span",{staticClass:"count"},[e._v(e._s(a.count||0))]),t("span",{staticClass:"gray-text",staticStyle:{"margin-left":"6px"}},[e._v(e._s(a.unit))])])])})),1)],1)],1)},n=[],s={props:{data:{type:Array},showTotal:{type:Boolean,default:!1},totalData:{type:Object}}},r=s,o=(a("d85a"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,null,null);t["default"]=l.exports},db92:function(e,t,a){},dbf0:function(e,t,a){"use strict";a("323a")},dd53:function(e,t,a){"use strict";a("b0a8")},dfd6:function(e,t,a){"use strict";a("a449")},e856:function(e,t,a){},e8d0:function(e,t,a){"use strict";a("18d6")},ea27:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("ns-searchBar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-card",{staticStyle:{"margin-top":"-12px"},attrs:{shadow:"never","body-style":{paddingTop:"0 !important"}}},[t("div",{staticClass:"tag-row"},[t("div",{staticClass:"tag-left"},e._l(e.tagOptions,(function(e,a){return t("Tag",{key:a,attrs:{value:e.value,iconOption:e.iconOption}})})),1),t("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.refresh}},[e._v("刷新")])],1),t("div",{staticClass:"room-box"},e._l(e.spaceData,(function(a,i){return t("el-row",{key:i,style:{marginTop:i?"20px":"",paddingTop:"20px",borderTop:"1px solid #e7e7e7"},attrs:{gutter:30}},[t("el-col",{attrs:{span:3}},[t("div",{staticClass:"floor-box"},[t("div",[a.floor?t("h2",{staticClass:"building"},[e._v(e._s(a.floor))]):e._e()]),t("h2",{staticClass:"floor"},[e._v(e._s(a.room))])])]),t("el-col",{attrs:{span:21}},[t("el-row",{staticClass:"rowCard",attrs:{gutter:20}},e._l(a.space,(function(a,i){return t("el-col",{key:i,staticClass:"colCard",class:i>3?"mt20":"",attrs:{span:6}},[t("RoomCard",{attrs:{tagOption:{color:e.tagMap[a.tagOption.color]?e.tagMap[a.tagOption.color].iconOption:{},statusTag:e.tagMap[a.tagOption.statusTag],typeTag:e.tagMap[a.tagOption.typeTag]},data:a}})],1)})),1)],1)],1)})),1),t("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"page-sizes":[10,20,30,50,100],"page-size":e.queryParams.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper","current-page":e.queryParams.pageNum},on:{"current-change":e.handleQuery,"size-change":e.handleSizeChange,"update:currentPage":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:current-page":function(t){return e.$set(e.queryParams,"pageNum",t)}}})],1)],1)},n=[],s=(a("a9e3"),a("d3b7"),a("159b"),a("f875")),r=a("fa2e"),o=(a("c1df"),{props:{tagOptions:{type:Array},spaceData:{type:Array},colModel:{type:Array},total:{type:Number}},components:{Tag:r["default"],RoomCard:s["default"]},computed:{tagMap:function(){var e={};return this.tagOptions.forEach((function(t,a){e[t.key]=t})),e}},data:function(){return{queryParams:{pageNum:1,pageSize:10}}},methods:{handleRefresh:function(){this.handleQuery()},handleQuery:function(){this.$emit("search",this.queryParams)},refresh:function(){this.queryParams.pageNum=1,this.handleQuery()},handleSizeChange:function(e){this.queryParams.pageSize=e,this.handleQuery()}}}),l=o,c=(a("bf62"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"331cffd2",null);t["default"]=d.exports},eb5b:function(e,t,a){"use strict";a("1f7f")},ef3c:function(e,t,a){"use strict";a.r(t);a("ac1f"),a("5319");var i,n,s={created:function(){var e=this.$route,t=e.params,a=e.query,i=t.path;this.$router.replace({path:"/"+i,query:a})},render:function(e){return e()}},r=s,o=a("2877"),l=Object(o["a"])(r,i,n,!1,null,null,null);t["default"]=l.exports},f092:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-row",[t("el-col",{staticClass:"box-left"},[t("SpaceTree",{staticStyle:{display:"inline-block"},attrs:{level:4,roomParams:{propertyType:"3"}},on:{search:e.handleQuery,areaChange:e.areaChange,"node-click":e.areaChange}})],1),t("el-col",{staticClass:"box-right"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"tool-rows",staticStyle:{height:"60px","box-sizing":"border-box"}},[t("span",[e.curNode?t("span",{staticClass:"text-nav"},[t("i",{staticClass:"el-icon-location-outline"}),e._v(" "+e._s(e.curNode.path))]):e._e()]),t("div",[t("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.curNode.roomCode},on:{click:e.handlerDel}},[e._v("清空")]),t("el-button",{attrs:{type:"primary",size:"mini",disabled:e.splitDisabled},on:{click:function(t){e.sdShow=!0}}},[e._v("拆分")]),t("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.allEqual(e.selectionRows,e.selectionRows[0],"roomId")},on:{click:function(t){e.mdShow=!0}}},[e._v("合并")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.log}},[e._v("导出")])],1)]),t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,align:"center","page-size":e.queryParams.pageSize,"highlight-current-row":!1},on:{printData:e.printData,searchList:e.getList},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerView(i.row)}}},[e._v("查看")]),t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(i.row)}}},[e._v("编辑")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)],1)],1),t("editDialog",{attrs:{rowId:e.currentId,showFacil:!1,useType:"2",enterParam:e.editParams},on:{refresh:e.handleQuery},model:{value:e.edShow,callback:function(t){e.edShow=t},expression:"edShow"}}),t("viewDialog",{attrs:{rowId:e.currentId},model:{value:e.vdShow,callback:function(t){e.vdShow=t},expression:"vdShow"}}),t("splitDialog",{attrs:{enterParam:{room:e.curNode,data:e.selectionRows}},on:{refresh:e.handleQuery},model:{value:e.sdShow,callback:function(t){e.sdShow=t},expression:"sdShow"}}),t("mergeDialog",{attrs:{enterParam:{data:e.selectionRows}},on:{refresh:e.handleQuery},model:{value:e.mdShow,callback:function(t){e.mdShow=t},expression:"mdShow"}})],1)},n=[],s=a("5530"),r=(a("7db0"),a("c740"),a("d81d"),a("b0c0"),a("e9c4"),a("b64b"),a("d3b7"),a("1028")),o=a("fd08"),l=a("ac51"),c=(a("a9e3"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"拆分空间",visible:e.isShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[e.loading?t("div",{staticStyle:{"text-align":"center",height:"100px","line-height":"100px",color:"#409eff","font-size":"20px"}},[t("i",{staticClass:"el-icon-loading"})]):t("div",[t("el-card",[t("div",{staticClass:"el-form-item"},[t("label",[e._v("所在房间：")]),t("span",[e._v(e._s(e.room.roomCode))])]),t("div",{staticClass:"el-form-item"},[t("label",[e._v("房源面积：")]),t("span",[e._v(e._s(Number(e.room.area)||0)+"㎡")])]),t("div",{staticClass:"el-form-item"},[t("label",[e._v("剩余空间面积：")]),t("span",[e._v(e._s(e.surplusArea)+"㎡")])]),t("div",{staticClass:"el-form-item"},[t("label",[e._v("预租单价：")]),t("span",[e._v(e._s(e.room.rentPrice||0)+"元/月")])])]),t("el-card",{staticClass:"mt10"},[t("ns-table",{attrs:{data:e.listData,columns:e.columns,highlightCurrentRow:!1,isShowPagination:!1},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.delLine(i.$index)}}},[e._v("删除")])]}}])}),t("el-table",{attrs:{"show-header":!1,data:[{}]}},e._l(e.columns,(function(a,i){return t("el-table-column",{key:i,attrs:{align:"center"}},[a.aSelect&&a.desc?t("el-select",{attrs:{size:"mini"},model:{value:e.form[a.desc],callback:function(t){e.$set(e.form,a.desc,t)},expression:"form[item.desc]"}},e._l(a.options,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1):"number"==a.inputType?t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:a.placeholder,min:a.min,size:"mini",controls:!1,precision:a.precision||2},model:{value:e.form[a.desc],callback:function(t){e.$set(e.form,a.desc,t)},expression:"form[item.desc]"}}):a.desc?t("el-input",{attrs:{placeholder:a.placeholder,size:"mini",type:a.inputType,min:a.min},model:{value:e.form[a.desc],callback:function(t){e.$set(e.form,a.desc,t)},expression:"form[item.desc]"}}):t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.addLine}},[e._v("新增")])],1)})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)])}),d=[],u=(a("a434"),a("9129"),a("b680"),a("4d63"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("159b"),a("cb37")),p={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{isShow:!1,loading:!1,listData:[],columns:[{name:"空间名称",desc:"spaceName",placeholder:"请输入空间名称"},{name:"空间类型",desc:"spaceSubType",filter:function(t){var a=e.spaceSubTypeList.find((function(e){return e.value==t}));return a?a.label:""},placeholder:"请输入空间类型",aSelect:!0,options:[]},{name:"空间面积",desc:"spaceArea",placeholder:"请输入空间面积",inputType:"number",min:1},{name:"预租单价（元/月）",desc:"leasePrice",placeholder:"请输入预租单价",inputType:"number"},{name:"操作",slotName:"action",fixed:"right"}],spaceSubTypeList:[],room:{},form:{}}},computed:{surplusArea:function(){if(this.room.area){var e=this.room.area;return this.listData.forEach((function(t){e=(e-Number(t.spaceArea)).toFixed(2)})),e}return 0}},watch:{value:function(e){this.isShow=e,e?(this.room=Object(s["a"])({},this.enterParam.room),this.listData=[]):this.room={}},isShow:function(e){this.$emit("input",e)}},methods:{save:function(){var e=this,t=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refresh"),e.hide()):e.$message.error(t.msg)};if(console.log("this.surplusArea",this.surplusArea),0==this.surplusArea){var a=this.listData.map((function(t){return t=Object(s["a"])(Object(s["a"])(Object(s["a"])({},t),e.room),{},{roomId:e.room.id,useType:"2"}),t.spaceArea=Number(t.spaceArea),t.leasePrice=Number(t.leasePrice),t.spaceStruct=e.room.houseStruct,t}));Object(u["v"])({roomSpaceAddReq:a}).then(t)}else this.$message.error("请正确分配空间面积")},hide:function(){this.room={},this.listData=[],this.isShow=!1},addLine:function(){var e=this,t=function(t){if(!t.spaceName||!t.spaceSubType||!t.spaceArea||!t.leasePrice)return e.$message.error("请输入空间参数"),!1;var a=new RegExp(/[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/);return a.test(t.spaceName)?Number.isNaN(Number(t.spaceArea))?(e.$message.error("请正确输入空间面积"),!1):!Number.isNaN(Number(t.leasePrice))||(e.$message.error("请正确输入预组单价"),!1):(e.$message.error("空间名称只能使用字母、数字组合"),!1)};t(this.form)&&(this.listData.push(this.form),this.form={})},delLine:function(e){this.listData.splice(e,1)}},created:function(){var e=this;this.getDicts({code:"area_space_sub_type"}).then((function(t){e.spaceSubTypeList=t.data.items?t.data.items.map((function(e){return e.value=e.code,e.label=e.name,e})):[];var a=e.columns.findIndex((function(e){return"空间类型"===e.name}));e.columns[a].options=e.spaceSubTypeList}))}},m=p,f=a("2877"),h=Object(f["a"])(m,c,d,!1,null,"b63f770a",null),b=h.exports,g=a("0ac0"),v=a("ab39"),y={components:{SpaceTree:r["a"],editDialog:o["default"],viewDialog:l["default"],splitDialog:b,mergeDialog:g["a"]},computed:{splitDisabled:function(){return!!this.clearFlag||(1!=this.curNode.splitStatus||!!this.listData.length)}},data:function(){var e=this;return{spaceSubTypeList:[],colModel:[{columnId:"spaceName",displayName:"空间名称",searchType:"input",placeholder:"请输入空间名称"},{columnId:"leaseStatus",displayName:"空间状态",searchType:"select",placeholder:"请选择空间状态",options:[{value:"0",label:"空置"},{value:"1",label:"已租"},{value:"3",label:"锁定"}]}],queryParams:{pageNum:1,pageSize:10,useType:2},loading:!1,listData:[],columns:[{type:"selection"},{name:"空间编码",desc:"spaceCode"},{name:"空间名称",desc:"spaceName"},{name:"空间类型",desc:"spaceSubType",filter:function(t){var a=e.spaceSubTypeList.find((function(e){return e.value==t}));return a?a.label:""}},{name:"空间面积",desc:"spaceArea"},{name:"预租单价",desc:"leasePrice"},{name:"空间状态",desc:"leaseStatus",filter:function(e){var t="";switch(e){case 0:t="空置";break;case 1:t="已租";break;case 3:t="锁定";break;case 4:t="留置";break;case 5:t="已售";break}return t}},{name:"操作",slotName:"action",width:"200",fixed:"right"}],total:0,curNode:{},selectionRows:[],currentId:"",edShow:!1,vdShow:!1,sdShow:!1,mdShow:!1,editParams:{}}},methods:{areaChange:function(e){this.curNode=e,this.selectionRows=[],this.$refs.bxzTable.clearSelection()},log:function(){var e=this;Object(v["h"])(this.queryParams).then((function(t){e.$message.success("导出成功")}))},handleRefresh:function(){this.handleQuery()},handleQuery:function(e){e&&(this.queryParams=Object(s["a"])(Object(s["a"])({},this.queryParams),e)),this.queryParams.pageNum=1,this.$refs.bxzTable.clearSelection(),this.getList()},getList:function(){var e=this;this.loading=!0,Object(v["j"])(this.queryParams).then((function(t){e.listData=t.data.items,e.total=t.data.total})).finally((function(){e.loading=!1}))},handlerView:function(e){this.currentId=e.id,this.vdShow=!0},handlerEdit:function(e){this.editParams={roomData:this.curNode},this.currentId=e.id,this.edShow=!0},printData:function(e){this.selectionRows=JSON.parse(JSON.stringify(e))},handlerDel:function(e){var t=this;this.$confirm("确定要清空 ".concat(this.curNode.roomName," 中所有的空间吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(v["e"])({roomId:t.curNode.id}).then((function(e){0===e.code&&(t.$message.success("删除成功"),t.curNode.splitStatus=1,t.handleQuery())}))}))},allEqual:function(e,t,a){return!!(Array.isArray(e)&&e.length>1)&&!~e.findIndex((function(e){return e[a]!==t[a]}))}},created:function(){var e=this;this.getDicts({code:"area_space_sub_type"}).then((function(t){e.spaceSubTypeList=t.data.items?t.data.items.map((function(e){return e.value=e.code,e.label=e.name,e})):[]}))}},w=y,_=(a("eb5b"),Object(f["a"])(w,i,n,!1,null,"20cafb80",null));t["default"]=_.exports},f547:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.isShow,width:"800px",align:"center","append-to-body":""},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("div",{staticStyle:{padding:"20px 0"}},[t("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",action:e.upload.url,headers:e.upload.headers,"file-list":e.fileList,disabled:e.upload.isUploading,"on-progress":e.handleProgress,"on-success":e.handleRequest,data:e.upload.uploadParam,drag:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip text-center",attrs:{slot:"tip"},slot:"tip"},[t("span",[e._v("仅允许导入xls、xlsx格式文件。")]),t("div",{staticClass:"el-link el-link--primary",staticStyle:{"font-size":"12px","vertical-align":"baseline"}},[t("div",{staticClass:"el-link--inner",staticStyle:{"font-size":"12px","vertical-align":"baseline"},on:{click:e.downloadFunc}},[e._v("下载模板")])])])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{disabled:e.upload.isUploading,loading:e.upload.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")]),t("el-button",{attrs:{disabled:e.upload.loading},on:{click:e.hide}},[e._v("取 消")])],1)]),t("el-dialog",{attrs:{width:"500px",title:"提示",visible:e.rstShow,id:"size","close-on-click-modal":!1},on:{"update:visible":function(t){e.rstShow=t},close:e.rstHide}},[t("div",{staticClass:"rst-container"},[t("div",{staticClass:"rst-title"},[e._v(" 成功导入房源 "),t("span",[e._v(e._s(e.rstData.total))]),e._v(" 条 ")]),e.rstData.haveRoomCode&&e.rstData.haveRoomCode.length>0?t("div",{staticClass:"rst-list"},[t("span",{staticClass:"rst-list-tip"},[e._v("以下房源编码重复")]),e._l(e.rstData.haveRoomCode,(function(a,i){return t("div",{key:i,staticClass:"rst-item"},[e._v(e._s(a))])}))],2):e._e()])])],1)},n=[],s=a("5f87"),r=a("cb37"),o=(a("0b2d"),{props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},watch:{value:function(e){e&&(this.isShow=e,this.impParams.areaId=this.enterParam.areaId)},isShow:function(e){this.$emit("input",e)}},data:function(){return{isShow:!1,title:"房源批量导入",fileList:[],impParams:{areaId:"",fileId:"",fileName:""},upload:{loading:!1,isUploading:!1,percent:0,headers:{token:Object(s["d"])(),deviceId:3},uploadParam:{busSubType:"1106"},url:"/prod-api/adm-service/system/file/upl"},downloadUrl:"/area/room_import_template.xlsx",rstShow:!1,rstData:{}}},methods:{handleProgress:function(e){this.upload.isUploading=!0,this.upload.percent=Math.floor(e.percent)},handleRequest:function(e){console.log("uploat:",e),this.upload.isUploading=!1,0==e.code?(this.$message.success("文件导入成功!"),this.impParams.fileId=e.data.fileId,this.impParams.fileName=e.data.fileName):(this.$refs.upload.clearFiles(),this.loading=!1,this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}))},downloadFunc:function(){var e=document.createElement("a");e.href="/area/static/房源模板.xlsx",e.click()},handleSubmit:function(){var e=this;console.log("handleSubmit."),this.impParams.fileId?Object(r["r"])(this.impParams).then((function(t){0===t.code?(e.rstShow=!0,e.rstData=t.data):e.$message.error(t.msg)})):this.$message.error("请先上传数据文件")},rstHide:function(){this.rstShow=!1,this.$emit("refresh"),this.hide()},cleanFileNode:function(){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.upload.loading=!1,this.impParams.fileId=""},hide:function(){this.cleanFileNode(),this.rstData={},this.isShow=!1}}}),l=o,c=(a("79b7"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"bb9f360c",null);t["default"]=d.exports},f77c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-row",[t("el-col",{staticClass:"box-left"},[t("SpaceTree",{ref:"sTree",staticStyle:{display:"inline-block"},attrs:{level:4,roomParams:{propertyType:"2"}},on:{search:e.handleQuery,areaChange:function(t){e.curNode=t},"node-click":function(t){e.curNode=t}}})],1),t("el-col",{staticClass:"box-right"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"tool-rows",staticStyle:{height:"60px","box-sizing":"border-box"}},[t("span",[e.curNode?t("span",{staticClass:"text-nav"},[t("i",{staticClass:"el-icon-location-outline"}),e._v(e._s(e.curNode.path))]):e._e()]),t("div",[t("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.curNode.roomCode},on:{click:e.handlerAdd}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.log}},[e._v("导出")])],1)]),t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,align:"center","page-size":e.queryParams.pageSize},on:{printData:e.printData,searchList:e.getList},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerView(i.row)}}},[e._v("查看")]),t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(i.row)}}},[e._v("编辑")]),i.row.deleteFlag?t("span",[t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDelSpace(i.row)}}},[e._v("删除")])],1):e._e()]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)],1)],1),t("editDialog",{attrs:{rowId:e.currentId,roomId:e.roomId,enterParam:e.editParams,useType:"1",houseTypeList:e.houseTypeList},on:{refresh:e.handleQuery},model:{value:e.edShow,callback:function(t){e.edShow=t},expression:"edShow"}}),t("viewDialog",{attrs:{rowId:e.currentId},model:{value:e.vdShow,callback:function(t){e.vdShow=t},expression:"vdShow"}}),t("mergeDialog",{attrs:{enterParam:{data:e.selectionRows}},model:{value:e.mdShow,callback:function(t){e.mdShow=t},expression:"mdShow"}})],1)},n=[],s=a("5530"),r=(a("c740"),a("d81d"),a("d3b7"),a("159b"),a("1028")),o=a("fd08"),l=a("cd6a"),c=a("0ac0"),d=a("ab39"),u={components:{SpaceTree:r["a"],editDialog:o["default"],viewDialog:l["default"],mergeDialog:c["a"]},computed:{splitDisabled:function(){return!!this.clearFlag||(1!=this.curNode.splitStatus||!!this.listData.length)}},data:function(){return{houseTypeList:[],colModel:[{columnId:"spaceName",displayName:"空间名称",searchType:"input",placeholder:"请输入房间名称"},{columnId:"leaseStatus",displayName:"空间状态",searchType:"select",placeholder:"请选择空间状态",options:[{value:"0",label:"空置"},{value:"1",label:"已租"},{value:"3",label:"锁定"}]}],queryParams:{pageNum:1,pageSize:10,useType:1},loading:!1,listData:[],columns:[{name:"空间编码",desc:"spaceCode"},{name:"空间名称",desc:"spaceName"},{name:"空间面积",desc:"spaceArea"},{name:"空间状态",desc:"leaseStatus",filter:function(e){return["空置","已租","","锁定"][e]}},{name:"启用状态",desc:"applyStatus",filter:function(e){return["启用","禁用"][e]}},{name:"操作",slotName:"action",width:"200",fixed:"right"}],total:0,curNode:{},selectionRows:[],editParams:{},roomId:"",currentId:"",edShow:!1,vdShow:!1,mdShow:!1,clearFlag:!1}},created:function(){var e=this;this.getDicts({code:"area_space_truct"}).then((function(t){e.houseTypeList=t.data.items||[];var a=e.colModel.findIndex((function(e){return"户型"==e.displayName}));e.colModel[a].options=e.houseTypeList}))},methods:{log:function(){var e=this,t={useType:"1"};Object(d["h"])(t).then((function(t){e.$message.success("导出成功")}))},handleRefresh:function(){this.handleQuery()},handleQuery:function(e){e&&(this.queryParams=Object(s["a"])(Object(s["a"])({},this.queryParams),e)),this.queryParams.pageNum=1,this.getList()},handlerAdd:function(){this.editParams={roomData:this.curNode},this.roomId=this.curNode.id,this.currentId=-1,this.edShow=!0},getList:function(){var e=this;this.loading=!0,Object(d["j"])(this.queryParams).then((function(t){0===t.code?(e.listData=t.data.items.map((function(e){return e.deleteFlag=!1,e})),e.listData.forEach((function(e){0==e.leaseStatus&&Object(d["a"])({pageSize:1,pageNum:1,spaceId:e.id}).then((function(t){0==t.code&&0==t.data.total&&(e.deleteFlag=!0)}))})),e.total=t.data.total):e.$message.error(t.msg)})).finally((function(){e.loading=!1}))},printData:function(e){this.selectionRows=e},handlerView:function(e){this.currentId=e.id,this.vdShow=!0},handlerEdit:function(e){this.editParams={roomData:this.curNode},this.currentId=e.id,this.edShow=!0},handlerDel:function(){var e=this;this.$confirm("确定要清空 ".concat(this.curNode.roomName," 中所有的空间吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["e"])({roomId:e.curNode.id}).then((function(t){0===t.code&&(e.$message.success("删除成功"),e.curNode.splitStatus=1,e.handleQuery())})).catch((function(){e.$message.error("网络异常，请稍后重试")}))}))},handlerDelSpace:function(e){var t=this;this.$confirm("确定要删除".concat(e.spaceName,"空间吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["f"])({id:e.id}).then((function(e){0===e.code&&(t.$message.success("删除成功"),t.handleQuery())})).catch((function(){t.$message.error("网络异常，请稍后重试")}))}))},allEqual:function(e,t,a){return!!(Array.isArray(e)&&e.length>1)&&!~e.findIndex((function(e){return e[a]!==t[a]}))}}},p=u,m=(a("fce6"),a("2877")),f=Object(m["a"])(p,i,n,!1,null,"333446de",null);t["default"]=f.exports},f875:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"room-card",style:{backgroundColor:e.tagOption.color.bgColor,border:e.tagOption.color.border}},[t("div",{staticClass:"room-info"},[t("div",{staticClass:"room-num-box"},[t("div",{staticClass:"room-num"},[e._v(" "+e._s(e.data.spaceName)+" ")]),t("div",[e._v(e._s(e.data.spaceArea)+"㎡")])]),t("div",{staticClass:"ent-name"},[e._v(" "+e._s(e.data.leaseName||"暂无租户")+" ")]),t("div",{staticClass:"due-date"},[e._v(" "+e._s("".concat(e.data.endDate?e.data.endDate+" 到期":" "))+" ")])]),t("div",{staticClass:"tag-box"},[t("div",[t("Tag",{attrs:{iconOption:e.tagOption.statusTag?e.tagOption.statusTag.iconOption:{}}})],1),t("div",[t("Tag",{attrs:{iconOption:e.tagOption.typeTag?e.tagOption.typeTag.iconOption:{}}})],1)])])},n=[],s=a("fa2e"),r={props:{tagOption:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}}},components:{Tag:s["default"]},data:function(){return{}}},o=r,l=(a("58c1"),a("2877")),c=Object(l["a"])(o,i,n,!1,null,"0c5f70ed",null);t["default"]=c.exports},fa2e:function(e,t,a){"use strict";a.r(t);a("caad");var i=function(){var e=this,t=e._self._c;return e.iconOption&&["icon","radius","cude","img"].includes(e.iconOption.type)?t("div",{staticClass:"tag-box",style:e.boxStyle},[["radius","cude"].includes(e.iconOption.type)?t("div",{class:["tag","radius"==e.iconOption.type?"circle":"cude"],style:{border:e.iconOption.border,backgroundColor:e.iconOption.bgColor,color:e.iconOption.textColor||"#fff"}},[e._v(e._s(e.iconOption.text||""))]):"icon"==e.iconOption.type?t("i",{class:[e.iconOption.icon?e.iconOption.icon:"","tag"],style:{color:e.iconOption.textColor||"#333"}}):t("img",{staticClass:"tag",attrs:{src:e.iconOption.url}}),e.value?t("span",{staticStyle:{"margin-right":"30px","font-size":"12px"}},[e._v(" "+e._s(e.value)+" ")]):e._e()]):e._e()},n=[],s={props:{value:{type:String,default:""},iconOption:{type:Object,default:function(){return null}},boxStyle:{type:Object,default:function(){return{}}}}},r=s,o=(a("1bb4"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"3246e4bc",null);t["default"]=l.exports},fce6:function(e,t,a){"use strict";a("0d11")},fd08:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"600px",title:~e.rowId?"编辑空间":"新增空间",visible:e.isShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"所在房间",prop:"path"}},[t("el-input",{attrs:{placeholder:"请输入所在房间",disabled:""},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"空间名称",prop:"spaceName"}},[t("el-input",{attrs:{placeholder:"请输入空间名称",disabled:!!~e.rowId},model:{value:e.form.spaceName,callback:function(t){e.$set(e.form,"spaceName",t)},expression:"form.spaceName"}})],1)],1),2==e.useType?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"空间类型",prop:"spaceSubType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择空间类型",clearable:""},model:{value:e.form.spaceSubType,callback:function(t){e.$set(e.form,"spaceSubType",t)},expression:"form.spaceSubType"}},e._l(e.subTypeList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1):e._e(),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"空间面积",prop:"spaceArea"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入空间面积",disabled:2==e.useType},model:{value:e.form.spaceArea,callback:function(t){e.$set(e.form,"spaceArea",t)},expression:"form.spaceArea"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"预租单价",prop:"leasePrice"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入预租单价"},model:{value:e.form.leasePrice,callback:function(t){e.$set(e.form,"leasePrice",t)},expression:"form.leasePrice"}},[t("template",{slot:"append"},[e._v("元")])],2)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"空间介绍"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入空间介绍"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e.showFacil?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"启用状态"}},[t("el-radio-group",{model:{value:e.form.applyStatus,callback:function(t){e.$set(e.form,"applyStatus",t)},expression:"form.applyStatus"}},[t("el-radio",{attrs:{label:"0"}},[e._v("启用")]),t("el-radio",{attrs:{label:"1"}},[e._v("禁用")])],1)],1)],1):e._e(),e.showFacil?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"原配设施"}},[t("el-select",{ref:"installationBasic",staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",placeholder:"请选择",clearable:""},model:{value:e.form.installationBasic,callback:function(t){e.$set(e.form,"installationBasic",t)},expression:"form.installationBasic"}},e._l(e.facilList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1):e._e(),e.showFacil?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"增配设施"}},[t("el-select",{ref:"installationExtra",staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",placeholder:"请选择",clearable:""},model:{value:e.form.installationExtra,callback:function(t){e.$set(e.form,"installationExtra",t)},expression:"form.installationExtra"}},e._l(e.facilList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1):e._e()],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保 存")])],1)],1)},n=[],s=a("5530"),r=(a("d81d"),a("e9c4"),a("a9e3"),a("b64b"),a("ab39")),o=(a("cb37"),{props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}},rowId:{type:String|Number,required:!0},roomId:{type:String,default:""},showFacil:{type:Boolean,default:!0},houseTypeList:{type:Array},useType:String|Number},data:function(){return{isShow:!1,loading:!1,form:{},rules:{spaceName:[{required:!0,message:"空间名称不能为空",trigger:"blur"}],spaceSubType:[{required:!0,message:"空间类型不能为空",trigger:"change"}],spaceArea:[{required:!0,message:"空间面积不能为空",trigger:"blur"}],leasePrice:[{required:!0,message:"预租单价不能为空",trigger:"blur"}]},facilList:[],subTypeList:[]}},watch:{value:function(e){var t=this;if(this.isShow=e,e)if(this.$refs["form"]&&this.$refs["form"].resetFields(),~this.rowId)Object(r["i"])({id:this.rowId}).then((function(e){var a=e.data;t.enterParam.roomData.path?a.path=t.enterParam.roomData.path:a.path=a.spaceCode;var i=function(e){try{var t=JSON.parse(a[e]);a[e]=t.map((function(e){return e.code}))}catch(i){a[e]=[]}};i("installationBasic"),i("installationExtra");var n=t.enterParam.roomData;a.houseType=n.houseType,t.form=a}));else{var a=this.enterParam.roomData;this.form=Object(s["a"])(Object(s["a"])({},a),{},{roomId:a.id,applyStatus:"0"}),console.log(this.form,"form")}},isShow:function(e){this.$emit("input",e)}},methods:{save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=function(t){e.$message.success("保存成功"),e.$emit("refresh"),e.loading=!1,e.hide()},i=Object(s["a"])({},e.form),n=function(t){i[t]&&i[t].length&&e.showFacil?i[t]=JSON.stringify(e.$refs[t].selected.map((function(e){return{code:e.value,name:e.label}}))):i[t]="[]"};i.useType=e.useType,n("installationBasic"),n("installationExtra"),~e.rowId?Object(r["g"])(i).then(a).catch((function(){return e.loading=!1})):Object(r["d"])(i).then(a).catch((function(){return e.loading=!1}))}}))},hide:function(){this.form={},this.isShow=!1}},created:function(){var e=this;this.getDicts({code:"area_installation"}).then((function(t){e.facilList=t.data.items||[]})),this.getDicts({code:"area_space_sub_type"}).then((function(t){e.subTypeList=t.data.items||[]}))}}),l=o,c=a("2877"),d=Object(c["a"])(l,i,n,!1,null,"d9ad0b62",null);t["default"]=d.exports}}]);