(window["webpackJsonp_finance"]=window["webpackJsonp_finance"]||[]).push([["chunk-96583b54"],{"0002":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{id:"size",title:"add"===e.opt?"新增押金收取":"edit"===e.opt?"编辑押金收取":"押金收取详情",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.diaClose}},[t("el-card",[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"editForm",attrs:{model:e.formData,rules:e.rules,"element-loading-text":"拼命加载中","label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"所属项目",prop:"areaId"}},[t("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择所属项目",clearable:"",disabled:"view"==e.opt},on:{change:e.changeArea},model:{value:e.formData.areaId,callback:function(t){e.$set(e.formData,"areaId",t)},expression:"formData.areaId"}},e._l(e.parks,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"客户类型",prop:"clienteleType"}},[t("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择客户类型",clearable:"",disabled:"view"==e.opt},on:{change:e.changeClienteleType},model:{value:e.formData.clienteleType,callback:function(t){e.$set(e.formData,"clienteleType",t)},expression:"formData.clienteleType"}},[t("el-option",{attrs:{label:"企业",value:1}}),t("el-option",{attrs:{label:"个人",value:2}})],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"合同编号",prop:"contractNo"}},[t("el-input",{attrs:{placeholder:"单击选择合同编号",disabled:"view"==e.opt},on:{focus:e.changeContract},model:{value:e.formData.contractNo,callback:function(t){e.$set(e.formData,"contractNo",t)},expression:"formData.contractNo"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"客户名称",prop:"clienteleName"}},[t("el-input",{attrs:{placeholder:"选择合同自动带出",disabled:""},model:{value:e.formData.clienteleName,callback:function(t){e.$set(e.formData,"clienteleName",t)},expression:"formData.clienteleName"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"押金类型",prop:"depositType"}},[t("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择押金类型",disabled:"view"==e.opt,clearable:""},model:{value:e.formData.depositType,callback:function(t){e.$set(e.formData,"depositType",t)},expression:"formData.depositType"}},e._l(e.depositList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"收款方",prop:"payeeId"}},[t("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择收款方",disabled:"view"==e.opt,clearable:""},on:{change:e.changePayee},model:{value:e.formData.payeeId,callback:function(t){e.$set(e.formData,"payeeId",t)},expression:"formData.payeeId"}},e._l(e.payeeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.payeeName,value:e.id}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"押金总额",prop:"money"}},[t("n-input",{attrs:{placeholder:"请输入押金总额",disabled:"view"==e.opt,min:0,maxlength:11},model:{value:e.formData.money,callback:function(t){e.$set(e.formData,"money",t)},expression:"formData.money"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"凭证文件"}},[t("ns-file-upload",{staticStyle:{width:"100%"},attrs:{busSubType:9011,token:e.getToken(),fileList:e.fileList,hidden:"view"==e.opt,showViewer:!0,downloadFunc:e.dFile,uploadUrl:e.getBaseApi()}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入备注",disabled:"view"==e.opt,maxlength:200},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.diaClose()}}},[e._v("取消")]),"view"!=e.opt?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("提交")]):e._e()],1)],1),t("pactDialog",{attrs:{areaId:e.formData.areaId,type:e.formData.clienteleType},on:{getApplayNo:e.getApplayNo},model:{value:e.viewVisible,callback:function(t){e.viewVisible=t},expression:"viewVisible"}})],1)},n=[],r=(a("4de4"),a("7db0"),a("a15b"),a("d81d"),a("b0c0"),a("e9c4"),a("b64b"),a("d3b7"),a("924f")),s=a("48c1"),l=a("6452"),o=a("7602"),c=a("5f87"),d=a("0b2d"),u=a("39cc"),m={components:{NInput:s["a"],custDialog:l["default"],pactDialog:r["default"]},props:{value:{type:Boolean,required:!0},opt:{type:String,required:!0},enterParams:{type:Object,default:function(){return null}}},computed:{parks:function(){return Object(c["a"])()}},watch:{value:function(e){var t=this;e&&(this.isShow=e,this.loading=!1,this.fileList=[],this.formData={areaId:null,areaName:null,clienteleId:null,depositType:null,clienteleName:null,clienteleType:1,contractId:null,contractNo:null,depositNo:null,id:null,money:null,remark:null,voucherFile:null,payeeId:null,payeeName:null},this.$nextTick((function(){t.$refs.editForm&&t.$refs.editForm.resetFields()})),"add"!==this.opt&&this.getDetail())},isShow:function(e){this.$emit("input",e)},formData:{handler:function(e){e.areaId&&(this.areaId,e.areaId)},deep:!0}},data:function(){return{loading:!1,isShow:!1,fileList:[],formData:{areaId:null,areaName:null,clienteleId:null,clienteleName:null,depositType:null,clienteleType:1,contractId:null,contractNo:null,depositNo:null,id:null,money:null,remark:null,voucherFile:null},rules:{areaId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],clienteleType:[{required:!0,message:"客户类型不能为空",trigger:"change"}],depositType:[{required:!0,message:"客户类型不能为空",trigger:"change"}],payeeId:[{required:!0,message:"收款方不能为空",trigger:"change"}],clienteleName:[{required:!0,message:"客户名称不能为空",trigger:"change"}],money:[{required:!0,message:"押金总额不能为空",trigger:"blur"}],contractNo:[{required:!0,message:"合同编号不能为空",trigger:"change"}]},custDiaShow:!1,viewVisible:!1,depositList:[],payeeList:[]}},created:function(){var e=this;this.getDicts({code:"deposit_type"}).then((function(t){0==t.code&&(e.depositList=t.data.items?t.data.items.map((function(e){return e.value=e.code,e.label=e.name,e})):[])}))},methods:{getApplayNo:function(e){console.log("getApplayNo",e),this.formData.contractNo=e.contractNo,this.formData.contractId=e.id,1==this.formData.clienteleType?(this.formData.clienteleName=e.entName,this.formData.clienteleId=e.entId):(this.formData.clienteleName=e.applyUserRealName,this.formData.clienteleId=e.applyUserId),this.formData.money=e.earnestAmount},changeContract:function(){this.formData.areaId?this.formData.clienteleType?this.viewVisible=!0:this.$message.warning("请选择客户类型"):this.$message.warning("请选择所属项目")},clickClient:function(){this.formData.clienteleType?(this.custDiaShow=!0,console.log(this.custDiaShow,"custDiaShow")):this.$message.warning("请选择客户类型")},getToken:c["d"],getBaseApi:function(){return"/prod-api"},dFile:function(e){Object(d["a"])(e.fileId,e.fileName)},changeClienteleType:function(){this.formData.clienteleId=null,this.formData.clienteleName=null,this.formData.contractNo=null,this.formData.contractId=null},getDetail:function(){var e=this;console.log("进来了？？？"),this.$nextTick((function(){var t=e.enterParams,a=t.areaId,i=t.areaName,n=t.clienteleId,r=t.clienteleName,s=t.depositType,l=t.clienteleType,o=t.contractId,c=t.contractNo,d=t.depositNo,u=t.id,m=t.money,f=t.remark,p=t.payeeId,h=t.payeeName;e.formData={areaId:a,areaName:i,clienteleId:n,clienteleName:r,depositType:s,clienteleType:l,contractId:o,contractNo:c,depositNo:d,id:u,money:m,remark:f,payeeId:p,payeeName:h},e.enterParams.voucherFileList&&e.enterParams.voucherFileList.length>0&&(e.fileList=e.enterParams.voucherFileList.map((function(e){return e.fileId=e.id,e}))),e.changeArea(e.formData.areaId),console.log(e.formData,e.enterParams)}))},changeArea:function(e){var t=this.parks.find((function(t){return t.areaId===e}));this.formData.areaName=t.areaName,this.getPayeeList(this.formData.areaId)},getPayeeList:function(e){var t=this;e||(this.payeeList=[]),Object(u["F"])({areaId:e}).then((function(e){0==e.code&&(t.payeeList=e.data,t.formData.areaId&&t.payeeList.filter((function(e){return e.id==t.formData.payeeId})).length<1&&(t.formData.payeeId=null,t.formData.payeeName=null))}))},changePayee:function(e){var t=this.payeeList.find((function(t){return t.id===e}));this.formData.payeeName=t.payeeName},diaClose:function(){this.formData={},this.isShow=!1,this.$refs.editForm.resetFields()},save:function(){var e=this;this.$refs.editForm.validate((function(t){if(t){e.loading=!0;var a=function(t){e.loading=!1,0===t.code?(e.$message.success("保存成功"),e.diaClose(),e.$emit("refresh")):e.$message.error(t.msg)},i=JSON.parse(JSON.stringify(e.formData));e.fileList.length>0&&(i.voucherFile=e.fileList.map((function(e){return e.fileId})).join(",")),"edit"===e.opt?Object(o["c"])(i).then(a).catch((function(){e.loading=!1})):Object(o["a"])(i).then(a).catch((function(){e.loading=!1}))}}))}}},f=m,p=(a("2128"),a("2877")),h=Object(p["a"])(f,i,n,!1,null,"2dda284e",null);t["default"]=h.exports},"0013":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t(e.subComponent,{tag:"component",attrs:{enterParams:e.subParams,forward:e.navigat}})],1)},n=[],r=a("3bf4"),s=a("8fdc"),l=a("bb27"),o=a("92d7"),c=a("f7af"),d=a("c23b"),u={components:{List:r["default"],Form:s["default"],FormDetail:l["default"],ViewForm:c["default"],subBill:o["default"],FormOld:d["default"]},data:function(){return{subComponent:"List",subParams:{}}},methods:{navigat:function(e,t){this.subComponent=e,this.subParams=t||{}}}},m=u,f=(a("eb3f"),a("2877")),p=Object(f["a"])(m,i,n,!1,null,"b91c2c38",null);t["default"]=p.exports},"0020":function(e,t,a){"use strict";a("4117")},"00a7":function(e,t,a){},"037c":function(e,t,a){"use strict";a("6103")},"0658":function(e,t,a){},"066d":function(e,t,a){},"0687":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("b680");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-card",{staticStyle:{"margin-bottom":"10px"}},[t("div",[t("span",{staticStyle:{"font-size":"16px","font-weight":"bold","margin-right":"20px"}},[e._v(" 项目")]),t("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择项目"},on:{change:e.handleChange},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),t("el-card",[t("search",{attrs:{index:1,title:"收费概况",dateArr:e.feeinfo},on:{getChartsData:e.getChartsData}}),t("div",{staticClass:"flex-around"},e._l(e.feeInfoList,(function(a){return t("div",{key:a.name,staticClass:"flex-around"},[t("img",{attrs:{src:a.img,alt:""}}),t("div",{staticClass:"content"},[t("div",{staticClass:"price"},[e._v("￥"+e._s(a.value.toFixed(2)))]),t("div",{staticClass:"text"},[e._v(e._s(a.name))])])])})),0)],1),t("el-card",{staticClass:"mt_20"},[t("search",{attrs:{index:5,title:"平均租金统计",dateArr:e.monthList},on:{getChartsData:e.getChartsData}}),t("div",{ref:"avgCharts",attrs:{id:"avgCharts"}})],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-card",{staticClass:"mt_20"},[t("search",{attrs:{index:2,title:"按费项收缴率",dateArr:e.feeitems},on:{getChartsData:e.getChartsData}}),t("div",{ref:"feeitemsCharts",attrs:{id:"feeitemsCharts"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-card",{staticClass:"mt_20"},[t("search",{attrs:{index:3,title:"按业务收缴率",dateArr:e.subjectmattertype},on:{getChartsData:e.getChartsData}}),t("div",{ref:"subjectmattertypeCharts",attrs:{id:"subjectmattertypeCharts"}})],1)],1)],1),t("el-card",{staticClass:"mt_20"},[t("search",{attrs:{index:4,title:"按账期收缴率",dateArr:e.month},on:{getChartsData:e.getChartsData}}),t("div",{ref:"monthCharts",attrs:{id:"monthCharts"}})],1)],1)},n=[],r=(a("d81d"),a("e9c4"),a("b64b"),a("d3b7"),a("159b"),a("76bd")),s=a("b6a5"),l=a("c1df"),o=a.n(l),c=a("5f87"),d={name:"analysisAreaPage",props:{forward:Function},components:{search:s["default"]},data:function(){var e=r["j"];return{feeinfo:[],feeitems:[],subjectmattertype:[],month:[],monthList:[],areaList:[],areaId:null,feeInfoList:[{name:"应收金额",img:a("9c5c"),value:0},{name:"实收金额",img:a("1ba5"),value:0},{name:"未缴金额",img:a("7167"),value:0}],chartsList:[e,e,e]}},computed:{parks:function(){return Object(c["a"])()}},created:function(){var e=o()().format("YYYY-MM-DD"),t=o()().add(1,"M").format("YYYY-MM-DD");this.feeinfo[0]=e,this.feeinfo[1]=t,this.feeitems[0]=e,this.feeitems[1]=t,this.subjectmattertype[0]=e,this.subjectmattertype[1]=t,this.month[0]=e,this.month[1]=t,this.monthList[0]=o()().subtract(1,"year").format("YYYY-MM-DD"),this.monthList[1]=e},mounted:function(){this.getAreaList()},methods:{getAreaList:function(){var e=JSON.parse(JSON.stringify(this.parks));this.areaList=e.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),this.areaList.length>0&&(this.areaId=this.areaList[0].id,this.handleChange())},handleChange:function(){this.getFeeinfo(),this.getFeeitems(),this.getSubjectmattertype(),this.getMonth(),this.getAmtAvg()},getFeeinfo:function(){var e=this,t={startDate:this.feeinfo[0],endDate:this.feeinfo[1],areaId:this.areaId};Object(r["f"])(t).then((function(t){return e.callBack(t,1)}))},getFeeitems:function(){var e=this,t={startDate:this.feeitems[0],endDate:this.feeitems[1],areaId:this.areaId};Object(r["g"])(t).then((function(t){return e.callBack(t,2)}))},getSubjectmattertype:function(){var e=this,t={startDate:this.subjectmattertype[0],endDate:this.subjectmattertype[1],areaId:this.areaId};Object(r["i"])(t).then((function(t){return e.callBack(t,3)}))},getMonth:function(){var e=this,t={startDate:this.month[0],endDate:this.month[1],areaId:this.areaId};Object(r["h"])(t).then((function(t){return e.callBack(t,4)}))},getAmtAvg:function(){var e=this,t={beginTime:this.monthList[0],endTime:this.monthList[1],areaIds:[this.areaId]};Object(r["e"])(t).then((function(t){return e.callBack(t,5)}))},getChartsData:function(e,t){switch(e){case 1:this.feeinfo[0]=t[0],this.feeinfo[1]=t[1],this.getFeeinfo(t);break;case 2:this.feeitems[0]=t[0],this.feeitems[1]=t[1],this.getFeeitems();break;case 3:this.subjectmattertype[0]=t[0],this.subjectmattertype[1]=t[1],this.getSubjectmattertype();break;case 4:this.month[0]=t[0],this.month[1]=t[1],this.getMonth();break;case 5:this.monthList[0]=t[0],this.monthList[1]=t[1],this.getAmtAvg();break}},callBack:function(e,t){if(0==e.code)if(1==t)this.feeInfoList[0].value=e.data.receivableAmtSum,this.feeInfoList[1].value=e.data.receiptAmtSum,this.feeInfoList[2].value=e.data.pendingAmtSum;else switch(t){case 2:this.filterArr(e.data,0);var a=this.$echarts.init(document.getElementById("feeitemsCharts"));a.setOption(this.chartsList[0]);break;case 3:var i=[];e.data.forEach((function(e){"房源"!==e.subjectMatterTypeName&&("孵化空间"==e.subjectMatterTypeName&&(e.subjectMatterTypeName="商办空间"),i.push(e))})),this.filterArr(i,1);var n=this.$echarts.init(document.getElementById("subjectmattertypeCharts"));n.setOption(this.chartsList[1]);break;case 4:this.filterArr(e.data,2);var r=this.$echarts.init(document.getElementById("monthCharts"));r.setOption(this.chartsList[2]);break;case 5:console.log(e.data,"=====>>>");var s=this.$echarts.init(document.getElementById("avgCharts")),l=JSON.parse(JSON.stringify(e.data)),o={xAxis:{data:l.map((function(e){return e.monthStr}))},tooltip:{trigger:"axis"},yAxis:{type:"value"},series:[{data:l.map((function(e){return e.amtAvg})),label:{show:!0,position:"top",formatter:function(e){return Math.round(100*e.value)/100}},tooltip:{valueFormatter:function(e){return Math.round(100*e)/100+" 元/平方/月"}},type:"line",smooth:!0}]};s.setOption(o);break}},filterArr:function(e,t){var a={xDat:[],receiptAmtSumList:[],pendingAmtSumList:[],jaofei:[]};e.forEach((function(e){a.xDat.push(0==t?e.itemName:1==t?e.subjectMatterTypeName:o()(e.monthValue).format("MM月")),a.receiptAmtSumList.push(e.receiptAmtSum),a.pendingAmtSumList.push(e.pendingAmtSum);var i=e.receiptAmtSum/e.receivableAmtSum*100;a.jaofei.push(isNaN(i)?0:i)})),this.chartsList[t].xAxis.data=a.xDat,this.chartsList[t].series[0].data=a.receiptAmtSumList,this.chartsList[t].series[1].data=a.pendingAmtSumList,this.chartsList[t].series[2].data=a.jaofei}}},u=d,m=(a("0020"),a("2877")),f=Object(m["a"])(u,i,n,!1,null,"56bbdba2",null);t["default"]=f.exports},"09bb":function(e,t,a){"use strict";a.r(t);a("498a");var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"20px"}},[t("el-form",{ref:"editForm",attrs:{model:e.form,"label-width":"0px",rules:e.rules}},[t("el-form-item",{attrs:{prop:"remark"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark","string"===typeof t?t.trim():t)},expression:"form.remark"}})],1)],1),t("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",size:"mini"},on:{click:e.saveConfig}},[e._v("保存")])],1)},n=[],r=(a("4de4"),a("d3b7"),a("1066")),s={data:function(){return{form:{remark:""},rules:{remark:[{required:!0,message:"账单备注不为空",trigger:"blur"}]}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["b"])({type:1}).then((function(t){if(0==t.code){var a=t.data.filter((function(e){return"Bill_Comment"===e.id}));console.log("temp: ",a),e.form.remark=a[0].value}}))},saveConfig:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$confirm("确认要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:"Bill_Comment",type:1,value:e.form.remark},a=[t];Object(r["a"])({items:a}).then((function(t){0===t.code?e.$message.success("保存成功!"):e.$message.error(t.msg)}))}))}))}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},"09dc":function(e,t,a){},"0a20":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var i=a("b775"),n=function(e){return Object(i["a"])({url:"/adm-service/bes/bent/contract/list/audited",method:"post",data:e})},r=function(e){return Object(i["a"])({url:"/adm-service/bes/staff/apply/list/audited",method:"post",data:e})}},"0c1e":function(e,t,a){},"0c37":function(e,t,a){e.exports=a.p+"static/img/pass.8d7e6074.png"},"0c7b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"预览",visible:e.isShow,width:"1000px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.isShow=t},close:e.cancel}},[t("div",{staticStyle:{display:"grid","place-items":"center"}},[t("div",{staticStyle:{width:"800px"}},[t("p",{staticStyle:{"font-size":"24px","font-weight":"bold","text-align":"center"}},[e._v("缴费通知单")]),t("div",{staticStyle:{"margin-left":"20px"}},[t("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[e._v("深圳市巨人科技有限公司")]),t("div",{staticStyle:{"font-size":"13px"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("div",{staticStyle:{width:"70px","text-align":"justify",height:"20px","line-height":"20px"}},[e._v("收款单位 "),t("span",{staticStyle:{display:"inline-block","padding-left":"100%"}})]),t("div",[t("span",{staticStyle:{"margin-right":"8px"}},[e._v(":")]),e._v(e._s(e.form.collectionUnit))])]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("div",{staticStyle:{width:"70px","text-align":"justify",height:"20px","line-height":"20px"}},[e._v("开户行 "),t("span",{staticStyle:{display:"inline-block","padding-left":"100%"}})]),t("div",[t("span",{staticStyle:{"margin-right":"8px"}},[e._v(":")]),e._v(e._s(e.form.openingBank))])]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("div",{staticStyle:{width:"70px","text-align":"justify",height:"20px","line-height":"20px"}},[e._v("账号 "),t("span",{staticStyle:{display:"inline-block","padding-left":"100%"}})]),t("div",[t("span",{staticStyle:{"margin-right":"8px"}},[e._v(":")]),e._v(e._s(e.form.bankNumber))])])]),t("div",{staticStyle:{"font-size":"13px","margin-top":"8px","white-space":"pre-wrap"}},[e._v(e._s(e.form.invoiceRemark))]),t("p",{staticStyle:{"font-size":"14px","font-weight":"bold","text-align":"center"}},[e._v("应缴费用明细")]),t("table",{staticStyle:{"border-collapse":"collapse","border-color":"#e8e8e8","font-size":"13px"},attrs:{border:"1",width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("td",{staticStyle:{padding:"12px 20px"},attrs:{width:"120"}},[e._v("计费面积")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("884.97m²")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("财务房号")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("A座1905-1907")])]),t("tr",[t("td",{staticStyle:{padding:"12px 20px"},attrs:{colspan:"4"}},[e._v("总计费用 大写: 伍万叁千元整 "),t("span",{staticStyle:{float:"right"}},[e._v("小写: ￥53000.00元")])])])]),t("table",{staticStyle:{"border-collapse":"collapse","border-color":"#e8e8e8","font-size":"13px","margin-top":"-1px"},attrs:{border:"1",width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("td",{staticStyle:{padding:"12px 20px"}},[e._v("月份")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("孵化服务费")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("其他费用")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("网络费")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("应缴保证金")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("本月滞纳金")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("合计")])]),t("tr",[t("td",{staticStyle:{padding:"12px 20px"}},[e._v("2023.10")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("1000.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("0.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("10.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("0.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("0.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("1000.00")])]),t("tr",[t("td",{staticStyle:{padding:"12px 20px"}},[e._v("合计")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("1000.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("0.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("10.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("0.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("0.00")]),t("td",{staticStyle:{padding:"12px 20px"}},[e._v("1000.00")])])]),t("p",{staticStyle:{"font-size":"13px","white-space":"pre-wrap"}},[e._v(e._s(e.form.billRemark))]),t("div",{staticStyle:{"margin-top":"100px","margin-left":"50%",display:"flex","flex-direction":"column","align-items":"center","font-size":"14px"}},[t("div",[e._v(e._s(e.form.inscribeEnt))]),t("div",[e._v(e._s(e.form.inscribeDept))]),t("div",[e._v(e._s(e.nowDate))])])])])]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v("关 闭")])],1)])},n=[],r=(a("b64b"),a("ac1f"),a("5319"),a("c1df")),s=a.n(r),l={props:{value:{type:Boolean,required:!0},enterParams:String},watch:{value:function(e){e&&(this.isShow=e)},isShow:function(e){this.$emit("input",e)},enterParams:{handler:function(e){e&&(this.nowDate=s()().format("YYYY-MM-DD"),this.form=JSON.parse(e),this.form.invoiceRemark=this.textFormat(this.form.invoiceRemark))},immediate:!0}},data:function(){return{isShow:!1,form:{},nowDate:""}},methods:{cancel:function(){this.isShow=!1,this.$emit("close")},textFormat:function(e){if(e){var t=e.replace(/\n/g,"_@").replace(/\r/g,"_#");return t=t.replace(/_#_@/g,"<br/>"),t=t.replace(/_@/g,"<br/>"),t=t.replace(/\s/g,"&nbsp;"),t}}}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,"47da43f2",null);t["default"]=d.exports},"0d78":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-ar-panel settle-panel"},[t("div",{staticClass:"text-title mt-20 item-title"},[e._v("账单清算（应收、应退清算）")]),e.editMode?t("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.handleAddBill}},[e._v(" 新增")]):e._e(),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.source,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{label:"账期",align:"center",prop:"billDate"}}),t("el-table-column",{attrs:{label:"缴费状态",align:"center",prop:"payStatus"},scopedSlots:e._u([{key:"default",fn:function(a){return[2===a.row.payStatus?t("el-tag",{attrs:{type:"success"}},[e._v("已缴")]):1===a.row.payStatus?t("el-tag",{attrs:{type:"danger"}},[e._v("欠费")]):0===a.row.payStatus?t("el-tag",{attrs:{type:"danger"}},[e._v("未缴")]):3===a.row.payStatus?t("el-tag",{attrs:{type:"warning"}},[e._v("部分已缴")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"项目-楼栋-单元",align:"center",prop:"buildingJoinName"}}),t("el-table-column",{attrs:{label:"楼层-房间-空间",align:"center",prop:"roomJoinName"}}),t("el-table-column",{attrs:{label:"账单组",align:"center",prop:"groupName"}}),t("el-table-column",{attrs:{label:"应收金额(元)",align:"center",prop:"receivableAmt",formatter:e.formatterNum}}),t("el-table-column",{attrs:{label:"减免金额(元)",align:"center",prop:"reduceAmt",formatter:e.formatterNum}}),t("el-table-column",{attrs:{label:"已收金额(元)",align:"center",prop:"receiptAmt",formatter:e.formatterNum}}),t("el-table-column",{attrs:{label:"未收金额(元)",align:"center",prop:"pendingAmt",formatter:e.formatterNum}}),t("el-table-column",{attrs:{label:"计费周期",align:"center",prop:"billDate"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.billPeriodStart)+" ~ "+e._s(a.row.billPeriodEnd))])]}}])}),t("el-table-column",{attrs:{label:"清算类型"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.row.settleBillType,callback:function(t){e.$set(a.row,"settleBillType",t)},expression:"scope.row.settleBillType"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{disabled:2===a.row.payStatus&&1==e.value,label:e.label,value:e.value}})})),1):t("span",[e._v(" "+e._s(e.filterType(a.row.settleBillType))+" ")])]}}])}),t("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input",{attrs:{type:"textarea",rows:2,maxlength:"200",placeholder:"请输入备注"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark",t)},expression:"scope.row.remark"}}):t("span",[e._v(" "+e._s(a.row.remark)+" ")])]}}])}),e.editMode?t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}],null,!1,1533960948)}):e._e()],1),t("div",{staticClass:"tableBorderBox"},[e._v(" 账单应收："+e._s(e.priceTotal[0].billArAmount)+" "),t("span",{staticStyle:{padding:"0 20px"}},[e._v(" 账单应付："+e._s(e.priceTotal[0].billApAmount)+" ")]),e._v(" 账单坏账："+e._s(e.priceTotal[0].billBadAmount)+" ")])],1)},n=[],r=(a("7db0"),a("d81d"),a("13d5"),a("a434"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),{props:{source:{type:Array,default:function(){return[]}},editMode:{type:Boolean,default:!1},priceTotal:{type:Array,default:function(){return[]}}},computed:{},data:function(){return{options:[{label:"应收",value:1},{label:"应付",value:2},{label:"坏账",value:3}]}},methods:{handleAddBill:function(){this.$emit("addBill")},filterType:function(e){return this.options.find((function(t){return t.value==e})).label},handleDelete:function(e){this.source.splice(e,1)},formatterNum:function(e,t){return e[t.property]?(+e[t.property]||0).toFixed(2):0},getTotal:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(0!==t){if("amount"==e.property){var n=a.map((function(t){return Number(t[e.property])}));n.every((function(e){return isNaN(e)}))?i[t]="":i[t]=n.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),i[t]=i[t]?i[t].toFixed(2):0}}else i[t]="合计"})),i}}}),s=r,l=(a("11bc"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"0946b4a1",null);t["default"]=o.exports},"0f1f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%",padding:"20px","box-sizing":"border-box"}},[t("RentControl"),t("Fund"),t("Rent"),t("Energy"),t("CompanyEnergy")],1)},n=[],r=a("d2b6"),s=a("97c4"),l=a("8851"),o=a("63bb"),c=a("2344"),d={components:{RentControl:r["default"],Rent:s["default"],Fund:l["default"],Energy:o["default"],CompanyEnergy:c["default"]},data:function(){return{}}},u=d,m=a("2877"),f=Object(m["a"])(u,i,n,!1,null,null,null);t["default"]=f.exports},"0f30":function(e,t,a){"use strict";a("f923")},"0fa0":function(e,t,a){},1066:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));var i=a("b775"),n={settingList:"/adm-service/finance/setting/list",saveSetting:"/adm-service/finance/setting/save"},r=function(e){return i["a"].post(n.settingList,e)},s=function(e){return i["a"].post(n.saveSetting,e)}},"11bc":function(e,t,a){"use strict";a("aa87")},1767:function(e,t,a){},"18a1":function(e,t,a){},"1ba5":function(e,t,a){e.exports=a.p+"static/img/ss.2a0ffc9f.png"},"1c10":function(e,t,a){"use strict";a("b49d")},"1d8b":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.vis,title:"收据列表",width:"900px","custom-class":"borderDialog","show-close":!1},on:{"update:visible":function(t){e.vis=t}}},[t("div",[t("el-table",{attrs:{border:"",data:e.dataList}},[t("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"receiptCode",label:"收据编号"}}),t("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"money",label:"已收金额"}}),t("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"drawer",label:"开票人"}}),t("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"finance",label:"财务"}}),t("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"agent",label:"经手人"}}),t("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.status?"正常":2==t.row.status?"已作废":"")+" ")]}}])}),t("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"createUserName",label:"操作人"}}),t("el-table-column",{attrs:{"header-align":"center",align:"center",width:"100px",prop:"createTime",label:"开具时间"}}),t("el-table-column",{attrs:{"header-align":"center",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.hanldeView(a.row)}}},[e._v("查看")])]}}])})],1)],1),t("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.vis=!1}}},[e._v("取消")])],1),t("lssueReceiptDialog",{attrs:{contractInfo:{},billId:e.curRow&&e.curRow.boundId,receiptType:e.curRow.receiptType,status:e.curRow.status,receiptCode:e.curRow.receiptCode,type:"view"},model:{value:e.showReceipt,callback:function(t){e.showReceipt=t},expression:"showReceipt"}})],1)},n=[],r=(a("c1df"),a("33a1")),s={components:{lssueReceiptDialog:r["a"]},props:{value:{type:Boolean,required:!0},dataList:{type:Array,default:function(){return[]}}},data:function(){return{showReceipt:!1,curRow:{}}},computed:{vis:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{hanldeView:function(e){console.log(e),this.curRow=e,this.showReceipt=!0}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["a"]=c.exports},"1dc6":function(e,t,a){},"1eb8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"800px",title:"新增收费方案",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("div",[t("span",{staticClass:"text-nav"},[t("i",{staticClass:"el-icon-location-outline"}),e._v(" "+e._s(e.enterParam.path))])]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"selectMultipleTable",staticStyle:{"margin-top":"5px"},attrs:{"row-key":"id",data:e.dataList},on:{"selection-change":e.handleMultipleSelected}},[t("el-table-column",{attrs:{"reserve-selection":!0,type:"selection",width:"50",align:"center"}}),t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return e._l(a.row.formulaList,(function(a,i){return t("el-descriptions",{key:i,attrs:{column:2,size:"small",border:"",labelStyle:{width:"100px","text-align":"left"},contentStyle:{"word-break":"break-all"}}},[t("el-descriptions-item",[t("template",{slot:"label"},[e._v("计算公式")]),e._v(" "+e._s(a.formulaView)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[e._v("计算条件")]),e._v(" "+e._s(a.conditionView)+" ")],2)],1)}))}}])}),t("el-table-column",{attrs:{label:"收费项名称",align:"center",prop:"itemName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"费项分类",align:"center",prop:"expName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"计费周期",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("billFilter")(t.row.billCycle))+" ")]}}])}),t("el-table-column",{attrs:{label:"计算标准",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"==t.row.standard?"公式":"一房一价")+" ")]}}])}),t("el-table-column",{attrs:{label:"出账规则",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(("1"==t.row.billing?"按天数":"按日期")+"/"+e.cycleFilter(t.row.billingCycle)+"/"+("1"==t.row.billing?"第"+t.row.billingDay+"天":t.row.billingDate+"号"))+" ")]}}])}),t("el-table-column",{attrs:{label:"最晚缴款日",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(("1"==t.row.lasting?"按天数":"按日期")+"/出账单日后/"+("1"==t.row.lasting?"第"+t.row.lastDay+"天":t.row.lastDate+"号"))+" ")]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)],1)},n=[],r=a("c7eb"),s=a("1da1"),l=(a("d81d"),a("e9c4"),a("b64b"),a("39cc")),o=a("bfec"),c=a("cb37"),d={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},filters:{billFilter:function(e){var t={year:"年",quarter:"季度",moons:"双月",month:"月",day:"日"};return t[e]}},data:function(){return{isShow:!1,loading:!1,total:0,dataList:[],queryParams:{pageNum:1,pageSize:10,areaId:void 0},selectedList:[]}},watch:{value:function(e){this.isShow=e,e&&(this.queryParams.areaId=this.enterParam.areaId,this.handleQuery())},isShow:function(e){this.$emit("input",e)}},created:function(){},methods:{cycleFilter:function(e){var t={1:"周期前",2:"周期",3:"周期后"};return t[e]},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(l["m"])(this.queryParams).then((function(t){e.loading=!1,0==t.code?(e.total=t.data.total,e.dataList=t.data.items):e.$message.error(t.msg)})).catch((function(){e.loading=!1}))},handleMultipleSelected:function(e){this.selectedList=e.map((function(e){return{itemId:e.id,itemName:e.itemName,standard:e.standard}}))},submit:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.selectedList.length){t.next=3;break}return e.$message.info("请选择收费项！"),t.abrupt("return");case 3:return a=JSON.parse(JSON.stringify(e.enterParam)),t.next=6,Object(c["d"])(a);case 6:i=t.sent,0==i.code?e.$confirm("本次新增将影响 "+i.data.num+" 户房源, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.itemReqList=e.selectedList,Object(o["a"])(a).then((function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refreshList"),e.hide()):e.$message.error(t.msg)}))})):e.$message.error(i.msg);case 8:case"end":return t.stop()}}),t)})))()},hide:function(){this.isShow=!1,this.resetForm("form"),this.form={},this.selectedList=[],this.$refs.selectMultipleTable.clearSelection()}}},u=d,m=(a("6f5a"),a("2877")),f=Object(m["a"])(u,i,n,!1,null,"095d0a7f",null);t["default"]=f.exports},"1ffb":function(e,t,a){"use strict";a("2782")},2002:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=this,a=t._self._c;return a("ns-drawer",{attrs:{loading:t.loading,title:"账单详情","top-resume":{title:t.formData.cusName,list:[{label:"账单编码",value:t.formData.billCode},{label:"房号",value:t.formData.roomName},{label:"备注",value:t.formData.remark}]}},on:{close:function(){e.$emit("input",!1)}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"addWorkOrder_top"},[a("span",[t._v("查看账单基本信息:")]),a("div",[2==t.formData.payStatus?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(){t.$emit("addReceipt")}}},[t._v("开收据")]):a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confirmColl}},[t._v("确认收款")])],1)]),a("div",{staticClass:"custom-drawer-body"},[a("div",{staticClass:"custom-drawer-list"},[a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("园区名称")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.areaName)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("楼栋名称")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.buildingName)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("楼层名称")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.floorName)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("房间名称")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.roomName)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("计费周期")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.billPeriodStart+"-"+t.formData.billPeriodEnd)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("已收金额")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.recAmount)))])])])]),t.formData.detailList?a("div",{staticClass:"custom-drawer-body"},[a("ns-table",{ref:"bxzTable",attrs:{data:t.formData.detailList,columns:t.columns,isShowPagination:!1,highlightCurrentRow:!1}})],1):t._e()])},n=[],r=a("c7eb"),s=a("1da1"),l=(a("a9e3"),a("d3b7"),a("376f")),o={props:{value:{type:Boolean,required:!0},rowId:{type:String|Number,require:!0}},watch:{value:function(e){this.show=e,e&&this.getDetail(this.rowId)}},data:function(){return{loading:!1,show:!1,formData:{},columns:[{name:"费项",desc:"itemName"},{name:"金额",desc:"itemAmount",format:!0},{name:"不含税金额",desc:"itemAmount2",format:!0},{name:"税额",desc:"taxAmount",format:!0},{name:"调整方式",desc:"adjustType",filter:function(e){var t=["无调整","上调百分比","下调百分比","上调固定金额","下调固定金额"];return t[e]?t[e]:"--"},width:"100px"},{name:"调整率",desc:"adjustRate"},{name:"调整金额",desc:"adjustAmount",format:!0},{name:"调整后金额",desc:"adjustedAmount1",format:!0},{name:"调整后不含税金额",desc:"adjustedAmount2",format:!0},{name:"滞纳金",desc:"lateAmount",format:!0},{name:"应收金额",desc:"oreaAmount",format:!0},{name:"已收金额",desc:"recAmount",format:!0}]}},methods:{getDetail:function(e){var t=this;this.loading=!0,Object(l["r"])({id:e}).then(function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(a){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===a.code?t.formData=a.data:t.$message.error(a.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loading=!1}))},confirmColl:function(){var e=this;this.loading=!0,Object(l["d"])({id:this.formData.id}).then((function(t){0===t.code?(e.$message.success("确认成功"),e.getDetail(e.rowId),e.$emit("refresh")):e.$message.error(t.msg)})).finally((function(){e.loading=!1}))}}},c=o,d=(a("68d3"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"f3631a54",null);t["default"]=u.exports},"201a":function(e,t,a){"use strict";a("4702")},2128:function(e,t,a){"use strict";a("218c")},"218c":function(e,t,a){},2302:function(e,t,a){"use strict";var i=a("ed08");t["a"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},initListener:function(){var e=this;this.$_resizeHandler=Object(i["b"])((function(){e.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var e=this.chart;e&&e.resize()}}}},2344:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",[t("span",{staticClass:"echartTitle"},[e._v(" 企业用电分析 ")]),t("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"small",filterable:"",placeholder:"请选择项目"},on:{change:e.handleChange},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1),t("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{size:"small","value-format":"yyyy-MM",type:"month",placeholder:"请选择月份"},on:{change:e.handleChange},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),t("div",[t("el-button",{attrs:{type:"text"},on:{click:e.handleMore}},[e._v("更多 "),t("i",{staticClass:"el-icon-arrow-right"})])],1)]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"10px"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sourceData,border:""}},[t("el-table-column",{attrs:{prop:"cusName",align:"center",label:"客户名称"}}),t("el-table-column",{attrs:{prop:"qty",align:"center",label:"本期用电量（Kwh）"}}),t("el-table-column",{attrs:{prop:"beforeQty",align:"center",label:"上期用电量（Kwh）"}}),t("el-table-column",{attrs:{prop:"avgQty",align:"center",label:"过去6个月平均用电量（Kwh）",width:"210px"}}),t("el-table-column",{attrs:{prop:"chainRate",align:"center",label:"环比降低（%）",width:"120px"}}),t("el-table-column",{attrs:{label:"用电走势",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleView(a.row)}}},[e._v("查看")])]}}])})],1)],1),t("CompanyDataDialog",{attrs:{month:e.month,areaId:e.areaId},model:{value:e.showCompanyDataMore,callback:function(t){e.showCompanyDataMore=t},expression:"showCompanyDataMore"}}),t("EnergyDialog",{attrs:{areaId:e.areaId,curRow:e.curRow},model:{value:e.showEnergy,callback:function(t){e.showEnergy=t},expression:"showEnergy"}})],1)},n=[],r=(a("d81d"),a("e9c4"),a("b64b"),a("76bd")),s=a("5f87"),l=a("c500"),o=a("b4d5"),c=a("c1df"),d=a.n(c),u={components:{CompanyDataDialog:l["default"],EnergyDialog:o["default"]},data:function(){return{showCompanyDataMore:!1,showEnergy:!1,areaId:null,sourceData:[],areaList:[],loading:!1,month:null,curRow:{}}},computed:{parks:function(){return Object(s["a"])()}},created:function(){this.getAreaList(),this.month=d()().format("YYYY-MM")},mounted:function(){var e=this;setTimeout((function(){e.getList()}),200)},methods:{handleView:function(e){this.curRow=e,this.showEnergy=!0},handleMore:function(){this.showCompanyDataMore=!0},handleChange:function(){this.getList()},getList:function(){var e=this;this.loading=!0,Object(r["a"])({pageNum:1,pageSize:10,orderBy:!1,areaId:this.areaId,month:d()(this.month||new Date).format("YYYY-MM-DD")}).then((function(t){0===t.code&&(e.sourceData=t.data.items,e.loading=!1)})).then((function(){e.loading=!1}))},getAreaList:function(){var e=JSON.parse(JSON.stringify(this.parks));this.areaList=e.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),this.areaList.length>0&&(this.areaId=this.areaList[0].id,this.handleChange())}}},m=u,f=(a("649c"),a("2877")),p=Object(f["a"])(m,i,n,!1,null,"4ed25740",null);t["default"]=p.exports},"23ae":function(e,t,a){},"26fc":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAACKCAMAAABhAnODAAABzlBMVEUAAAD8/f/////////////3+v7////4+/7////////9///3+v7////////////4+v7+///////6/P/+/v/+/v/////5+/7////3+f72+v7y9/7+///7/f/////////////3+v76/P/7/f/4/P/9///////o8vz3+/73+f73+v7////4+/7////////3+//3+/7////+/v/////+/v/////o8fz9/v/p8f3o8fz3+/7////r8/33+v74+v72+v70+P7////+///3+v72+v7t9P3w9v3x9/7////+///7/f/////////////////3+v7p8v3////p8vv4+//////5+//r8/z4+//p8vz////6/P/4+v/////5/P7////8/P7////6/P/2+//8/f/////8///8///////n8fz2+v7////p8vz2+f73+v7////u9f7r9P3z+P32+f7////2+f73+v3////////2+v3////4+//t9P31+v78/P/4+//4+/7t9P35+//////////o8fz////0+P7o8fzo8fzo8Pv////z9/3o8f3z9//////w9/7w9/73+v/////p8v35/P7o8f3o8P3////n8Pv2+f3z+P4909UsAAAAlnRSTlMA/fumA/3h+PTlC/sG/vrz29a8NRLv7+fmzMJOLBj26cS+VB8O/fvp39TNwsG/u6CagmdbQP759O7s3dzZ0tDLysjIwcG/u6h1OiEB8evi4t/X1tHQ0M3GxcS4r5WNiX17c0UpJBsJ+O7t6OTc2MzKvra1raeflpBtbVtNLxX01tLDura0tKqai4WCbWZhSz4yFu/jfHnJ+3wGAAAFOElEQVR42u3cB1MTQRjG8TXehZBC6CQhkEBCbyJdelVUQDoCKiBFQJqCgoC99/qyfFshCId4yS2X3cs6k98n+E9y7HMz2QGxNpV+M8+aXTg6nuw0Ik5Mt4/fn8fH2PKKxh7FxaNQmiwZtZuwvDv21TEn0p53YmylCgfS1wuRHqQlwfmxKEfEAT2+roc9MZp9o982iwutWIkt7yocGJpGzJnjNlazMYHaxgw4MiIgljzpD90RmESEewH+cg6x4t0omseEstJccNItxMh9jEVbrbu5uakmEQfUc70cZJxHTIzjYxJrmpoLm+2dMl+ryZ0L8nTJiIF22QPU1GlPGy7Me5olHh6nsXrwK7UdUbc9r/BQ5eQNDxe6065CIB23EWVCISZg0oMCfQqi6z0mMQCKer2IpgkRE8gBAgVmRM9UFSZg7QASF6/Q26AmTKIPZDE8aB9iEnYgdBZRko5J2Axah01aMQExBjQOm67FJK6D1mFFmESNTuuwj2QvX9dA47CtCMIvUuuwomyR6KTQPGynrLrl1XBt4M8tyxWCsAOVS21t9jvYj0YIRZgks7qlzd2J/5EHIQyTVC62NvdEYEm2gY8wn8wnDkddoq/L1AschR2YW3TU22KBvzCfcl7DzoTDwmHhsHBYOCwc9r+GpUYeOitwFXbMOV7DoJjXMDjPa1hGOqdhUF7KaRgkbHEaBkmXOQ2D6G1Ow6DByGkYPOc1TBcOC4eFwwi1L1VwGDb9KRdA97S1f4arsMkbs0fvwgOt3Zl8hAmb9yzwl4Sm1u6yUIfFX7oAclzuluoQhn1dSwX/9I6WrlCEmUsaQVH0csuctmGedy4gk9HTNlipVdjEiA5OI6qvbbCCeZh3fQFUMKxYmIY5HxhAjegGAHZhQnoBqKIfsgC7sJRbkaBK0jMd0OJCJ5VejAJVEvJTgRbDO+/JT6tID6oYCq4CLVGj39BJq1gciD19W1R+B9CiW/Ogf3zG+8S607VlDEUCNSNyN92MR5dZxb7Ya0Co4QJQ8zwOybmJjxHriNpyF4CaxlIka8uET8iJVfg0YnqBmphkJE9owhKFNumYp+VCiYD82MB+9MRGgwx9owVoSVo3I3+mrNi/mrSTba4hHdCSMGYMfD9ZIt/G6Ji/GY8CSMbK7v5pM+RTPOYfpKBAjJ3Yh6At6lkH0JKxdlnxOiQpUxJQM+JECuJMmNQPoKUgDikRBjApK1DSMEF0M5/YLFARk44IeKyYVBbQoP8kIBKvMLFyCJ5r3Ux6EVjLDyzhlhGR8drIjwoIVqp0zCsaxcQSgz7mpxCxdlGrLsvZSUROqNXgyZfOU3KXMLEqCu+n5FaqMCHRAqolnRfQKe3MLC3bGD9hhmKjut8fy/qXs7GSCFBJdy4lmJ+Su1vvsgl7eTvoWwHVjhzqbxW5pXQueMw56kQsKwNUuFZyhd6VmO+OOhOdJ3/2kpny7aaKRXtE0EdF1I14Jpe6++utwTz5louXmd0HK3tSn6i2qyCO8UW16nrfMJxRMT+MwiRd9bbHKuaHYZhk97Tzw1+Yb344DNufHw7D9ueHwzD93vxwGJawPz/8hfnmh78w3/xwGJbvmx/uwg7nh7MwaX64CpPmh4EKFWHS/DBkfPQiU1XYPSdiLf7DYBlxmDQ/mvD86icLk+ZHM863XYph0vxo6sqXN5UKYdL8aMz8+XWFTJja+WH9Z7pLNj/sbX8YlAnzzU/IeX52Hws7mh8ufH3bdSzMUMzN/85DSPjzZ7rrmx++mDdfz+zs7s0Ph7yO9yjsyG/PhVsZ2R0KAAAAAABJRU5ErkJggg=="},2782:function(e,t,a){},2824:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"size",align:"center",title:"选择合同",visible:e.isShow,width:"800px"},on:{"update:visible":function(t){e.isShow=t}}},[t("el-card",[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.handleQuery("changeType")}},model:{value:e.contractType,callback:function(t){e.contractType=t},expression:"contractType"}},[t("el-radio-button",{attrs:{label:1}},[e._v("公寓合同")]),t("el-radio-button",{attrs:{label:2}},[e._v("企业合同")])],1)],1),t("div",[t("el-form",{ref:"form",attrs:{inline:!0,size:"small"}},[1===e.contractType?[t("el-form-item",{attrs:{label:"合同编号"}},[t("el-input",{attrs:{placeholder:"请输入合同编号"},model:{value:e.queryParams["contractNo"],callback:function(t){e.$set(e.queryParams,"contractNo",t)},expression:"queryParams['contractNo']"}})],1),t("el-form-item",{attrs:{label:"入住人名称"}},[t("el-input",{attrs:{placeholder:"请输入入住人名称"},model:{value:e.queryParams["applyUserRealNameLike"],callback:function(t){e.$set(e.queryParams,"applyUserRealNameLike",t)},expression:"queryParams['applyUserRealNameLike']"}})],1)]:e._e(),2===e.contractType?[t("el-form-item",{attrs:{label:"合同编号"}},[t("el-input",{attrs:{placeholder:"请输入合同编号"},model:{value:e.queryParams["contractNo"],callback:function(t){e.$set(e.queryParams,"contractNo",t)},expression:"queryParams['contractNo']"}})],1),t("el-form-item",{attrs:{label:"企业名称"}},[t("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.queryParams["entNameLike"],callback:function(t){e.$set(e.queryParams,"entNameLike",t)},expression:"queryParams['entNameLike']"}})],1)]:e._e(),t("el-form-item",{staticStyle:{display:"none"},attrs:{label:""}},[t("input",{attrs:{type:"",placeholder:""}})]),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")]),t("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1)],2)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"slideshowTable",attrs:{data:e.tableData,size:"small","row-key":"id"}},[t("el-table-column",{attrs:{prop:"applyNo",label:"合同编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(" "+e._s(a.row.applyNo||a.row.contractNo)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"contact",label:1===e.contractType?"入住人名称":"企业名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(" "+e._s(a.row.entName||a.row.applyUserRealName)+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.selectClick(a.row)}}},[e._v(" 选择 ")])]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:function(t){return e.getList()}}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("确 定")])],1)],1)},n=[],r=a("b775"),s=function(e){return Object(r["a"])({url:"/adm-service/bes/staff/apply/list/audited",method:"post",data:e})},l=function(e){return Object(r["a"])({url:"/adm-service/bes/staff/apply/get",method:"get",params:e})},o=function(e){return Object(r["a"])({url:"/adm-service/bes/bent/contract/list/audited",method:"post",data:e})},c=function(e){return Object(r["a"])({url:"/adm-service/bes/bent/contract/get",method:"get",params:e})},d={props:{value:{type:Boolean,required:!0}},data:function(){return{listLoading:!1,isShow:!1,contractType:1,colModel:[{columnId:"useType",displayName:"合同类型",searchType:"select",placeholder:"请选择合同",options:[{value:1,label:"公寓合同"},{value:2,label:"企业合同"}]}],queryParams:{pageNum:1,pageSize:10,settleStatus:0,settleInStatus:30},tableData:[],total:0,dataJson:{}}},watch:{value:function(e){e&&(this.isShow=e,this.queryParams.pageNum=1,this.getList())},isShow:function(e){this.$emit("input",e)}},methods:{getList:function(){var e=this,t=1===this.contractType?s:o;this.listLoading=!0,t(this.queryParams).then((function(t){e.listLoading=!1,0===t.code?(e.tableData=t.data.items,e.total=t.data.total):e.$message.error(t.msg)})).catch((function(){e.listLoading=!1}))},changeContcart:function(e){this.type=e},selectClick:function(e){var t=this,a=1===this.contractType?l:c;a({id:1===this.contractType?e.curContractId:e.id}).then((function(e){0==e.code&&t.$emit("getContractId",e.data)})),this.isShow=!1},onReset:function(){this.queryParams["applyUserRealNameLike"]=null,this.queryParams["contractNo"]=null,this.queryParams["entNameLike"]=null,this.queryParams.pageNum=1,this.getList()},handleQuery:function(e){"changeType"==e&&(this.queryParams["applyUserRealNameLike"]=null,this.queryParams["contractNo"]=null,this.queryParams["entNameLike"]=null),this.queryParams.pageNum=1,this.getList()}}},u=d,m=a("2877"),f=Object(m["a"])(u,i,n,!1,null,null,null);t["default"]=f.exports},2891:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"800px",title:"edit"==e.enterParam.type?"编辑计算公式":"新增计算公式",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("div",{staticStyle:{"padding-right":"20px"}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"计算公式:",prop:"formula"}},[t("el-input",{attrs:{placeholder:"计算公式",readonly:""},model:{value:e.form.formula,callback:function(t){e.$set(e.form,"formula",t)},expression:"form.formula"}})],1),t("el-form-item",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:9}},[t("div",{staticClass:"check-box"},[t("div",{staticClass:"title"},[e._v("系统变量")]),t("el-checkbox-group",{attrs:{size:"small"},on:{change:e.handleChecked},model:{value:e.checkValue,callback:function(t){e.checkValue=t},expression:"checkValue"}},e._l(e.chargesMap,(function(a,i){return t("el-checkbox",{key:i,attrs:{label:a.value,border:""}},[e._v(e._s(a.label))])})),1)],1)]),t("el-col",{attrs:{span:9}},[t("div",{staticClass:"check-box"},[t("div",{staticClass:"title"},[e._v("标准价")]),e._l(e.chargesMapList,(function(a,i){return t("el-radio",{key:i,attrs:{size:"small",label:a.value,border:""},on:{change:e.handleRadio},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v(e._s(a.label))])}))],2)]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"operator"},[e._l(e.operatorMap,(function(a,i){return t("div",{key:i,staticClass:"operatorItem",class:"item-"+i,on:{click:function(t){return e.addOperator(a)}}},[e._v(" "+e._s(a.label)+" ")])})),t("div",{staticClass:"operatorItem clearBtn",on:{click:e.clearFormula}},[e._v(" 清空 ")])],2)])],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)])},n=[],r=a("b85c"),s=(a("99af"),a("4de4"),a("a15b"),a("d81d"),a("4e82"),a("a434"),a("e9c4"),a("b64b"),a("d3b7"),a("ac1f"),a("00b4"),a("159b"),a("39cc"));a("2934");function l(e){var t=/^[0-9]\d*$/;return!!t.test(e)}var o={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},data:function(){return{isShow:!1,chargesMap:[{label:"房屋建筑面积",value:"area"},{label:"房屋套内面积",value:"usable_area"},{label:"周期内水用量",value:"water"},{label:"周期内用水总量",value:"use_water_all"},{label:"基本电费",value:"electric_basis"},{label:"周期内总电费",value:"electric_all"},{label:"周期内电用量（总量）",value:"electric"},{label:"周期内电用量（尖）",value:"electric_j"},{label:"周期内电用量（峰）",value:"electric_f"},{label:"周期内电用量（平）",value:"electric_p"},{label:"周期内电用量（谷）",value:"electric_g"},{label:"数量",value:"qty"}],chargesMapList:[],operatorMap:[{label:"(",value:"("},{label:")",value:")"},{label:"*",value:"*"},{label:"/",value:"/"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"+",value:"+"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"-",value:"-"},{label:".",value:"."},{label:"0",value:"0"}],form:{id:"",formula:"",pattern:""},oldChecked:[],radioValue:"",checkValue:[],checkValueObj:[],checkTimes:0,formulaList:[]}},watch:{value:function(e){this.isShow=e,e&&(this.form.id=this.enterParam.id,this.getStandardAll())},isShow:function(e){this.$emit("input",e)},formulaList:function(){this.formulaFormat()},checkValueObj:function(){this.formulaFormat()},radioValue:function(e,t){var a=this,i={};a.chargesMapList.forEach((function(t){t.value===e&&(i=t)})),t&&e!==t?a.checkValueObj.forEach((function(e,n){e.value===t&&(i.index=e.index,a.$set(a.checkValueObj,n,i))})):(a.checkValue.push(e),a.handleChecked(a.checkValue))}},created:function(){console.log("param: ",this.enterParam)},methods:{getPriceName:function(e){var t={1:"单价",2:"日单价",3:"月单价",4:"年单价"};return t[e]},getStandardAll:function(){var e=this,t=this;Object(s["p"])({areaId:this.enterParam.areaId}).then((function(a){0==a.code&&(console.log("feeeee:",a.data),a.data.forEach((function(a){var i={label:a.prName+"【"+t.getPriceName(a.priceType)+"】",value:a.id,priceValue:a.priceValue};e.chargesMapList.push(i)})))}))},handleChecked:function(e){var t=this,a=JSON.parse(JSON.stringify(this.checkValueObj)),i=[];i=e.filter((function(e){return-1==t.oldChecked.indexOf(e)})),this.checkValueObj=[],this.checkTimes=this.checkTimes+1,this.checkValueObj=[],a.map((function(a){var i,n=Object(r["a"])(e);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(a.value===s){var l=JSON.parse(JSON.stringify(a));t.checkValueObj.push(l)}}}catch(o){n.e(o)}finally{n.f()}})),this.chargesMap.map((function(e){var a,n=Object(r["a"])(i);try{for(n.s();!(a=n.n()).done;){var s=a.value;if(e.value===s){e.index=t.checkTimes;var l=JSON.parse(JSON.stringify(e));t.checkValueObj.push(l)}}}catch(o){n.e(o)}finally{n.f()}})),this.chargesMapList.map((function(e){var a,n=Object(r["a"])(i);try{for(n.s();!(a=n.n()).done;){var s=a.value;if(e.value===s){e.index=t.checkTimes;var l=JSON.parse(JSON.stringify(e));t.checkValueObj.push(l)}}}catch(o){n.e(o)}finally{n.f()}})),this.oldChecked=JSON.parse(JSON.stringify(e))},handleRadio:function(){var e=this;if(this.radioValue){var t=this.chargesMapList.filter((function(t){return t.value==e.radioValue}));console.log(t,"selectValue===>"),this.form["priceValue"]=t.length>0?t[0].priceValue:"",this.form["standardId"]=t[0].value}else this.form["priceValue"]="",this.form["standardId"]=""},formulaFormat:function(){var e,t=this.formulaList.concat(this.checkValueObj).sort((function(e,t){return e.index-t.index})),a=[],i=[],n=Object(r["a"])(t);try{for(n.s();!(e=n.n()).done;){var s=e.value;i.push(s.value),a.push(s.label)}}catch(l){n.e(l)}finally{n.f()}this.form.formula=a.join(" "),this.form.pattern=i.join(","),console.log("form:",this.form)},addOperator:function(e){if(console.log("formulaList:",this.formulaList),console.log("checktimes:",this.checkTimes),this.formulaList&&this.formulaList.length>0){var t=this.formulaList.length-1,a=JSON.parse(JSON.stringify(this.formulaList[t]));if((l(a.value)||"."===a.value||l(parseInt(a.value)))&&(l(e.value)||"."===e.value||l(parseInt(e.value))))a.label=a.label+e.label,a.value=a.value+e.value,this.formulaList.splice(t,1,a);else{this.checkTimes=this.checkTimes+1,e.index=this.checkTimes;var i=JSON.parse(JSON.stringify(e));this.formulaList.push(i)}}else{this.checkTimes=this.checkTimes+1,e.index=this.checkTimes;i=JSON.parse(JSON.stringify(e));this.formulaList.push(i)}},clearFormula:function(){this.radioValue="",this.oldChecked=[],this.checkValue=[],this.checkValueObj=[],this.checkTimes=0,this.formulaList=[],this.form.formula="",this.form.pattern=""},submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=JSON.stringify(e.form);e.$emit("getData",a),setTimeout((function(){e.$message.success("保存成功"),e.hide()}),500)}}))},hide:function(){this.isShow=!1,this.resetForm("form"),this.clearFormula(),this.chargesMapList=[]},handleChange:function(e){console.log(e)}}},c=o,d=(a("6c32"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"0a7f542e",null);t["default"]=u.exports},2934:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));a("99af"),a("b0c0"),a("2b19"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("9861");var i=a("b775"),n=function(e,t){return i["a"].post(e,t,{transformRequest:[function(e){var t="";return Object.keys(e).forEach((function(a){Object.is(e[a],void 0)||Object.is(e[a],null)||(t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&")})),t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return i["a"].post(e,t,{responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel"}),i=a||"".concat((new Date).getTime(),"_导出结果.xls");if("download"in document.createElement("a")){var n=document.createElement("a");n.download=i,n.href=URL.createObjectURL(t),n.click()}else navigator.msSaveBlob(t,i)})).catch((function(e){console.log("报错"),console.error(e)}))},s={getDictionaryList:function(e){var t;if(Object.is(e,void 0))t="";else for(var a in t="?",e)e.hasOwnProperty(a)&&null!==e[a]&&(t+="".concat(a,"=").concat(e[a],"&"));return i["a"].get("/dictionary/getListByParentCode"+"".concat(t))},addDictionary:function(e){return i["a"].post("/dictionary/add",e,{headers:{"Content-Type":"application/json;charset=UTF-8"}})},updateDictionary:function(e){return i["a"].post("/dictionary/update",e,{headers:{"Content-Type":"application/json;charset=UTF-8"}})},delDictionary:function(e){var t;if(Object.is(e,void 0))t="";else for(var a in t="?",e)e.hasOwnProperty(a)&&null!==e[a]&&(t+="".concat(a,"=").concat(e[a],"&"));return i["a"].get("/dictionary/del"+"".concat(t))},selectType:function(e,t){var a="";return t.forEach((function(t){t.code==e&&(a=t.name)})),a},getListByParentCode:function(e){return i["a"].get("/dictionary/getListByParentCode",{params:e})},updateDate:function(e){return n("/dictionary/updateDiction",e)},getDate:function(e){return i["a"].get("/dictionary/get",{params:e})}}},"293b":function(e,t,a){"use strict";a("f036")},"2a82":function(e,t,a){"use strict";a("ac1f"),a("841c"),a("498a");var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"mb10",attrs:{shadow:"never"}},[t("el-form",{ref:"form",attrs:{inline:!0,model:e.seachData,size:"small"}},[t("el-form-item",{staticStyle:{display:"none"},attrs:{label:""}},[t("input",{attrs:{type:"",placeholder:""}})]),e._l(e.columns,(function(a,i){return t("div",{key:i},[e._l(a,(function(a,i){return t("el-form-item",{key:a.columnId+""+i,attrs:{label:a.displayName,prop:a.columnId}},[a.searchType?t("div",["input"==a.searchType?t("el-input",{class:a.className||"",style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,placeholder:a.placeholder?a.placeholder:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,"string"===typeof t?t.trim():t)},expression:"seachData[item.columnId]"}}):"select"==a.searchType?t("el-select",{class:a.className||"",style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,placeholder:a.placeholder?a.placeholder:"",multiple:a.multiple||!1},on:{change:function(t){return a.change?a.change(t):e.search(t)}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,"string"===typeof t?t.trim():t)},expression:"seachData[item.columnId]"}},e._l(a.options,(function(e,i){return t("el-option",{key:i,attrs:{label:a.hasOwnProperty("labelName")?e[a.labelName]:e.label,value:a.hasOwnProperty("valueName")?e[a.valueName]:e.value,disabled:e.disabled}})})),1):"date"==a.searchType?t("el-date-picker",{class:a.className||"",style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,placeholder:a.placeholder?a.placeholder:"",type:a.type?a.type:"date","value-format":a.format?a.format:"yyyy-MM-dd"},on:{change:e.search},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):"dateArray"==a.searchType?t("el-date-picker",{class:a.className||"",style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",type:a.type?a.type:"daterange",clearable:"undefined"==typeof a.clearable||a.clearable,"value-format":a.format?a.format:"yyyy-MM-dd","range-separator":"至","start-placeholder":a.startDesc?a.startDesc:" ","end-placeholder":a.endDesc?a.endDesc:" "},on:{change:e.search},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):"cascader"==a.searchType?t("el-cascader",{class:a.className||"",style:{width:a.searchWidth+"px"},attrs:{props:a.props,options:a.options,size:"small",clearable:"",placeholder:a.placeholder||"请选择"},on:{change:function(e){"function"===typeof a.change&&a.change}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):e._e(),"icon"==a.searchType?t("i",{staticClass:"el-icon-date",on:{click:e.showDate}}):e._e()],1):e._e()])})),i==e.columns.length-1?[t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")]),t("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")]),e.isCreate?t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("起草")]):e._e()],1)]:e._e()],2)}))],2)],1)},n=[],r=(a("d81d"),{name:"NsSearchBar",props:{columns:{default:function(){}},isCreate:{type:Boolean,default:!1},seachData:{type:Object||null,default:{}},pageNum:{type:String,default:"pageNum"}},watch:{columns:function(){this.clearData()}},data:function(){return{}},mounted:function(){this.clearData()},methods:{search:function(){var e=this,t={};this.columns.map((function(a){a.searchType&&(t[a.columnId]=e.seachData[a.columnId]||null)})),t[this.pageNum?this.pageNum:""]=1,this.$emit("search",t)},handleBtn:function(e){console.log(e);var t=e;this.$emit(t,{})},handleCreate:function(){this.$emit("handleCreate",{})},showDate:function(){this.$emit("showDate",!0)},onReset:function(){var e=this,t={};this.columns.map((function(a){a.searchType&&(t[a.columnId]=null,e.$set(e.seachData,a.columnId,null))})),this.$emit("onReset",t)},clearData:function(){var e=this;this.columns.map((function(t){t.searchType&&e.$set(e.seachData,t.columnId,null)}))}}}),s=r,l=(a("6cdb"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"874c9918",null);t["a"]=o.exports},"2afa":function(e,t,a){},"2b18":function(e,t,a){"use strict";a.r(t);a("99af");var i=function(){var e=this,t=e._self._c;return t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"催缴账单",visible:e.isShow,width:"800px",id:"size"},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("div",{ref:"pdf",attrs:{id:"pdf"}},[t("el-card",[t("div",{staticClass:"bill-box"},[t("div",{staticClass:"title"},[t("h2",[e._v("秦皇岛花千墅物业服务股份有限公司")]),t("h2",[e._v("物业费用催缴通知单")])]),t("p",{staticClass:"greet"},[e._v(e._s("尊敬的 ".concat(e.formData.buildingName," ").concat(e.formData.unitName," ").concat(e.formData.floorName," ").concat(e.formData.roomName,"室 业主: ").concat(e.formData.cusName)))]),t("p",[e._v("您好!您户物业费已到期，具体费用如下:")]),t("p",[e._v(e._s("".concat(e.formData.fromYear,"年").concat(e.formData.fromMonth,"月").concat(e.formData.fromDay,"日至").concat(e.formData.toYear,"年").concat(e.formData.toMonth,"月").concat(e.formData.toDay,"日的欠缴物业费共计 ").concat(e.formData.penAmount," 元。")))]),t("p",[e._v("请您户接到此通知后，尽快到物业客服中心缴纳或联系管家通过公司二维码进行转账(转账时请备注XX小区+房间号)。转账后请告知管家或联系物业客服中心。电话:"+e._s(e.formData.addressPhone)+"，谢谢合作!")])])])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.downloadPdf}},[e._v("下载")]),t("el-button",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],attrs:{type:"primary"}},[e._v("打印")])],1)])},n=[],r=(a("a9e3"),a("b472")),s=(a("931d"),{props:{value:{type:Boolean,required:!0},type:{type:String,required:!0},rowId:{type:String|Number,required:!0}},data:function(){return{refreshFlag:!1,isShow:!1,printObj:{id:"#pdf",popTitle:"账单",beforeOpenCallback:this.beforeOpen},formData:{itemList:[]},loading:!1}},watch:{value:function(e){this.isShow=e,e||this.refreshFlag&&(this.$emit("refresh"),this.refreshFlag=!1)}},methods:{hide:function(){this.$emit("input",!1)},getList:function(){},downloadPdf:function(){this.addRecord(),this.$PDFSave(this.$refs.pdf,this.formData.cusName)},beforeOpen:function(){this.addRecord()},addRecord:function(){var e=this;"billId"===this.type?Object(r["a"])({urgeType:1,billId:this.rowId}).then((function(t){0==t.code?e.refreshFlag=!0:e.$message.error(t.msg)})):"cusId"===this.type&&Object(r["a"])({urgeType:2,cusId:this.rowId}).then((function(t){0==t.code?e.refreshFlag=!0:e.$message.error(t.msg)}))}}}),l=s,o=(a("d8d8"),a("2877")),c=Object(o["a"])(l,i,n,!1,null,"3f1e6d6b",null);t["default"]=c.exports},"2b5d":function(e,t,a){"use strict";a("9965")},"2c4e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleSearch,onReset:e.handleSearch}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div",{staticStyle:{display:"flex"}},[t("el-button",{attrs:{size:"small",type:"primary",disabled:e.callabled},on:{click:function(t){return e.callPayment()}}},[e._v("催缴")])],1)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch,printData:e.changePringData},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleView(i.row.cusId)}}},[e._v("催收单")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)]),t("CallBill",{attrs:{type:"cusId",rowId:e.cusId},model:{value:e.callBillShow,callback:function(t){e.callBillShow=t},expression:"callBillShow"}})],1)},n=[],r=(a("a15b"),a("d81d"),a("b680"),a("d3b7"),a("52fc")),s=a("b472"),l=a("53ba"),o={components:{CallBill:r["default"]},mixins:[l["a"]],data:function(){return{callBillShow:!1,loading:!1,listData:[{}],total:0,columns:[{type:"selection"},{name:"客户名称",desc:"cusName",width:160},{name:"欠款账期",desc:"billDate",width:200,filter:function(e){return e?e.join():"-"}},{name:"楼宇房源",desc:"spaceCodes",width:250,filter:function(e){return e?e.join():"-"}},{name:"总应收金额(元)",desc:"receivableAmtSum",format:!0,width:120},{name:"总待收金额(元)",desc:"pendingAmtSum",format:!0,width:120,filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"总滞纳金(元)",desc:"overdueAmtSum",format:!0,width:120},{name:"逾期账单数",desc:"billCount",width:120},{name:"总催缴次数",desc:"urgeNumSum",width:120},{name:"最后催缴时间",desc:"lastUrgeTime",width:120},{name:"操作",slotName:"action",fixed:"right",width:100}],cusId:"",colModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]},{columnId:"cusName",displayName:"客户名称",placeholder:"请输入客户名称",searchType:"input"}],queryParams:{pageNum:1,pageSize:10},selectList:[],callabled:!1}},methods:{handleSearch:function(e){var t=this;this.loading=!0,e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);a.position&&a.position.length&&(a.buildingId=a.position[0],a.unitId=a.position[1],a.floorId=a.position[2],a.roomId=a.position[3]),delete a.position,Object(s["d"])(a).then((function(e){0===e.code?(t.listData=e.data.items,t.total=e.data.total):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},handleView:function(e){this.cusId=e,this.callBillShow=!0},changePringData:function(e){this.selectList=e},callPayment:function(){var e=this;if(this.selectList.length<=0)this.$message.warning("请选择催缴数据！");else{this.callabled=!0;var t=this.selectList.map((function(e){return e.cusId}));Object(s["h"])({cusIds:t}).then((function(t){e.callabled=!1,0==t.code&&e.$message.success("已催缴成功！")})).catch((function(){e.callabled=!1}))}}},created:function(){this.handleSearch()},mounted:function(){this.colModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},"2d54":function(e,t,a){"use strict";a("40ee")},"2e0a":function(e,t,a){},"2e94":function(e,t,a){"use strict";a("2e0a")},"2f03":function(e,t,a){"use strict";a("7a7f")},"2f32":function(e,t,a){"use strict";a.r(t);a("a9e3");var i=function(){var e=this,t=e._self._c;return t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,align:"center",isShowPagination:!1,highlightCurrentRow:!1,border:""},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.rowDel(i.$index)}}},[e._v("删除")])]}},{key:"adjustTypeSelect",fn:function(a){var i=a.scope;return[t("el-select",{attrs:{size:"small",disabled:!e.isEditShow},on:{change:function(t){return e.editSelect(i.$index,i.row.adjType)}},model:{value:i.row.adjType,callback:function(t){e.$set(i.row,"adjType",t)},expression:"scope.row.adjType"}},e._l([{label:"无调整",value:0},{label:"上调百分比",value:1},{label:"下调百分比",value:2},{label:"上调固定金额",value:3},{label:"下调固定金额",value:4}],(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)]}},{key:"adjustRateInput",fn:function(a){var i=a.scope;return[i.row.adjType>2?t("span",[e._v(e._s(i.row.adjRate))]):t("n-input",{attrs:{min:0,disabled:!e.isEditShow,max:100},on:{change:function(t){return e.adjustRateChange(i.row.adjRate,i.row,i.$index)}},model:{value:i.row.adjRate,callback:function(t){e.$set(i.row,"adjRate",t)},expression:"scope.row.adjRate"}})]}},{key:"adjustAmountInput",fn:function(a){var i=a.scope;return[i.row.adjType>2?t("n-input",{attrs:{min:0,max:Number(i.row.oreaAmount),disabled:!e.isEditShow},on:{change:function(t){return e.adjustAmountChange(i.row.adjAmt,i.row,i.$index)}},model:{value:i.row.adjAmt,callback:function(t){e.$set(i.row,"adjAmt",t)},expression:"scope.row.adjAmt"}}):t("span",[e._v(e._s(i.row.adjAmt))])]}},{key:"collectOverdueSelect",fn:function(a){var i=a.scope;return[t("el-select",{attrs:{size:"small",disabled:!e.isEditShow},on:{change:function(t){return e.editCoOverSelect(i.$index,i.row.collectOverdue)}},model:{value:i.row.collectOverdue,callback:function(t){e.$set(i.row,"collectOverdue",t)},expression:"scope.row.collectOverdue"}},e._l([{label:"收",value:0},{label:"免",value:1}],(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)]}},{key:"remark",fn:function(a){var i=a.scope;return[t("el-input",{attrs:{type:"textarea",disabled:!e.isEditShow},model:{value:i.row.remark,callback:function(t){e.$set(i.row,"remark",t)},expression:"scope.row.remark"}})]}}])})},n=[],r=a("2909"),s=a("5530"),l=(a("d81d"),a("a434"),a("b680"),a("d3b7"),a("48c1")),o=a("376f"),c={props:{isEditShow:{type:Boolean}},components:{nInput:l["a"]},data:function(){return{loading:!1,columns:[{name:"删除",slotName:"action",width:80},{name:"费项",desc:"itemName",width:100},{name:"用量",desc:"qty"},{name:"单价(元)",desc:"price"},{name:"房源编码",desc:"spaceCode",width:200},{name:"原应收金额",desc:"oriReceivableTaxAmt",format:!0},{name:"原不含税金额",desc:"oriReceivableAmt",format:!0},{name:"原税额",desc:"oriTaxAmount",format:!0},{name:"调整方式",slotName:"adjustTypeSelect"},{name:"调整率(%)",slotName:"adjustRateInput"},{name:"调整金额",slotName:"adjustAmountInput"},{name:"滞纳金",slotName:"collectOverdueSelect"},{name:"应收金额",desc:"receivableTaxAmt",format:!0},{name:"不含税金额",desc:"receivableAmt",format:!0},{name:"税额（元）",desc:"taxRate",format:!0},{name:"计费周期",desc:"billPeriodStart,billPeriodEnd",filter:function(e,t){return t[e[0]]+"~"+t[e[1]]},width:200},{name:"调整备注",slotName:"remark",width:"200"}],listData:[]}},methods:{createTable:function(e,t){var a=this;this.loading=!0,1==t?Object(o["e"])(e).then((function(e){console.log(e),0===e.code&&(a.listData=e.data.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{receivableTaxAmt:0,receivableAmt:0})})))})).finally((function(){a.loading=!1})):(this.listData=e.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{receivableTaxAmt:e.receivableTaxAmt,receivableAmt:e.receivableAmt})})),this.loading=!1)},calcDiscount:function(e){var t=this.listData[e];0!=t.adjType?(t.adjType<2?t.adjAmt=parseFloat((Number(t.oriReceivableAmt)||0)*((Number(t.adjRate)||0)/100)).toFixed(2)||0:t.adjType>2&&(console.log(t.adjRate,"?why NAN"),t.adjRate=Number(t.oriReceivableAmt)?(Number(t.adjAmt)/Number(t.oriReceivableAmt)*100).toFixed(2):0),t.riReceivableTaxAmt=t.adjType%2==0?(t.oriReceivableAmt-t.adjAmt).toFixed(2):(Number(t.oriReceivableAmt)+Number(t.adjAmt)).toFixed(2),t.riReceivableAmt=(t.oriReceivableAmt*(t.adjType%2==1?1+t.adjRate/100:1-t.adjRate/100)).toFixed(2),t.adjustedAmount3=parseFloat(t.oriTaxAmount*(t.adjType%2==1?1+t.adjRate/100:1-t.adjRate/100)).toFixed(2)):(t.adjAmt=0,t.riReceivableTaxAmt=t.oriReceivableAmt,t.adjustedAmount3=t.oriTaxAmount,t.riReceivableAmt=t.oriReceivableAmt),this.listData=Object(r["a"])(this.listData.map((function(e){return Object(s["a"])({},e)}))),this.$emit("listData",this.listData)},editSelect:function(e,t){this.adjType=t,this.calcDiscount(e)},adjustRateChange:function(e,t,a){t.adjRate=e,this.calcDiscount(a)},adjustAmountChange:function(e,t,a){t.adjAmt=e,this.calcDiscount(a)},editCoOverSelect:function(e,t){this.collectOverdue=t,this.calcDiscount(e)},rowDel:function(e){this.listData.splice(e,1)}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=m.exports},"30a2":function(e,t,a){"use strict";a("ac88")},"315d":function(e,t,a){},"31c2":function(e,t,a){"use strict";a("066d")},"33a1":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.vis,title:"开收据",width:"800px","custom-class":"borderDialog","append-to-body":"","show-close":!1},on:{"update:visible":function(t){e.vis=t}}},[t("div",[e.isEdit&&e.formData.sealPic&&e.formData.sealPic.id?t("div",{staticStyle:{padding:"10px 0"}},[e._v(" 加盖印章："),t("el-switch",{model:{value:e.formData.seal,callback:function(t){e.$set(e.formData,"seal",t)},expression:"formData.seal"}})],1):e._e(),t("div",{staticStyle:{border:"1px solid #f5f5f5","margin-bottom":"10px",position:"relative"}},[2==e.status?t("div",{staticStyle:{position:"absolute",top:"20px",left:"20px"}},[t("img",{staticStyle:{height:"40px"},attrs:{src:a("0c37")}})]):e._e(),t("div",{ref:"pdfContent",staticStyle:{color:"#000"},attrs:{id:"printBox"}},[t("div",{staticStyle:{"text-align":"center",position:"relative"}},[t("span",{staticStyle:{"font-size":"24px","line-height":"28px","font-weight":"600","text-decoration-line":"underline"}},[e._v(" 收 款 收 据 ")]),t("span",{staticStyle:{position:"absolute",right:"0","line-height":"28px"}},[e._v("NO "),t("span",{staticStyle:{color:"#f00"}},[e._v(" "+e._s(e.receiptInfo.receiptCode))])])]),t("div",{staticStyle:{"text-align":"right",padding:"10px 0"}},[e._v(" "+e._s(e.moment(e.receiptInfo.createTime||new Date).format("YYYY 年 MM 月 DD 日"))+" ")]),t("table",{staticStyle:{"border-collapse":"collapse"},attrs:{border:"1"}},[t("tr",[t("td",{staticStyle:{"border-right":"none",padding:"5px"}},[e._v(" 兹收到 "+e._s(e.formData.customerName)+" ")]),t("td",{staticStyle:{"border-left":"none","border-right":"none",padding:"5px"}},[t("div",{staticStyle:{padding:"5px 0","text-align":"center"}},[e._v("单位")]),t("div",{staticStyle:{padding:"5px 0","text-align":"center"}},[e._v("同志")])]),t("td",{staticStyle:{"border-left":"none",width:"200px"}})]),t("tr",[t("td",{staticStyle:{padding:"5px"}},[e._v(" 人民币（大写）"+e._s(e.dealBigMoney(e.formData.money))+" ")]),t("td",{staticStyle:{padding:"5px"}},[t("div",{staticStyle:{padding:"5px 0","text-align":"center"}},[e._v("金额")]),t("div",{staticStyle:{padding:"5px 0","text-align":"center"}},[e._v("小写")])]),t("td",{staticStyle:{padding:"5px",width:"200px"}},[e._v(" ¥ "),e.isEdit?t("el-input-number",{attrs:{max:e.receiptInfo.money,precision:2,size:"small",controls:!1},model:{value:e.formData.money,callback:function(t){e.$set(e.formData,"money",t)},expression:"formData.money"}}):t("span",[e._v(" "+e._s(e.formData.money))])],1)]),t("tr",[t("td",{staticStyle:{padding:"5px"},attrs:{colspan:"4"}},[t("div",{staticStyle:{display:"flex","min-height":"80px"}},[t("div",{staticStyle:{"min-width":"50px",width:"50px"}},[e._v("摘由：")]),e.isEdit?t("el-input",{staticStyle:{width:"100%",height:"80px","min-height":"80px"},attrs:{resize:"none",autosize:{minRows:3,maxRows:3},maxlength:"200",type:"textarea"},model:{value:e.formData["remark"],callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData['remark']"}}):t("div",{staticStyle:{"white-space":"pre-wrap","line-height":"24px"},domProps:{innerHTML:e._s(e.formData["remark"])}})],1)])])]),t("div",{staticStyle:{display:"flex","align-items":"center",padding:"20px 0","justify-content":"space-between"}},[t("div",[e._v(" 开票人："),e.isEdit?t("el-input",{staticStyle:{width:"120px"},attrs:{maxlength:"10",size:"small"},model:{value:e.formData.drawer,callback:function(t){e.$set(e.formData,"drawer",t)},expression:"formData.drawer"}}):t("span",[e._v(e._s(e.formData.drawer))])],1),t("div",[e._v(" 财务："),e.isEdit?t("el-input",{staticStyle:{width:"120px"},attrs:{maxlength:"10",size:"small"},model:{value:e.formData.finance,callback:function(t){e.$set(e.formData,"finance",t)},expression:"formData.finance"}}):t("span",[e._v(e._s(e.formData.finance))])],1),t("div",[e._v(" 经手人："),e.isEdit?t("el-input",{staticStyle:{width:"120px"},attrs:{maxlength:"10",size:"small"},model:{value:e.formData.agent,callback:function(t){e.$set(e.formData,"agent",t)},expression:"formData.agent"}}):t("span",[e._v(e._s(e.formData.agent))])],1),t("div",{staticStyle:{position:"relative","min-width":"4.7cm","text-align":"center"}},[e._v(" 收款单位（盖章） "),e.formData.seal?t("el-image",{staticStyle:{width:"4.7cm",height:"4.7cm",position:"absolute",right:"0",bottom:"-1.5cm"},attrs:{src:e.returnSrc,fit:"cover"}}):e._e()],1)])])])]),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-button",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],staticStyle:{display:"none"},attrs:{id:"printBtn"}},[e._v("打印")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.vis=!1}}},[e._v("取消")]),2!=e.status?[e.isEdit?[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSubmit()}}},[e._v("开具")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSubmit("download")}}},[e._v("开具并下载")]),t("span",{staticStyle:{"margin-left":"10px"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSubmit("print")}}},[e._v("开具并打印")])],1)]:[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleClick("download")}}},[e._v("下载")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleClick("print")}}},[e._v("打印")])]]:e._e()],2)])])},n=[],r=a("5530"),s=a("c7eb"),l=a("1da1"),o=(a("4de4"),a("ace4"),a("b0c0"),a("e9c4"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("466d"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("c1df")),c=a.n(o),d=a("71a6"),u=a("0b2d"),m=a("5f87"),f=a("c0e9"),p=a.n(f),h=a("8baf"),b={props:{value:{type:Boolean,required:!0},billId:{type:String,default:""},status:{type:Number},receiptType:{type:Number},contractInfo:{type:Object},receiptCode:{type:String,default:""},type:{type:String,default:"view"}},computed:{vis:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},returnSrc:function(){return this.formData.sealPic&&this.formData.sealPic.id?(console.log(this.formData.sealPic,"sealPic==>"),"/prod-api/adm-service/system/file/image?fileId="+this.formData.sealPic.id+"&token="+Object(m["d"])()):null}},watch:{vis:function(e){e?("edit"==this.type?(this.isEdit=!0,this.beforeEdit=!0):(this.isEdit=!1,this.beforeEdit=!1),this.receiptInfo={},this.formData={},this.getDatil()):this.loading=!1}},data:function(){return{isEdit:!0,beforeEdit:!0,loading:!1,printObj:{id:"#printBox",popTitle:"收据",closeCallback:this.openBack},receiptInfo:{},formData:{agent:null,boundCode:null,customerName:null,drawer:null,finance:null,sealPic:null,money:0,remark:null,version:null,seal:!1},depositList:[]}},created:function(){var e=this;this.getDicts({code:"deposit_type"}).then((function(t){0==t.code&&(e.depositList=t.data.items||[])}))},methods:{moment:c.a,handleClick:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("print"!=e){a.next=4;break}document.getElementById("printBtn").click(),a.next=8;break;case 4:if("download"!=e){a.next=8;break}return a.next=7,Object(u["a"])(t.formData.fileId||t.receiptInfo.fileId,t.formData.customerName+"收据.pdf");case 7:t.$message.success("收据下载成功");case 8:case"end":return a.stop()}}),a)})))()},getDatil:function(){var e=this;if("edit"==this.type){var t=1==this.receiptType?Object(d["b"])([this.billId]):Object(d["c"])([this.billId]);t.then((function(t){if(0==t.code)if(e.receiptInfo=t.data[0],e.formData=JSON.parse(e.receiptInfo.dataJson),console.log(e.contractInfo,"contractInfo"),e.formData["receiptType"]=e.receiptType,e.receiptInfo["receiptType"]=e.receiptType,e.contractInfo&&1==e.receiptType&&e.contractInfo.buildingJoinName)e.formData["remark"]=e.contractInfo.buildingJoinName.split(",")[0]+" "+e.contractInfo.roomJoinName+" 租金\n计费期间："+e.receiptInfo.auditPeriod;else if(2==e.receiptType&&e.contractInfo&&e.contractInfo.depositNo){var a=e.depositList.filter((function(t){return t.code==e.contractInfo.depositType}));e.formData["remark"]="收到 "+e.contractInfo.clienteleName+" "+a[0].name+" "+(e.formData.money||0)+"元"}}))}else{console.log("已开收据");var a={pageSize:10,pageNum:1};this.receiptCode?a["receiptCode"]=this.receiptCode:(a["receiptType"]=this.receiptType,a["boundId"]=this.billId,a["status"]=1),Object(d["e"])(a).then((function(t){0==t.code&&(e.receiptInfo=t.data.items[0],e.formData=JSON.parse(e.receiptInfo.dataJson))}))}},openBack:function(){console.log("beforeOpenCallback==>"),this.loading=!1,this.isEdit=this.beforeEdit,this.$emit("success")},convertBase64ToFile:function(e,t){var a=e.split("base64,"),i=a[0].match(/:(.*?);/)[1],n=i.split("/")[1],r=atob(a[1]),s=r.length,l=new Uint8Array(s);while(s--)l[s]=r.charCodeAt(s);return new File([l],t+"."+n,{type:i})},handleDown:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function a(){var i,n,r,l,o,c,d,u;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.$refs.pdfContent,a.next=3,p()(i,{scale:2});case 3:if(n=a.sent,r=n.toDataURL("image/jpg"),l=new h["a"]({orientation:"portrait",unit:"px",format:"a4"}),o=l.getImageProperties(r),c=l.internal.pageSize.getWidth(),d=o.height*c/o.width,l.addImage(r,"JPG",0,0,c,d),!e){a.next=15;break}l.save(t.formData.customerName+"收据.pdf"),t.openBack(),a.next=17;break;case 15:return u=t.convertBase64ToFile(l.output("datauristring"),t.formData.customerName+"收据"),a.abrupt("return",u);case 17:case"end":return a.stop()}}),a)})))()},handleSubmit:function(e){var t=this;this.loading=!0,this.isEdit=!1,console.log(this.formData,this.receiptInfo);var a=null,i=null,n=null;new Promise((function(e,r){setTimeout(Object(l["a"])(Object(s["a"])().mark((function l(){var o;return Object(s["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.handleDown();case 2:a=s.sent,o=new FormData,o.append("busSubType","9033"),o.append("file",a),Object(u["b"])(o).then((function(a){0===a.code?(i=a.data.fileId,n=a.data.fileName,e()):(t.$message.error("开具失败"),r())}));case 7:case"end":return s.stop()}}),l)}))))})).then((function(){var a=Object.assign({},t.receiptInfo,Object(r["a"])({},t.formData));t.formData["fileId"]=i,a.dataJson=JSON.stringify(t.formData),a["fileId"]=i,Object(d["a"])(a).then(function(){var a=Object(l["a"])(Object(s["a"])().mark((function a(r){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!=r.code){a.next=12;break}if("download"!=e){a.next=11;break}return console.log("下载"),a.next=5,Object(u["a"])(i,n);case 5:t.vis=!1,t.loading=!1,t.$message.success("收据开具并下载成功"),t.$emit("success"),a.next=12;break;case 11:"print"==e?(console.log("打印"),document.getElementById("printBtn").click()):(t.vis=!1,t.loading=!1,t.$message.success("收据开具成功"),t.$emit("success"));case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}))}}},v=b,g=(a("92d8"),a("2877")),y=Object(g["a"])(v,i,n,!1,null,"80d4c1dc",null);t["a"]=y.exports},3594:function(e,t,a){},"36c0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.selectItems,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleQuery}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"tool-rows mb10"},[t("span",[e._v("共 "),t("span",[e._v(e._s(e.total))]),e._v(" 条")]),t("div",[e.$_has(e.addCode)?t("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-plus"},on:{click:e.handlerAdd}},[e._v("新增")]):e._e()],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData}},[t("el-table-column",{attrs:{prop:"mergerName",align:"center",label:"合并后费项名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"textcss",on:{click:function(t){return e.handlerView(a.row)}}},[e._v(e._s(a.row.mergerName))])]}}])}),t("el-table-column",{attrs:{prop:"itemNames",align:"center",label:"被合并收费项","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.statusChange(t,a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.$_has(e.editCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row)}}},[e._v("编辑")]):e._e(),e.$_has(e.delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")]):e._e()]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("edit-dialog",{attrs:{enterParam:e.params},on:{refreshList:function(t){return e.getList()}},model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}})],1)},n=[],r=a("53ba"),s=a("39cc"),l=a("5bcf"),o={components:{editDialog:l["default"]},mixins:[r["a"]],data:function(){return{addCode:["adm:finance:receiptmerge:add"],editCode:["adm:finance:receiptmerge:edit"],delCode:["adm:finance:receiptmerge:del"],detailShow:!1,updateShow:!1,params:{},loading:!1,total:0,listData:[],queryParams:{pageNum:1,pageSize:10,name:void 0,deviceTypeId:void 0},selectItems:[{columnId:"areaId",displayName:"项目",searchType:"select",labelName:"areaName",valueName:"areaId",placeholder:"请选择项目",options:[]}],rowId:""}},created:function(){this.selectItems[0].options=this.areaList,this.handleQuery()},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(s["D"])(this.queryParams).then((function(t){e.loading=!1,0===t.code?(e.total=t.data.total,e.listData=t.data.items):e.$message.error(t.msg)})).catch((function(){e.loading=!1,e.$message.error("系统繁忙，请稍后重试")}))},handlerDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["A"])({id:e.id}).then((function(e){0===e.code?(t.$message.success("删除成功!"),t.getList()):t.$message.error(e.msg)}))}))},handlerView:function(e){this.updateShow=!0,this.params={type:"view",row:e}},handlerEdit:function(e){this.updateShow=!0,this.params={type:"edit",row:e}},handlerAdd:function(){this.updateShow=!0,this.params={type:"add"}},statusChange:function(e,t){var a=this,i={id:t.id,status:e};Object(s["C"])(i).then((function(i){0==i.code?console.log("feetype enable:",e):(a.$message.error(i.msg),t.status=!t.status)}))},handleRefresh:function(){this.resetForm("formData"),this.handleQuery()}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,"ddf39dda",null);t["default"]=u.exports},"376f":function(e,t,a){"use strict";a.d(t,"j",(function(){return c})),a.d(t,"A",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"k",(function(){return m})),a.d(t,"x",(function(){return f})),a.d(t,"s",(function(){return p})),a.d(t,"u",(function(){return h})),a.d(t,"l",(function(){return b})),a.d(t,"r",(function(){return v})),a.d(t,"p",(function(){return g})),a.d(t,"o",(function(){return y})),a.d(t,"t",(function(){return w})),a.d(t,"i",(function(){return x})),a.d(t,"a",(function(){return D})),a.d(t,"w",(function(){return _})),a.d(t,"q",(function(){return S})),a.d(t,"m",(function(){return k})),a.d(t,"n",(function(){return N})),a.d(t,"v",(function(){return C})),a.d(t,"e",(function(){return I})),a.d(t,"y",(function(){return P})),a.d(t,"z",(function(){return L})),a.d(t,"d",(function(){return z})),a.d(t,"f",(function(){return A})),a.d(t,"c",(function(){return O})),a.d(t,"h",(function(){return T})),a.d(t,"g",(function(){return j}));var i=a("b775"),n=a("2934"),r=a("c1df"),s=a.n(r),l="/adm-service/finance/bill/",o={infoList:l+"info/list/notReview",infoReviewedList:l+"info/list/reviewed",infoReview:l+"info/review",findBillDetailTemp:l+"info/findBillDetailTemp",buildBillByTemp:l+"info/buildBillByTemp",infoYear:l+"info/group/year",infoExp:l+"info/exp",infoAdjust:l+"info/fee/scheme/adjust",infoOperate:l+"info/late/operate",infoChildGroup:l+"info/childGroup",infoReviewedStat:l+"info/reviewedStat",infoAdd:l+"info/add",infoGet:l+"info/get",infoEdit:l+"info/edit",infoDel:l+"info/del",pdfTemp:l+"info/pdfTemp",getPdf:l+"info/getPdf",savePdf:l+"info/savePdf",createBillDetail:l+"info/createBillDetail",checkBillDate:l+"info/checkBillDate",reviewAgain:l+"info/reviewAgain",reviewAgainHis:l+"info/reviewAgainHis",checkBill:l+"info/checkBill",confirm:l+"info/receipt",cusList:l+"info/cusList",childList:l+"info/childList",exportExp:"/adm-service/finance/bill/info/cusList/exp",energeDetail:l+"info/queryBillEnergyDetails"},c=function(e){return Object(i["a"])({url:"/adm-service/finance/fee/items/list",method:"post",data:e})},d=function(e){return i["a"].post(o.savePdf,e)},u=function(e){return i["a"].post(o.checkBillDate,e)},m=function(e){return i["a"].get(o.getPdf,{params:e})},f=function(e){return i["a"].get(o.pdfTemp,{params:e})},p=function(e){return i["a"].post(o.infoList,e)},h=function(e){return i["a"].post(o.infoReviewedList,e)},b=function(e){return i["a"].post(o.infoAdd,e)},v=function(e){return i["a"].get(o.infoGet,{params:e})},g=function(e){return i["a"].post(o.infoEdit,e)},y=function(e){return i["a"].post(o.infoDel,e)},w=function(e){return i["a"].post(o.infoReview,e)},x=function(e){return i["a"].post(o.findBillDetailTemp,e)},D=function(e){return i["a"].post(o.buildBillByTemp,e)},_=function(e){return i["a"].post(o.infoYear,e)},S=function(e){return Object(n["b"])(o.infoExp,e,"账期账单_".concat(s()().format("YYYYMMDD"),"_导出.xls"))},k=function(e){return i["a"].post(o.infoAdjust,e)},N=function(e){return i["a"].post(o.infoChildGroup,e)},C=function(e){return i["a"].post(o.infoReviewedStat,e)},I=function(e){return i["a"].post(o.createBillDetail,e)},P=function(e){return i["a"].post(o.reviewAgain,e)},L=function(e){return i["a"].get(o.reviewAgainHis,{params:e})},z=function(e){return i["a"].post(o.confirm,e)},A=function(e){return i["a"].post(o.cusList,e)},O=function(e){return i["a"].post(o.childList,e)},T=function(e){return Object(n["b"])(o.exportExp,e,"客户账单_".concat(s()().format("YYYYMMDD"),"_导出.xls"))},j=function(e){return i["a"].post(o.energeDetail,e)}},"39b4":function(e,t,a){"use strict";a("b775")},"39cc":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"y",(function(){return u})),a.d(t,"t",(function(){return m})),a.d(t,"w",(function(){return f})),a.d(t,"v",(function(){return p})),a.d(t,"u",(function(){return h})),a.d(t,"x",(function(){return b})),a.d(t,"s",(function(){return v})),a.d(t,"o",(function(){return g})),a.d(t,"r",(function(){return y})),a.d(t,"q",(function(){return w})),a.d(t,"p",(function(){return x})),a.d(t,"n",(function(){return D})),a.d(t,"K",(function(){return _})),a.d(t,"E",(function(){return S})),a.d(t,"I",(function(){return k})),a.d(t,"G",(function(){return N})),a.d(t,"H",(function(){return C})),a.d(t,"F",(function(){return I})),a.d(t,"J",(function(){return P})),a.d(t,"m",(function(){return L})),a.d(t,"g",(function(){return z})),a.d(t,"k",(function(){return A})),a.d(t,"i",(function(){return O})),a.d(t,"j",(function(){return T})),a.d(t,"l",(function(){return j})),a.d(t,"h",(function(){return $})),a.d(t,"D",(function(){return q})),a.d(t,"z",(function(){return R})),a.d(t,"B",(function(){return M})),a.d(t,"A",(function(){return B})),a.d(t,"C",(function(){return F}));var i=a("b775"),n={feetypeList:"/adm-service/finance/fee/type/list",feetypeAdd:"/adm-service/finance/fee/type/add",feetypeEdit:"/adm-service/finance/fee/type/edit",feetypeDel:"/adm-service/finance/fee/type/del",feetypeDetail:"/adm-service/finance/fee/type/get",feetypeAll:"/adm-service/finance/fee/type/listAll",feetypeEnable:"/adm-service/finance/fee/type/enable",feestandardList:"/adm-service/finance/fee/standard/list",feestandardAdd:"/adm-service/finance/fee/standard/add",feestandardEdit:"/adm-service/finance/fee/standard/edit",feestandardDel:"/adm-service/finance/fee/standard/del",feestandardDetail:"/adm-service/finance/fee/standard/get",feestandardAll:"/adm-service/finance/fee/standard/listAll",feestandarEnable:"/adm-service/finance/fee/standard/enable",payeeList:"/adm-service/finance/fee/payee/list",payeeAdd:"/adm-service/finance/fee/payee/add",payeeEdit:"/adm-service/finance/fee/payee/edit",payeeDel:"/adm-service/finance/fee/payee/del",payeeDetail:"/adm-service/finance/fee/payee/get",payeeAll:"/adm-service/finance/fee/payee/listAll",payeeEnable:"/adm-service/finance/fee/payee/enable",feeitemsList:"/adm-service/finance/fee/items/list",feeitemsAdd:"/adm-service/finance/fee/items/add",feeitemsEdit:"/adm-service/finance/fee/items/edit",feeitemsDel:"/adm-service/finance/fee/items/del",feeitemsDetail:"/adm-service/finance/fee/items/get",feeitemsEnable:"/adm-service/finance/fee/items/enable",feeitemsAll:"/adm-service/finance/fee/items/listAll",mergeList:"/adm-service/finance/receipt/merge/list",mergeAll:"/adm-service/finance/receipt/merge/listAll",mergeAdd:"/adm-service/finance/receipt/merge/add",mergeEdit:"/adm-service/finance/receipt/merge/edit",mergeDel:"/adm-service/finance/receipt/merge/del",mergeDetail:"/adm-service/finance/receipt/merge/get",mergeEnable:"/adm-service/finance/receipt/merge/enable",billGroupAdd:"/adm-service/finance/bill/group/add",billGroupDel:"/adm-service/finance/bill/group/delete",billGroupEdit:"/adm-service/finance/bill/group/edit",billGroupInfo:"/adm-service/finance/bill/group/get",billGroupList:"/adm-service/finance/bill/group/list",billGroupAll:"/adm-service/finance/bill/group/listAll"},r=function(e){return i["a"].post(n.billGroupAdd,e)},s=function(e){return i["a"].post(n.billGroupEdit,e)},l=function(e){return i["a"].post(n.billGroupList,e)},o=function(e){return i["a"].post(n.billGroupAll,e)},c=function(e){return i["a"].get(n.billGroupInfo,{params:e})},d=function(e){return i["a"].delete(n.billGroupDel,{params:e})},u=function(e){return i["a"].post(n.feetypeList,e)},m=function(e){return i["a"].post(n.feetypeAdd,e)},f=function(e){return i["a"].post(n.feetypeEdit,e)},p=function(e){return i["a"].post(n.feetypeDel,e)},h=function(e){return i["a"].post(n.feetypeAll,e)},b=function(e){return i["a"].post(n.feetypeEnable,e)},v=function(e){return i["a"].post(n.feestandardList,e)},g=function(e){return i["a"].post(n.feestandardAdd,e)},y=function(e){return i["a"].post(n.feestandardEdit,e)},w=function(e){return i["a"].post(n.feestandardDel,e)},x=function(e){return i["a"].post(n.feestandardAll,e)},D=function(e){return i["a"].post(n.feestandarEnable,e)},_=function(e){return i["a"].post(n.payeeList,e)},S=function(e){return i["a"].post(n.payeeAdd,e)},k=function(e){return i["a"].post(n.payeeEdit,e)},N=function(e){return i["a"].post(n.payeeDel,e)},C=function(e){return i["a"].get(n.payeeDetail,{params:e})},I=function(e){return i["a"].post(n.payeeAll,e)},P=function(e){return i["a"].post(n.payeeEnable,e)},L=function(e){return i["a"].post(n.feeitemsList,e)},z=function(e){return i["a"].post(n.feeitemsAdd,e)},A=function(e){return i["a"].post(n.feeitemsEdit,e)},O=function(e){return i["a"].post(n.feeitemsDel,e)},T=function(e){return i["a"].get(n.feeitemsDetail,{params:e})},j=function(e){return i["a"].post(n.feeitemsEnable,e)},$=function(e){return i["a"].post(n.feeitemsAll,e)},q=function(e){return i["a"].post(n.mergeList,e)},R=function(e){return i["a"].post(n.mergeAdd,e)},M=function(e){return i["a"].post(n.mergeEdit,e)},B=function(e){return i["a"].post(n.mergeDel,e)},F=function(e){return i["a"].post(n.mergeEnable,e)}},"3a2b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})},n=[],r=a("f8b9"),s={name:"analysisArea",components:{List:r["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},"3b0a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"20px"}},[t("el-form",{ref:"editForm",attrs:{model:e.form,"label-width":"150px",rules:e.rules}},[t("el-form-item",{attrs:{label:"催缴推送时间",prop:"date"}},[t("el-time-select",{attrs:{placeholder:"开始推送时间","picker-options":{start:"00:00",step:"00:30",end:"23:30"}},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveConfig}},[e._v("保存")])],1)],1)],1)},n=[],r=(a("4de4"),a("d3b7"),a("1066")),s={data:function(){return{form:{date:""},rules:{date:[{required:!0,message:"请选择推送时间",trigger:"change"}]}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["b"])({type:2}).then((function(t){if(0==t.code){var a=t.data.filter((function(e){return"Urge_Push_time"===e.id}));console.log(a),e.form.date=a[0].value}}))},saveConfig:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$confirm("确认要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:"Urge_Push_time",type:2,value:e.form.date},a=[t];Object(r["a"])({items:a}).then((function(t){0===t.code?e.$message.success("保存成功!"):e.$message.error(t.msg)}))}))}))}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},"3bf4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container activeBox"},[t("bar",{attrs:{columns:e.colModel,seachData:e.queryParams,autoFixPosition:!0},on:{search:e.getList,onReset:e.handleReset}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div",{staticStyle:{display:"flex"}},[t("el-dropdown",{on:{command:e.toReview}},[e.$_has(e.reviewCode)?t("el-button",{attrs:{type:"primary",size:"small"}},[e._v(" 复核"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e(),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"1"}},[e._v("复核所选")]),t("el-dropdown-item",{attrs:{command:"2"}},[e._v("复核全部")])],1)],1),e.$_has(e.addCode)?[t("el-dropdown",{staticStyle:{"margin-left":"10px"},on:{command:e.handleAdd}},[e.$_has(e.editCode)?t("el-button",{attrs:{type:"primary",size:"small"}},[e._v(" 新建账单"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e(),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"1"}},[e._v("账期账单")]),t("el-dropdown-item",{attrs:{command:"2"}},[e._v("其他账单")])],1)],1)]:e._e()],2)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{sort:"",border:"",data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch,printData:e.changePringData},scopedSlots:e._u([{key:"billSource",fn:function(a){var i=a.scope;return[t("div",[e._v(" "+e._s(e._f("filterBillSource")(i.row.billSource))+" ")]),t("span",{on:{click:function(t){i.row.reviewStatus>0&&e.handleViewReview(i.row)}}},[e._v(" "+e._s(0==i.row.reviewStatus?"首次复核":"重新复核")+" "),i.row.reviewStatus>0?t("el-icon",{staticClass:"el-icon-tickets",staticStyle:{color:"#409eff"}}):e._e()],1)]}},{key:"roomJoinName",fn:function(a){var i=a.scope;return e._l(i.row.roomJoinName.split(","),(function(a,i){return t("el-tag",{key:i,staticStyle:{width:"100px"},attrs:{size:"mini"}},[e._v(e._s(a))])}))}},{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleShow(i.row)}}},[e._v("查看")]),!e.$_has(e.reviewCode)||1!==i.row.billSource&&3!==i.row.billSource&&4!==i.row.billSource?e._e():t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),!e.$_has(e.reviewCode)||1!==i.row.billSource&&3!==i.row.billSource&&4!==i.row.billSource?e._e():t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handlerClick(i.row)}}},[e._v("复核")]),e.$_has(e.delCode)&&4===i.row.billSource?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)&&4==i.row.billSource?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDelete(i.row)}}},[e._v("删除")]):e._e()]}},{key:"lateDate_",fn:function(a){var i=a.scope;return[t("span",[e._v(" "+e._s(i.payStatus<2?e.filterDateDiff(i.row.lateDate):"-")+" ")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)]),t("CheckDialog",{attrs:{checkList:e.allColumns,label:"name",title:"切换表格显示字段"},on:{save:e.checkColumnSave},model:{value:e.checkDiaShow,callback:function(t){e.checkDiaShow=t},expression:"checkDiaShow"}}),t("AdjDialog",{attrs:{num:e.adjNum,condition:e.adjCondition},model:{value:e.isAdjustmentShow,callback:function(t){e.isAdjustmentShow=t},expression:"isAdjustmentShow"}}),t("el-dialog",{attrs:{visible:e.reviewAgainShow,width:"50%","custom-class":"borderDialog",title:"重新复核原因"},on:{"update:visible":function(t){e.reviewAgainShow=t}}},[t("div",[t("div",[t("p",{staticStyle:{"font-weight":"600"}},[e._v("重新复核原因:")]),e.reviewAgainList.length>0?t("p",[e._v(" "+e._s(e.reviewAgainList[0].remark)+" ")]):e._e()])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.reviewAgainShow=!1}}},[e._v("关闭")])],1)])],1)},n=[],r=a("2909"),s=(a("d81d"),a("a434"),a("b680"),a("d3b7"),a("c1df")),l=a.n(s),o=a("376f"),c=a("39cc"),d=a("5089"),u=a("78af"),m=a("2a82"),f=a("53ba"),p={props:{forward:{type:Function,required:!0}},components:{CheckDialog:d["a"],AdjDialog:u["default"],bar:m["a"]},mixins:[f["a"]],filters:{filterBillSource:function(e){switch(e){case 1:return"首期账单";case 2:return"结算账单";case 3:return"账期账单";case 4:return"手工账单";default:return""}}},data:function(){return{addCode:["adm:finance:bill:add"],addReceiptCode:["adm:finance:receiptinfo:add"],editCode:["adm:finance:bill:edit"],delCode:["adm:finance:bill:del"],reviewCode:["adm:finance:bill:review"],formData:{},total:0,periodDate:[],outDate:[],checkDiaShow:!1,loading:!1,listData:[],allColumns:[],columns:[{type:"selection"},{name:"类型",slotName:"billSource",desc:"billSource",width:"100"},{name:"账期",desc:"billDate",width:"100"},{name:"项目-楼栋",desc:"buildingJoinName",width:"150"},{name:"楼层-房间-空间",desc:"roomJoinName",tooltip:!1,slotName:"roomJoinName",width:"150"},{name:"客户名称",desc:"cusName",width:"120"},{name:"合同编号",desc:"contractNo",width:"150"},{name:"账单组",desc:"groupName",width:"150"},{name:"应收金额(元)",desc:"receivableAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"计费周期",desc:"billPeriodStart,billPeriodEnd",filter:function(e,t){return t[e[0]]+"~"+t[e[1]]},width:"200"},{name:"出账日",desc:"billingDate",width:"120"},{name:"最晚还款日",desc:"lateDate",width:"120"},{name:"账单流水号",desc:"billCode",width:"200"},{name:"操作",slotName:"action",fixed:"right",width:150}],queryParams:{pageNum:1,pageSize:10},colModel:[[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]},{columnId:"billingDate",displayName:"账期",searchType:"date",format:"yyyy-MM",type:"month",placeholder:"请选择账期"},{columnId:"groupIds",displayName:"账单组",searchType:"select",multiple:!0,placeholder:"请选择账单组",options:[]},{columnId:"billSourceIn",displayName:"账单类型",searchType:"select",placeholder:"请选择账单类型",multiple:!0,options:[{value:1,label:"首期账单"},{value:3,label:"账期账单"},{value:4,label:"手工账单"}]},{columnId:"reviewStatusArrays",displayName:"复核类型",searchType:"select",placeholder:"请选择复核类型",multiple:!0,options:[{value:0,label:"首次复核"},{value:2,label:"重新复核"}]}],[{columnId:"subjectMatterType",displayName:"房源类型",searchType:"select",clearable:!0,placeholder:"请选择房源类型",options:[{value:1,label:"公寓"},{value:2,label:"商办空间"}]},{columnId:"cusName",displayName:"客户名称",searchType:"input",placeholder:"请输入客户名称"},{columnId:"contractNo",displayName:"合同编号",searchType:"input",placeholder:"请输入合同编号"},{columnId:"billCode",displayName:"账单流水号",searchType:"input",placeholder:"请输入账单流水号"}]],reviewList:[],isAdjustmentShow:!1,inputPriceShow:!1,adjNum:0,adjCondition:{ids:null,queryReq:null},curAreaId:null,reviewAgainList:[],reviewAgainShow:!1}},methods:{handleViewReview:function(e){var t=this;Object(o["z"])({billId:e.id}).then((function(e){0==e.code&&(t.reviewAgainList=e.data||[],t.reviewAgainShow=!0)}))},checkColumnSave:function(e){this.columns=e},handleReset:function(){this.queryParams={pageNum:1,pageSize:this.queryParams.pageSize},this.handleSearch({})},handleSearch:function(e){var t=this;e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);a.billPeriodStart&&2===a.billPeriodStart.length&&(a.billPeriodEnd=l()(a.billPeriodStart[1]).format("YYYY-MM-DD"),a.billPeriodStart=l()(a.billPeriodStart[0]).format("YYYY-MM-DD")),a["reviewStatusArrays"]&&0!=a["reviewStatusArrays"].length||(a["reviewStatusArrays"]=[0,2]),a["billingDate"]&&(a["billDateBetween"]=[l()(a.billingDate).format("YYYY-MM"),l()(a.billingDate).format("YYYY-MM")]),this.loading=!0,Object(o["s"])(a).then((function(e){0===e.code?(t.total=e.data.total,t.listData=e.data?e.data.items:[]):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},getList:function(e){this.queryParams.pageNum=1,this.queryParams.areaId!==this.curAreaId&&(this.getBillGroupAll(this.queryParams.areaId),this.curAreaId=this.queryParams.areaId),this.queryParams.areaId||(this.queryParams.areaId=null,this.colModel[0][2].options=[]),console.log(this.queryParams,"thisisi======>>"),this.handleSearch(e)},handleAdd:function(e){1==e?this.forward("Form",{opt:"add"}):this.forward("FormOld",{opt:"add"})},handleDelete:function(e){var t=this;4==e.billSource&&this.$confirm("确定删除手工账单吗？","手工账单删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(o["o"])({id:e.id}).then((function(e){t.loading=!1,0===e.code?(t.$message.success("账单删除成功"),t.getList()):t.$message.error(e.msg)})).catch((function(e){t.loading=!1}))}))},handleShow:function(e){2==e.billSource?this.forward("ViewForm",{opt:"before",rowId:e.contractId}):this.forward("FormDetail",{opt:"before",id:e.id})},changePringData:function(e){this.reviewList=e},toReview:function(e){var t=this;if(1==e){if(this.reviewList.length<=0)return void this.$message.warning("请先勾选账单")}else if(this.listData.length<=0)return void this.$message.warning("当前没有账单");this.$confirm("确定对".concat(1==e?this.reviewList.length+"个":"全部","账单进行复核吗？"),"账单复核",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=1==e?t.reviewList.map((function(e){return e.id})):t.listData.map((function(e){return e.id}));Object(o["t"])({ids:a}).then((function(e){if(0===e.code){t.$message.success("复核成功");var a=t.queryParams,i=a.pageNum,n=a.pageSize;1!=i&&t.total==(i-1)*n+1&&(i-=1),t.handleSearch({pageNum:i})}else t.$message.error(e.msg)}))}))},handlerClick:function(e){var t=this;this.$confirm("确定对".concat(e.billCode,"账单进行复核吗？"),"账单复核",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["t"])({ids:[e.id]}).then((function(e){if(0===e.code){t.$message.success("复核成功");var a=t.queryParams,i=a.pageNum,n=a.pageSize;1!=i&&t.total==(i-1)*n+1&&(i-=1),t.handleSearch({pageNum:i})}else t.$message.error(e.msg)}))}))},adjustment:function(e){if(1==e){if(this.reviewList.length<=0)return void this.$message.warning("请先勾选账单");this.adjNum=this.reviewList.length,this.adjCondition.ids=this.reviewList.map((function(e){return e.id})),this.adjCondition.queryReq=null}else this.adjNum=this.total,this.adjCondition.ids=null,this.adjCondition.queryReq=this.queryParams;0!==this.adjNum?this.isAdjustmentShow=!0:this.$message.warning("预计调整费项记录数量不能为0")},submit:function(){var e=this,t={};1==this.adjustmentIndex?(t.ids=this.reviewList.map((function(e){return e.id})),t.billFeeSchemeAdjustItemList=this.adjustmentList.map((function(e){return{itemId:e.itemId,type:e.adjustType,value:e.adjustRate}}))):(t.queryReq=this.queryParams,t.billFeeSchemeAdjustItemList=this.adjustmentList.map((function(e){return{itemId:e.itemId,type:e.adjustType,value:e.adjustRate}}))),t.remack=this.remack,Object(o["m"])(t).then((function(t){if(0===t.code){e.$message.success("调整成功");var a=e.queryParams,i=a.pageNum,n=a.pageSize;1!=i&&e.total==(i-1)*n+1&&(i-=1),e.handleSearch({pageNum:i}),e.isAdjustmentShow=!1}else e.$message.error(t.msg)}))},editSelect:function(e,t){console.log(e),this.adjustmentList[t].inputPriceShow=3==e||4==e},addReview:function(){this.adjustmentList.push({itemId:"",adjustType:null,adjustRate:null,inputPriceShow:!1})},delReview:function(e){this.adjustmentList.splice(e,1)},filterDateDiff:function(e){if(null!=e){var t=l()().diff(l()(e),"days");if(t>0)return t}return"-"},getBillGroupAll:function(e){var t=this;Object(c["b"])({areaId:e}).then((function(e){0==e.code&&(t.colModel[0][2].options=e.data.map((function(e){return{label:e.groupName,value:e.id}})))}))}},created:function(){this.handleSearch(),this.allColumns=Object(r["a"])(this.columns)},mounted:function(){this.colModel[0][0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))}},h=p,b=(a("3f9d"),a("2877")),v=Object(b["a"])(h,i,n,!1,null,"90e29420",null);t["default"]=v.exports},"3c5c":function(e,t,a){},"3d73":function(e,t,a){"use strict";a("fb15")},"3d76":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"请选择押金单",visible:e.isShow,"append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch,"current-change":e.currentChange},scopedSlots:e._u([{key:"clienteleType",fn:function(t){var a=t.scope;return[e._v(" "+e._s(1==a.row.clienteleType?"企业":"个人")+" ")]}},{key:"depositType",fn:function(t){var a=t.scope;return[e._v(" "+e._s(e.selectType(a.row.depositType,e.depositList))+" ")]}},{key:"refundStatus",fn:function(t){var a=t.scope;return[e._v(" "+e._s(e.selectType(a.row.refundStatus,e.refundStatusList))+" ")]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.hide}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)},n=[],r=(a("d3b7"),a("7602")),s=a("2934"),l={props:{value:{type:Boolean,required:!0}},data:function(){return{isShow:!1,queryParams:{pageNum:1,pageSize:10},colModel:[],loading:!1,listData:[],columns:[{name:"押金编号",desc:"depositNo"},{name:"客户名称",desc:"clienteleName"},{name:"客户类型",desc:"clienteleType",slotName:"clienteleType"},{name:"合同编号",desc:"contractNo"},{name:"押金类型",desc:"depositType",slotName:"depositType"},{name:"押金总额(元)",desc:"money",format:!0},{name:"退还押金",desc:"refundMoney",format:!0},{name:"押金状态",desc:"refundStatus",slotName:"refundStatus"}],total:0,currentRow:{},depositList:[],refundStatusList:[{name:"未退款",code:1},{name:"部分退款",code:2},{name:"已退还",code:3}]}},watch:{value:function(e){var t=this;this.isShow=e,e&&(this.handleSearch(),this.currentRow={},this.$nextTick((function(){t.$refs.bxzTable&&t.$refs.bxzTable.clearSelection()})))}},created:function(){var e=this;this.getDicts({code:"deposit_type"}).then((function(t){0==t.code&&(e.depositList=t.data.items||[])}))},methods:{selectType:function(e,t){return s["a"].selectType(e,t)},hide:function(){this.$emit("input",!1)},handleSearch:function(e){var t=this;this.loading=!0,e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);a.notRefundAll=!0,Object(r["d"])(a).then((function(e){0===e.code?(t.listData=e.data.items,t.total=e.data.total):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},currentChange:function(e){this.currentRow=e},save:function(){this.currentRow.id?3!=this.currentRow.refundStatus?(this.$emit("save",this.currentRow),this.hide()):this.$message.error("该押金单已退还，请选择其他押金单"):this.$message.error("请选择押金单")}}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},"3ec6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t(e.subComponent,{tag:"component",attrs:{enterParams:e.subParams,forward:e.navigat}})],1)},n=[],r=a("f817"),s=a("8fdc"),l=a("bb27"),o=a("92d7"),c=a("f7af"),d={components:{List:r["default"],Form:s["default"],FormDetail:l["default"],ViewForm:c["default"],subBill:o["default"]},data:function(){return{subComponent:"List",subParams:{}}},methods:{navigat:function(e,t){this.subComponent=e,this.subParams=t||{}}}},u=d,m=(a("7cd9"),a("2877")),f=Object(m["a"])(u,i,n,!1,null,"1bf81adf",null);t["default"]=f.exports},"3edf":function(e,t,a){},"3f9d":function(e,t,a){"use strict";a("600b")},"403b":function(e,t,a){},"40dd":function(e,t,a){"use strict";a("c239")},"40ee":function(e,t,a){},4117:function(e,t,a){},"41eb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"size","append-to-body":"",title:"选择账单",visible:e.isShow,width:"1000px",top:"20px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams,autoFixPosition:!0},on:{search:e.handleQuery,onReset:e.handleReset}}),t("el-card",[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch,printData:e.changePringData},scopedSlots:e._u([{key:"payStatus",fn:function(a){var i=a.scope;return[2===i.row.payStatus?t("el-tag",{attrs:{type:"success"}},[e._v("已缴")]):1===i.row.payStatus?t("el-tag",{attrs:{type:"danger"}},[e._v("欠费")]):0===i.row.payStatus?t("el-tag",{attrs:{type:"danger"}},[e._v("未缴")]):3===i.row.payStatus?t("el-tag",{attrs:{type:"warning"}},[e._v("部分已缴")]):e._e()]}},{key:"roomJoinName",fn:function(a){var i=a.scope;return e._l(i.row.roomJoinName.split(","),(function(a,i){return t("el-tag",{key:i,staticStyle:{width:"100px"},attrs:{size:"mini"}},[e._v(e._s(a))])}))}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保 存")])],1)],1)},n=[],r=(a("d81d"),a("e9c4"),a("b680"),a("b64b"),a("376f")),s=a("39cc"),l=(a("ac1f"),a("841c"),a("498a"),function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"mb10",attrs:{shadow:"never"}},[t("el-form",{ref:"form",attrs:{inline:!0,model:e.seachData,size:"small"}},[e._l(e.columns,(function(a,i){return t("el-form-item",{key:a.columnId+""+i,attrs:{label:a.displayName,prop:a.columnId}},[a.searchType?t("div",["input"==a.searchType?t("el-input",{style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,placeholder:a.placeholder?a.placeholder:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,"string"===typeof t?t.trim():t)},expression:"seachData[item.columnId]"}}):"select"==a.searchType?t("el-select",{style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,placeholder:a.placeholder?a.placeholder:"",multiple:a.multiple||!1},on:{change:function(t){return a.change?a.change(t):e.search(t)}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,"string"===typeof t?t.trim():t)},expression:"seachData[item.columnId]"}},e._l(a.options,(function(e,i){return t("el-option",{key:i,attrs:{label:a.hasOwnProperty("labelName")?e[a.labelName]:e.label,value:a.hasOwnProperty("valueName")?e[a.valueName]:e.value,disabled:e.disabled}})})),1):"date"==a.searchType?t("el-date-picker",{style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",clearable:"undefined"==typeof a.clearable||a.clearable,type:"date","value-format":a.format?a.format:"yyyy-MM-dd"},on:{change:e.search},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):"dateArray"==a.searchType?t("el-date-picker",{style:{width:a.searchWidth+"px"},attrs:{size:a.size||"mini",type:a.type?a.type:"daterange",clearable:"undefined"==typeof a.clearable||a.clearable,"value-format":a.format?a.format:"yyyy-MM-dd","range-separator":"至","start-placeholder":a.startDesc?a.startDesc:" ","end-placeholder":a.endDesc?a.endDesc:" "},on:{change:e.search},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):"cascader"==a.searchType?t("el-cascader",{style:{width:a.searchWidth+"px"},attrs:{props:a.props,options:a.options,size:"small",clearable:"",placeholder:a.placeholder||"请选择"},on:{change:function(e){"function"===typeof a.change&&a.change}},model:{value:e.seachData[a.columnId],callback:function(t){e.$set(e.seachData,a.columnId,t)},expression:"seachData[item.columnId]"}}):e._e(),"icon"==a.searchType?t("i",{staticClass:"el-icon-date",on:{click:e.showDate}}):e._e()],1):e._e()])})),t("el-form-item",{staticStyle:{display:"none"},attrs:{label:""}},[t("input",{attrs:{type:"",placeholder:""}})]),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")]),t("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")]),e.isCreate?t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("起草")]):e._e()],1)],2)],1)}),o=[],c={name:"NsSearchBar",props:{columns:{default:function(){}},isCreate:{type:Boolean,default:!1},seachData:{type:Object||null,default:{}},pageNum:{type:String,default:"pageNum"}},watch:{columns:function(){this.clearData()}},data:function(){return{}},mounted:function(){this.clearData()},methods:{search:function(){var e=this,t={};this.columns.map((function(a){a.searchType&&(t[a.columnId]=e.seachData[a.columnId]||null)})),t[this.pageNum?this.pageNum:""]=1,this.$emit("search",t)},handleBtn:function(e){console.log(e);var t=e;this.$emit(t,{})},handleCreate:function(){this.$emit("handleCreate",{})},showDate:function(){this.$emit("showDate",!0)},onReset:function(){var e=this,t={};this.columns.map((function(a){a.searchType&&(t[a.columnId]=null,e.$set(e.seachData,a.columnId,null))})),this.$emit("onReset",t)},clearData:function(){var e=this;this.columns.map((function(t){t.searchType&&e.$set(e.seachData,t.columnId,null)}))}}},d=c,u=a("2877"),m=Object(u["a"])(d,l,o,!1,null,"6708470e",null),f=m.exports,p=a("c1df"),h=a.n(p),b={comments:{bar:f},props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},data:function(){return{columns:[{type:"selection"},{name:"账期",desc:"billDate",width:"100"},{name:"缴费状态",desc:"payStatus",slotName:"payStatus"},{name:"项目-楼栋",desc:"buildingJoinName",width:"200"},{name:"楼层-房间-空间",desc:"roomJoinName",tooltip:!1,slotName:"roomJoinName",width:"150"},{name:"账单组",desc:"groupName",width:"150"},{name:"应收金额(元)",desc:"receivableAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"减免金额(元)",desc:"reduceAmt",width:"120",filter:function(e){return-(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"待收金额(元)",desc:"pendingAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"已收金额(元)",desc:"receiptAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"计费周期",desc:"billPeriodStart,billPeriodEnd",filter:function(e,t){return t[e[0]]+"~"+t[e[1]]},width:"200"}],colModel:[{columnId:"groupId",displayName:"账单组",searchType:"select",placeholder:"请选择账单组",options:[]},{columnId:"billingDate",displayName:"账期:",searchType:"date",type:"monthrange",placeholder:"请选择账期"},{columnId:"payStatus",displayName:"结清状态:",searchType:"select",placeholder:"请选择缴费状态",options:[{value:null,label:"全部"},{value:1,label:"未结清"},{value:2,label:"已结清"}]}],loading:!1,isShow:!1,queryParams:{pageNum:1,pageSize:10},total:0,listData:[],selectRow:[]}},watch:{value:function(e){this.isShow=e,e&&this.getInit()},isShow:function(e){this.$emit("input",e)}},methods:{hide:function(){this.isShow=!1},changePringData:function(e){this.selectRow=e},getInit:function(){var e=this;console.log(this.enterParam,"this.enterParam==>>"),this.selectRow=[],this.$nextTick((function(){e.$refs.bxzTable&&e.$refs.bxzTable.clearSelection()})),this.queryParams["contractNo"]=this.enterParam["contractNo"],this.enterParam["settleMeterEnergyList"]&&this.enterParam["settleMeterEnergyList"].length>0?this.queryParams["areaId"]=this.enterParam["settleMeterEnergyList"][0].areaId:this.enterParam["settleBillDetailVoList"]&&this.enterParam["settleBillDetailVoList"].length>0&&(this.queryParams["areaId"]=this.enterParam["settleBillDetailVoList"][0].areaId),this.queryParams["areaId"]&&Object(s["b"])({areaId:this.queryParams["areaId"]}).then((function(t){e.colModel[0].options=t.data.map((function(e){return{label:e.groupName,value:e.id}}))})),this.handleReset()},handleQuery:function(e){console.log(e,"searchObj==>"),this.queryParams=Object.assign({},this.queryParams,e),this.queryParams.pageNum=1,this.handleSearch()},handleReset:function(){delete this.queryParams["groupId"],delete this.queryParams["payStatus"],this.queryParams["pageNum"]=1,this.handleSearch()},handleSearch:function(){var e=this;this.loading=!0;var t=function(t){e.loading=!1,0===t.code?(e.total=t.data.total,e.listData=t.data?t.data.items:[]):e.$message.error(t.msg)},a=JSON.parse(JSON.stringify(this.queryParams));a["billingDate"]&&a["billingDate"].length>1&&(a["billDateBetween"]=[h()(a.billingDate[0]).format("YYYY-MM"),h()(a.billingDate[1]).format("YYYY-MM")]),1==a["payStatus"]?a["payStatusIn"]=[0,1,3]:2==a["payStatus"]?a["payStatusIn"]=[2]:a["payStatusIn"]=null,Object(r["u"])(a).then(t)},handleSubmit:function(){if(0==this.selectRow.length)return this.$message.warning("请选择账单");console.log(this.selectRow,"ssss===>>"),this.$emit("getData",this.selectRow),this.hide()}}},v=b,g=Object(u["a"])(v,i,n,!1,null,"5107a037",null);t["default"]=g.exports},"423e":function(e,t,a){},4408:function(e,t,a){"use strict";a("2afa")},4702:function(e,t,a){},"48c1":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e._self._c;return t("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?t("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?t("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?t("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?t("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?t("span",{staticClass:"el-input__suffix"},[t("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?t("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?t("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?t("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?t("span",{staticClass:"el-input__count"},[t("span",{staticClass:"el-input__count-inner"},[e._v(" "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+" ")])]):e._e()],2),e.validateState?t("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?t("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:t("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?t("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},r=[],s=(a("99af"),a("fb6a"),a("a9e3"),a("b680"),a("f6f4")),l=a("6725"),o=(a("a15b"),a("d81d"),"\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n"),c=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function d(e){var t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),i=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),n=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),r=c.map((function(e){return"".concat(e,":").concat(t.getPropertyValue(e))})).join(";");return{contextStyle:r,paddingSize:i,borderSize:n,boxSizing:a}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i||(i=document.createElement("textarea"),document.body.appendChild(i));var n=d(e),r=n.paddingSize,s=n.borderSize,l=n.boxSizing,c=n.contextStyle;i.setAttribute("style","".concat(c,";").concat(o)),i.value=e.value||e.placeholder||"";var u=i.scrollHeight,m={};"border-box"===l?u+=s:"content-box"===l&&(u-=r),i.value="";var f=i.scrollHeight-r;if(null!==t){var p=f*t;"border-box"===l&&(p=p+r+s),u=Math.max(p,u),m.minHeight="".concat(p,"px")}if(null!==a){var h=f*a;"border-box"===l&&(h=h+r+s),u=Math.min(h,u)}return m.height="".concat(u,"px"),i.parentNode&&i.parentNode.removeChild(i),i=null,m}var m=a("eab7"),f=a("a3ce"),p={name:"NInput",componentName:"NInput",mixins:[s["a"],l["a"]],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"number"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String,max:{type:Number,default:1/0},min:{type:Number,default:-1/0},toFixed:{type:Number,default:2}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return Object(m["a"])({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e),a=String(t),i=a.indexOf(".");~i&&a.length>i+this.toFixed&&(t=Number(a).toFixed(this.toFixed)),t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.$emit("input",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])}},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var a=e.minRows,i=e.maxRows;this.textareaCalcStyle=u(this.$refs.textarea,a,i)}else this.textareaCalcStyle={minHeight:u(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(e){this.$emit("compositionstart",e),this.isComposing=!0},handleCompositionUpdate:function(e){this.$emit("compositionupdate",e);var t=e.target.value,a=t[t.length-1]||"";this.isComposing=!Object(f["a"])(a)},handleCompositionEnd:function(e){this.$emit("compositionend",e),this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__".concat(e))||[]);if(t.length){for(var a=null,i=0;i<t.length;i++)if(t[i].parentNode===this.$el){a=t[i];break}if(a){var n={suffix:"append",prefix:"prepend"},r=n[e];this.$slots[r]?a.style.transform="translateX(".concat("suffix"===e?"-":"").concat(this.$el.querySelector(".el-input-group__".concat(r)).offsetWidth,"px)"):a.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},h=p,b=a("2877"),v=Object(b["a"])(h,n,r,!1,null,null,null);t["a"]=v.exports},"498c":function(e,t,a){"use strict";a("bbe4")},"4b3b":function(e,t,a){var i={"./404":"8cdb","./404.vue":"8cdb","./biz/adm/finance/bill":"fa9d","./biz/adm/finance/bill/":"fa9d","./biz/adm/finance/bill/components/chargeDislog":"fa4e","./biz/adm/finance/bill/components/chargeDislog.vue":"fa4e","./biz/adm/finance/bill/components/chargeItemTable":"a410","./biz/adm/finance/bill/components/chargeItemTable.vue":"a410","./biz/adm/finance/bill/components/contactDialog":"2824","./biz/adm/finance/bill/components/contactDialog.vue":"2824","./biz/adm/finance/bill/components/defaultItemTable":"f387","./biz/adm/finance/bill/components/defaultItemTable.vue":"f387","./biz/adm/finance/bill/components/expDetailTable":"2f32","./biz/adm/finance/bill/components/expDetailTable.vue":"2f32","./biz/adm/finance/bill/components/receiptDialog":"f186","./biz/adm/finance/bill/components/receiptDialog.vue":"f186","./biz/adm/finance/bill/form":"8fdc","./biz/adm/finance/bill/form.vue":"8fdc","./biz/adm/finance/bill/formDetail":"bb27","./biz/adm/finance/bill/formDetail.vue":"bb27","./biz/adm/finance/bill/form_old":"c23b","./biz/adm/finance/bill/form_old.vue":"c23b","./biz/adm/finance/bill/index":"fa9d","./biz/adm/finance/bill/index.vue":"fa9d","./biz/adm/finance/bill/reviewAfter":"3ec6","./biz/adm/finance/bill/reviewAfter/":"3ec6","./biz/adm/finance/bill/reviewAfter/components/viewDrawer":"2002","./biz/adm/finance/bill/reviewAfter/components/viewDrawer.vue":"2002","./biz/adm/finance/bill/reviewAfter/index":"3ec6","./biz/adm/finance/bill/reviewAfter/index.vue":"3ec6","./biz/adm/finance/bill/reviewAfter/list":"f817","./biz/adm/finance/bill/reviewAfter/list.vue":"f817","./biz/adm/finance/bill/reviewBefore":"0013","./biz/adm/finance/bill/reviewBefore/":"0013","./biz/adm/finance/bill/reviewBefore/components/adjDialog":"78af","./biz/adm/finance/bill/reviewBefore/components/adjDialog.vue":"78af","./biz/adm/finance/bill/reviewBefore/components/viewDrawer":"6fd1","./biz/adm/finance/bill/reviewBefore/components/viewDrawer.vue":"6fd1","./biz/adm/finance/bill/reviewBefore/index":"0013","./biz/adm/finance/bill/reviewBefore/index.vue":"0013","./biz/adm/finance/bill/reviewBefore/list":"3bf4","./biz/adm/finance/bill/reviewBefore/list.vue":"3bf4","./biz/adm/finance/charge":"d56e","./biz/adm/finance/charge/":"d56e","./biz/adm/finance/charge/components/search":"b6a5","./biz/adm/finance/charge/components/search.vue":"b6a5","./biz/adm/finance/charge/index":"d56e","./biz/adm/finance/charge/index.vue":"d56e","./biz/adm/finance/charge/list":"0687","./biz/adm/finance/charge/list.vue":"0687","./biz/adm/finance/config/bill":"ed13","./biz/adm/finance/config/bill/":"ed13","./biz/adm/finance/config/bill/first":"6662","./biz/adm/finance/config/bill/first.vue":"6662","./biz/adm/finance/config/bill/index":"ed13","./biz/adm/finance/config/bill/index.vue":"ed13","./biz/adm/finance/config/bill/second":"09bb","./biz/adm/finance/config/bill/second.vue":"09bb","./biz/adm/finance/config/bill/third":"b5c9","./biz/adm/finance/config/bill/third.vue":"b5c9","./biz/adm/finance/config/charge":"8842","./biz/adm/finance/config/charge/":"8842","./biz/adm/finance/config/charge/components/computeDialog":"2891","./biz/adm/finance/config/charge/components/computeDialog.vue":"2891","./biz/adm/finance/config/charge/components/conditionDialog":"d7a5","./biz/adm/finance/config/charge/components/conditionDialog.vue":"d7a5","./biz/adm/finance/config/charge/components/fifEditDialog":"5bcf","./biz/adm/finance/config/charge/components/fifEditDialog.vue":"5bcf","./biz/adm/finance/config/charge/components/fourthViewDialog":"be4b","./biz/adm/finance/config/charge/components/fourthViewDialog.vue":"be4b","./biz/adm/finance/config/charge/components/fstEditDialog":"a109","./biz/adm/finance/config/charge/components/fstEditDialog.vue":"a109","./biz/adm/finance/config/charge/components/sixEditDialog":"90eb","./biz/adm/finance/config/charge/components/sixEditDialog.vue":"90eb","./biz/adm/finance/config/charge/components/sndEditDialog":"ade4","./biz/adm/finance/config/charge/components/sndEditDialog.vue":"ade4","./biz/adm/finance/config/charge/components/trdEditDialog":"ffb0","./biz/adm/finance/config/charge/components/trdEditDialog.vue":"ffb0","./biz/adm/finance/config/charge/components/trdViewDialog":"9cbb","./biz/adm/finance/config/charge/components/trdViewDialog.vue":"9cbb","./biz/adm/finance/config/charge/fifth":"36c0","./biz/adm/finance/config/charge/fifth.vue":"36c0","./biz/adm/finance/config/charge/first":"8900","./biz/adm/finance/config/charge/first.vue":"8900","./biz/adm/finance/config/charge/fourth":"73e8","./biz/adm/finance/config/charge/fourth.vue":"73e8","./biz/adm/finance/config/charge/iform":"8688","./biz/adm/finance/config/charge/iform.vue":"8688","./biz/adm/finance/config/charge/index":"8842","./biz/adm/finance/config/charge/index.vue":"8842","./biz/adm/finance/config/charge/list":"8214","./biz/adm/finance/config/charge/list.vue":"8214","./biz/adm/finance/config/charge/second":"8bb7","./biz/adm/finance/config/charge/second.vue":"8bb7","./biz/adm/finance/config/charge/sixth":"cada","./biz/adm/finance/config/charge/sixth.vue":"cada","./biz/adm/finance/config/charge/third":"5b6c","./biz/adm/finance/config/charge/third.vue":"5b6c","./biz/adm/finance/config/email":"7977","./biz/adm/finance/config/email/":"7977","./biz/adm/finance/config/email/index":"7977","./biz/adm/finance/config/email/index.vue":"7977","./biz/adm/finance/config/email/viewDialog":"0c7b","./biz/adm/finance/config/email/viewDialog.vue":"0c7b","./biz/adm/finance/config/pay":"f482","./biz/adm/finance/config/pay/":"f482","./biz/adm/finance/config/pay/first":"a3d6","./biz/adm/finance/config/pay/first.vue":"a3d6","./biz/adm/finance/config/pay/index":"f482","./biz/adm/finance/config/pay/index.vue":"f482","./biz/adm/finance/config/pay/pushTime":"3b0a","./biz/adm/finance/config/pay/pushTime.vue":"3b0a","./biz/adm/finance/config/pay/second":"b4bf","./biz/adm/finance/config/pay/second.vue":"b4bf","./biz/adm/finance/customer":"be3a","./biz/adm/finance/customer/":"be3a","./biz/adm/finance/customer/index":"be3a","./biz/adm/finance/customer/index.vue":"be3a","./biz/adm/finance/customer/list":"c490","./biz/adm/finance/customer/list.vue":"c490","./biz/adm/finance/customer/subBill":"92d7","./biz/adm/finance/customer/subBill/":"92d7","./biz/adm/finance/customer/subBill/index":"92d7","./biz/adm/finance/customer/subBill/index.vue":"92d7","./biz/adm/finance/deposit/components/custDialog":"6452","./biz/adm/finance/deposit/components/custDialog.vue":"6452","./biz/adm/finance/deposit/components/pactDialog":"924f","./biz/adm/finance/deposit/components/pactDialog.vue":"924f","./biz/adm/finance/deposit/components/receiveDialog":"3d76","./biz/adm/finance/deposit/components/receiveDialog.vue":"3d76","./biz/adm/finance/deposit/components/refundFormDialog":"b887","./biz/adm/finance/deposit/components/refundFormDialog.vue":"b887","./biz/adm/finance/deposit/dataMap":"e142","./biz/adm/finance/deposit/dataMap/":"e142","./biz/adm/finance/deposit/dataMap/index":"e142","./biz/adm/finance/deposit/dataMap/index.js":"e142","./biz/adm/finance/deposit/receive":"e932","./biz/adm/finance/deposit/receive/":"e932","./biz/adm/finance/deposit/receive/components/formDialog":"0002","./biz/adm/finance/deposit/receive/components/formDialog.vue":"0002","./biz/adm/finance/deposit/receive/index":"e932","./biz/adm/finance/deposit/receive/index.vue":"e932","./biz/adm/finance/deposit/refund":"eac3","./biz/adm/finance/deposit/refund/":"eac3","./biz/adm/finance/deposit/refund/index":"eac3","./biz/adm/finance/deposit/refund/index.vue":"eac3","./biz/adm/finance/form":"3a2b","./biz/adm/finance/form/":"3a2b","./biz/adm/finance/form/components/SearchComp":"6421","./biz/adm/finance/form/components/SearchComp.vue":"6421","./biz/adm/finance/form/components/search":"6371","./biz/adm/finance/form/components/search.vue":"6371","./biz/adm/finance/form/index":"3a2b","./biz/adm/finance/form/index.vue":"3a2b","./biz/adm/finance/form/list":"f8b9","./biz/adm/finance/form/list.vue":"f8b9","./biz/adm/finance/ledger":"8e2b","./biz/adm/finance/ledger/":"8e2b","./biz/adm/finance/ledger/components/PieChart":"9cbe","./biz/adm/finance/ledger/components/PieChart.vue":"9cbe","./biz/adm/finance/ledger/components/PieTabs":"f75c","./biz/adm/finance/ledger/components/PieTabs.vue":"f75c","./biz/adm/finance/ledger/components/amount":"d54b","./biz/adm/finance/ledger/components/amount.vue":"d54b","./biz/adm/finance/ledger/index":"8e2b","./biz/adm/finance/ledger/index.vue":"8e2b","./biz/adm/finance/receipt":"bfed","./biz/adm/finance/receipt/":"bfed","./biz/adm/finance/receipt/index":"bfed","./biz/adm/finance/receipt/index.vue":"bfed","./biz/adm/finance/receipt/list":"c42e","./biz/adm/finance/receipt/list.vue":"c42e","./biz/adm/finance/scheme":"fbc4","./biz/adm/finance/scheme/":"fbc4","./biz/adm/finance/scheme/components/addDialog":"1eb8","./biz/adm/finance/scheme/components/addDialog.vue":"1eb8","./biz/adm/finance/scheme/components/editDialog":"9a58","./biz/adm/finance/scheme/components/editDialog.vue":"9a58","./biz/adm/finance/scheme/components/importDialog":"c3df","./biz/adm/finance/scheme/components/importDialog.vue":"c3df","./biz/adm/finance/scheme/index":"fbc4","./biz/adm/finance/scheme/index.vue":"fbc4","./biz/adm/finance/scheme/list":"d47c","./biz/adm/finance/scheme/list.vue":"d47c","./biz/adm/finance/settle":"e671","./biz/adm/finance/settle/":"e671","./biz/adm/finance/settle/components/addBillDialog":"41eb","./biz/adm/finance/settle/components/addBillDialog/":"41eb","./biz/adm/finance/settle/components/addBillDialog/index":"41eb","./biz/adm/finance/settle/components/addBillDialog/index.vue":"41eb","./biz/adm/finance/settle/components/formTable/ap-panel":"ce27","./biz/adm/finance/settle/components/formTable/ap-panel.vue":"ce27","./biz/adm/finance/settle/components/formTable/ap-panel_old":"e78d","./biz/adm/finance/settle/components/formTable/ap-panel_old.vue":"e78d","./biz/adm/finance/settle/components/formTable/ar-panel":"0d78","./biz/adm/finance/settle/components/formTable/ar-panel.vue":"0d78","./biz/adm/finance/settle/components/formTable/ar-panel_old":"a637","./biz/adm/finance/settle/components/formTable/ar-panel_old.vue":"a637","./biz/adm/finance/settle/components/formTable/fee-panel":"d9be","./biz/adm/finance/settle/components/formTable/fee-panel.vue":"d9be","./biz/adm/finance/settle/components/formTable/installation-panel":"f52d","./biz/adm/finance/settle/components/formTable/installation-panel.vue":"f52d","./biz/adm/finance/settle/components/formTable/meter-panel":"e6ee","./biz/adm/finance/settle/components/formTable/meter-panel.vue":"e6ee","./biz/adm/finance/settle/components/formTable/sum-panel":"8de3","./biz/adm/finance/settle/components/formTable/sum-panel.vue":"8de3","./biz/adm/finance/settle/components/formTable/sum-panel_old":"b6ed","./biz/adm/finance/settle/components/formTable/sum-panel_old.vue":"b6ed","./biz/adm/finance/settle/components/selectContractComp":"f7eb","./biz/adm/finance/settle/components/selectContractComp/":"f7eb","./biz/adm/finance/settle/components/selectContractComp/index":"f7eb","./biz/adm/finance/settle/components/selectContractComp/index.vue":"f7eb","./biz/adm/finance/settle/components/settleView":"c4ff","./biz/adm/finance/settle/components/settleView.vue":"c4ff","./biz/adm/finance/settle/form":"6bb6","./biz/adm/finance/settle/form.vue":"6bb6","./biz/adm/finance/settle/index":"e671","./biz/adm/finance/settle/index.vue":"e671","./biz/adm/finance/settle/list":"d46f","./biz/adm/finance/settle/list.vue":"d46f","./biz/adm/finance/settle/viewForm":"f7af","./biz/adm/finance/settle/viewForm.vue":"f7af","./biz/adm/finance/settle/workflow":"b53b","./biz/adm/finance/settle/workflow/":"b53b","./biz/adm/finance/settle/workflow/index":"b53b","./biz/adm/finance/settle/workflow/index.vue":"b53b","./biz/adm/finance/stati":"7452","./biz/adm/finance/stati/":"7452","./biz/adm/finance/stati/components/amount":"7d7a","./biz/adm/finance/stati/components/amount.vue":"7d7a","./biz/adm/finance/stati/components/collRateBar":"ca1f","./biz/adm/finance/stati/components/collRateBar.vue":"ca1f","./biz/adm/finance/stati/components/collRatePie":"a541","./biz/adm/finance/stati/components/collRatePie.vue":"a541","./biz/adm/finance/stati/index":"7452","./biz/adm/finance/stati/index.vue":"7452","./biz/adm/finance/statistics":"c041","./biz/adm/finance/statistics/":"c041","./biz/adm/finance/statistics/component/CompanyDataDialog":"c500","./biz/adm/finance/statistics/component/CompanyDataDialog.vue":"c500","./biz/adm/finance/statistics/component/CompanyEnergy":"2344","./biz/adm/finance/statistics/component/CompanyEnergy.vue":"2344","./biz/adm/finance/statistics/component/Energy":"63bb","./biz/adm/finance/statistics/component/Energy.vue":"63bb","./biz/adm/finance/statistics/component/EnergyDialog":"b4d5","./biz/adm/finance/statistics/component/EnergyDialog.vue":"b4d5","./biz/adm/finance/statistics/component/Fund":"8851","./biz/adm/finance/statistics/component/Fund.vue":"8851","./biz/adm/finance/statistics/component/Rent":"97c4","./biz/adm/finance/statistics/component/Rent.vue":"97c4","./biz/adm/finance/statistics/component/RentControl":"d2b6","./biz/adm/finance/statistics/component/RentControl.vue":"d2b6","./biz/adm/finance/statistics/index":"c041","./biz/adm/finance/statistics/index.vue":"c041","./biz/adm/finance/statistics/list":"0f1f","./biz/adm/finance/statistics/list.vue":"0f1f","./biz/adm/finance/urge":"c6f8","./biz/adm/finance/urge/":"c6f8","./biz/adm/finance/urge/components/CallBill":"2b18","./biz/adm/finance/urge/components/CallBill.vue":"2b18","./biz/adm/finance/urge/components/CallBillTable":"52fc","./biz/adm/finance/urge/components/CallBillTable.vue":"52fc","./biz/adm/finance/urge/cust":"2c4e","./biz/adm/finance/urge/cust/":"2c4e","./biz/adm/finance/urge/cust/index":"2c4e","./biz/adm/finance/urge/cust/index.vue":"2c4e","./biz/adm/finance/urge/index":"c6f8","./biz/adm/finance/urge/index.vue":"c6f8","./biz/adm/finance/urge/period":"abf3","./biz/adm/finance/urge/period/":"abf3","./biz/adm/finance/urge/period/index":"abf3","./biz/adm/finance/urge/period/index.vue":"abf3","./biz/adm/finance/urge/record":"6756","./biz/adm/finance/urge/record/":"6756","./biz/adm/finance/urge/record/UrgeRecordHisDetailDialog":"5da4","./biz/adm/finance/urge/record/UrgeRecordHisDetailDialog.vue":"5da4","./biz/adm/finance/urge/record/index":"6756","./biz/adm/finance/urge/record/index.vue":"6756","./redirect":"ef3c","./redirect/":"ef3c","./redirect/index":"ef3c","./redirect/index.vue":"ef3c"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=r,e.exports=n,n.id="4b3b"},5089:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"size",width:e.width,title:e.title,visible:e.isShow},on:{"update:visible":function(t){e.isShow=t}}},[t("el-tree",{ref:"checkTree",attrs:{data:e.checkList,props:{label:e.label},"node-key":e.label,"default-expand-all":"","show-checkbox":"",draggable:"","allow-drop":e.allowDrop}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.diaClose()}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("确定")])],1)],1)},n=[],r={props:{value:{type:Boolean,required:!0},title:String,width:{type:String,default:"300px"},checkList:{type:Array,required:!0},label:String},watch:{value:function(e){e&&(this.isShow=e)},isShow:function(e){this.$emit("input",e)}},data:function(){return{isShow:!1,checked:[]}},methods:{diaClose:function(){this.isShow=!1},save:function(){this.$emit("save",this.$refs.checkTree.getCheckedNodes()),this.diaClose()},allowDrop:function(e,t,a){return"inner"!=a}}},s=r,l=(a("1ffb"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"824f0906",null);t["a"]=o.exports},"50e8":function(e,t,a){},"52fc":function(e,t,a){"use strict";a.r(t);a("b680");var i=function(){var e=this,t=e._self._c;return t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"催缴账单",visible:e.isShow,width:"800px",id:"size"},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("div",{ref:"pdf",attrs:{id:"pdf"}},[t("el-card",[t("el-form",[t("el-form-item",{attrs:{label:"客户名称："}},[t("span",[e._v(e._s(e.formData.cusName))])]),t("el-table",{staticStyle:{"margin-top":"8px"},attrs:{data:e.formData.itemList,border:"","header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{prop:"spaceCodes",align:"center",label:"楼宇房源"}}),t("el-table-column",{attrs:{prop:"itemNames",align:"center",label:"收费项",width:"120"}}),t("el-table-column",{attrs:{prop:"billDate",align:"center",label:"账单月份",width:"80"}}),t("el-table-column",{attrs:{prop:"receivableAmt",align:"center",label:"应收金额(元)",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.receivableAmt.toFixed(2))+" ")]}}])}),t("el-table-column",{attrs:{prop:"receiptAmt",align:"center",label:"已收金额(元)",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.receiptAmt.toFixed(2))+" ")]}}])}),t("el-table-column",{attrs:{prop:"pendingAmt",align:"center",label:"待缴金额(元)",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.pendingAmt.toFixed(2))+" ")]}}])})],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"滞纳金："}},[t("span",[e._v(e._s(e.formData.overdueAmtCount))])])],1),t("el-col",{staticStyle:{float:"right"},attrs:{span:6}},[t("el-form-item",{attrs:{label:"待缴合计："}},[t("span",[e._v(e._s(e.formData.pendingAmtCount.toFixed(2))+" 元")])])],1)],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.downloadPdf}},[e._v("下载")]),t("el-button",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],attrs:{type:"primary"}},[e._v("打印")])],1)])},n=[],r=(a("a9e3"),a("b64b"),a("d3b7"),a("159b"),a("b472")),s={props:{value:{type:Boolean,required:!0},type:{type:String,required:!0},rowId:{type:String|Number,required:!0}},data:function(){return{refreshFlag:!1,isShow:!1,printObj:{id:"#pdf",popTitle:"账单",beforeOpenCallback:this.beforeOpen},formData:{cusName:"",overdueAmtCount:0,pendingAmtCount:0,itemList:[]},loading:!1,columns:[{name:"楼宇房源",desc:"spaceCodes",width:200},{name:"收费项",desc:"itemNames"},{name:"账单月份",desc:"billDate"},{name:"应收金额(元)",desc:"receivableAmt"},{name:"已收金额(元)",desc:"receiptAmt"},{name:"待缴金额(元)",desc:"pendingAmt"}]}},watch:{value:function(e){var t=this;if(this.isShow=e,e){this.refreshFlag=!1;var a=function(e){0===e.code?(t.formData.itemList=e.data,t.formData.itemList.forEach((function(e){t.formData.overdueAmtCount+=e.overdueAmt,t.formData.pendingAmtCount+=e.pendingAmt,t.formData.cusName=t.formData.cusName?t.formData.cusName:e.cusName}))):t.$message.error(e.msg)};if("billId"===this.type){var i=JSON.parse(this.rowId);this.formData.overdueAmtCount=i.overdueAmt,this.formData.pendingAmtCount=i.pendingAmt,this.formData.cusName=i.cusName,this.formData.itemList.push(i)}else"cusId"===this.type&&(this.loading=!0,Object(r["c"])({cusId:this.rowId}).then(a).finally((function(){t.loading=!1})))}else this.refreshFlag&&(this.$emit("refresh"),this.refreshFlag=!1)}},methods:{hide:function(){this.formData={cusName:"",overdueAmtCount:0,pendingAmtCount:0,itemList:[]},this.$emit("input",!1)},getList:function(){},downloadPdf:function(){this.$PDFSave(this.$refs.pdf,this.formData.cusName)},beforeOpen:function(){},addRecord:function(){var e=this;"billId"===this.type?add({urgeType:1,billId:this.rowId}).then((function(t){0==t.code?e.refreshFlag=!0:e.$message.error(t.msg)})):"cusId"===this.type&&add({urgeType:2,cusId:this.rowId}).then((function(t){0==t.code?e.refreshFlag=!0:e.$message.error(t.msg)}))}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},5384:function(e,t,a){"use strict";a("0c1e")},"53ba":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("c7eb"),n=a("1da1"),r=(a("d81d"),a("e9c4"),a("b64b"),a("d3b7"),a("159b"),a("cb37")),s=a("ab39"),l=a("5f87"),o={data:function(){return{areaList:[],buildingList:[],floorList:[],roomList:[],cascColModel:{}}},computed:{parks:function(){return Object(l["a"])()}},methods:{getAreaList:function(){this.areaList=JSON.parse(JSON.stringify(this.parks))},getBuildingList:function(e){var t=this;return Object(n["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(r["a"])(e);case 2:n=a.sent,0!==n.code&&200!==n.code||(t.buildingList=n.data.items);case 4:case"end":return a.stop()}}),a)})))()},getFloorList:function(e){var t=this;Object(r["b"])(e).then((function(e){0!==e.code&&200!==e.code||(t.floorList=e.data.items)}))},getRoomList:function(e){var t=this;Object(r["e"])(e).then((function(e){0!==e.code&&200!==e.code||(t.roomList=e.data.items)}))},changeArea:function(e){this.formData.buildingId="",this.formData.floorId="",this.formData.roomId="",this.buildingList=[],this.roomList=[],this.floorList=[],this.getBuildingList({areaId:e})},changeBuilding:function(e){this.formData.floorId="",this.formData.roomId="",this.roomList=[],this.floorList=[],this.getFloorList({buildingId:e})},changeFloor:function(e){this.formData.roomId="",this.roomList=[],this.getRoomList({floorId:e})},cascLazyLoad:function(e,t){var a=[],i=e.level;e&&this&&1==i?Object(r["a"])({areaId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.buildingName,e}))})).finally((function(){t(a)})):e&&this&&2==i?Object(r["f"])({buildingId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.unitName,e}))})).finally((function(){t(a)})):e&&this&&3==i?Object(r["b"])({unitId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.floorName,e}))})).finally((function(){t(a)})):e&&this&&4==i?Object(r["e"])({floorId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.roomName,e}))})).finally((function(){t(a)})):e&&this&&5==i&&Object(s["a"])({roomId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.spaceName,e}))})).finally((function(){t(a)}))},handleCascData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cascData";if(Array.isArray(e[t])){var a={areaId:"",buildingId:"",unitId:"",floorId:"",roomId:"",spaceId:""},i=Object.keys(a);return e[t].forEach((function(e,t){a[i[t]]=e})),a}}},created:function(){this.getAreaList(),this.cascColModel={displayName:"楼栋房源",columnId:"cascData",placeholder:"请选择楼栋房源",searchType:"cascader",options:this.areaList.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),props:{leaf:"roomName",lazy:!0,value:"id",lazyLoad:this.cascLazyLoad}}}}},5579:function(e,t,a){},5861:function(e,t,a){},"598b":function(e,t,a){"use strict";a("23ae")},"5aa8":function(e,t,a){"use strict";a("5861")},"5b6c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.searchModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"tool-rows mb10"},[t("span",[e._v("共 "),t("span",[e._v(e._s(e.total))]),e._v(" 条")]),t("div",[e.$_has(e.addCode)?t("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-plus"},on:{click:e.handlerAdd}},[e._v("新增")]):e._e()],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData}},[t("el-table-column",{attrs:{prop:"payeeName",align:"center",label:"收款方"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"textcss",on:{click:function(t){return e.handlerView(a.row)}}},[e._v(" "+e._s(a.row.payeeName)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"areaName",align:"center",label:"所属项目","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"bank",align:"center",label:"开户行","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"bankNo",align:"center",label:"账号","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"taxpayerNo",align:"center",label:"纳税人识别号","min-width":"120px","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.statusChange(t,a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{prop:"phone",align:"center",label:"电话","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"bankAddress",align:"center",label:"开户行地址","min-width":"120px","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"payee",align:"center",label:"收款人"}}),t("el-table-column",{attrs:{prop:"reviewer",align:"center",label:"复核人"}}),t("el-table-column",{attrs:{prop:"payeeAddress",align:"center",label:"收款方地址","min-width":"120px","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.$_has(e.editCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row)}}},[e._v("编辑")]):e._e(),e.$_has(e.delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")]):e._e()]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("edit-dialog",{attrs:{enterParam:e.params},on:{refreshList:function(t){return e.getList()}},model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}}),t("view-dialog",{attrs:{enterParam:e.params},model:{value:e.detailShow,callback:function(t){e.detailShow=t},expression:"detailShow"}})],1)},n=[],r=(a("d81d"),a("53ba")),s=a("ffb0"),l=a("9cbb"),o=a("39cc"),c={components:{editDialog:s["default"],viewDialog:l["default"]},mixins:[r["a"]],data:function(){return{addCode:["adm:finance:feepayee:add"],editCode:["adm:finance:feepayee:edit"],delCode:["adm:finance:feepayee:del"],updateShow:!1,detailShow:!1,params:{},loading:!1,total:0,listData:[],queryParams:{pageNum:1,pageSize:10,name:void 0,deviceTypeId:void 0},searchModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]}],rowId:""}},created:function(){this.handleQuery()},mounted:function(){this.searchModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(o["K"])(this.queryParams).then((function(t){e.loading=!1,0===t.code?(e.total=t.data.total,e.listData=t.data.items):e.$message.error(t.msg)})).catch((function(){e.loading=!1,e.$message.error("系统繁忙，请稍后重试")}))},handlerDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["G"])({id:e.id}).then((function(e){0===e.code?(t.$message.success("删除成功!"),t.getList()):t.$message.error(e.msg)}))}))},handlerView:function(e){this.detailShow=!0,this.params={type:"view",rowId:e.id}},handlerEdit:function(e){this.updateShow=!0,this.params={type:"edit",rowId:e.id}},handlerAdd:function(){this.updateShow=!0,this.params={type:"add"}},handleRefresh:function(){this.resetForm("formData"),this.handleQuery()},statusChange:function(e,t){var a=this,i={id:t.id,status:e};Object(o["J"])(i).then((function(i){0==i.code?console.log("feetype enable:",e):(a.$message.error(i.msg),t.status=!t.status)}))}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,n,!1,null,"7636b52a",null);t["default"]=m.exports},"5bcf":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"600px",title:"edit"==e.enterParam.type?"编辑合并收费项":"view"==e.enterParam.type?"查看合并收费项":"新增合并收费项",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:e.form,rules:e.rules,"label-position":"top"}},[t("el-row",[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"view"==e.enterParam.type,placeholder:"请选择项目",clearable:""},on:{change:e.getAreaId},model:{value:e.form.areaId,callback:function(t){e.$set(e.form,"areaId",t)},expression:"form.areaId"}},e._l(e.parks,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"选择要合并的收费项目:",prop:"itemIds"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"view"==e.enterParam.type,filterable:"",multiple:"",placeholder:"请选择收费项目","no-data-text":"需要选择所属项目"},model:{value:e.itemsList,callback:function(t){e.itemsList=t},expression:"itemsList"}},e._l(e.itemOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.itemName,value:e.id}})})),1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"合并后费项名称:",prop:"mergerName"}},[t("el-input",{attrs:{disabled:"view"==e.enterParam.type,placeholder:"请输入"},model:{value:e.form.mergerName,callback:function(t){e.$set(e.form,"mergerName",t)},expression:"form.mergerName"}})],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[t("el-input",{attrs:{disabled:"view"==e.enterParam.type,type:"textarea","show-word-limit":"",rows:3,maxlength:"200"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),"view"!=e.enterParam.type?t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")]):e._e()],1)],1)},n=[],r=(a("7db0"),a("a15b"),a("e9c4"),a("b64b"),a("d3b7"),a("159b"),a("5f87")),s=a("39cc"),l={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},computed:{parks:function(){return Object(r["a"])()}},data:function(){var e=this;return{isShow:!1,form:{areaId:"",areaName:"",itemIds:"",itemNames:"",mergerName:"",remark:""},rules:{areaId:[{required:!0,message:"请选择所属项目",trigger:"change"}],mergerName:[{required:!0,message:"合并后费项名称不能为空",trigger:"blur"}],itemIds:[{required:!0,validator:function(t,a,i){0==e.itemsList.length?i(new Error("请选择收费项!")):i()},trigger:"change"}]},itemOptions:[],itemsList:[]}},watch:{value:function(e){this.isShow=e,e&&("edit"!=this.enterParam.type&&"view"!=this.enterParam.type||(this.form=JSON.parse(JSON.stringify(this.enterParam.row)),this.getAreaId(this.form.areaId),this.form.itemIds&&(this.itemsList=this.form.itemIds.split(","))))},isShow:function(e){this.$emit("input",e)}},created:function(){},methods:{getAreaId:function(e){var t=this.parks.find((function(t){return t.areaId===e}));t&&(this.form.areaName=t.areaName),this.getItemsOption(e)},getItemsOption:function(e){var t=this;Object(s["h"])({areaId:e}).then((function(e){0==e.code?t.itemOptions=e.data:t.$message.error(e.msg)}))},submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=[];e.itemsList.forEach((function(t){var i=e.itemOptions.find((function(e){return e.id===t}));i&&a.push(i.itemName)})),console.log("items:",a),e.form.itemIds=e.itemsList.join(","),e.form.itemNames=a.join(",");var i=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refreshList"),e.hide()):e.$message.error(t.msg)};"edit"===e.enterParam.type?Object(s["B"])(e.form).then(i):Object(s["z"])(e.form).then(i)}}))},hide:function(){this.isShow=!1,this.resetForm("form"),this.form={},this.itemOptions=[],this.itemsList=[]}}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},"5da4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"推送详情",visible:e.vis,width:"680px"},on:{"update:visible":function(t){e.vis=t}}},[t("el-card",[t("p",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e._v("推送详情")]),e.cur?t("p",{staticStyle:{"text-indent":"12px"}},[e._v(e._s(e.cur.msg))]):e._e()]),t("el-card",{staticStyle:{"margin-top":"8px"}},[t("p",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e._v("推送对象")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.data,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{prop:"type",label:"推送类型",width:"80"}}),t("el-table-column",{attrs:{prop:"target",label:"推送目标"}}),t("el-table-column",{attrs:{prop:"pushTime",label:"推送时间",width:"170"}}),t("el-table-column",{attrs:{prop:"result",label:"推送结果",width:"120"}})],1)],1)],1)},n=[],r={props:{value:{type:Boolean,required:!0},cur:{type:Object,required:!1}},computed:{vis:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){if(e){this.data.length=0;var t={};switch(this.cur.urgeType){case 1:t.type="微信";break;case 2:t.type="邮箱";break;case 4:t.type="短信";break}t.result=0===this.cur.status?"待推送":"发送成功",t.target=this.cur.target,t.pushTime=this.cur.pushTime,this.data.push(t)}}},data:function(){return{loading:!1,data:[]}}},s=r,l=a("2877"),o=Object(l["a"])(s,i,n,!1,null,null,null);t["default"]=o.exports},"5df8":function(e,t,a){"use strict";a("0fa0")},"5f34":function(e,t,a){},"600b":function(e,t,a){},6103:function(e,t,a){},6371:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"top"},[t("div",{staticClass:"grid-content"},[e._v("账期")]),t("el-date-picker",{attrs:{size:"mini",type:"month",align:"left","unlink-panels":"",clearable:!1,"range-separator":"至","value-format":"yyyy-MM",placeholder:"请选择账期"},model:{value:e.billDateTime,callback:function(t){e.billDateTime=t},expression:"billDateTime"}}),t("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"mini"},on:{click:e.getTableData}},[e._v("查询")]),t("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"mini"},on:{click:e.exportTable}},[e._v("导出")])],1)},n=[],r=(a("a9e3"),{props:{billDate:{type:String},index:{type:Number|String}},data:function(){return{billDateTime:this.billDate}},created:function(){},mounted:function(){},methods:{getTableData:function(){this.$emit("getTableData",this.index,this.billDateTime)},exportTable:function(){this.$emit("exportTable",this.index,this.billDateTime)}}}),s=r,l=(a("293b"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"fa9092e4",null);t["default"]=o.exports},"63bb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"}},[t("div",{staticStyle:{display:"flex"}},[t("span",{staticClass:"echartTitle"},[e._v(" 能耗分析 ")]),t("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择项目"},on:{change:e.handleChange},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1),t("div",{staticClass:"activeClass",staticStyle:{"margin-left":"20px"}},[e._v(" 月份： "),t("el-date-picker",{attrs:{clearable:!1,size:"small",type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},on:{change:e.handleChange},model:{value:e.months,callback:function(t){e.months=t},expression:"months"}})],1)],1),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-button",{attrs:{size:"small",round:"",type:2==e.energyType?"primary":"",plain:""},on:{click:function(t){return e.changeEnergy(2)}}},[e._v("用电量")]),t("el-button",{attrs:{size:"small",round:"",type:1==e.energyType?"primary":"",plain:""},on:{click:function(t){return e.changeEnergy(1)}}},[e._v("用水量")])],1),t("div",{staticStyle:{"margin-top":"10px"}},[t("div",{attrs:{id:"energyChart"}})])])},n=[],r=(a("d81d"),a("e9c4"),a("b64b"),a("76bd")),s=a("5f87"),l=a("c1df"),o=a.n(l),c={data:function(){return{energyType:2,loading:!1,months:[],areaId:null,areaList:[],myChart:null,chartData:[]}},computed:{parks:function(){return Object(s["a"])()}},created:function(){this.months=[o()().subtract(1,"year").add(1,"month").format("YYYY-MM"),o()().format("YYYY-MM")],this.getAreaList()},mounted:function(){var e=this;setTimeout((function(){e.getInit()}),200)},methods:{changeEnergy:function(e){this.energyType=e,this.handleChange()},handleChange:function(){var e=this;this.loading=!0;var t={areaId:this.areaId,begin:o()(this.months[0]).format("YYYY-MM"),end:o()(this.months[1]).format("YYYY-MM"),meterFeeType:this.energyType};Object(r["b"])(t).then((function(t){0==t.code&&(e.chartData=t.data,e.getInit()),e.loading=!1})).catch((function(){e.loading=!1}))},getAreaList:function(){var e=JSON.parse(JSON.stringify(this.parks));this.areaList=e.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),this.areaList.length>0&&(this.areaId=this.areaList[0].id,this.handleChange())},getInit:function(){var e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"20",containLabel:!0},xAxis:[{type:"category",data:this.chartData.map((function(e){return e.billDate}))}],yAxis:[{type:"value",name:2==this.energyType?"Kwh":"吨",position:"left",alignTicks:!0,axisLine:{show:!0}}],series:[{name:2==this.energyType?"用电量":"用水量",type:"line",smooth:!0,label:{show:!0,position:"top"},emphasis:{focus:"series"},data:this.chartData.map((function(e){return e.qty}))}]};this.myChart=this.$echarts.init(document.getElementById("energyChart")),this.myChart.setOption(e),window.onresize=function(){this.myChart&&this.myChart.resize()}}}},d=c,u=(a("c25d"),a("2877")),m=Object(u["a"])(d,i,n,!1,null,"fbf1eb70",null);t["default"]=m.exports},6421:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"top"},[t("div",{staticClass:"grid-content"},[e._v("账期")]),t("el-date-picker",{attrs:{size:"mini","unlink-panels":"",type:"monthrange","value-format":"yyyy-MM","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},model:{value:e.query.billDateArr,callback:function(t){e.$set(e.query,"billDateArr",t)},expression:"query.billDateArr"}}),t("div",{staticClass:"grid-content"},[e._v("空间")]),t("span",[t("el-cascader",{ref:"elcascader",attrs:{"popper-class":"space","popper-append-to-body":!1,clearable:"",size:"mini",props:e.cascaderProps,options:e.areaList},on:{change:e.getSpaceCode}})],1),t("div",{staticClass:"grid-content"},[e._v("客户名称")]),t("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:""},model:{value:e.query.cusName,callback:function(t){e.$set(e.query,"cusName",t)},expression:"query.cusName"}}),t("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"mini"},on:{click:e.getTableData}},[e._v("查询")]),t("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"mini"},on:{click:e.exportTable}},[e._v("导出")])],1)},n=[],r=(a("a15b"),a("d81d"),a("e9c4"),a("a9e3"),a("b64b"),a("d3b7"),a("53ba")),s=a("cb37"),l=a("5f87"),o={props:{billDate:{type:Array},index:{type:Number|String}},computed:{parks:function(){return Object(l["a"])()}},mixins:[r["a"]],data:function(){return{query:{billDateArr:this.billDate||[],spaceCode:"",spaceName:"",cusName:""},cascaderProps:{lazy:!0,checkStrictly:!0,lazyLoad:this.cascLazyLoad},areaList:[]}},mounted:function(){this.getAreaList()},methods:{getAreaList:function(){var e=JSON.parse(JSON.stringify(this.parks));this.areaList=e.map((function(e){return e.label=e.areaName,e.id=e.areaId,e.value=e.areaCode,e}))},cascLazyLoad:function(e,t){var a=e.level,i=[];if(0===a){var n=this.areaList.map((function(e){return{id:e.areaId,value:e.areaCode,label:e.areaName}}));console.log(n,"false===>>>"),t(n)}1===a&&Object(s["a"])({areaId:e.data.id}).then((function(e){var t=e.data.items;i=t.map((function(e){return{id:e.id,value:e.buildingCode,label:e.buildingName}}))})).finally((function(){t(i)})),2===a&&Object(s["f"])({buildingId:e.data.id}).then((function(e){var t=e.data.items;i=t.map((function(e){return{id:e.id,value:e.unitCode,label:e.unitName}}))})).finally((function(){t(i)})),3===a&&Object(s["b"])({unitId:e.data.id}).then((function(e){var t=e.data.items;i=t.map((function(e){return{id:e.id,value:e.floorCode,label:e.floorName}}))})).finally((function(){t(i)})),e&&this&&4==a&&Object(s["e"])({floorId:e.data.id}).then((function(e){var t=e.data.items;i=t.map((function(e){return{id:e.id,value:e.roomCode,label:e.roomName}}))})).finally((function(){t(i)})),e&&this&&a>=5&&t([])},getSpaceCode:function(e){this.query.spaceCode=e.length<=4?e.join("-"):e[e.length-1]},getTableData:function(){this.$emit("getTableData",this.index,this.query)},exportTable:function(){this.$emit("exportTable",this.index,this.query)}}},c=o,d=(a("e15f"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"2b20d3cc",null);t["default"]=u.exports},6452:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"请选择客户",visible:e.isShow,"append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",{directives:[{name:"show",rawName:"v-show",value:1===e.type,expression:"type === 1"}]},[t("ns-search-bar",{attrs:{columns:e.searchModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"slideshowTable",attrs:{data:e.tableData,size:"small","row-key":"id"}},[t("el-table-column",{attrs:{prop:"entName",label:"企业名称",align:"center"}}),t("el-table-column",{attrs:{prop:"creditCode",label:"信用代码",align:"center"}}),t("el-table-column",{attrs:{prop:"legalPerson",label:"法人",align:"center"}}),t("el-table-column",{attrs:{prop:"contact",label:"联系人",align:"center"}}),t("el-table-column",{attrs:{prop:"phone",label:"联系电话",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.selectClick(a.row)}}},[e._v(" 选择 ")])]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:function(t){return e.getList()}}})],1),t("el-card",{directives:[{name:"show",rawName:"v-show",value:2===e.type,expression:"type === 2"}]},[t("ns-search-bar",{attrs:{columns:e.searchModel2,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"slideshowTable",attrs:{data:e.tableData,size:"small","row-key":"id"}},[t("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),t("el-table-column",{attrs:{prop:"idCard",label:"身份证号码",align:"center"}}),t("el-table-column",{attrs:{prop:"phone",label:"手机号码",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.selectClick(a.row)}}},[e._v(" 选择 ")])]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:function(t){return e.getList()}}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)},n=[],r=(a("b0c0"),a("a9e3"),a("b775")),s=(a("2934"),{entInfoList:"/adm-service/ent/info/list",entInfoDetail:"/adm-service/ent/info/get",entInfoOptionList:"/adm-service/ent/info/all",entTypeEdit:"/adm-service/ent/info/editEntType",entLogoEdit:"/adm-service/ent/info/editLogo",entRecordExport:"/enterprise/smartEnterpriseRecordExport"}),l=function(e){return r["a"].post(s.entInfoList,e)},o=function(e){return Object(r["a"])({url:"/adm-service/bes/apartmentTenant/page",method:"post",data:e})},c={props:{value:{type:Boolean,required:!0},type:{type:Number,required:!0},areaId:{type:String}},data:function(){return{listLoading:!1,isShow:!1,searchModel:[{columnId:"entName",displayName:"企业名称",searchType:"input",placeholder:"企业名称"}],searchModel2:[{columnId:"name",displayName:"客户名称",searchType:"input",placeholder:"客户名称"}],queryParams:{pageNum:1,pageSize:10,propertyEntType:20},tableData:[],total:0,currentRow:null}},watch:{value:function(e){this.isShow=e,e&&(1==this.type?this.queryParams={pageNum:1,pageSize:this.queryParams.pageSize||10,propertyEntType:20}:this.queryParams={pageNum:1,pageSize:this.queryParams.pageSize||10,certifiedStatus:1,status:0,userType:1},this.getList())}},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList()},handleRefresh:function(){1==this.type?this.queryParams={pageNum:1,pageSize:this.queryParams.pageSize,propertyEntType:20}:this.queryParams={pageNum:1,pageSize:this.queryParams.pageSize,certifiedStatus:1,status:0,userType:1},this.getList()},getList:function(){var e=this;this.listLoading=!0,this.queryParams["areaId"]=this.areaId,1==this.type?l(this.queryParams).then((function(t){e.listLoading=!1,0==t.code?(e.tableData=t.data.items,e.total=t.data.total):e.$message.error(t.msg)})).catch((function(t){e.listLoading=!1})):o(this.queryParams).then((function(t){e.listLoading=!1,0==t.code?(e.tableData=t.data.items,e.total=t.data.total):e.$message.error(t.msg)})).catch((function(t){e.listLoading=!1}))},hide:function(){this.$emit("input",!1)},selectClick:function(e){this.currentRow={clienteleName:e.entName||e.name,clienteleId:e.entId||e.id},this.$emit("save",this.currentRow),this.hide()}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=m.exports},"649c":function(e,t,a){"use strict";a("bd5f")},6662:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"20px"}},[t("el-form",{ref:"editForm",attrs:{model:e.form,"label-width":"150px",rules:e.rules}},[t("el-form-item",{attrs:{label:"账单推送时间",prop:"date"}},[t("el-time-select",{attrs:{placeholder:"开始推送时间","picker-options":{start:"00:00",step:"00:30",end:"23:30"}},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveConfig}},[e._v("保存")])],1)],1)],1)},n=[],r=(a("4de4"),a("d3b7"),a("1066")),s={data:function(){return{form:{date:""},rules:{date:[{required:!0,message:"请选择推送时间",trigger:"change"}]}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["b"])({type:1}).then((function(t){if(0==t.code){var a=t.data.filter((function(e){return"Bill_Push_time"===e.id}));console.log("temp: ",a),e.form.date=a[0].value}}))},saveConfig:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$confirm("确认要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:"Bill_Push_time",type:1,value:e.form.date},a=[t];Object(r["a"])({items:a}).then((function(t){0===t.code?e.$message.success("保存成功!"):e.$message.error(t.msg)}))}))}))}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},6702:function(e,t,a){"use strict";a("5f34")},6756:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleSearch,onReset:e.handleSearch}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div")]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleView(i.row)}}},[e._v("详情")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)]),t("UrgeRecordHisDetailDialog",{attrs:{cur:e.curUrgeRecordHis},model:{value:e.visUrgeRecordHisDetail,callback:function(t){e.visUrgeRecordHisDetail=t},expression:"visUrgeRecordHisDetail"}})],1)},n=[],r=(a("a15b"),a("d81d"),a("d3b7"),a("b472")),s=a("5da4"),l=a("53ba"),o={mixins:[l["a"]],components:{UrgeRecordHisDetailDialog:s["default"]},data:function(){return{visUrgeRecordHisDetail:!1,curUrgeRecordHis:null,loading:!1,listData:[],total:0,columns:[{name:"客户名称",desc:"cusName"},{name:"催缴账期",desc:"billDate"},{name:"房源编号",desc:"spaceCodes"},{name:"推送方式",desc:"urgeType",filter:function(e){if(7===e)return"全部";var t=[];return 1!==e&&3!==e&&5!==e||t.push("微信"),2!==e&&3!==e&&6!==e||t.push("邮箱"),4!==e&&5!==e&&6!==e||t.push("短信"),null===t||void 0===t?void 0:t.join()}},{name:"推送时间",desc:"pushTime"},{name:"详情",slotName:"action",fixed:"right",width:120}],colModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]},{displayName:"推送类型",columnId:"urgeType",placeholder:"请选择推送类型",searchType:"select",options:[{value:1,label:"微信"},{value:2,label:"邮箱"},{value:4,label:"短信"}]},{displayName:"客户名称",columnId:"cusName",placeholder:"请输入客户名称",searchType:"input"}],queryParams:{pageNum:1,pageSize:10}}},methods:{handleSearch:function(e){var t=this;this.loading=!0,e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);Object(r["e"])(a).then((function(e){0===e.code?(t.listData=e.data.items,t.total=e.data.total):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},handleView:function(e){this.curUrgeRecordHis=e,this.visUrgeRecordHisDetail=!0}},created:function(){this.handleSearch()},mounted:function(){this.colModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},"67de":function(e,t,a){"use strict";a("8185")},"68d3":function(e,t,a){"use strict";a("7dd3")},"69c5":function(e,t,a){"use strict";a("bbe44")},"6a25":function(e,t,a){"use strict";a("93d4")},"6ad1":function(e,t,a){},"6bb6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tabel-container"},[t("el-card",{attrs:{shadow:"never"}},[t("div",{staticStyle:{"font-size":"20px","line-height":"20px","margin-bottom":"16px",color:"#1e2027"}},[t("div",[e._v(" "+e._s("add"===e.enterParams.type?"新增结算单":"编辑结算单")+" ")])]),t("div",[t("div",{staticClass:"text-title item-title"},[e._v("基础信息：")]),t("el-form",{staticClass:"formBox",attrs:{model:e.formData,"label-width":"100px","label-position":"right",size:"small"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"contractNo",label:"合同编号"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:"edit"===e.enterParams.type},on:{focus:e.handleSelectContract},model:{value:e.formData.contractNo,callback:function(t){e.$set(e.formData,"contractNo",t)},expression:"formData.contractNo"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"cusName",label:"客户名称"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择合同"},model:{value:e.formData.cusName,callback:function(t){e.$set(e.formData,"cusName",t)},expression:"formData.cusName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"settleDate",label:"结算日期"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",type:"date",placeholder:"选择账期","value-format":"yyyy-MM-dd"},on:{change:e.handleSettleDateChange},model:{value:e.formData.settleDate,callback:function(t){e.$set(e.formData,"settleDate",t)},expression:"formData.settleDate"}})],1)],1)],1)],1),t("installation-panel",{attrs:{source:e.formData.settleInstallationRecordList,"edit-mode":!0}}),t("meter-panel",{attrs:{source:e.formData.settleMeterEnergyList,"edit-mode":!0}}),t("ar-panel",{attrs:{source:e.formData.settleBillList,"edit-mode":!!e.formData.contractId,priceTotal:e.priceTotal},on:{addBill:e.handleAddBill}}),t("ap-panel",{attrs:{source:e.formData.settleDepositList,"edit-mode":!!e.formData.contractId,priceTotal:e.priceTotal},on:{changeDeposit:e.changeDeposit},model:{value:e.formData.opDeposit,callback:function(t){e.$set(e.formData,"opDeposit",t)},expression:"formData.opDeposit"}}),t("fee-panel",{attrs:{source:e.formData.settleFeeRecordList,payeeOption:e.payeeOption,priceTotal:e.priceTotal,"edit-mode":!!e.formData.contractId}}),t("sum-panel",{attrs:{priceTotal:e.priceTotal}})],1),t("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[e.formData.contractId?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v("保存")]):e._e(),t("el-button",{attrs:{type:"info",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1)]),t("select-contract-comp",{on:{getData:e.getContractData},model:{value:e.compShow,callback:function(t){e.compShow=t},expression:"compShow"}}),t("AddBillDialog",{attrs:{enterParam:e.formData},on:{getData:e.handleAdd},model:{value:e.showAddBill,callback:function(t){e.showAddBill=t},expression:"showAddBill"}})],1)},n=[],r=a("c7eb"),s=a("1da1"),l=a("5530"),o=(a("4de4"),a("d81d"),a("e9c4"),a("b680"),a("b64b"),a("d3b7"),a("159b"),a("ce27")),c=a("0d78"),d=a("d9be"),u=a("f52d"),m=a("8de3"),f=a("e6ee"),p=a("f7eb"),h=(a("0a20"),a("7602")),b=a("ce80"),v=a("39cc"),g=a("41eb"),y=a("c1df"),w=a.n(y),x={components:{ApPanel:o["default"],ArPanel:c["default"],FeePanel:d["default"],InstallationPanel:u["default"],SumPanel:m["default"],MeterPanel:f["default"],AddBillDialog:g["default"],SelectContractComp:p["default"]},props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},computed:{priceTotal:function(){var e=0,t=0,a=0,i=0,n=0,r=0,s=0;return this.formData.settleBillList&&this.formData.settleBillList.length>0&&this.formData.settleBillList.forEach((function(i){1==i.settleBillType?e+=+i.pendingAmt:2==i.settleBillType?t+=+i.receiptAmt:3==i.settleBillType&&(a+=+i.pendingAmt)})),this.formData.settleDepositList&&this.formData.settleDepositList.length>0&&this.formData.opDeposit&&this.formData.settleDepositList.forEach((function(e){i+=+e.notRefundMoney})),this.formData.settleFeeRecordList&&this.formData.settleFeeRecordList.length>0&&this.formData.settleFeeRecordList.forEach((function(e){1==e.settleType?r+=e.amount:2==e.settleType&&(n+=e.amount)})),s=e-t-i-n+r,this.formData["billArAmount"]=e,this.formData["billApAmount"]=t,this.formData["billBadAmount"]=a,this.formData["depositApAmount"]=i,this.formData["feeApAmount"]=n,this.formData["feeArAmount"]=r,[{billArAmount:e.toFixed(2),billApAmount:t.toFixed(2),billBadAmount:a.toFixed(2),depositApAmount:(i||0).toFixed(2),feeApAmount:n.toFixed(2),feeArAmount:r.toFixed(2),allTotal:s.toFixed(2)}]}},data:function(){return{loading:!1,showAddBill:!1,payeeOption:[],formData:{contractId:"",contractNo:"",cusName:"",settleDate:"",opDeposit:null,subjectMatterType:1,settleArRecordList:[],settleApRecordList:[],settleBillDetailVoList:[],settleBillList:[],settleDepositList:[],settleFeeRecordList:[],settleInstallationRecordList:[],settleMeterEnergyList:[]},compShow:!1}},mounted:function(){"edit"===this.enterParams.type?this.initData():this.formData.settleDate=w()().format("YYYY-MM-DD")},methods:{changeDeposit:function(){var e=this;this.formData.opDeposit&&1==this.formData.opDeposit?Object(h["d"])({pageNum:1,pageSize:100,contractId:this.formData.contractId}).then((function(t){e.formData.settleDepositList=t.data.items.map((function(e){return e.depositId=e.id,e.notRefundMoney=(e.money-e.refundMoney).toFixed(2),e.id=null,e}))})):this.formData.settleDepositList=[]},getPayeeAll:function(e){var t=this;Object(v["F"])({areaId:e}).then((function(e){0==e.code&&(t.payeeOption=e.data||[])}))},handleAddBill:function(){if(!this.formData.contractId)return this.$message.warning("请先选择合同");this.showAddBill=!0},handleAdd:function(e){var t=this;console.log("handle",e),e.forEach((function(e){var a=t.formData.settleBillList.filter((function(t){return t.billId&&t.billId==e.id}));console.log(a,"findImte"),a&&0!=a.length||t.formData.settleBillList.push(Object(l["a"])(Object(l["a"])({},e),{},{billId:e.id})),t.$forceUpdate()}))},clearForm:function(){this.formData=Object.assign(this.formData,{contractId:"",contractNo:"",cusName:"",subjectMatterType:1,settleArRecordList:[],settleApRecordList:[],settleBillDetailVoList:[],settleBillList:[],settleDepositList:[],settleFeeRecordList:[],settleInstallationRecordList:[],settleMeterEnergyList:[]})},goBack:function(){this.clearForm(),this.forward("List")},handleSelectContract:function(){this.compShow=!0},initData:function(){var e=this;Object(b["c"])({id:this.enterParams.rowId}).then((function(t){0==t.code&&(console.log("resssss:",t),e.formData=t.data,e.formData["areaId"]=e.formData["settleMeterEnergyList"]&&e.formData["settleMeterEnergyList"].length>0?e.formData["settleMeterEnergyList"][0].areaId:"",e.getPayeeAll(e.formData.areaId))}))},getContractData:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.formData.settleDate||t.$message.error("结算日期不能为空"),t.clearForm(),t.loading=!0,Object(b["d"])({contractId:e.contractId,subjectMatterType:e.contractType,settleDate:t.formData.settleDate}).then((function(e){if(0===e.code){var a=e.data;t.formData=Object.assign({},t.formData,a),t.formData["areaId"]=t.formData["settleMeterEnergyList"]&&t.formData["settleMeterEnergyList"].length>0?t.formData["settleMeterEnergyList"][0].areaId:"",t.formData.opDeposit=0,t.formData.settleDepositList=[],t.getPayeeAll(t.formData.areaId)}})).catch((function(e){})).finally((function(){t.loading=!1}));case 4:case"end":return a.stop()}}),a)})))()},handleSave:function(){var e=this;if(console.log("form_data:",this.formData),!this.formData.settleDate)return this.$message.error("结算日期不能为空");this.loading=!0;var t=JSON.parse(JSON.stringify(this.formData)),a=!0,i=!0;if(t.settleBillList.length>0&&t.settleBillList.forEach((function(e){e.settleBillType||(a=!1)})),t.settleDepositList.length>0&&t.settleDepositList.forEach((function(e){e.payeeId||(i=!1)})),!i)return this.loading=!1,this.$message.error("押金请绑定收款方");if(t.settleFeeRecordList.length>0&&t.settleFeeRecordList.forEach((function(e){e.settleType&&e.amount&&e.payeeId||(a=!1)})),!a)return this.loading=!1,this.$message.error("请完善结算信息");console.log(t);var n="edit"===this.enterParams.type?b["b"]:b["a"];n(t).then((function(t){0===t.code?(e.goBack(),e.loading=!1,e.$message.success("保存成功!")):e.$message.error(t.msg)})).finally((function(){e.loading=!1}))},expTableDataCreate:function(){this.$refs.expTable.createTable()},handleSettleDateChange:function(){console.log("select chagen..."),this.formData.settleDate?this.getContractData({contractId:this.formData.contractId,contractType:this.formData.subjectMatterType}):this.$message.error("结算日期不能为空")}}},D=x,_=(a("77b6"),a("2877")),S=Object(_["a"])(D,i,n,!1,null,"b3bac39c",null);t["default"]=S.exports},"6c32":function(e,t,a){"use strict";a("3594")},"6cdb":function(e,t,a){"use strict";a("d6f8")},"6e60":function(e,t,a){},"6e78":function(e,t,a){"use strict";a("7d0b")},"6f5a":function(e,t,a){"use strict";a("0658")},"6fd1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=this,a=t._self._c;return a("ns-drawer",{attrs:{loading:t.loading,title:"账单详情","top-resume":{title:t.formData.cusName,list:[{label:"账单编码",value:t.formData.billCode},{label:"房号",value:t.formData.roomName},{label:"备注",value:t.formData.remark}]}},on:{close:function(){e.$emit("input",!1)}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"addWorkOrder_top"},[a("span",[t._v("查看账单基本信息:")]),a("div",[2==t.formData.payStatus?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(){t.$emit("addReceipt")}}},[t._v("开收据")]):a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confirmColl}},[t._v("确认收款")])],1)]),a("div",{staticClass:"custom-drawer-body"},[a("div",{staticClass:"custom-drawer-list"},[a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("园区名称")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.areaName)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("楼栋名称")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.buildingName)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("楼层名称")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.floorName)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("房间名称")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.roomName)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("计费周期")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.billPeriodStart+"-"+t.formData.billPeriodEnd)))])]),a("div",{staticClass:"custom-drawer-list-item"},[a("div",{staticClass:"item-label"},[t._v("已收金额")]),a("div",{staticClass:"item-value"},[t._v(t._s(t._f("isEmpty")(t.formData.recAmount)))])])])]),t.formData.detailList?a("div",{staticClass:"custom-drawer-body"},[a("ns-table",{ref:"bxzTable",attrs:{data:t.formData.detailList,columns:t.columns,isShowPagination:!1,highlightCurrentRow:!1}})],1):t._e()])},n=[],r=a("c7eb"),s=a("1da1"),l=(a("a9e3"),a("d3b7"),a("376f")),o={props:{value:{type:Boolean,required:!0},rowId:{type:String|Number,require:!0}},watch:{value:function(e){this.show=e,e&&this.getDetail(this.rowId)}},data:function(){return{loading:!1,show:!1,formData:{},columns:[{name:"费项",desc:"itemName"},{name:"金额",desc:"itemAmount",format:!0},{name:"不含税金额",desc:"itemAmount2",format:!0},{name:"税额",desc:"taxAmount",format:!0},{name:"调整方式",desc:"adjustType",filter:function(e){var t=["无调整","上调百分比","下调百分比","上调固定金额","下调固定金额"];return t[e]?t[e]:"--"},width:"100px"},{name:"调整率",desc:"adjustRate"},{name:"调整金额",desc:"adjustAmount",format:!0},{name:"调整后金额",desc:"adjustedAmount1",format:!0},{name:"调整后不含税金额",desc:"adjustedAmount2",format:!0},{name:"滞纳金",desc:"lateAmount",format:!0},{name:"应收金额",desc:"oreaAmount",format:!0},{name:"已收金额",desc:"recAmount",format:!0}]}},methods:{getDetail:function(e){var t=this;this.loading=!0,Object(l["r"])({id:e}).then(function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(a){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===a.code?t.formData=a.data:t.$message.error(a.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loading=!1}))},confirmColl:function(){var e=this;this.loading=!0,Object(l["d"])({id:this.formData.id}).then((function(t){0===t.code?(e.$message.success("确认成功"),e.getDetail(e.rowId),e.$emit("refresh")):e.$message.error(t.msg)})).finally((function(){e.loading=!1}))}}},c=o,d=(a("6e78"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"8af94e7a",null);t["default"]=u.exports},7167:function(e,t,a){e.exports=a.p+"static/img/wj.e6954595.png"},"71a6":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d}));var i=a("b775"),n="/adm-service/finance/receipt/",r={infoList:n+"info/list",infoAdd:n+"info/add",infoCancel:n+"info/cancel",infoExp:n+"info/exp",infoGet:n+"info/get",infoEdit:n+"info/edit",infoDel:n+"info/del",addApi:n+"add",createTempByBill:n+"createTempByBill",createTempByDeposit:n+"createTempByDeposit",editApi:n+"edit",listApi:n+"list",itemsList:n+"items/list",itemsAdd:n+"items/add",itemsGet:n+"items/get",itemsEdit:n+"items/edit",itemsDel:n+"items/del"},s=function(e){return i["a"].post(r.addApi,e)},l=function(e){return i["a"].post(r.editApi,e)},o=function(e){return i["a"].post(r.listApi,e)},c=function(e){return i["a"].post(r.createTempByBill,e)},d=function(e){return i["a"].post(r.createTempByDeposit,e)}},"72ef":function(e,t,a){},"73e8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.searchModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"tool-rows mb10"},[t("span",[e._v("共 "),t("span",[e._v(e._s(e.total))]),e._v(" 条")]),t("div",[e.$_has(e.addCode)?t("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-plus"},on:{click:e.handlerAdd}},[e._v("新增")]):e._e()],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData}},[t("el-table-column",{attrs:{prop:"itemName",align:"center",label:"收费项名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"areaName",align:"center",label:"所属项目","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"taxRate",align:"center",label:"税率(%)"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.taxRate)+" %")])]}}])}),t("el-table-column",{attrs:{prop:"expName",align:"center",label:"费项分类"}}),t("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.statusChange(t,a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.$_has(e.editCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row.id)}}},[e._v("编辑")]):e._e(),e.$_has(e.delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")]):e._e()]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("view-dialog",{attrs:{enterParam:e.params},model:{value:e.detailShow,callback:function(t){e.detailShow=t},expression:"detailShow"}})],1)},n=[],r=(a("d81d"),a("53ba")),s=a("39cc"),l=a("be4b"),o={props:{navigator:Function},components:{viewDialog:l["default"]},mixins:[r["a"]],data:function(){return{addCode:["adm:finance:feeitems:add"],editCode:["adm:finance:feeitems:edit"],delCode:["adm:finance:feeitems:del"],detailShow:!1,loading:!1,total:0,listData:[],queryParams:{pageNum:1,pageSize:10,name:void 0,deviceTypeId:void 0},searchModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]}],params:{}}},created:function(){this.handleQuery()},mounted:function(){this.searchModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(s["m"])(this.queryParams).then((function(t){e.loading=!1,0===t.code?(e.total=t.data.total,e.listData=t.data.items):e.$message.error(t.msg)})).catch((function(){e.loading=!1,e.$message.error("系统繁忙，请稍后重试")}))},handlerDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["i"])({id:e.id}).then((function(e){0===e.code?(t.$message.success("删除成功!"),t.getList()):t.$message.error(e.msg)}))}))},handlerView:function(e){this.detailShow=!0,this.params={type:"view",rowId:e.id,areaId:e.areaId}},handlerEdit:function(e){this.navigator("IForm",{type:"edit",rowId:e})},handlerAdd:function(){this.navigator("IForm",{type:"add"})},handleRefresh:function(){this.resetForm("formData"),this.handleQuery()},statusChange:function(e,t){var a=this,i={id:t.id,status:e};Object(s["l"])(i).then((function(i){0==i.code?console.log("feetype enable:",e):(a.$message.error(i.msg),t.status=!t.status)}))}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,"6266eabe",null);t["default"]=u.exports},7452:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"el-card is-always-shadow"},[t("div",{staticClass:"el-card__body"},[t("div",{staticClass:"lable"},[e._v("所属项目")]),t("el-select",{attrs:{placeholder:"请选择房源"},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.parks,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)])]),t("el-col",{attrs:{span:24}},[t("amount")],1),t("el-col",{attrs:{span:14}},[t("collRatePie",{attrs:{pieId:"first"}})],1),t("el-col",{attrs:{span:10}},[t("collRateBar",{attrs:{barId:"aaaa"}})],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:12}},[t("collRatePie",{attrs:{pieId:"tt"}})],1),t("el-col",{attrs:{span:12}},[t("collRatePie",{attrs:{pieId:"ss"}})],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[t("collRateBar",{attrs:{barId:"tttv"}})],1)],1)],1)},n=[],r=a("5530"),s=a("2f62"),l=a("7d7a"),o=a("a541"),c=a("ca1f"),d={components:{amount:l["default"],collRatePie:o["default"],collRateBar:c["default"]},computed:Object(r["a"])({},Object(s["b"])(["parks"])),data:function(){return{areaId:""}}},u=d,m=(a("31c2"),a("2877")),f=Object(m["a"])(u,i,n,!1,null,"bdf9bc78",null);t["default"]=f.exports},"755b":function(e,t,a){},7602:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return f})),a.d(t,"g",(function(){return p})),a.d(t,"h",(function(){return h}));var i=a("ade3"),n=a("b775"),r="/adm-service/finance/deposit/",s="/adm-service/finance/deposit/",l=Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({receiveAdd:r+"add",receiveDel:r+"del",receiveEdit:r+"edit"},"receiveDel",r+"del"),"receiveList",r+"list"),"refundAdd",s+"addRefund"),"refundDel",s+"delRefund"),"refundEdit",s+"editRefund"),"refundList",s+"refundList"),o=function(e){return n["a"].post(l.receiveAdd,e)},c=function(e){return n["a"].delete(l.receiveDel,{params:e})},d=function(e){return n["a"].post(l.receiveEdit,e)},u=function(e){return n["a"].post(l.receiveList,e)},m=function(e){return n["a"].post(l.refundAdd,e)},f=function(e){return n["a"].delete(l.refundDel,{params:e})},p=function(e){return n["a"].post(l.refundEdit,e)},h=function(e){return n["a"].post(l.refundList,e)}},"76bd":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"i",(function(){return l})),a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return m})),a.d(t,"j",(function(){return f}));a("b680");var i=a("b775"),n=function(e){return i["a"].post("/adm-service/area/info/amtAvg",e)},r=function(e){return i["a"].post("/adm-service/finance/stat/feeinfo",e)},s=function(e){return i["a"].post("/adm-service/finance/stat/feeitems",e)},l=function(e){return i["a"].post("/adm-service/finance/stat/subjectmattertype",e)},o=function(e){return i["a"].post("/adm-service/finance/stat/month",e)},c=function(e){return i["a"].post("/adm-service/finance/stat/energyCusStatistic",e)},d=function(e){return i["a"].post("/adm-service/finance/stat/energyStatisticByMonth",e)},u=function(e){return i["a"].get("/adm-service/finance/stat/financeStatistic",{params:e})},m=function(e){return i["a"].post("/adm-service/finance/stat/financeStatisticByMonth",e)},f={dataZoom:{type:"slider",show:!0,startValue:0,endValue:16,height:10,bottom:0,showDetail:!1,showDataShadow:!1,fillerColor:"#D4D4D4",borderColor:"transparent",zoomLock:!0,brushSelect:!1,handleStyle:{opacity:0},lineStyle:{opacity:0},textStyle:{fontSize:0}},legend:{top:20},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"7%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:[]},yAxis:[{type:"value",name:"金额",position:"left",alignTicks:!0,axisLine:{show:!0,lineStyle:{color:"#333"}},min:0,max:function(e){return e.max},axisLabel:{formatter:function(e){return e.toFixed(0)}}},{type:"value",name:"缴费率",position:"right",axisLine:{show:!0,lineStyle:{color:"#333"}},min:0,max:100,axisLabel:{formatter:"{value}"}}],series:[{name:"已收金额",type:"bar",stack:"total",barWidth:"50px",tooltip:{valueFormatter:function(e){return e.toFixed(2)+" 元"}},label:{show:!1},emphasis:{focus:"series"},itemStyle:{normal:{color:"#3e77fc"}},data:[]},{name:"未收金额",type:"bar",stack:"total",barWidth:"50px",tooltip:{valueFormatter:function(e){return e.toFixed(2)+" 元"}},label:{show:!1},emphasis:{focus:"series"},itemStyle:{normal:{color:"#3abb37"}},data:[]},{name:"缴费率",type:"line",yAxisIndex:1,label:{show:!0,formatter:function(e){return e.value.toFixed(0)+"%"}},tooltip:{valueFormatter:function(e){return e.toFixed(0)+" %"}},itemStyle:{normal:{color:"#f8aa56"}},data:[]}]}},"77b6":function(e,t,a){"use strict";a("72ef")},"78af":function(e,t,a){"use strict";a.r(t);a("a434");var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"账单调整",visible:e.vis,width:"620px"},on:{"update:visible":function(t){e.vis=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"adj-dialog-body"},[t("el-alert",{attrs:{title:"本次操作预计将影响 ".concat(e.num," 个账单"),type:"warning","show-icon":"",closable:!1}}),t("el-table",{staticStyle:{"margin-top":"8px"},attrs:{data:e.items,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{label:"费项"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{model:{value:a.row.itemId,callback:function(t){e.$set(a.row,"itemId",t)},expression:"scope.row.itemId"}},e._l(e.freeItemsList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.itemName}})})),1)]}}])}),t("el-table-column",{attrs:{label:"调整方式",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{model:{value:a.row.type,callback:function(t){e.$set(a.row,"type",t)},expression:"scope.row.type"}},[t("el-option",{attrs:{value:1,label:"上调比率"}}),t("el-option",{attrs:{value:2,label:"下调比率"}}),t("el-option",{attrs:{value:3,label:"上调金额"}}),t("el-option",{attrs:{value:4,label:"下调金额"}})],1)]}}])}),t("el-table-column",{attrs:{label:"调整值",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{display:"flex"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"调整值",controls:!1,min:0},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}}),t("span",{staticStyle:{"line-height":"20px",padding:"10px"}},[e._v(" "+e._s(a.row.type<3?"%":"元")+" ")])],1)]}}])}),t("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{disabled:0===a.$index,type:"danger",plain:"",size:"mini",circle:"",icon:"el-icon-delete"},on:{click:function(){e.items.splice(a.$index,1)}}})]}}])})],1),t("el-input",{staticStyle:{"margin-top":"20px"},attrs:{type:"textarea",placeholder:"请输入调整备注"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),t("span",{staticClass:"dialog-footer",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"footer-left"},[t("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-circle-plus-outline"},on:{click:function(){e.items.push({itemId:null,type:1,value:0})}}},[e._v(" 新增费项调整")])],1),t("div",{staticClass:"footer-right"},[t("el-button",{on:{click:function(t){e.vis=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)])])},n=[],r=a("5530"),s=a("b85c"),l=(a("a9e3"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("376f")),o=(a("ed08"),{props:{value:{type:Boolean,required:!0},num:{type:Number,required:!0,default:0},condition:{type:Object}},data:function(){return{loading:!1,freeItemsList:[],items:[],remark:""}},computed:{vis:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){var t=this;e&&(this.items=[{itemId:null,type:1,value:0}],this.remark="",this.loading=!0,Object(l["j"])({pageNum:1,pageSize:100}).then((function(e){0==e.code&&(t.freeItemsList=e.data.items)})).finally((function(){t.loading=!1})))}},methods:{handleSubmit:function(){var e,t=this,a=new Set,i=Object(s["a"])(this.items);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(!n.itemId)return void this.$message.error("费项必须配置");if(!(n.value>0))return void this.$message.error("调整值必须大于0");if(a.has(n.itemId))return void this.$message.error("存在重复费项.");a.add(n.itemId)}}catch(c){i.e(c)}finally{i.f()}var o=Object(r["a"])(Object(r["a"])({},this.condition),{},{remark:this.remark,billFeeSchemeAdjustItemList:this.items});this.loading=!0,Object(l["m"])(o).then((function(e){0===e.code?(t.$message.success("调整成功"),t.vis=!1):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))}}}),c=o,d=(a("5384"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},7977:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-card",{staticClass:"mb10",attrs:{shadow:"never"}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{size:"small","label-position":"top",model:e.form,rules:e.rules}},[t("div",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v(e._s("edit"==e.editStatus?"编辑":"保存"))]),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.handleView}},[e._v("预览")]),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.handleRefresh}},[e._v("刷新")])],1),t("div",{staticClass:"email-tip"},[e._v("账单通知、催缴通知邮件模板内容配置")]),t("div",{staticClass:"form-title"},[e._v("收款方信息")]),t("el-row",{staticClass:"ml-20"},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{prop:"collectionUnit"}},[t("span",{staticClass:"form-sub-title",attrs:{slot:"label"},slot:"label"},[e._v(" 收款单位 ")]),t("el-input",{attrs:{disabled:"edit"==e.editStatus},model:{value:e.form.collectionUnit,callback:function(t){e.$set(e.form,"collectionUnit",t)},expression:"form.collectionUnit"}})],1)],1),t("el-col",{attrs:{span:6,offset:3}},[t("el-form-item",{attrs:{prop:"openingBank"}},[t("span",{staticClass:"form-sub-title",attrs:{slot:"label"},slot:"label"},[e._v(" 开户行 ")]),t("el-input",{attrs:{disabled:"edit"==e.editStatus},model:{value:e.form.openingBank,callback:function(t){e.$set(e.form,"openingBank",t)},expression:"form.openingBank"}})],1)],1),t("el-col",{attrs:{span:6,offset:3}},[t("el-form-item",{attrs:{prop:"bankNumber"}},[t("span",{staticClass:"form-sub-title",attrs:{slot:"label"},slot:"label"},[e._v(" 账号 ")]),t("el-input",{attrs:{disabled:"edit"==e.editStatus},model:{value:e.form.bankNumber,callback:function(t){e.$set(e.form,"bankNumber",t)},expression:"form.bankNumber"}})],1)],1)],1),t("el-form-item",{attrs:{label:"发票联系说明",prop:"invoiceRemark"}},[t("el-input",{staticClass:"ml-20 w-50",attrs:{type:"textarea",rows:3,disabled:"edit"==e.editStatus},model:{value:e.form.invoiceRemark,callback:function(t){e.$set(e.form,"invoiceRemark",t)},expression:"form.invoiceRemark"}})],1),t("el-form-item",{attrs:{label:"账单联系说明",prop:"billRemark"}},[t("el-input",{staticClass:"ml-20 w-50",attrs:{type:"textarea",rows:3,disabled:"edit"==e.editStatus},model:{value:e.form.billRemark,callback:function(t){e.$set(e.form,"billRemark",t)},expression:"form.billRemark"}})],1),t("div",{staticClass:"form-title"},[e._v("落款信息")]),t("el-row",{staticClass:"ml-20"},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{prop:"inscribeEnt"}},[t("span",{staticClass:"form-sub-title",attrs:{slot:"label"},slot:"label"},[e._v(" 企业 ")]),t("el-input",{attrs:{disabled:"edit"==e.editStatus},model:{value:e.form.inscribeEnt,callback:function(t){e.$set(e.form,"inscribeEnt",t)},expression:"form.inscribeEnt"}})],1)],1),t("el-col",{attrs:{span:6,offset:3}},[t("el-form-item",{attrs:{prop:"inscribeDept"}},[t("span",{staticClass:"form-sub-title",attrs:{slot:"label"},slot:"label"},[e._v(" 部门 ")]),t("el-input",{attrs:{disabled:"edit"==e.editStatus},model:{value:e.form.inscribeDept,callback:function(t){e.$set(e.form,"inscribeDept",t)},expression:"form.inscribeDept"}})],1)],1),t("el-col",{attrs:{span:8}})],1)],1)],1),t("view-dialog",{attrs:{enterParams:e.optParams},model:{value:e.dlgShow,callback:function(t){e.dlgShow=t},expression:"dlgShow"}})],1)},n=[],r=(a("e9c4"),a("b64b"),a("ac1f"),a("5319"),a("b775")),s={addEmailTemplate:"/adm-service/system/msg/email/add",editEmailTemplate:"/adm-service/system/msg/email/edit",getEmailTemplate:"/adm-service/system/msg/email/get"},l=function(e){return r["a"].post(s.addEmailTemplate,e)},o=function(e){return r["a"].post(s.editEmailTemplate,e)},c=function(e){return r["a"].get(s.getEmailTemplate,e)},d=a("0c7b"),u={components:{viewDialog:d["default"]},data:function(){return{form:{id:void 0,collectionUnit:"",openingBank:"",bankNumber:"",invoiceRemark:"",billRemark:"",inscribeEnt:"",inscribeDept:"",templateModel:""},rules:{collectionUnit:[{required:!0,message:"收款单位不能为空",trigger:"blur"}],openingBank:[{required:!0,message:"开户行不能为空",trigger:"blur"}],bankNumber:[{required:!0,message:"账号不能为空",trigger:"blur"}],invoiceRemark:[{required:!0,message:"发票联系说明不能为空",trigger:"blur"}],billRemark:[{required:!0,message:"账单联系说明不能为空",trigger:"blur"}],inscribeEnt:[{required:!0,message:"企业不能为空",trigger:"blur"}],inscribeDept:[{required:!0,message:"部门不能为空",trigger:"blur"}]},dlgShow:!1,optParams:void 0,editStatus:"edit",loading:!1}},mounted:function(){this.initData()},methods:{textFormat:function(e){if(e){var t=e.replace(/\n/g,"_@").replace(/\r/g,"_#");return t=t.replace(/_#_@/g,"<br/>"),t=t.replace(/_@/g,"<br/>"),t=t.replace(/\s/g,"&nbsp;"),t}},initData:function(){var e=this;this.loading=!0,c().then((function(t){e.loading=!1,0==t.code&&t.data&&(e.form=t.data)})).catch((function(){e.loading=!1}))},initTemplate:function(){var e='<!DOCTYPE html>\n      <html lang="zh-CN">\n      <head>\n        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n      </head>\n      <body>\n        <div style="display:grid;place-items:center;">\n          <div style="width:800px;">\n            <p style="font-size:24px;font-weight:bold;text-align:center;">缴费通知单</p>\n            <div style="margin-left:20px;">\n              \n              <p style="font-size:16px;font-weight:bold;">${payeeCorp}</p>\n              <div style="font-size:13px;">\n                <div style="display:flex;align-items:center;">\n                  <div style="width:70px;text-align:justify;height:20px;line-height:20px;">收款单位\n                    <span style="display:inline-block;padding-left:100%;"></span>\n                  </div>\n                  <div><span style="margin-right:8px;">:</span>${collectionUnit}</div>\n                </div>\n                <div style="display:flex;align-items:center;">\n                  <div style="width:70px;text-align:justify;height:20px;line-height:20px;">开户行\n                    <span style="display:inline-block;padding-left:100%;"></span>\n                  </div>\n                  <div><span style="margin-right:8px;">:</span>${openingBank}</div>\n                </div>\n                <div style="display:flex;align-items:center;">\n                  <div style="width:70px;text-align:justify;height:20px;line-height:20px;">账号\n                    <span style="display:inline-block;padding-left:100%;"></span>\n                  </div>\n                  <div><span style="margin-right:8px;">:</span>${bankNumber}</div>\n                </div>\n              </div>\n              <div style="font-size:13px;margin-top:8px;white-space:pre-wrap;">${invoiceRemark}</div>\n              <p style="font-size:14px;font-weight:bold;text-align:center;">应缴费用明细</p>\n            \n              <table border="1" width="100%" cellspacing="0" cellpadding="0" style="border-collapse:collapse;border-color:#e8e8e8;font-size:13px;">\n                <tr>\n                  <td width="120" style="padding: 12px 20px;">计费面积</td><td style="padding: 12px 20px;">${feeArea}m²</td>\n                  <td style="padding: 12px 20px;">财务房号</td><td style="padding: 12px 20px;">${houseCode}</td>\n                </tr>\n                <tr>\n                  <td colspan="4" style="padding: 12px 20px;">总计费用 大写: ${feeChina}<span style="float:right;">小写: ￥${fee}元<span></td>\n                </tr>\n              </table>\n              <table border="1" width="100%" cellspacing="0" cellpadding="0" style="border-collapse:collapse;border-color:#e8e8e8;font-size:13px;margin-top:-1px;">\n                <% for(rows in tableData) { %>\n                <tr>\n                  <% for(col in rows) { %>\n                  <td style="padding: 12px 20px;">${col}</td>\n                  <% } %>\n                </tr>\n                <%}%>\n              </table>\n              \n              <p style="font-size:13px;white-space:pre-wrap;">${billRemark}</p>\n              \n              <div style="margin-top:100px;margin-left:50%;display:flex;flex-direction:column;align-items:center;font-size:14px;">\n                <div>${inscribeEnt}</div>\n                <div>${inscribeDept}</div>\n                <div>${inscribeTime}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n      </html>';return e},handleView:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.optParams=JSON.stringify(e.form),e.dlgShow=!0)}))},handleRefresh:function(){this.initData()},handleSave:function(){var e=this;"edit"==this.editStatus?this.editStatus="save":this.$refs["form"].validate((function(t){if(t){e.loading=!0;var a=JSON.parse(JSON.stringify(e.form));a.templateModel=e.initTemplate();var i=function(t){e.loading=!1,0==t.code?(e.editStatus="edit",e.$message.success("保存成功!"),e.initData()):e.$message.error("保存失败!")};a.id?o(a).then(i).catch((function(){e.loading=!1})):l(a).then(i).catch((function(){e.loading=!1}))}}))}}},m=u,f=(a("bf17"),a("2877")),p=Object(f["a"])(m,i,n,!1,null,"3ce96986",null);t["default"]=p.exports},"7a7f":function(e,t,a){},"7cd9":function(e,t,a){"use strict";a("eddf")},"7d0b":function(e,t,a){},"7d7a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",[t("div",[t("div",{staticClass:"lable"},[e._v("收费时间")]),t("el-date-picker",{attrs:{type:"month",size:"mini",placeholder:"选择月"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),t("div",{staticClass:"amount-box"},[t("div",{staticClass:"amount-item"},[t("div",{staticClass:"icon"},[t("i",{staticClass:"el-icon-s-flag"})]),t("div",{staticClass:"text-box"},[t("div",{staticClass:"amount"},[e._v("1,345,843.00")]),t("div",[e._v("应收金额")])])]),t("div",{staticClass:"amount-item"},[t("div",{staticClass:"icon"},[t("i",{staticClass:"el-icon-s-flag"})]),t("div",{staticClass:"text-box"},[t("div",{staticClass:"amount"},[e._v("1,345,843.00")]),t("div",[e._v("应收金额")])])]),t("div",{staticClass:"amount-item"},[t("div",{staticClass:"icon"},[t("i",{staticClass:"el-icon-s-flag"})]),t("div",{staticClass:"text-box"},[t("div",{staticClass:"amount"},[e._v("1,345,843.00")]),t("div",[e._v("应收金额")])])])])])},n=[],r=(a("39b4"),{props:{areaId:{type:String,default:""}},data:function(){return{month:"",listData:{}}},mounted:function(){this.month="2022-05"}}),s=r,l=(a("2f03"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"6304edc8",null);t["default"]=o.exports},"7dd3":function(e,t,a){},8185:function(e,t,a){},8214:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"标准价",name:"Second"}}),t("el-tab-pane",{attrs:{label:"收款方",name:"Third"}}),t("el-tab-pane",{attrs:{label:"收费项",name:"Fourth"}}),t("el-tab-pane",{attrs:{label:"账单组",name:"Sixth"}})],1),t(e.subComponent,{tag:"component",attrs:{navigator:e.navigator}})],1)},n=[],r=a("8900"),s=a("8bb7"),l=a("5b6c"),o=a("73e8"),c=a("36c0"),d=a("cada"),u={props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},components:{First:r["default"],Second:s["default"],Third:l["default"],Fourth:o["default"],Fifth:c["default"],Sixth:d["default"]},data:function(){return{activeName:"Second",subComponent:"Second"}},mounted:function(){this.enterParams&&(this.activeName=this.enterParams.activeName||"Second",this.subComponent=this.enterParams.activeName||"Second")},methods:{navigator:function(e,t){this.forward(e,t)},handleClick:function(){this.subComponent=this.activeName}}},m=u,f=(a("0f30"),a("2877")),p=Object(f["a"])(m,i,n,!1,null,"ada1a2ee",null);t["default"]=p.exports},8688:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-container"},[t("div",{staticClass:"form-body pb-80"},[t("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"150px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"add"!==e.enterParams.type,placeholder:"请选择项目",clearable:""},on:{change:e.getAreaId},model:{value:e.formData.areaId,callback:function(t){e.$set(e.formData,"areaId",t)},expression:"formData.areaId"}},e._l(e.parks,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"费项名称:",prop:"itemName"}},[t("el-input",{attrs:{placeholder:"请输入费项名称"},model:{value:e.formData.itemName,callback:function(t){e.$set(e.formData,"itemName",t)},expression:"formData.itemName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"费项分类:",prop:"expId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择费项分类"},on:{change:e.getExpId},model:{value:e.formData.expId,callback:function(t){e.$set(e.formData,"expId",t)},expression:"formData.expId"}},e._l(e.expOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.expName,value:e.id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"费项细分类型:",prop:"expDetailType",rules:[{required:1==e.formData.expId||2==e.formData.expId,message:"请选择费项细分类型",trigger:"change"}]}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择费项细分类型"},model:{value:e.formData.expDetailType,callback:function(t){e.$set(e.formData,"expDetailType",t)},expression:"formData.expDetailType"}},e._l(e.expDetailTypeList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"税率(%):",prop:"taxRate"}},[t("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入税率"},model:{value:e.formData.taxRate,callback:function(t){e.$set(e.formData,"taxRate",e._n(t))},expression:"formData.taxRate"}},[t("span",{staticStyle:{padding:"0 8px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"费项单位:",prop:"unit"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择收款项目单位"},model:{value:e.formData.unit,callback:function(t){e.$set(e.formData,"unit",t)},expression:"formData.unit"}},e._l(e.unitOption,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"扩展:",prop:"extraKey"}},[t("el-input",{attrs:{placeholder:"用于标记扩展功能"},model:{value:e.formData.extraKey,callback:function(t){e.$set(e.formData,"extraKey",t)},expression:"formData.extraKey"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"滞纳金:",prop:"formData"}},[t("el-radio-group",{model:{value:e.formData.lateFree,callback:function(t){e.$set(e.formData,"lateFree",t)},expression:"formData.lateFree"}},[t("el-radio",{attrs:{label:0}},[e._v("仅计算")]),t("el-radio",{attrs:{label:1}},[e._v("收取")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"is-required",attrs:{label:"账单组:",prop:"billGroupId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择账单组"},on:{change:e.getBillGounp},model:{value:e.formData.billGroupId,callback:function(t){e.$set(e.formData,"billGroupId",t)},expression:"formData.billGroupId"}},e._l(e.groupOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"is-required",attrs:{label:"收款方:",prop:"payeeId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"选择账单组自动带出"},on:{change:e.getPayee},model:{value:e.formData.payeeId,callback:function(t){e.$set(e.formData,"payeeId",t)},expression:"formData.payeeId"}},e._l(e.payeeOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.payeeName,value:e.id}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"计算标准:",prop:"standard"}},[t("el-radio-group",{model:{value:e.formData.standard,callback:function(t){e.$set(e.formData,"standard",t)},expression:"formData.standard"}},[t("el-radio",{attrs:{label:1}},[e._v("公式")]),t("el-radio",{attrs:{label:2}},[e._v("一房一价")])],1)],1)],1)],1),1==e.formData.standard?t("div",[t("el-row",[t("el-form-item",{attrs:{label:"公式属性:"}},[t("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addItem()}}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加 ")])],1)],1),t("el-row",[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-table",{ref:"table",attrs:{data:e.formulaList,size:"mini"}},[t("el-table-column",{attrs:{align:"left",label:"公式名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{size:"mini",placeholder:"请输入公式名称"},model:{value:a.row.formulaName,callback:function(t){e.$set(a.row,"formulaName",t)},expression:"scope.row.formulaName"}})]}}],null,!1,2481991366)}),t("el-table-column",{attrs:{align:"left",label:"计算公式"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"executor",on:{click:function(t){return e.clickCompute(a.$index,a.row)}}},[e._v(e._s(a.row.formulaView?a.row.formulaView:"计算公式"))])]}}],null,!1,2956385267)}),t("el-table-column",{attrs:{width:"100",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.removeItem(a.$index)}}},[t("i",{staticClass:"el-icon-delete"}),e._v("删除 ")])]}}],null,!1,1822693183)})],1)],1),e.isValidator&&e.formulaValid?t("div",{staticClass:"validatorErr"},[e._v(" 公式名称、计算公式、计算条件、生效时间不能为空！ ")]):e._e()],1)],1):e._e(),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"不足月/年按天计算:",prop:"method"}},[t("el-radio-group",{model:{value:e.formData.method,callback:function(t){e.$set(e.formData,"method",t)},expression:"formData.method"}},[t("el-radio",{attrs:{label:1}},[e._v("是")]),t("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"精度保留法:",prop:"accuracy"}},[t("el-radio-group",{model:{value:e.formData.accuracy,callback:function(t){e.$set(e.formData,"accuracy",t)},expression:"formData.accuracy"}},[t("el-radio",{attrs:{label:1}},[e._v("四舍五入")]),t("el-radio",{attrs:{label:2}},[e._v("去尾")]),t("el-radio",{attrs:{label:3}},[e._v("进一")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"保留位数:",prop:"digit"}},[t("el-radio-group",{model:{value:e.formData.digit,callback:function(t){e.$set(e.formData,"digit",t)},expression:"formData.digit"}},[t("el-radio",{attrs:{label:1}},[e._v("取整数")]),t("el-radio",{attrs:{label:2}},[e._v("保留1位小数")]),t("el-radio",{attrs:{label:3}},[e._v("保留2位小数")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[t("el-input",{attrs:{type:"textarea","show-word-limit":"",rows:3,maxlength:"200"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),t("el-card",{staticClass:"footer_tool"},[t("el-row",{staticStyle:{margin:"10px"}},[t("el-col",{staticStyle:{"text-align":"right"}},[t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("提交")]),t("el-button",{attrs:{size:"small",type:"default"},on:{click:e.backtrack}},[e._v("取消")])],1)],1)],1)],1),t("compute-dialog",{attrs:{enterParam:e.params},on:{getData:e.getComputeData},model:{value:e.computeShow,callback:function(t){e.computeShow=t},expression:"computeShow"}}),t("condition-dialog",{attrs:{enterParam:e.params},on:{getData:e.getConditionData},model:{value:e.conditionShow,callback:function(t){e.conditionShow=t},expression:"conditionShow"}})],1)},n=[],r=(a("7db0"),a("a434"),a("b64b"),a("d3b7"),a("159b"),a("a15b"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"component-upload-image"},[t("el-upload",{class:{hide:this.fileList.length>=this.limit},attrs:{action:e.uploadImgUrl,"list-type":"picture-card","before-upload":e.handleBeforeUpload,"file-list":e.fileList,limit:e.limit,headers:e.headers,"on-exceed":e.handleExceed,"on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"on-remove":e.handleRemove,"on-preview":e.handlePictureCardPreview,data:e.uploadParam,"show-file-list":!0,accept:"image/*",name:"file"}},[t("i",{staticClass:"el-icon-plus"})]),e.showTip?t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 请上传 "),e.fileSize?[e._v(" 大小不超过 "),t("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileSize)+"MB")])]:e._e(),e.fileType?[e._v(" 格式为 "),t("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileType.join("/")))])]:e._e(),e._v(" 的图片 ")],2):e._e(),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"预览",width:"800","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{staticStyle:{display:"block","max-width":"100%",margin:"0 auto"},attrs:{src:e.dialogImageUrl}})])],1)}),s=[],l=(a("d81d"),a("fb6a"),a("a9e3"),a("5f87")),o={props:{limit:{type:Number,default:5},fileSize:{type:Number,default:2},fileType:{type:Array,default:function(){return["png","jpg","jpeg"]}},isShowTip:{type:Boolean,default:!0},fileList:{type:Array,default:function(){return[]}},busType:{type:Number,require:!0,default:10},busSubType:{type:Number,default:1024}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,hideUpload:!1,uploadImgUrl:"/prod-api/adm-service/system/file/upl",headers:{token:Object(l["d"])(),deviceId:3},uploadParam:{busSubType:this.busSubType}}},computed:{showTip:function(){return this.isShowTip&&(this.fileType||this.fileSize)}},methods:{handleRemove:function(e,t){var a=this.fileList.map((function(e){return e.name})).indexOf(e.name);a>-1&&this.fileList.splice(a,1)},handleUploadSuccess:function(e){var t={busType:this.busType,busSubType:this.busSubType,fileId:e.data.fileId,fileName:e.data.fileName,fileUrl:e.data.visitUrl,size:e.data.fileSize,fileType:e.data.suffix,createBy:e.data.createBy,name:e.data.fileId,url:"/prod-api/adm-service/system/file/image?fileId="+e.data.fileId+"&token="+Object(l["d"])()};console.log(t),this.fileList.push(t),this.loading.close()},handleBeforeUpload:function(e){var t=!1;if(this.fileType.length){var a="";e.name.lastIndexOf(".")>-1&&(a=e.name.slice(e.name.lastIndexOf(".")+1)),t=this.fileType.some((function(t){return e.type.indexOf(t)>-1||!!(a&&a.indexOf(t)>-1)}))}else t=e.type.indexOf("image")>-1;if(!t)return this.$message.error("文件格式不正确, 请上传".concat(this.fileType.join("/"),"图片格式文件!")),!1;if(this.fileSize){var i=e.size/1024/1024<this.fileSize;if(!i)return this.$message.error("上传图片大小不能超过 ".concat(this.fileSize," MB!")),!1}this.loading=this.$loading({lock:!0,text:"上传中",background:"rgba(0, 0, 0, 0.7)"})},handleExceed:function(){this.$message.error("上传文件数量不能超过 ".concat(this.limit," 个!"))},handleUploadError:function(){this.$message({type:"error",message:"上传失败"}),this.loading.close()},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},c=o,d=(a("037c"),a("2877")),u=Object(d["a"])(c,r,s,!1,null,"2502ba85",null),m=u.exports,f=a("2891"),p=a("d7a5"),h=a("39cc"),b={props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},components:{ImgUpload:m,computeDialog:f["default"],conditionDialog:p["default"]},computed:{parks:function(){return Object(l["a"])()}},watch:{"formData.billCycle":{handler:function(e){"day"==e&&(this.formData.billing=1,this.formData.billingCycle=3,this.formData.billingDay=1)},immediate:!0}},data:function(){return{loading:!1,expOption:[],unitOption:[],billCycleOption:[{label:"年",value:"year"},{label:"季度",value:"quarter"},{label:"双月",value:"moons"},{label:"月",value:"month"},{label:"日",value:"day"}],billingOption:[{label:"按天数",value:1},{label:"按日期",value:2}],billingCycleOption:[{label:"周期前",value:1},{label:"周期",value:2},{label:"周期后",value:3}],dateOption:[],payeeOption:[],formData:{areaId:"",expId:"",payeeId:"",billGroupId:"",itemName:"",expDetailType:null,taxRate:0,unit:"",billCycle:"",lateFree:0,lateRate:0,method:0,accuracy:1,digit:1,standard:1,remark:"",billing:1,billingCycle:1,billingDay:1,billingDate:"",lasting:1,lastDay:1,lastDate:""},rules:{areaId:[{required:!0,message:"请选择所属项目",trigger:"change"}],expId:[{required:!0,message:"请选择收费项分类",trigger:"change"}],billGroupId:[{required:!0,message:"请选择账单组",trigger:"change"}],itemName:[{required:!0,message:"收费项名称不能为空",trigger:"blur"}],taxRate:[{required:!0,message:"税率不能为空",trigger:"blur"}],unit:[{required:!0,message:"请选择收费项单位",trigger:"change"}],billCycle:[{required:!0,message:"请选择计费周期",trigger:"change"}]},formulaList:[],groupOption:[],computeShow:!1,conditionShow:!1,params:{},isValidator:!1,formulaValid:!1,expDetailTypeList:[]}},created:function(){var e=this;this.dateOption=[];for(var t=1;t<29;t++){var a={label:""+t,value:t};this.dateOption.push(a)}this.getDicts({code:"fee_unit"}).then((function(t){0==t.code&&(e.unitOption=t.data.items||[])})),this.getFeetypeAll()},mounted:function(){var e=this;"edit"==this.enterParams.type&&Object(h["j"])({id:this.enterParams.rowId}).then((function(t){0===t.code&&(e.formData=t.data,e.formulaList=e.formData.formulaList||[],e.getBillGroupAll(e.formData.areaId),e.getExpDetailTypeList())})),this.getPayeeAll()},methods:{getFeetypeAll:function(){var e=this;Object(h["u"])().then((function(t){0==t.code&&(e.expOption=t.data)}))},getPayeeAll:function(e){var t=this;Object(h["F"])({areaId:e}).then((function(e){0==e.code&&(t.payeeOption=e.data||[])}))},getBillGroupAll:function(e){var t=this;Object(h["b"])({areaId:e}).then((function(e){0==e.code&&(t.groupOption=e.data||[])}))},getAreaId:function(e){var t=this.parks.find((function(t){return t.areaId===e}));this.formData.areaName=t.areaName,this.formData.payeeId="",this.formData.billGroupId="",this.formulaList=[],this.getBillGroupAll(e),this.getPayeeAll(e)},getExpId:function(e){var t=this.expOption.find((function(t){return t.id===e}));this.formData.expName=t.expName,this.formData.expDetailType=null,this.getExpDetailTypeList()},getExpDetailTypeList:function(){var e=this,t="";switch(this.formData.expId){case 1:case"1":t="rent_type";break;case 2:case"2":t="energy_type";break;case 3:case"3":t="manage_type";break;case 4:case"4":t="cool_type";break;case 5:case"5":t="tenement_type";break;case 6:case"6":t="operate_type";break;case 7:case"7":t="other_type";break;case"8":t="wastage_type";break;default:}t?this.getDicts({code:t}).then((function(t){0==t.code&&(e.expDetailTypeList=t.data.items||[])})):this.expDetailTypeList=response.data.items||[]},getBillGounp:function(e){var t=this.groupOption.find((function(t){return t.id===e}));this.formData.payeeId=t.payeeId,this.formData.payeeName=t.payeeName},getPayee:function(e){var t=this.payeeOption.find((function(t){return t.id===e}));this.formData.payeeName=t.payeeName},addItem:function(){if(this.formData.areaId){var e=(new Date).getTime(),t=Math.floor(8999*Math.random())+1e3,a=e+""+t;this.formulaList.push({itemId:a,formulaName:"",formulaView:"",formulaValue:"",conditionView:"",conditionValue:"",standardId:null,effDate:"",expDate:""})}else this.$message.info("请选择所属项目")},removeItem:function(e){this.formulaList.splice(e,1)},clickCompute:function(e,t){this.formData.areaId?(this.computeShow=!0,this.params={areaId:this.formData.areaId,id:e}):this.$message.info("请选择所属项目")},clickCondition:function(e,t){this.conditionShow=!0,this.params={areaId:this.formData.areaId,id:e,conditionView:t.conditionView}},getComputeData:function(e){var t=JSON.parse(e);console.log(t,"===>>");var a=t.id;this.formulaList[a].formulaView=t.formula,this.formulaList[a].formulaValue=t.pattern,this.formulaList[a]["standardId"]=t.standardId},getConditionData:function(e){var t=JSON.parse(e),a=t.id;this.formulaList[a].conditionView=t.formula,this.formulaList[a].conditionValue=t.pattern},submitForm:function(){var e=this;this.isValidator=!0,this.formulaValid=!1,(1!=this.formData.billing||this.formData.billingDay)&&(2!=this.formData.billing||this.formData.billingDate)?(1!=this.formData.lasting||this.formData.lastDay)&&(2!=this.formData.lasting||this.formData.lastDate)?1==this.formData.standard&&(0==this.formulaList.length?this.formulaValid=!0:this.formulaList.forEach((function(t){t.formulaName&&t.formulaView||(e.formulaValid=!0)})),this.formulaValid)?0==this.formulaList.length?this.$message.warning("请添加公式属性!"):this.$message.warning("公式名称、计算公式、计算条件、生效时间不能为空!"):this.$refs.ruleForm.validate((function(t){if(t){1==e.formData.standard&&(e.formData.formulaList=e.formulaList);var a=function(t){0===t.code?(e.$message.success("保存成功"),e.backtrack()):e.$message.error(t.msg)};"edit"===e.enterParams.type?Object(h["k"])(e.formData).then(a):Object(h["g"])(e.formData).then(a)}})):this.$message.warning("最晚缴款日不能为空!"):this.$message.warning("出账日不能为空!")},backtrack:function(){this.forward("List",{activeName:"Fourth"})}}},v=b,g=(a("2d54"),Object(d["a"])(v,i,n,!1,null,"785eed30",null));t["default"]=g.exports},"86c7":function(e,t,a){},8842:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})},n=[],r=a("8214"),s=a("8688"),l={name:"AdmFinanceConfig",components:{List:r["default"],IForm:s["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},8851:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("div",[t("span",{staticClass:"echartTitle"},[e._v(" 资金收益分析 ")]),t("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择项目"},on:{change:e.handleChange},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("div",{staticClass:"flexBox"},[t("div",{staticClass:"flexItem"},[t("div",[e._v("本月应收")]),t("div",{staticClass:"centerItem"},[t("span",{staticClass:"blodNum"},[e._v(e._s(e.fmoney(e.financeDetail.receivableAmt)))]),e._v(" 元 ")]),t("div",[e._v("实收："+e._s(e.fmoney(e.financeDetail.paidIn))+"元")])]),t("div",{staticClass:"flexItem"},[t("div",[e._v("本月待收")]),t("div",{staticClass:"centerItem"},[t("span",{staticClass:"blodNum"},[e._v(e._s(e.fmoney(e.financeDetail.dueInAmt)))]),e._v(" 元 ")]),t("div",[e._v("收缴率： "+e._s(e.financeDetail.captureRate)+"%")])]),t("div",{staticClass:"flexItem"},[t("div",[e._v("当前逾期")]),t("div",{staticClass:"centerItem"},[t("span",{staticClass:"blodNum"},[e._v(e._s(e.fmoney(e.financeDetail.overdueAmt)))]),e._v(" 元 ")])]),t("div",{staticClass:"flexItem"},[t("div",[e._v("全年应收")]),t("div",{staticClass:"centerItem"},[t("span",{staticClass:"blodNum"},[e._v(e._s(e.fmoney(e.financeDetail.yearReceivableAmt)))]),e._v(" 元 ")]),t("div",[e._v("实收："+e._s(e.fmoney(e.financeDetail.yearPaidIn))+"元")])]),t("div",{staticClass:"flexItem"},[t("div",[e._v("全年待收")]),t("div",{staticClass:"centerItem"},[t("span",{staticClass:"blodNum"},[e._v(e._s(e.fmoney(e.financeDetail.yearDueInAmt)))]),e._v(" 元 ")]),t("div",[e._v("收缴率： "+e._s(e.financeDetail.yearCaptureRate)+"%")])]),t("div",{staticClass:"flexItem"},[t("div",[e._v("押金余额")]),t("div",{staticClass:"centerItem"},[t("span",{staticClass:"blodNum"},[e._v(e._s(e.fmoney(e.financeDetail.depositAmt)))]),e._v(" 元 ")])])]),t("div",{staticStyle:{margin:"10px 0",display:"flex"}},[t("div",{staticClass:"activeClass"},[e._v(" 账期： "),t("el-date-picker",{attrs:{size:"small",clearable:!1,type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},on:{change:e.changeChart},model:{value:e.months,callback:function(t){e.months=t},expression:"months"}},[e._v(" >")])],1),t("div",{staticClass:"activeClass",staticStyle:{"margin-left":"10px"}},[e._v(" 账单组： "),t("el-select",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请选择",clearable:""},on:{change:e.changeChart},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},e._l(e.groupOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}})})),1)],1)]),t("div",{attrs:{id:"fundChart"}})])])},n=[],r=(a("d81d"),a("e9c4"),a("b64b"),a("76bd")),s=a("39cc"),l=a("5f87"),o=a("c1df"),c=a.n(o),d=a("ed08"),u={data:function(){return{areaId:null,months:[],myChart:null,groupOption:[],areaList:[],loading:!1,groupId:null,financeDetail:{captureRate:0,depositAmt:0,dueInAmt:0,overdueAmt:0,paidIn:0,receivableAmt:0,yearCaptureRate:0,yearDueInAmt:0,yearPaidIn:0,yearReceivableAmt:0},chartData:[]}},computed:{parks:function(){return Object(l["a"])()}},created:function(){this.getAreaList(),this.months=[c()().subtract(1,"year").add(1,"month").format("YYYY-MM"),c()().format("YYYY-MM")]},mounted:function(){var e=this;setTimeout((function(){e.getInit()}),200)},methods:{fmoney:d["c"],handleChange:function(){var e=this;this.groupId=null,Object(r["c"])({areaId:this.areaId}).then((function(t){e.financeDetail=t.data})),Object(s["b"])({areaId:this.areaId}).then((function(t){0==t.code&&(e.groupOption=t.data||[])})),this.changeChart()},changeChart:function(){var e=this;this.loading=!0;var t={areaId:this.areaId,begin:c()(this.months[0]).format("YYYY-MM"),end:c()(this.months[1]).format("YYYY-MM"),groupId:this.groupId};Object(r["d"])(t).then((function(t){0==t.code&&(e.chartData=t.data,e.getInit()),e.loading=!1})).catch((function(){e.loading=!1}))},getAreaList:function(){var e=JSON.parse(JSON.stringify(this.parks));this.areaList=e.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),this.areaList.length>0&&(this.areaId=this.areaList[0].id,this.handleChange())},getInit:function(){var e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:0},grid:{left:"3%",right:"4%",bottom:"30",containLabel:!0},xAxis:[{data:this.chartData.map((function(e){return e.billDate}))}],yAxis:[{type:"value",name:"元",position:"left",alignTicks:!0,axisLine:{show:!0}},{type:"value",name:"%",position:"right",alignTicks:!0,axisLine:{show:!0},axisLabel:{formatter:"{value}"}}],series:[{name:"应收（元）",type:"bar",data:this.chartData.map((function(e){return e.receivableAmt})),label:{show:!0,position:"top"},emphasis:{focus:"series"}},{name:"实收（元）",type:"bar",stack:"fund",emphasis:{focus:"series"},data:this.chartData.map((function(e){return e.paidIn}))},{name:"待收（元）",type:"bar",stack:"fund",emphasis:{focus:"series"},data:this.chartData.map((function(e){return e.dueInAmt}))},{name:"收缴率（%）",type:"line",smooth:!0,emphasis:{focus:"series"},yAxisIndex:1,data:this.chartData.map((function(e){return e.captureRate}))}]};this.myChart=this.$echarts.init(document.getElementById("fundChart")),this.myChart.setOption(e),window.onresize=function(){this.myChart&&this.myChart.resize()}}}},m=u,f=(a("598b"),a("2877")),p=Object(f["a"])(m,i,n,!1,null,"45325136",null);t["default"]=p.exports},8900:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"tool-rows"},[t("span",[e._v("共 "),t("span",[e._v(e._s(e.total))]),e._v(" 条")]),t("div",[e.$_has(e.addCode)?t("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-plus"},on:{click:e.handlerAdd}},[e._v("新增")]):e._e()],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData}},[t("el-table-column",{attrs:{prop:"expName",align:"center",label:"费项分类"}}),t("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"禁用/启用",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.statusChange(t,a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerView(a.row)}}},[e._v("查看")]),e.$_has(e.editCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.editCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row)}}},[e._v("编辑")]):e._e(),e.$_has(e.delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")]):e._e()]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("edit-dialog",{attrs:{enterParam:e.params},on:{refreshList:function(t){return e.getList()}},model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}})],1)},n=[],r=(a("d81d"),a("39cc")),s=a("a109"),l=a("53ba"),o={components:{editDialog:s["default"]},mixins:[l["a"]],data:function(){return{addCode:["adm:finance:feetype:add"],editCode:["adm:finance:feetype:edit"],delCode:["adm:finance:feetype:del"],updateShow:!1,params:{},loading:!1,total:0,listData:[],queryParams:{pageNum:1,pageSize:10},rowId:"",searchModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]}]}},created:function(){this.handleQuery()},mounted:function(){this.searchModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(r["y"])(this.queryParams).then((function(t){e.loading=!1,0===t.code?(e.total=t.data.total,e.listData=t.data.items):e.$message.error(t.msg)})).catch((function(){e.loading=!1,e.$message.error("系统繁忙，请稍后重试")}))},handlerDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["v"])({id:e.id}).then((function(e){0===e.code?(t.$message.success("删除成功!"),t.getList()):t.$message.error(e.msg)}))}))},handlerView:function(e){this.updateShow=!0,this.params={type:"view",row:e}},handlerEdit:function(e){this.updateShow=!0,this.params={type:"edit",row:e}},handlerAdd:function(){this.updateShow=!0,this.params={type:"add"}},statusChange:function(e,t){var a=this,i={id:t.id,status:e};Object(r["x"])(i).then((function(i){0==i.code?console.log("feetype enable:",e):(a.$message.error(i.msg),t.status=!t.status)}))},handleRefresh:function(){this.resetForm("formData"),this.handleQuery()}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,"0d3d5606",null);t["default"]=u.exports},"8bb7":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.searchModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleRefresh}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"tool-rows mb10"},[t("span",[e._v("共 "),t("span",[e._v(e._s(e.total))]),e._v(" 条")]),t("div",[e.$_has(e.addCode)?t("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-plus"},on:{click:e.handlerAdd}},[e._v("新增")]):e._e()],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData}},[t("el-table-column",{attrs:{prop:"prName",align:"center",label:"标准价名称"}}),t("el-table-column",{attrs:{prop:"areaName",align:"center",label:"所属项目","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"priceValue",align:"center",label:"值"}}),t("el-table-column",{attrs:{prop:"priceType",align:"center",label:"价格类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("typeFilter")(t.row.priceType))+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"禁用/启用",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.statusChange(t,a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerView(a.row)}}},[e._v("查看")]),e.$_has(e.editCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.editCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row)}}},[e._v("编辑")]):e._e(),e.$_has(e.delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")]):e._e()]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("edit-dialog",{attrs:{enterParam:e.params},on:{refreshList:function(t){return e.getList()}},model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}})],1)},n=[],r=(a("d81d"),a("53ba")),s=a("ade4"),l=a("39cc"),o={components:{editDialog:s["default"]},mixins:[r["a"]],filters:{typeFilter:function(e){var t={1:"单价",2:"日单价",3:"月单价",4:"年单价"};return t[e]}},data:function(){return{addCode:["adm:finance:feestandard:add"],editCode:["adm:finance:feestandard:edit"],delCode:["adm:finance:feestandard:del"],updateShow:!1,params:{},loading:!1,total:0,listData:[],queryParams:{pageNum:1,pageSize:10,areaId:""},searchModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]}],rowId:""}},created:function(){this.handleQuery()},mounted:function(){this.searchModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(l["s"])(this.queryParams).then((function(t){e.loading=!1,0===t.code?(e.total=t.data.total,e.listData=t.data.items):e.$message.error(t.msg)})).catch((function(){e.loading=!1,e.$message.error("系统繁忙，请稍后重试")}))},handlerDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["q"])({id:e.id}).then((function(e){0===e.code?(t.$message.success("删除成功!"),t.getList()):t.$message.error(e.msg)}))}))},handlerView:function(e){this.updateShow=!0,this.params={type:"view",row:e}},handlerEdit:function(e){this.updateShow=!0,this.params={type:"edit",row:e}},handlerAdd:function(){this.updateShow=!0,this.params={type:"add"}},handleRefresh:function(){this.resetForm("formData"),this.handleQuery()},statusChange:function(e,t){var a=this,i={id:t.id,status:e};Object(l["n"])(i).then((function(i){0==i.code?console.log("feetype enable:",e):(a.$message.error(i.msg),t.status=!t.status)}))}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,"0882cc27",null);t["default"]=u.exports},"8cdb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wscn-http404-container"},[t("div",{staticClass:"wscn-http404"},[e._m(0),t("div",{staticClass:"bullshit"},[t("div",{staticClass:"bullshit__oops"},[e._v("OOPS!")]),e._m(1),t("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),t("div",{staticClass:"bullshit__info"},[e._v("Please check that the URL you entered is correct, or click the button below to return to the homepage.")]),t("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[e._v("Back to home")])])])])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"pic-404"},[t("img",{staticClass:"pic-404__parent",attrs:{src:a("a36b"),alt:"404"}}),t("img",{staticClass:"pic-404__child left",attrs:{src:a("26fc"),alt:"404"}}),t("img",{staticClass:"pic-404__child mid",attrs:{src:a("26fc"),alt:"404"}}),t("img",{staticClass:"pic-404__child right",attrs:{src:a("26fc"),alt:"404"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"bullshit__info"},[e._v("All rights reserved "),t("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"https://wallstreetcn.com",target:"_blank"}},[e._v("wallstreetcn")])])}],r={name:"Page404",computed:{message:function(){return"The webmaster said that you can not enter this page..."}}},s=r,l=(a("dd53"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"c095f994",null);t["default"]=o.exports},"8de3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-sum-panel settle-panel"},[t("div",{staticClass:"text-title mt-20 item-title"},[e._v("清算合计")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.priceTotal}},[t("el-table-column",{attrs:{prop:"billArAmount",label:"账单清算应收（元）"}}),t("el-table-column",{attrs:{prop:"billApAmount",label:"账单清算应付（元）"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" - "+e._s(t.row.billApAmount)+" ")]}}])}),t("el-table-column",{attrs:{prop:"billBadAmount",label:"账单清算坏账（元）"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{color:"#f00"}},[e._v(e._s(a.row.billBadAmount))])]}}])}),t("el-table-column",{attrs:{prop:"depositApAmount",label:"押金应付（元）"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" -"+e._s(t.row.depositApAmount)+" ")]}}])}),t("el-table-column",{attrs:{prop:"feeArAmount",label:"其他应收（元）"}}),t("el-table-column",{attrs:{prop:"feeApAmount",label:"其他应付（元）"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" -"+e._s(t.row.feeApAmount)+" ")]}}])}),t("el-table-column",{attrs:{prop:"allTotal",label:"结算总金额（元）"}})],1)],1)},n=[],r={props:{priceTotal:{type:Array,default:function(){return[]}}}},s=r,l=(a("e8d3"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"0c6ef842",null);t["default"]=o.exports},"8e2b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleSearch}}),t("amount",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.amountData}}),t("div",{staticClass:"body"},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")])]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch},model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)])],1)},n=[],r=(a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("b775")),s="/adm-service/finance/table/",l={billExp:s+"bill/exp",billList:s+"bill/list"},o=function(e){return r["a"].post(l.billExp,e)},c=function(e){return r["a"].post(l.billList,e)},d=a("39cc"),u=a("d54b"),m=a("53ba"),f={components:{amount:u["default"]},mixins:[m["a"]],data:function(){return{receiptShow:!1,payStatus:"",loading:!1,listData:[],total:0,columns:[{name:"收费项",desc:"itemName"},{name:"客户名称",desc:"cusName"},{name:"所在账期",desc:"billDate"},{name:"计费周期",desc:"billPeriodStart,billPeriodEnd",filter:function(e,t){return t[e[0]]+"-"+t[e[1]]}},{name:"出账日",desc:"billingDate"},{name:"收款日",desc:"payDate"},{name:"最后收款日",desc:"repayDate"}],colModel:[{columnId:"areaId",label:"项目",searchType:"select",labelName:"areaName",valueName:"areaId",options:[],change:function(){}},{columnId:"position",enterParam:"areaId",searchType:"wxPosition"},{columnId:"itemId",label:"收费项目",labelName:"itemName",valueName:"id",searchType:"wxSelect",options:[]},{columnId:"createDate",label:"账期月份",compType:"month",valueFormat:"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM",placeholder:"请选择月份",searchType:"datePicker"}],queryParams:{pageNum:1,pageSize:10},amountData:{}}},methods:{handleSearch:function(e){var t=this;if(!e.areaId&&!this.queryParams.areaId)return this.$message.warning("请选择项目");this.loading=!0,e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);a.position&&a.position.length&&(a.buildingId=a.position[0],a.unitId=a.position[1],a.floorId=a.position[2],a.roomId=a.position[3]),a.payStatus=this.payStatus,delete a.position,Promise.all([o(a),c(a)]).then((function(e){e.forEach((function(a,i){0===e[i].code?1===i?(t.listData=e[i].data.items,t.total=e[i].data.total):t.amountData=e[i].data:t.$message.error(e[i].msg)}))})).finally((function(){t.loading=!1}))},handleAddReceipt:function(){this.receiptShow=!0},changeArea:function(e){this.getFeeItems(e),this.handleSearch({areaId:e})},getFeeItems:function(e){var t=this;Object(d["h"])({areaId:e}).then((function(e){0===e.code?t.colModel[2].options=e.data:t.colModel[2].options=[]}))}},mounted:function(){if(this.colModel[0].options=this.areaList,this.colModel[0].change=this.changeArea,console.log("arealist:",this.areaList),this.areaList.length){var e=this.areaList[0].areaId;this.queryParams.areaId=e,this.getFeeItems(e),this.handleSearch(this.queryParams)}}},p=f,h=a("2877"),b=Object(h["a"])(p,i,n,!1,null,null,null);t["default"]=b.exports},"8fdc":function(e,t,a){"use strict";a.r(t);a("4de4"),a("a434"),a("d3b7");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("div",{staticClass:"form-body"},[e._m(0),t("div",[t("div",{staticClass:"text-title"},[e._v("基础信息：")]),t("el-form",{ref:"formData",staticClass:"formBox",attrs:{model:e.formData,rules:e.rules,"label-width":"100px","label-position":"right"}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"contractNo",label:"客户合同"}},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.changeContractId}},[e._v(" 选择")]),e.formData.contractNo?t("div",[e._v(" 客户名称："+e._s(e.formData.entName)+" "),t("span",{staticStyle:{"padding-left":"20px"}},[e._v("合同编号： "+e._s(e.formData.contractNo))])]):e._e()],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"billDate",label:"账期"}},[t("el-date-picker",{attrs:{type:"month",placeholder:"请选择账期"},on:{change:e.changeBillDate},model:{value:e.formData.billDate,callback:function(t){e.$set(e.formData,"billDate",t)},expression:"formData.billDate"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"times",label:"计费周期","label-width":"100px"}},[t("el-date-picker",{attrs:{disabled:"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.formData.times,callback:function(t){e.$set(e.formData,"times",t)},expression:"formData.times"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"lateDate",label:"最晚缴款日","label-width":"100px"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择最晚缴款日","value-format":"yyyy-MM-dd","picker-options":e.lateDateOpts},model:{value:e.formData.lateDate,callback:function(t){e.$set(e.formData,"lateDate",t)},expression:"formData.lateDate"}})],1)],1),t("el-col",{staticStyle:{margin:"10px 0"},attrs:{span:24}},[t("el-form-item",{attrs:{prop:"bababa",label:"合同房源"}},[t("div",e._l(e.subjectMatterList,(function(a,i){return t("el-tag",{key:a.id,attrs:{type:a.isAdd?"":"info"},on:{click:function(t){return e.checkAdd(a,i)}}},[e._v(" "+e._s(a.spaceCode))])})),1)])],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"groupId",label:"费项"}},[t("div",{staticStyle:{display:"flex"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"选择账单组"},on:{change:e.getBillGounp},model:{value:e.formData.groupId,callback:function(t){e.$set(e.formData,"groupId",t)},expression:"formData.groupId"}},e._l(e.groupOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}})})),1),t("el-checkbox-group",{staticStyle:{"margin-left":"10px"},on:{change:e.changeCharges},model:{value:e.chargeSchemeList,callback:function(t){e.chargeSchemeList=t},expression:"chargeSchemeList"}},e._l(e.chargesList.filter((function(e){return!e.expId||"2"!=e.expId&&"8"!=e.expId})),(function(a,i){return t("el-checkbox",{key:i,attrs:{label:a}},[e._v(e._s(a.itemName))])})),1)],1)])],1)],1)],1)],1),t("div",[t("div",{staticClass:"text-title"},[e._v(" 费用明细： "),t("el-button",{attrs:{disabled:!e.renderBillDetailComp,size:"mini",type:"primary"},on:{click:e.renderBillDetailData}},[e._v("生成费用明细 ")])],1),t("el-table",{attrs:{border:"",data:e.formData.billDetailList,"show-summary":"","summary-method":e.getSummaries,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{label:"删除",width:"70"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger",size:"mini",plain:!0,icon:"el-icon-delete"},on:{click:function(){e.formData.billDetailList.splice(a.$index,1)}}})]}}])}),t("el-table-column",{attrs:{label:"费项",prop:"itemName",width:"120"}}),t("el-table-column",{attrs:{label:"项目-楼栋",prop:"buildingName",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.areaName+"-"+t.row.buildingName)+" ")]}}])}),t("el-table-column",{attrs:{label:"房源编码",prop:"spaceCode",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.floorName+"-"+t.row.spaceName)+" ")]}}])}),t("el-table-column",{attrs:{label:"数量",prop:"qty",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini",controls:!1,min:0,precision:2},on:{blur:function(t){return e.changePriece(a.row)}},model:{value:a.row.qty,callback:function(t){e.$set(a.row,"qty",t)},expression:"scope.row.qty"}})]}}])}),t("el-table-column",{attrs:{label:"含税单价(元)",prop:"price",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini",controls:!1,min:0,precision:2},on:{blur:function(t){return e.changePriece(a.row)}},model:{value:a.row.price,callback:function(t){e.$set(a.row,"price",t)},expression:"scope.row.price"}})]}}])}),t("el-table-column",{attrs:{label:"含税金额(元)",prop:"oriReceivableTaxAmt",width:"140"}}),t("el-table-column",{attrs:{label:"不含税金额(元)",prop:"oriReceivableAmt",width:"140"}}),t("el-table-column",{attrs:{label:"税额(元)",prop:"oriTaxAmount",width:"140"}}),t("el-table-column",{attrs:{label:"税率(%)",prop:"taxRate",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(a.row.taxRate)+" "),t("b",[e._v("%")])])]}}])}),t("el-table-column",{attrs:{label:"备注",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark",t)},expression:"scope.row.remark"}})]}}])})],1)],1),t("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t("el-button",{attrs:{type:"primary",size:"small",disabled:!(e.formData.billDetailList&&e.formData.billDetailList.length>0)},on:{click:e.handleSave}},[e._v("保存")]),t("el-button",{attrs:{type:"info",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1)]),t("contactDialog",{on:{getContractId:e.getContractId},model:{value:e.contractShow,callback:function(t){e.contractShow=t},expression:"contractShow"}}),t("ChargeDislog",{on:{selectChanged:e.hangleFeeChargeSelectChanged},model:{value:e.chargeSelectShow,callback:function(t){e.chargeSelectShow=t},expression:"chargeSelectShow"}})],1)},n=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"font-size":"20px","line-height":"20px","margin-bottom":"16px",color:"#1e2027"}},[t("div",[e._v("新增账单")])])}],r=a("5530"),s=(a("7db0"),a("d81d"),a("13d5"),a("a9e3"),a("b680"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("376f")),l=a("c1df"),o=a.n(l),c=a("2824"),d=a("2f32"),u=a("fa4e"),m=a("39cc"),f={components:{contactDialog:c["default"],expdetailtable:d["default"],ChargeDislog:u["default"]},props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},data:function(){return{fileList:[],formData:{contractId:"",contractNo:"",groupId:null,billDate:"",times:"",lateDate:"",subjectMatterType:null,billDetailList:[]},rules:{billDate:[{required:!0,message:"请选择账期",trigger:"change"}],contractNo:[{required:!0,message:"请选择合同编号",trigger:"change"}],times:[{required:!0,message:"请选择计费周期",trigger:"change"}],groupId:[{required:!0,message:"请选择账单组",trigger:"change"}],lateDate:[{required:!0,message:"请选择最晚缴款日",trigger:"change"}]},contractShow:!1,subjectMatterList:[],chargeSchemeList:[],groupOption:[],chargesList:[],contractChargesList:[],curAreaId:null,billDetailListAll:[],lateDateOpts:{disabledDate:function(e){return e.getTime()<o()().startOf("day")}},chargeSelectShow:!1}},computed:{renderBillDetailComp:{get:function(){return this.subjectMatterList&&this.subjectMatterList.length>0&&this.chargeSchemeList&&this.chargeSchemeList.length>0}}},methods:{changePriece:function(e){e.oriReceivableTaxAmt=(e.price*e.qty).toFixed(2),e.oriReceivableAmt=(e.oriReceivableTaxAmt/(1+e.taxRate/100)).toFixed(2),e.oriTaxAmount=(e.oriReceivableTaxAmt-e.oriReceivableAmt).toFixed(2)},changeBillDate:function(){this.formData.lateDate=o()(this.formData.billDate).add(3,"days").format("YYYY-MM-DD"),this.formData.billDate?this.formData.times=[o()(this.formData.billDate).startOf("month").format("YYYY-MM-DD"),o()(this.formData.billDate).endOf("month").format("YYYY-MM-DD")]:this.formData.times=[],this.formData.billDetailList=[],this.billDetailListAll=[]},getBillGroupAll:function(e){var t=this;Object(m["b"])({areaId:e}).then((function(e){0==e.code&&(t.groupOption=e.data||[])}))},getBillGounp:function(e){var t=this;this.groupOption.forEach((function(a){a.id==e&&(t.formData["groupName"]=a.groupName)})),this.chargeSchemeList=[],this.chargesList=this.contractChargesList.filter((function(t){return t.groupId==e})),this.formData.billDetailList=[],this.billDetailListAll=[]},changeCharges:function(){this.formData.billDetailList=[],this.billDetailListAll.length>0&&this.returnBillDetail()},handleDebug:function(e){console.log(e)},closeCharge:function(e){this.chargeSchemeList.splice(e,1)},chargeSelect:function(){this.chargeSelectShow=!0},hangleFeeChargeSelectChanged:function(e){this.chargeSchemeList=e},returnBillDetail:function(){var e=this;this.formData.billDetailList=[];var t=this.chargeSchemeList.map((function(e){return e.itemId})),a=this.subjectMatterList.filter((function(e){return e.isAdd})).map((function(e){return e.spaceId}));this.billDetailListAll.forEach((function(i){-1!==t.indexOf(i.itemId)&&-1!==a.indexOf(i.spaceId)&&(console.log("添加了==》",i),i["oriReceivableAmt"]=(+i["oriReceivableAmt"]||0).toFixed(2),i["oriReceivableTaxAmt"]=(+i["oriReceivableTaxAmt"]||0).toFixed(2),i["oriTaxAmount"]=(+i["oriTaxAmount"]||0).toFixed(2),e.formData.billDetailList.push(Object(r["a"])(Object(r["a"])({},i),{},{price:i.price?i.price:(i.oriReceivableTaxAmt/i.qty).toFixed(4)})),e.$forceUpdate())}))},renderBillDetailData:function(){var e=this;console.log("formData",this.formData),this.$refs.formData.validate((function(t){if(t){e.formData.billDetailList=[];var a={billDate:o()(e.formData.billDate).format("YYYY-MM"),contractId:e.formData.contractId,groupId:e.formData.groupId};Object(s["b"])(a).then((function(t){console.log("checkBillDate",t),t.data&&e.$message.warning("该账单已生成过，请确认是否生成账单")})),Object(s["i"])(a).then((function(t){0==t.code&&(t.data.length>0?(e.formData.times=[t.data[0].billPeriodStart,t.data[0].billPeriodEnd],e.formData.lateDate=t.data[0].lateDate):e.$message.warning("不在合同有效期，无法生成费用明细"),e.billDetailListAll=t.data,e.returnBillDetail())}))}}))},getSummaries:function(e){var t=e.columns,a=e.data,i=[],n=new Set(["oriReceivableAmt","oriReceivableTaxAmt","oriTaxAmt"]);return t.forEach((function(e,t){if(0!==t)if(n.has(e.property)){var r=a.map((function(t){return Number(t[e.property])}));r.every((function(e){return isNaN(e)}))?i[t]="N/A":(i[t]=r.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),i[t]=i[t].toFixed(2)+" 元")}else i[t]="";else i[t]="总价"})),i},changeContractId:function(e){e&&(this.contractShow=!0)},getContractId:function(e){var t=this;this.subjectMatterList=[],this.chargeSchemeList=[],this.formData.billDetailList=[],this.billDetailListAll=[],this.groupOption=[],this.formData.groupId=null,this.chargesList=[],this.contractChargesList=e.bentChargeSchemeList||e.staffChargeSchemeList||[],this.contractChargesList.forEach((function(e){if(!e.expId||"2"!=e.expId&&"8"!=e.expId)if(t.groupOption.length>0){var a=t.groupOption.find((function(t){return t.id==e.groupId}));a||t.groupOption.push({id:e.groupId,groupName:e.groupName})}else t.groupOption.push({id:e.groupId,groupName:e.groupName})})),e.applyUserId?(this.subjectMatterList.push(Object(r["a"])(Object(r["a"])({},e),{},{isAdd:!0,roomName:e.spaceName,spaceId:e.spaceId})),this.formData.contractNo=e.contractNo,this.formData.subjectMatterType=1,this.formData.contractId=e.srcContractId,this.formData.entName=e.applyUserRealName):(this.subjectMatterList=e.bentSubjectMatterList.map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{isAdd:!0})})),this.formData.contractNo=e.contractNo,this.formData.subjectMatterType=2,this.formData.entName=e.entName,this.formData.contractId=e.id)},handleSave:function(){var e=this;this.formData.billDetailList.length<=0?this.$message.warning("请生成费用明细再提交"):this.$refs.formData.validate((function(t){if(t){var a=Object(r["a"])(Object(r["a"])({},e.formData),{},{billDate:o()(e.formData.billDate).format("YYYY-MM"),billPeriodStart:e.formData.times[0],billPeriodEnd:e.formData.times[1]});a.detailTempList=a["billDetailList"].map((function(e){return e["receivableAmt"]=e["receivableAmt"]||0,e["receivableTaxAmt"]=e["receivableTaxAmt"]||0,e["adjAmt"]=e["adjAmt"]||0,e})),console.log(a),Object(s["a"])(a).then((function(t){0==t.code&&(e.$message.success("保存成功"),e.goBack())}))}}))},checkAdd:function(e){e.isAdd=!e.isAdd,this.billDetailListAll.length>0&&this.returnBillDetail()},goBack:function(){this.forward("List")},expTableDataCreate:function(){var e=this;this.$refs.formData.validate((function(t){if(t){var a=[];e.bentSubjectMatterList.forEach((function(e){1==e.isAdd&&a.push(e.spaceId)}));var i=[];e.chargeSchemeList.forEach((function(e){1==e.isAdd&&i.push(e.itemId)})),e.formData.billPeriodEnd=e.formData.times[1],e.formData.billPeriodStart=e.formData.times[0];var n={billPeriodEnd:e.formData.times[1],billPeriodStart:e.formData.times[0],contractId:e.formData.contractId,itemIds:i,spaceIds:a,subjectMatterType:e.formData.subjectMatterType};console.log(e.$refs.expTable,"this.$refs.expTable"),e.$refs.expTable.createTable(n,1)}}))},listData:function(e){this.formData.billDetailList=e,console.log(e,"数据")}},mounted:function(){var e=o()();this.formData.billDate=e.format("YYYY-MM-DD"),this.formData.lateDate=e.add(3,"days").format("YYYY-MM-DD"),this.formData.times=[e.startOf("month").format("YYYY-MM-DD"),e.endOf("month").format("YYYY-MM-DD")]}},p=f,h=(a("ef2b"),a("2877")),b=Object(h["a"])(p,i,n,!1,null,"d51a9288",null);t["default"]=b.exports},"90eb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"600px",title:"edit"==e.enterParam.type?"编辑账单组":"view"==e.enterParam.type?"查看账单组":"新增账单组",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{"label-width":"100px",model:e.formData,rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"add"!==e.enterParam.type,placeholder:"请选择项目",clearable:""},on:{change:e.getAreaId},model:{value:e.formData.areaId,callback:function(t){e.$set(e.formData,"areaId",t)},expression:"formData.areaId"}},e._l(e.parks,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"账单组名称:",prop:"groupName"}},[t("el-input",{attrs:{placeholder:"请输入账单组名称"},model:{value:e.formData.groupName,callback:function(t){e.$set(e.formData,"groupName",t)},expression:"formData.groupName"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"is-required",attrs:{label:"收款方:",prop:"payeeId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择收款方"},on:{change:e.getPayee},model:{value:e.formData.payeeId,callback:function(t){e.$set(e.formData,"payeeId",t)},expression:"formData.payeeId"}},e._l(e.payeeOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.payeeName,value:e.id}})})),1)],1)],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),"view"!=e.enterParam.type?t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")]):e._e()],1)],1)},n=[],r=(a("4de4"),a("7db0"),a("d3b7"),a("5f87")),s=a("39cc"),l=(a("931d"),{props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},computed:{parks:function(){return Object(r["a"])()}},data:function(){return{isShow:!1,formData:{payeeId:null,groupName:null,areaId:null,groupNo:null,remark:null,id:null},rules:{payeeId:[{required:!0,message:"请选择收款方",trigger:"change"}],areaId:[{required:!0,message:"请选择项目",trigger:"change"}],groupName:[{required:!0,message:"请输入账单组名称",trigger:"change"}]},payeeOption:[]}},watch:{value:function(e){var t=this;this.isShow=e,e&&(this.formData={payeeId:null,groupName:null,areaId:null,groupNo:null,remark:null,id:null},this.$nextTick((function(){t.$refs.form&&t.$refs.form.clearValidate()})),"edit"!=this.enterParam.type&&"view"!=this.enterParam.type||this.enterParam.row.id&&this.getInfo(this.enterParam.row.id))},isShow:function(e){this.$emit("input",e)}},created:function(){},methods:{getInfo:function(e){var t=this;Object(s["e"])({id:e}).then((function(e){console.log("billGroupInfo",e);var a=e.data,i=a.id,n=a.groupName,r=a.payeeName,s=a.payeeId,l=a.areaId,o=a.areaName;t.formData={id:i,groupName:n,payeeId:s,payeeName:r,areaId:l,areaName:o},t.getPayeeAll(l)}))},getAreaId:function(e){var t=this.parks.find((function(t){return t.areaId===e}));t&&(this.formData.areaName=t.areaName),this.getPayeeAll(e)},getPayeeAll:function(e){var t=this;e||(this.payeeOption=[]),Object(s["F"])({areaId:e}).then((function(e){0==e.code&&(t.payeeOption=e.data,t.formData.areaId&&t.payeeOption.filter((function(e){return e.id==t.formData.payeeId})).length<1&&(t.formData.payeeId=null,t.formData.payeeName=null))}))},getPayee:function(e){var t=this.payeeOption.find((function(t){return t.id===e}));this.formData.payeeName=t.payeeName},submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){console.log(e.formData);var a=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refreshList"),e.hide()):e.$message.error(t.msg)};"edit"===e.enterParam.type?Object(s["d"])(e.formData).then(a):Object(s["a"])(e.formData).then(a)}}))},hide:function(){this.isShow=!1,this.resetForm("form"),this.formData={},this.itemOptions=[],this.itemsList=[]}}}),o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},9222:function(e,t,a){"use strict";a("f97e")},"924f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"size",align:"center",title:"选择合同",visible:e.isShow,width:"700px"},on:{"update:visible":function(t){e.isShow=t}}},[t("el-card",[t("el-form",{ref:"form",attrs:{inline:!0,size:"small"}},[1===e.type?[t("el-form-item",{attrs:{label:"合同编号"}},[t("el-input",{attrs:{placeholder:"请输入合同编号"},model:{value:e.queryParams["contractNo"],callback:function(t){e.$set(e.queryParams,"contractNo",t)},expression:"queryParams['contractNo']"}})],1),t("el-form-item",{attrs:{label:"入住人名称"}},[t("el-input",{attrs:{placeholder:"请输入入住人名称"},model:{value:e.queryParams["applyUserRealNameLike"],callback:function(t){e.$set(e.queryParams,"applyUserRealNameLike",t)},expression:"queryParams['applyUserRealNameLike']"}})],1)]:e._e(),2===e.type?[t("el-form-item",{attrs:{label:"合同编号"}},[t("el-input",{attrs:{placeholder:"请输入合同编号"},model:{value:e.queryParams["contractNo"],callback:function(t){e.$set(e.queryParams,"contractNo",t)},expression:"queryParams['contractNo']"}})],1),t("el-form-item",{attrs:{label:"企业名称"}},[t("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.queryParams["entNameLike"],callback:function(t){e.$set(e.queryParams,"entNameLike",t)},expression:"queryParams['entNameLike']"}})],1)]:e._e(),t("el-form-item",{staticStyle:{display:"none"},attrs:{label:""}},[t("input",{attrs:{type:"",placeholder:""}})]),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")]),t("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1)],2),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"slideshowTable",attrs:{data:e.tableData,size:"small","row-key":"id"}},[t("el-table-column",{attrs:{prop:"contractNo",label:"合同编号",align:"center"}}),t("el-table-column",{attrs:{prop:2==e.type?"applyUserRealName":"entName",label:2==e.type?"客户名称":"企业名称",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.selectClick(a.row)}}},[e._v(" 选择 ")])]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:function(t){return e.getList()}}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("关 闭")])],1)],1)},n=[],r=(a("a9e3"),a("b775")),s=(a("2934"),a("c1df"),function(e){return Object(r["a"])({url:"/adm-service/bes/staff/apply/list/audited",method:"post",data:e})}),l=a("0a20"),o={props:{value:{type:Boolean,required:!0},type:{type:Number},areaId:{type:String}},watch:{value:function(e){e&&(this.isShow=e,this.getList())},isShow:function(e){this.$emit("input",e)}},data:function(){return{listLoading:!1,isShow:!1,searchModel:[{columnId:"contractNo",displayName:"合同编号",searchType:"input",placeholder:""}],tableData:[],total:0,queryParams:{pageNum:1,pageSize:10,sourceType:0,settleInStatus:0,status:40},currentRow:null}},methods:{getList:function(){var e=this;this.listLoading=!0,this.queryParams["areaId"]=this.areaId,2==this.type?s(this.queryParams).then((function(t){e.listLoading=!1,0===t.code?(e.tableData=t.data.items,e.total=t.data.total):e.$message.error(t.msg)})).catch((function(){e.listLoading=!1})):Object(l["b"])(this.queryParams).then((function(t){e.listLoading=!1,0===t.code?(e.tableData=t.data.items,e.total=t.data.total):e.$message.error(t.msg)})).catch((function(){e.listLoading=!1}))},selectClick:function(e){this.$emit("getApplayNo",e),this.isShow=!1},onReset:function(){this.queryParams.contractNo=null,this.queryParams["applyUserRealNameLike"]=null,this.queryParams["entNameLike"]=null,this.handleQuery()},handleQuery:function(){this.queryParams.pageNum=1,this.getList()}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},"92d7":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleSearch2,onReset:e.handleSearch3}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[t("label",[e._v("公司名称：")]),e._v(" "+e._s(e.formData.cusName)+" "),t("label",{staticStyle:{"margin-left":"10px"}},[e._v("应收总金额：")]),e._v(" "+e._s(e.formData.receivableAmtSum)+" "),t("label",{staticStyle:{"margin-left":"10px"}},[e._v("已收总金额：")]),e._v(" "+e._s(e.formData.receiptAmtSum)+" "),t("label",{staticStyle:{"margin-left":"10px"}},[e._v("待收总金额：")]),e._v(" "+e._s(e.formData.pendingAmtSum)+" ")]),t("div",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.goBack}},[e._v("返回")])],1)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleShow(i.row)}}},[e._v("查看")]),0===i.row.reviewStatus&&2!=i.row.billSource?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0===i.row.reviewStatus&&2!=i.row.billSource&&e.$_has(e.editCode),expression:"\n              scope.row.reviewStatus === 0 &&\n              scope.row.billSource != 2 &&\n              $_has(editCode)\n            "}],attrs:{type:"text",size:"small"},on:{click:function(t){return e.editClick(i.row)}}},[e._v("编辑 ")]),0===i.row.reviewStatus&&2!=i.row.billSource&&e.$_has(e.reviewCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0===i.row.reviewStatus&&2!=i.row.billSource&&e.$_has(e.reviewCode),expression:"\n              scope.row.reviewStatus === 0 &&\n              scope.row.billSource != 2 &&\n              $_has(reviewCode)\n            "}],attrs:{type:"text",size:"small"},on:{click:function(t){return e.handlerClick(i.row)}}},[e._v("复核 ")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)]),t("receiptDialog",{attrs:{dataSource:e.receiptList},on:{success:e.receiptSuccess},model:{value:e.visReceiptDialog,callback:function(t){e.visReceiptDialog=t},expression:"visReceiptDialog"}})],1)},n=[],r=(a("b680"),a("d3b7"),a("f186")),s=a("376f"),l={props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},components:{receiptDialog:r["default"]},data:function(){return{editCode:["adm:finance:bill:edit"],reviewCode:["adm:finance:bill:review"],callBillShow:!1,loading:!1,listData:[],total:0,columns:[{name:"账期",desc:"billDate",width:100},{name:"客户名称",desc:"cusName",width:140},{name:"应收金额(元)",desc:"receivableAmt",width:140,format:!0},{name:"已收金额(元)",desc:"receiptAmt",width:140,format:!0},{name:"待收金额",desc:"pendingAmt",width:140,format:!0,filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"出账日",desc:"billingDate",width:120},{name:"最后还款日",desc:"lateDate",width:120},{name:"账单来源",desc:"billSource",width:100,filter:function(e){return 1===e?"首期账单":2===e?"结算账单":3===e?"账期账单":4===e?"手工账单":void 0}},{name:"缴费状态",desc:"payStatus",filter:function(e){return["未缴纳","欠费","已缴","部分已缴"][e]}},{name:"复核状态",desc:"reviewStatus",filter:function(e){return["未复核","已复核"][e]}},{name:"操作",slotName:"action",fixed:"right",width:140}],billId:"",colModel:[{displayName:"账单时间",columnId:"billingDate",placeholder:"请输入客户名称",searchType:"dateArray",type:"monthrange"},{displayName:"缴费状态",columnId:"payStatus",placeholder:"请选择缴费状态",searchType:"select",options:[{value:"0",label:"未缴"},{value:"1",label:"欠费"},{value:"2",label:"已缴"}]},{displayName:"复核状态",columnId:"reviewStatus",placeholder:"请选择复核状态",searchType:"select",options:[{value:"0",label:"未复核"},{value:"1",label:"已复核"}]}],queryParams:{pageNum:1,pageSize:10},formData:{},visReceiptDialog:!1,receiptList:[]}},methods:{handleSearch2:function(){this.queryParams.pageNum=1,this.handleSearch()},handleSearch3:function(){this.queryParams={pageNum:1,pageSize:10},this.handleSearch()},handleSearch:function(e){var t=this;this.loading=!0,e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);a["cusId"]=this.enterParams.id,Object(s["c"])(a).then((function(e){0===e.code?(t.listData=e.data.items,t.total=e.data.total,Object(s["n"])(a).then((function(e){var a,i,n,r,s,l;0==e.code&&(t.formData=e.data,t.formData.receivableAmtSum=null!==(a=null===(i=t.formData.receivableAmtSum)||void 0===i?void 0:i.toFixed(2))&&void 0!==a?a:0,t.formData.receiptAmtSum=null!==(n=null===(r=t.formData.receiptAmtSum)||void 0===r?void 0:r.toFixed(2))&&void 0!==n?n:0,t.formData.pendingAmtSum=null!==(s=null===(l=t.formData.pendingAmtSum)||void 0===l?void 0:l.toFixed(2))&&void 0!==s?s:0)}))):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},handleShow:function(e){2==e.billSource?this.forward("ViewForm",{opt:"subBill",rowId:e.settleId||e.contractId,cusId:this.enterParams.id}):this.forward("FormDetail",{opt:1==e.reviewStatus?"after":"before",id:e.id,customerShow:"customerShow",cusId:this.enterParams.id})},confirmColl:function(e){e.payStatus>1?this.$message.warning("账单已结清."):(this.receiptList=[{id:e.id,billCode:e.billCode}],this.visReceiptDialog=!0)},receiptSuccess:function(){var e=this.queryParams,t=e.pageNum,a=e.pageSize;1!=t&&this.total==(t-1)*a+1&&(t-=1),this.handleSearch({pageNum:t,cusId:this.enterParams.id})},editClick:function(e){this.forward("FormDetail",{opt:1==e.reviewStatus?"after":"before",id:e.id,customerEdit:"customerEdit",cusId:this.enterParams.id})},handlerClick:function(e){var t=this;this.$confirm("确定对".concat(e.billCode,"账单进行复核吗？"),"账单复核",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["t"])({ids:[e.id]}).then((function(e){if(0===e.code){t.$message.success("复核成功");var a=t.queryParams,i=a.pageNum,n=a.pageSize;1!=i&&t.total==(i-1)*n+1&&(i-=1),t.handleSearch({pageNum:i,cusId:t.enterParams.id})}else t.$message.error(e.msg)}))}))},goBack:function(){this.forward("list")}},created:function(){this.handleSearch({cusId:this.enterParams.id})},mounted:function(){}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},"92d8":function(e,t,a){"use strict";a("c401d")},"931d":function(e,t,a){"use strict";a("b775")},"93d4":function(e,t,a){},9668:function(e,t,a){"use strict";a("755b")},"97c4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{staticStyle:{display:"flex"}},[t("span",{staticClass:"echartTitle"},[e._v(" 租金分析 ")]),t("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择项目"},on:{change:e.handleChange},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1),t("div",{staticClass:"activeClass",staticStyle:{"margin-left":"20px"}},[e._v(" 月份： "),t("el-date-picker",{attrs:{clearable:!1,size:"small",type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},on:{change:e.handleChange},model:{value:e.months,callback:function(t){e.months=t},expression:"months"}})],1)],1),t("div",{staticStyle:{"margin-top":"10px"}},[t("div",{attrs:{id:"rentChart"}})])])},n=[],r=(a("4de4"),a("d81d"),a("4e82"),a("e9c4"),a("b680"),a("b64b"),a("d3b7"),a("159b"),a("76bd")),s=a("5f87"),l=a("c1df"),o=a.n(l),c=a("ed08"),d={data:function(){return{months:[],areaId:null,areaList:[],myChart:null,chartData1:[],chartData2:[]}},computed:{parks:function(){return Object(s["a"])()}},created:function(){this.months=[o()().subtract(1,"year").add(1,"month").format("YYYY-MM"),o()().format("YYYY-MM")],this.getAreaList()},mounted:function(){var e=this;setTimeout((function(){e.getInit()}),200)},methods:{fmoney:c["c"],getAreaList:function(){var e=JSON.parse(JSON.stringify(this.parks));this.areaList=e.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),this.areaList.length>0&&(this.areaId=this.areaList[0].id,this.handleChange())},handleChange:function(){var e=this;this.loading=!0;var t={areaIds:[this.areaId],beginTime:o()(this.months[0]).startOf("month").format("YYYY-MM"),endTime:o()(this.months[1]).endOf("month").format("YYYY-MM"),subjectMatterType:1},a=this;Object(r["e"])(t).then((function(e){0==e.code&&(a.chartData1=e.data,t.subjectMatterType=2,Object(r["e"])(t).then((function(e){0==e.code&&(a.chartData2=e.data,a.getInit(),a.loading=!1)})))})).catch((function(){e.loading=!1}))},getInit:function(){var e=JSON.parse(JSON.stringify(this.chartData1)).map((function(e){return e["amtAvg2"]=0,e.amtAvg=(+e.amtAvg||0).toFixed(2),e}));this.chartData2.forEach((function(t){var a=e.filter((function(e){return t.monthStr==e.monthStr}));a&&a.length>0?a[0]["amtAvg2"]=(+t.amtAvg||0).toFixed(2):(t["amtAvg2"]=(+t.amtAvg||0).toFixed(2),t.amtAvg=0,e.push(t))})),e=e.sort((function(e,t){return new Date(e.monthStr)-new Date(t.monthStr)}));var t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"20",containLabel:!0},xAxis:[{type:"category",data:e.map((function(e){return e.monthStr}))}],yAxis:[{type:"value",name:"元",position:"left",alignTicks:!0,axisLine:{show:!0}}],series:[{name:"商办/厂房",type:"line",smooth:!0,data:e.map((function(e){return e.amtAvg2})),label:{show:!0,position:"top"},emphasis:{focus:"series"}},{name:"公寓",smooth:!0,type:"line",label:{show:!0,position:"top"},emphasis:{focus:"series"},data:e.map((function(e){return e.amtAvg}))}]};this.myChart=this.$echarts.init(document.getElementById("rentChart")),this.myChart.setOption(t),window.onresize=function(){this.myChart&&this.myChart.resize()}}}},u=d,m=(a("c369"),a("2877")),f=Object(m["a"])(u,i,n,!1,null,"7a761750",null);t["default"]=f.exports},9965:function(e,t,a){},"9a58":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"600px",title:"edit"==e.enterParam.type?"修改一房一价值":"查看一房一价值",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-form-item",{attrs:{label:"指定金额:",prop:"amount"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"view"==e.enterParam.type,placeholder:"请输入"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"生效时间:",prop:"effDate"}},[t("el-date-picker",{staticStyle:{width:"300px"},attrs:{disabled:"view"==e.enterParam.type,type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择生效时间"},model:{value:e.form.effDate,callback:function(t){e.$set(e.form,"effDate",t)},expression:"form.effDate"}})],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"失效时间:",prop:"expDate"}},[t("el-date-picker",{staticStyle:{width:"300px"},attrs:{disabled:"view"==e.enterParam.type,type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择失效时间"},model:{value:e.form.expDate,callback:function(t){e.$set(e.form,"expDate",t)},expression:"form.expDate"}}),t("div",{staticClass:"text-nav el-upload__tip"},[e._v("失效时间为空时，则永久有效")])],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),"edit"==e.enterParam.type?t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")]):e._e()],1)],1)},n=[],r=(a("e9c4"),a("b64b"),a("bfec")),s={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},data:function(){return{isShow:!1,form:{id:"",amount:"",effDate:"",expDate:""},rules:{amount:[{required:!0,message:"指定金额不能为空!",trigger:"blur"}],effDate:[{required:!0,message:"请选择生效时间!",trigger:"change"}]}}},watch:{value:function(e){this.isShow=e,e&&(this.form=JSON.parse(JSON.stringify(this.enterParam)))},isShow:function(e){this.$emit("input",e)}},created:function(){},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(r["c"])(e.form).then((function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refreshList"),e.hide()):e.$message.error(t.msg)}))}))},hide:function(){this.resetForm("form"),this.isShow=!1}}},l=s,o=(a("fb64"),a("2877")),c=Object(o["a"])(l,i,n,!1,null,"ec423642",null);t["default"]=c.exports},"9c5c":function(e,t,a){e.exports=a.p+"static/img/ys.5b26ff53.png"},"9cbb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("ns-drawer",{attrs:{loading:e.loading,title:"查看收款方详情","top-resume":{title:e.form.payeeName,list:[{label:"所属项目",value:e.form.areaName},{label:"状态",value:0==e.form.status?"启用":"禁用"}]}},on:{close:e.hide},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("收款方名称")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.payeeName)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("纳税人识别号")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.taxpayerNo)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("账号")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.bankNo)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("开户行")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.bank)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("核算银行账号编码")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.bankCode)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("金融机构")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.selectDictLabel(e.bankOption,e.form.mechanism)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("电话")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.phone)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("开户行地址")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.bankAddress)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("收款人")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.payee)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("复核人")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.reviewer)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("收款方地址")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.payeeAddress)))])])])])])},n=[],r=(a("7db0"),a("d3b7"),a("39cc")),s={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},filters:{findForCodeFilter:function(e,t){var a=t.find((function(t){return t.value==e}));return a?a.label:"--"}},data:function(){return{bankOption:[],loading:!1,isShow:!1,form:{}}},watch:{value:function(e){this.isShow=e,e&&this.getDetail()},isShow:function(e){this.$emit("input",e)}},created:function(){var e=this;this.getDicts({code:"biz_bank"}).then((function(t){0==t.code&&(e.bankOption=t.data.items||[])}))},methods:{hide:function(){this.isShow=!1},getDetail:function(){var e=this;this.loading=!0,Object(r["H"])({id:this.enterParam.rowId}).then((function(t){e.loading=!1,0===t.code?e.form=t.data:e.$message.error(t.msg)})).catch((function(t){e.loading=!1,console.log(t)}))}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},"9cbe":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"chartStyle",staticStyle:{height:"320px"}})},n=[],r=a("313e"),s=a("2302"),l={mixins:[s["a"]],props:{data:{type:Array,default:function(){return[]}},legendData:{type:Array,default:function(){return[]}},titleText:{type:String,default:""}},data:function(){return{myChart:{},option:{title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[]},series:[{type:"pie",radius:["25%","60%"],avoidLabelOverlap:!1,label:{position:"outer",alignTo:"edge",margin:20},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},data:[]}]}}},watch:{data:function(){this.resize()}},methods:{resize:function(){this.option.series[0].data=this.data,this.option.legend.data=this.legendData,this.option.title.text=this.titleText,this.myChart.setOption(this.option),this.myChart.resize()}},mounted:function(){this.myChart=r["init"](this.$el),this.option.series[0].data=this.data,this.option.legend.data=this.legendData,this.option.title.text=this.titleText}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},a109:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"600px",title:"edit"==e.enterParam.type?"编辑费项分类":"view"==e.enterParam.type?"查看费项分类":"新增费项分类",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-form-item",{attrs:{label:"分类名称:",prop:"expName"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"view"==e.enterParam.type,placeholder:"请输入分类名称"},model:{value:e.form.expName,callback:function(t){e.$set(e.form,"expName",t)},expression:"form.expName"}})],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"view"==e.enterParam.type,type:"textarea","show-word-limit":"",rows:3,maxlength:"200"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),"view"!=e.enterParam.type?t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")]):e._e()],1)],1)},n=[],r=(a("e9c4"),a("b64b"),a("39cc")),s={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},data:function(){return{isShow:!1,form:{expName:"",remark:""},rules:{expName:[{required:!0,message:"请输入分类名称"}]}}},watch:{value:function(e){this.isShow=e,e&&("edit"!=this.enterParam.type&&"view"!=this.enterParam.type||(this.form=JSON.parse(JSON.stringify(this.enterParam.row))))},isShow:function(e){this.$emit("input",e)}},created:function(){},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refreshList"),e.hide()):e.$message.error(t.msg)};"edit"===e.enterParam.type?Object(r["w"])(e.form).then(a):Object(r["t"])(e.form).then(a)}}))},hide:function(){this.resetForm("form"),this.isShow=!1,this.form={}}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},a36b:function(e,t,a){e.exports=a.p+"static/img/404.5f76e018.png"},a3d6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"20px"}},[t("el-form",{attrs:{model:e.form,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"短信催缴开关"}},[t("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(t){return e.changeStatus(1)}},model:{value:e.form.sms,callback:function(t){e.$set(e.form,"sms",t)},expression:"form.sms"}})],1),t("el-form-item",{attrs:{label:"邮箱催缴开关"}},[t("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(t){return e.changeStatus(2)}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1)},n=[],r=(a("d3b7"),a("159b"),a("1066")),s={data:function(){return{form:{wechat:"0",sms:"0",email:"0"}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["b"])({type:2}).then((function(t){0==t.code&&t.data.forEach((function(t){"Urge_Wechat"===t.id?e.form.wechat=t.value||"0":"Urge_Sms"===t.id?e.form.sms=t.value||"0":"Urge_Email"===t.id&&(e.form.email=t.value||"0")}))}))},changeStatus:function(e){var t=this,a={type:2};switch(e){case 0:a.id="Urge_Wechat",a.value=this.form.wechat;break;case 1:a.id="Urge_Sms",a.value=this.form.sms;break;case 2:a.id="Urge_Email",a.value=this.form.email;break;default:return void console.error("无效类型:"+e)}var i=[a];Object(r["a"])({items:i}).then((function(e){0===e.code?t.$message.success("保存成功!"):t.$message.error(e.msg)}))}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},a410:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("ns-table",{directives:[{name:"show",rawName:"v-show",value:e.listData.length,expression:"listData.length"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,align:"center",isShowPagination:!1,highlightCurrentRow:!1,border:"","show-header":e.showHeader},on:{editInput:e.editInput},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.rowDel(i.$index)}}},[e._v("删除")])]}}])})},n=[],r=a("5530"),s=(a("4de4"),a("7db0"),a("c740"),a("d81d"),a("a434"),a("a9e3"),a("d3b7"),a("c23a")),l={props:{areaId:{type:String|Number,default:""},roomId:{type:String|Number,default:""},showHeader:{type:Boolean,default:!0},defaultListData:{type:Array,default:function(){return[]}}},watch:{roomId:function(e){var t=this;Object(s["b"])({areaId:this.areaId,roomId:e}).then((function(e){0===e.code&&(t.columns[0].editSelOptions=e.data)}))}},data:function(){return{initRow:{itemId:"",qty:"",price:0},columns:[{name:"收费项目",desc:"itemId",edit:!0,editType:"select",editSelOptions:[],label:"itemName",value:"itemId",disabFilter:function(){}},{name:"数量",desc:"qty",edit:!0,editType:"input",disabFilter:function(e){return 0==e.qtyFlag}},{name:"单价(元)",desc:"price",format:!0},{name:"操作",slotName:"action"}],listData:[]}},methods:{rowAdd:function(){this.listData.push(Object(r["a"])({},this.initRow))},rowDel:function(e){var t=this;if(!((this.defaultListData?this.defaultListData.length:0)+this.listData.length<=1)){var a=this.columns[0].editSelOptions,i=a.findIndex((function(a){return a.itemId===t.listData[e].itemId})),n=a.find((function(a){return a.itemId===t.listData[e].itemId}));n&&(n.disabled=!1,this.$set(a,i,n)),this.listData.splice(e,1)}},createBillDetailList:function(e){var t=this.columns[0].editSelOptions;return this.listData.filter((function(e){return e.itemId})).map((function(a){var i=t.find((function(e){return e.itemId===a.itemId}));return{itemId:a.itemId,price:i.price,qty:a.qty,amount:i.amount,effDate:i.effDate,expDate:i.expDate,startTime:e.startTime,endTime:e.endTime,repayDate:e.repayDate,roomId:e.roomId,standard:i.standard}}))},editInput:function(e,t){if("select"===t){var a=this.columns[0].editSelOptions,i=a.find((function(t){return t.itemId===e.itemId}));e.qtyFlag=i.qtyFlag,e.price=i.price}}},mounted:function(){var e=this;this.rowAdd(),this.columns[0].disabFilter=function(t){return null!=e.defaultListData&&e.defaultListData.length?!!~e.listData.findIndex((function(e){return e.itemId===t.itemId}))||!!~e.defaultListData.findIndex((function(e){return e.itemId===t.itemId})):!!~e.listData.findIndex((function(e){return e.itemId===t.itemId}))}}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},a41b:function(e,t,a){"use strict";a("f483")},a541:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[e._v(" 2019年11月收缴率 ")]),t("el-radio-group",{staticStyle:{"margin-bottom":"30px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-radio-button",{attrs:{label:"amount"}},[e._v("按金额")]),t("el-radio-button",{attrs:{label:"bill"}},[e._v("按账单")]),t("el-radio-button",{attrs:{label:"households"}},[e._v("按户数")])],1),t("div",{staticClass:"chartStyle",staticStyle:{height:"320px"},attrs:{id:e.pieId}})],1)},n=[],r=(a("a9e3"),a("b680"),a("313e")),s=a("2302"),l={mixins:[s["a"]],props:{rentRate:Number,pieId:String},data:function(){return{myChart3:{},activeName:"amount"}},watch:{rentRate:function(){this.init()}},methods:{init:function(){var e=this;this.myChart3=r["init"](document.getElementById(this.pieId));var t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"center",bottom:"bottom",data:["未缴金额","已缴金额"]},color:["#6ea2f7","#73dcb3"],series:[{name:"缴费率",type:"pie",radius:"55%",center:["50%","60%"],label:{show:!1,position:"center"},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:[{value:100,name:"未租"},{value:0,name:"在租"}]}]};setTimeout((function(){var a=e.rentRate?(100*e.rentRate).toFixed(2):0;t.series[0].data[0].value=100-a,t["series"][0].data[1].value=a,e.myChart3.setOption(t),e.myChart3.resize()}))},resize:function(){this.myChart3.resize()}},mounted:function(){this.init()}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},a598:function(e,t,a){"use strict";a("b208")},a637:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-ar-panel settle-panel"},[t("div",{staticClass:"text-title mt-20 item-title"},[e._v("应收清算（包含历史所有应收）")]),t("el-table",{attrs:{data:e.source,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},"show-summary":"","summary-method":e.getTotal}},[t("el-table-column",{attrs:{label:"所属房源",align:"center",prop:"spaceCodes"}}),t("el-table-column",{attrs:{label:"费项名称",align:"center",prop:"itemNames"}}),t("el-table-column",{attrs:{label:"周期",align:"center",prop:"billDate"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.billPeriodStart)+" ~ "+e._s(a.row.billPeriodEnd))])]}}])}),t("el-table-column",{attrs:{label:"应收金额(元)",align:"center",prop:"amount",formatter:e.formatterNum}})],1)],1)},n=[],r=(a("d81d"),a("13d5"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),{props:{source:{type:Array,default:function(){return[]}}},methods:{formatterNum:function(e,t){return console.log(e,t,2222),e.amount?e.amount.toFixed(2):0},getTotal:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(0!==t){if("amount"==e.property){var n=a.map((function(t){return Number(t[e.property])}));n.every((function(e){return isNaN(e)}))?i[t]="":i[t]=n.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),i[t]=i[t]?i[t].toFixed(2):0}}else i[t]="合计"})),i}}}),s=r,l=(a("5df8"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"22609342",null);t["default"]=o.exports},a663:function(e,t,a){"use strict";a("6ad1")},a938:function(e,t,a){},a98e:function(e,t,a){"use strict";a("ffcd")},aa87:function(e,t,a){},ab39:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("b775"),n="/adm-service/area/parking/space",r={spaceList:n+"/list",spaceListAll:n+"/listall",spaceAdd:n+"/add",spaceDel:n+"/del",spaceEdit:n+"/edit",spaceGet:n+"/get",spaceTree:n+"/getParkingTrees",spaceImp:n+"/imp",spaceListByRoom:n+"/listByRoom"};function s(e){return Object(i["a"])({url:r.spaceListAll,method:"post",data:e})}},abf3:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleSearch,onReset:e.handleSearch}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div",{staticStyle:{display:"flex"}},[t("el-button",{attrs:{size:"small",type:"primary",disabled:e.callabled},on:{click:function(t){return e.callPayment()}}},[e._v("催缴")])],1)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch,printData:e.changePringData},scopedSlots:e._u([{key:"daysOverdue",fn:function(a){var i=a.scope;return[t("span",[e._v(" "+e._s(e.filterDateDiff(i.row.lateDate))+" ")])]}},{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleView(i.row)}}},[e._v("催收单")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)]),t("CallBill",{attrs:{type:"billId",rowId:e.billId},on:{refresh:e.handleSearch},model:{value:e.callBillShow,callback:function(t){e.callBillShow=t},expression:"callBillShow"}})],1)},n=[],r=a("5530"),s=(a("d81d"),a("e9c4"),a("b680"),a("d3b7"),a("52fc")),l=a("b472"),o=a("c7eb"),c=a("1da1"),d=(a("b64b"),a("159b"),a("cb37")),u=a("ab39"),m=a("5f87"),f={data:function(){return{areaList:[],buildingList:[],floorList:[],roomList:[],cascColModel:{}}},computed:{parks:function(){return Object(m["a"])()}},methods:{getAreaList:function(){this.areaList=JSON.parse(JSON.stringify(this.parks))},getBuildingList:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(d["a"])(e);case 2:i=a.sent,0!==i.code&&200!==i.code||(t.buildingList=i.data.items);case 4:case"end":return a.stop()}}),a)})))()},getFloorList:function(e){var t=this;Object(d["b"])(e).then((function(e){0!==e.code&&200!==e.code||(t.floorList=e.data.items)}))},getRoomList:function(e){var t=this;Object(d["e"])(e).then((function(e){0!==e.code&&200!==e.code||(t.roomList=e.data.items)}))},changeArea:function(e){this.formData.buildingId="",this.formData.floorId="",this.formData.roomId="",this.buildingList=[],this.roomList=[],this.floorList=[],this.getBuildingList({areaId:e})},changeBuilding:function(e){this.formData.floorId="",this.formData.roomId="",this.roomList=[],this.floorList=[],this.getFloorList({buildingId:e})},changeFloor:function(e){this.formData.roomId="",this.roomList=[],this.getRoomList({floorId:e})},cascLazyLoad:function(e,t){var a=[],i=e.level;e&&this&&1==i?Object(d["a"])({areaId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.buildingName,e}))})).finally((function(){t(a)})):e&&this&&2==i?Object(d["f"])({buildingId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.unitName,e}))})).finally((function(){t(a)})):e&&this&&3==i?Object(d["b"])({unitId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.floorName,e}))})).finally((function(){t(a)})):e&&this&&4==i?Object(d["e"])({floorId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.roomName,e}))})).finally((function(){t(a)})):e&&this&&5==i&&Object(u["a"])({roomId:e.value}).then((function(e){var t=e.data.items;a=t.map((function(e){return e.label=e.spaceName,e}))})).finally((function(){t(a)}))},handleCascData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cascData";if(Array.isArray(e[t])){var a={areaId:"",buildingId:"",unitId:"",floorId:"",roomId:"",spaceId:""},i=Object.keys(a);return e[t].forEach((function(e,t){a[i[t]]=e})),a}}},created:function(){this.getAreaList(),this.cascColModel={displayName:"楼栋房源",columnId:"cascData",placeholder:"请选择楼栋房源",searchType:"cascader",options:this.areaList.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),props:{leaf:"roomName",lazy:!0,checkStrictly:!0,value:"id",lazyLoad:this.cascLazyLoad}}}},p=a("c1df"),h=a.n(p),b={components:{CallBill:s["default"]},mixins:[f],data:function(){return{callBillShow:!1,loading:!1,listData:[],total:0,columns:[{type:"selection"},{name:"账期",desc:"billDate",width:100},{name:"客户名称",desc:"cusName",width:140},{name:"楼栋房源",desc:"spaceCodes",width:160},{name:"应收金额(元)",desc:"receivableAmt",format:!0,width:140},{name:"待收金额(元)",desc:"pendingAmt",format:!0,width:140,filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"逾期天数",slotName:"daysOverdue",width:100},{name:"最晚缴费日",desc:"lateDate",width:140},{name:"催缴时间",desc:"lastUrgeTime",width:180},{name:"催缴次数",desc:"urgeNum",width:100},{name:"操作",slotName:"action",fixed:"right",width:100}],billId:"",colModel:[{displayName:"客户名称",columnId:"cusName",placeholder:"请输入客户名称",searchType:"input"},{displayName:"账期范围",columnId:"billingDateBetween",searchType:"dateArray",type:"daterange"},{displayName:"逾期天数",columnId:"daysOverdue",placeholder:"请选择逾期天数",searchType:"select",options:[{value:0,label:"30天内"},{value:1,label:"30到60天"},{value:2,label:"60到90天"},{value:3,label:"90天以上"}]},{displayName:"催缴方式",columnId:"urgeType",placeholder:"请选择逾催缴方式",searchType:"select",options:[{value:1,label:"微信"},{value:2,label:"邮箱"},{value:4,label:"短信"}]},{displayName:"楼栋房源",columnId:"cascData",placeholder:"请选择楼栋房源",searchType:"cascader",options:[],props:{lazy:!0,value:"id",lazyLoad:this.cascLazyLoad,checkStrictly:!0,expandTrigger:"hover"}}],queryParams:{pageNum:1,pageSize:10},selectList:[],callabled:!1}},methods:{handleSearch:function(e){var t=this;this.loading=!0,e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object(r["a"])(Object(r["a"])({},this.queryParams),this.handleCascData(this.queryParams));Object(l["b"])(a).then((function(e){0===e.code?(t.listData=e.data.items,t.total=e.data.total):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},handleView:function(e){this.billId=JSON.stringify(e),this.callBillShow=!0},filterDateDiff:function(e){if(null!=e){var t=h()().diff(h()(e),"days");if(t>0)return t}return"-"},changePringData:function(e){this.selectList=e},callPayment:function(){var e=this;if(this.selectList.length<=0)this.$message.warning("请选择催缴数据！");else{this.callabled=!0;var t=this.selectList.map((function(e){return e.id}));Object(l["f"])({ids:t}).then((function(t){e.callabled=!1,0==t.code&&e.$message.success("已催缴成功！")})).catch((function(){e.callabled=!1})),setTimeout((function(){}),1e3)}}},created:function(){this.handleSearch()},mounted:function(){this.selectList=[],this.colModel[4].options=this.areaList.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),this.colModel[4].change=this.changeArea}},v=b,g=a("2877"),y=Object(g["a"])(v,i,n,!1,null,null,null);t["default"]=y.exports},ac88:function(e,t,a){},ade4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"600px",title:"edit"==e.enterParam.type?"编辑标准价":"view"==e.enterParam.type?"查看标准价":"新增标准价",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{disabled:"add"!==e.enterParam.type,placeholder:"请选择项目",clearable:""},on:{change:e.getAreaId},model:{value:e.form.areaId,callback:function(t){e.$set(e.form,"areaId",t)},expression:"form.areaId"}},e._l(e.parks,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"标准价名称:",prop:"prName"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"view"==e.enterParam.type,placeholder:"请输入标准价名称"},model:{value:e.form.prName,callback:function(t){e.$set(e.form,"prName",t)},expression:"form.prName"}})],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"价格类型:",prop:"priceType"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{disabled:"view"==e.enterParam.type,placeholder:"请选择价格类型"},model:{value:e.form.priceType,callback:function(t){e.$set(e.form,"priceType",t)},expression:"form.priceType"}},e._l(e.priceOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"值:",prop:"priceValue"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"view"==e.enterParam.type,placeholder:"请输入值"},model:{value:e.form.priceValue,callback:function(t){e.$set(e.form,"priceValue",t)},expression:"form.priceValue"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),"view"!=e.enterParam.type?t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")]):e._e()],1)],1)},n=[],r=(a("7db0"),a("e9c4"),a("b64b"),a("d3b7"),a("5f87")),s=a("39cc"),l={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},computed:{parks:function(){return Object(r["a"])()}},data:function(){return{isShow:!1,priceOption:[{label:"单价",value:"1"},{label:"日单价",value:"2"},{label:"月单价",value:"3"},{label:"年单价",value:"4"}],form:{areaId:"",areaName:"",prName:"",priceType:"",priceValue:""},rules:{areaId:[{required:!0,message:"请选择所属项目",trigger:"chagne"}],prName:[{required:!0,message:"请输入标准价名称",trigger:"blur"}],priceType:[{required:!0,message:"请输入价格类型",trigger:"change"}],priceValue:[{required:!0,message:"请输入值",trigger:"blur"}]}}},watch:{value:function(e){this.isShow=e,e&&("edit"!=this.enterParam.type&&"view"!=this.enterParam.type||(this.form=JSON.parse(JSON.stringify(this.enterParam.row))))},isShow:function(e){this.$emit("input",e)}},created:function(){},methods:{getAreaId:function(e){var t=this.parks.find((function(t){return t.areaId===e}));this.form.areaName=t.areaName},submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refreshList"),e.hide()):e.$message.error(t.msg)};"edit"===e.enterParam.type?Object(s["r"])(e.form).then(a):Object(s["o"])(e.form).then(a)}}))},hide:function(){this.isShow=!1,this.resetForm("form"),this.form={}},handleChange:function(e){console.log(e)}}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},af08:function(e,t,a){"use strict";a("fc06")},b0a8:function(e,t,a){},b1bd:function(e,t,a){},b208:function(e,t,a){},b472:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return m})),a.d(t,"h",(function(){return f}));var i=a("b775"),n="/adm-service/finance/urge/records",r={add:n+"/add",billList:n+"/list",billDetail:n+"/billDetail",cusList:n+"/cusList",cusDetail:n+"/cusDetail",list:n+"/hisList",pushByBill:n+"/pushByBill",pushByBillId:n+"/pushByBillId",pushByClient:n+"/pushByClient"},s=function(e){return i["a"].post(r.add,e)},l=function(e){return i["a"].post(r.billList,e)},o=function(e){return i["a"].post(r.cusList,e)},c=function(e){return i["a"].post(r.cusDetail,e)},d=function(e){return i["a"].post(r.list,e)},u=function(e){return i["a"].post(r.pushByBill,e)},m=function(e){return i["a"].post(r.pushByBillId,e)},f=function(e){return i["a"].post(r.pushByClient,e)}},b49d:function(e,t,a){},b4bf:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"20px"}},[t("el-form",{ref:"editForm",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"推送时间",prop:"day"}},[t("el-select",{model:{value:e.form.timeType,callback:function(t){e.$set(e.form,"timeType",t)},expression:"form.timeType"}},e._l([{value:"1",label:"出账单日后"}],(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1),t("el-input-number",{staticStyle:{"margin-left":"10px"},attrs:{"controls-position":"right",min:1},model:{value:e.form.day,callback:function(t){e.$set(e.form,"day",t)},expression:"form.day"}}),e._v(" 天发送信息 ")],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveConfig()}}},[e._v("保存")])],1)],1)],1)},n=[],r=(a("d3b7"),a("159b"),a("1066")),s={data:function(){return{form:{timeType:"1",day:"",content:""},rules:{day:[{required:!0,message:"出账单日后天数不可为空",trigger:"blur"}],content:[{required:!0,message:"推送内容不能为空",trigger:"blur"}]}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["b"])({type:2}).then((function(t){0==t.code&&t.data.forEach((function(t){"Urge_Send_Days"===t.id?e.form.day=t.value||"":"Urge_Send_Template"===t.id&&(e.form.content=t.value||"")}))}))},saveConfig:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$confirm("确认要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:"Urge_Send_Days",type:2,value:e.form.day},a={id:"Urge_Send_Template",type:2,value:e.form.content},i=[t,a];Object(r["a"])({items:i}).then((function(t){0===t.code?e.$message.success("保存成功!"):e.$message.error(t.msg)}))}))}))}}},l=s,o=(a("2b5d"),a("2877")),c=Object(o["a"])(l,i,n,!1,null,"2d0191c9",null);t["default"]=c.exports},b4d5:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.curRow.cusName,"append-to-body":"",visible:e.isShow,width:"800px"},on:{"update:visible":function(t){e.isShow=t}}},[t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("div",{staticClass:"activeClass",staticStyle:{"margin-bottom":"10px",width:"360px"}},[e._v(" 月份： "),t("el-date-picker",{attrs:{size:"small",clearable:!1,type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},on:{change:function(t){return e.getList()}},model:{value:e.months,callback:function(t){e.months=t},expression:"months"}})],1),e.noData?e._e():t("div",{attrs:{id:"energyDiaChart"}}),e.noData?t("el-empty",{staticStyle:{height:"300px",width:"100%"},attrs:{description:"暂无数据"}}):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("取 消")])],1)],1)},n=[],r=(a("d81d"),a("76bd")),s=a("c1df"),l=a.n(s),o={props:{value:{type:Boolean,required:!0},areaId:{type:String},curRow:{type:Object,default:function(){return{}}}},data:function(){return{months:null,total:0,isShow:!1,loading:!1,sourceData:[],selection:[],noData:!1}},watch:{value:function(e){e&&(this.isShow=e,this.months=[l()().subtract(1,"year").add(1,"month").format("YYYY-MM"),l()().format("YYYY-MM")],this.getList())},isShow:function(e){this.$emit("input",e)}},methods:{getList:function(){var e=this;this.loading=!0;var t={areaId:this.areaId,begin:l()(this.months[0]).format("YYYY-MM"),end:l()(this.months[1]).format("YYYY-MM"),cusId:this.curRow.cusId,meterFeeType:2};Object(r["b"])(t).then((function(t){0===t.code&&(t.data.length>0?(e.noData=!1,setTimeout((function(){var a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"20",containLabel:!0},xAxis:[{data:t.data.map((function(e){return e.billDate}))}],yAxis:[{type:"value",name:"Kwh",position:"left",alignTicks:!0,axisLine:{show:!0}}],series:[{name:"用电量",type:"line",smooth:!0,label:{show:!0,position:"top"},emphasis:{focus:"series"},data:t.data.map((function(e){return e.qty}))}]};e.myChart=e.$echarts.init(document.getElementById("energyDiaChart")),e.myChart.setOption(a),window.onresize=function(){this.myChart&&this.myChart.resize()}}),200)):e.noData=!0),e.loading=!1})).catch((function(t){e.loading=!1}))}}},c=o,d=(a("a41b"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"6d493d4f",null);t["default"]=u.exports},b53b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("div",{staticStyle:{padding:"8px","background-color":"#FFF"}},[e._m(0),t("div",[t("settleView",{attrs:{"form-data":e.formData}})],1)]),t("div",{staticStyle:{padding:"8px","background-color":"#FFF","margin-top":"10px"}},[t("WorkFlowRecord",{attrs:{procInsId:e.taskForm.procInsId,taskId:e.taskForm.taskId,deployId:e.taskForm.deployId,finished:e.taskForm.finished}})],1)])},n=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"font-size":"20px","line-height":"20px","margin-bottom":"16px",color:"#1e2027"}},[t("div",[e._v("结算单审批")])])}],r=(a("b64b"),a("c4ff")),s=a("ce80"),l={components:{settleView:r["default"]},data:function(){return{formData:{contractId:"",contractNo:"",cusName:"",settleDate:"",subjectMatterType:1,settleFeeRecordList:[],settleMeterEnergyList:[],settleArRecordList:[],settleApRecordList:[],settleInstallationRecordList:[]},taskForm:{}}},created:function(){var e=this;if(this.parentRouter.history.current.query){var t=this.parentRouter.history.current.query,a=t.taskForm;this.taskForm=JSON.parse(a);var i=t.bizId;Object(s["c"])({id:i}).then((function(t){0==t.code&&(e.formData=t.data)}))}},methods:{goBack:function(){this.parentRouter.go(-1)}}},o=l,c=(a("40dd"),a("a598"),a("2877")),d=Object(c["a"])(o,i,n,!1,null,"7d6c68a5",null);t["default"]=d.exports},b5c9:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"20px"}},[t("el-form",{ref:"editForm",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"内容变量"}},[t("el-button",{on:{click:function(t){e.form.content+="${targetName}"}}},[e._v("客户名称 ${targetName}")]),t("el-button",{on:{click:function(t){e.form.content+="${dueDateCount}"}}},[e._v("逾期天数 ${dueDateCount}")]),t("el-button",{on:{click:function(t){e.form.content+="${dateStr}"}}},[e._v("账期 ${dateStr}")]),t("el-button",{on:{click:function(t){e.form.content+="${buildingName}"}}},[e._v("楼宇名称 ${buildingName}")]),t("el-button",{on:{click:function(t){e.form.content+="${amount}"}}},[e._v("金额 ${amount}")]),t("el-button",{on:{click:function(t){e.form.content+="${chargingName}"}}},[e._v("账单所含费项 ${chargingName}")])],1),t("el-form-item",{attrs:{label:"推送内容",prop:"content"}},[t("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveConfig()}}},[e._v("保存")])],1)],1)],1)},n=[],r=(a("4de4"),a("d3b7"),a("1066")),s={data:function(){return{form:{content:""},rules:{content:[{required:!0,message:"推送内容不为空",trigger:"blur"}]}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["b"])({type:1}).then((function(t){if(0==t.code){var a=t.data.filter((function(e){return"Bill_Push_Template"===e.id}));console.log("temp: ",a),e.form.content=a[0].value}}))},saveConfig:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$confirm("确认要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:"Bill_Push_Template",type:1,value:e.form.content},a=[t];Object(r["a"])({items:a}).then((function(t){0===t.code?e.$message.success("保存成功!"):e.$message.error(t.msg)}))}))}))}}},l=s,o=(a("3d73"),a("2877")),c=Object(o["a"])(l,i,n,!1,null,"b2553538",null);t["default"]=c.exports},b6a5:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"top"},[t("div",{staticClass:"grid-content"},[e._v(e._s(e.title))]),t("el-date-picker",{attrs:{size:"mini",type:"daterange",align:"left","unlink-panels":"",clearable:!1,"range-separator":"至","value-format":"yyyy-MM-dd","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.dateTemp,callback:function(t){e.dateTemp=t},expression:"dateTemp"}}),t("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"mini"},on:{click:e.getChartsData}},[e._v("查询")])],1)},n=[],r=(a("a9e3"),{props:{title:{type:String},dateArr:{type:Array},index:{type:Number|String}},data:function(){return{dateTemp:this.dateArr}},created:function(){},mounted:function(){},methods:{getChartsData:function(){this.$emit("getChartsData",this.index,this.dateTemp)}}}),s=r,l=(a("2e94"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"d436629c",null);t["default"]=o.exports},b6ed:function(e,t,a){"use strict";a.r(t);a("b680");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-sum-panel settle-panel"},[t("div",{staticClass:"text-title mt-20 item-title"},[e._v("清算合计")]),t("el-form",{attrs:{size:"mini","label-width":"150px","label-suffix":":"}},[t("el-form-item",{attrs:{label:"应收总额(元)"}},[e._v(" "+e._s(e.arTotal.toFixed(2))+" ")]),t("el-form-item",{attrs:{label:"应退保证金(元)"}},[e._v(" "+e._s(e.apTotal.toFixed(2))+" ")]),t("el-form-item",{attrs:{label:"合计应退总额(元)"}},[e._v(" "+e._s((-e.jsTotal).toFixed(2))+" ")])],1)],1)},n=[],r=(a("13d5"),a("d3b7"),{props:{arData:{type:Array,default:function(){return[]}},arAnotherData:{type:Array,default:function(){return[]}},apData:{type:Array,default:function(){return[]}}},computed:{arTotal:function(){var e=this.arData.reduce((function(e,t){return e+t.amount}),0),t=this.arAnotherData.reduce((function(e,t){return e+t.amount}),0);return e+t},apTotal:function(){return this.apData.reduce((function(e,t){return e+t.amount}),0)},jsTotal:function(){return this.arTotal-this.apTotal}}}),s=r,l=(a("cd67"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"35fb5ed9",null);t["default"]=o.exports},b734:function(e,t,a){"use strict";a("be3c")},b887:function(e,t,a){"use strict";a.r(t);a("b680");var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{id:"size",title:"add"===e.opt?"新增押金退回":"edit"===e.opt?"编辑押金退回":"查看押金退回详情",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.diaClose}},[t("el-card",[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"editForm",attrs:{model:e.formData,rules:e.rules,"element-loading-text":"拼命加载中","label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属园区",prop:"areaName"}},[t("el-input",{attrs:{placeholder:"选择押金单自动带出",disabled:""},model:{value:e.formData.areaName,callback:function(t){e.$set(e.formData,"areaName",t)},expression:"formData.areaName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"客户名称",prop:"clienteleName"}},[t("el-input",{attrs:{placeholder:"选择押金单自动带出",disabled:""},model:{value:e.formData.clienteleName,callback:function(t){e.$set(e.formData,"clienteleName",t)},expression:"formData.clienteleName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"押金单",prop:"depositNo"}},[t("el-input",{attrs:{placeholder:"单击选择押金单",disabled:null!=e.enterParams||"edit"==e.opt||"view"==e.opt},on:{focus:function(t){e.receiveDialog=!0}},model:{value:e.formData.depositNo,callback:function(t){e.$set(e.formData,"depositNo",t)},expression:"formData.depositNo"}}),t("receiveDialog",{on:{save:function(t){e.$set(e.formData,"depositNo",t.depositNo),e.$set(e.formData,"depositId",t.id),e.$set(e.formData,"money",t.money),e.$set(e.formData,"refundAll",t.refundMoney),e.$set(e.formData,"refund",(t.money-t.refundMoney).toFixed(2)),e.maxMoney=(t.money-t.refundMoney).toFixed(2),e.$set(e.formData,"areaId",t.areaId),e.$set(e.formData,"areaName",t.areaName),e.$set(e.formData,"clienteleName",t.clienteleName),e.$set(e.formData,"clienteleId",t.clienteleId)}},model:{value:e.receiveDialog,callback:function(t){e.receiveDialog=t},expression:"receiveDialog"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"应退金额"}},[t("el-input",{attrs:{placeholder:"根据押金单自动带出",disabled:""},model:{value:e.formData.money,callback:function(t){e.$set(e.formData,"money",t)},expression:"formData.money"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"已退金额"}},[t("el-input",{attrs:{placeholder:"根据押金单自动带出",disabled:""},model:{value:e.formData.refundAll,callback:function(t){e.$set(e.formData,"refundAll",t)},expression:"formData.refundAll"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"退款金额",prop:"refund"}},[t("n-input",{attrs:{placeholder:"请输入退款金额",min:0,disabled:"view"==e.opt,max:e.maxMoney},model:{value:e.formData.refund,callback:function(t){e.$set(e.formData,"refund",t)},expression:"formData.refund"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"凭证文件"}},[t("ns-file-upload",{staticStyle:{width:"100%"},attrs:{busSubType:9011,token:e.getToken(),fileList:e.fileList,hidden:"view"==e.opt,showViewer:!0,downloadFunc:e.dFile,uploadUrl:e.getBaseApi()}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入备注",disabled:"view"==e.opt,maxlength:200},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.diaClose()}}},[e._v("取消")]),"view"!==e.opt?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("提交")]):e._e()],1)],1)],1)},n=[],r=(a("a15b"),a("d81d"),a("e9c4"),a("b64b"),a("48c1")),s=a("7602"),l=a("3d76"),o=a("5f87"),c=a("0b2d"),d={components:{NInput:r["a"],receiveDialog:l["default"]},props:{value:{type:Boolean,required:!0},opt:{type:String,required:!0},enterParams:{type:Object,default:function(){return null}}},watch:{value:function(e){if(e)if(this.isShow=e,this.fileList=[],this.formData={areaId:null,areaName:null,depositId:null,id:null,refund:null,remark:null,voucherFile:null},"add"===this.opt&&null!=this.enterParams){var t=this.enterParams;this.formData.clienteleName=t.clienteleName,this.formData.clienteleId=t.clienteleId,this.formData.depositNo=t.depositNo,this.formData.depositId=t.id,this.formData.money=t.money,this.formData.refundAll=t.refundMoney||0,this.maxMoney=(this.formData.money-t.refundMoney).toFixed(2),this.formData.refund=(t.money-(t.refundMoney||0)).toFixed(2),this.formData.areaId=t.areaId,this.formData.areaName=t.areaName}else this.getDetail()},isShow:function(e){this.$emit("input",e)}},data:function(){return{loading:!1,isShow:!1,maxMoney:0,fileList:[],formData:{},rules:{depositNo:[{required:!0,message:"押金单不能为空",trigger:"change"}],clienteleName:[{required:!0,message:"客户名称不能为空",trigger:"change"}],refund:[{required:!0,message:"退款金额不能为空",trigger:"blur"}]},receiveDialog:!1,custDiaShow:!1}},methods:{getToken:o["d"],getBaseApi:function(){return"/prod-api"},dFile:function(e){Object(c["a"])(e.fileId,e.fileName)},getDetail:function(){if(this.enterParams){var e=this.enterParams,t=e.areaId,a=e.areaName,i=e.depositId,n=e.depositNo,r=e.clienteleId,s=e.clienteleName,l=e.id,o=e.refund,c=e.refundAll,d=e.remark,u=e.money;this.formData={areaId:t,areaName:a,depositId:i,depositNo:n,clienteleId:r,clienteleName:s,id:l,money:u,refundAll:c,refund:o,remark:d},this.maxMoney=(u-c+ +o).toFixed(2),this.enterParams.voucherFileList&&this.enterParams.voucherFileList.length>0&&(this.fileList=this.enterParams.voucherFileList.map((function(e){return e.fileId=e.id,e})))}},diaClose:function(){this.formData={},this.isShow=!1,this.$refs.editForm.resetFields()},save:function(){var e=this;this.$refs.editForm.validate((function(t){if(t){if(e.loading=!0,0==e.formData.refund)return void e.$message.warning("退款金额不能为0");var a=function(t){e.loading=!1,0===t.code?(e.$message.success("保存成功"),e.diaClose(),e.$emit("refresh")):e.$message.error(t.msg)},i=JSON.parse(JSON.stringify(e.formData));e.fileList.length>0&&(i.voucherFile=e.fileList.map((function(e){return e.fileId})).join(",")),"edit"===e.opt?Object(s["g"])(i).then(a).catch((function(){e.loading=!1})):Object(s["e"])(i).then(a).catch((function(){e.loading=!1}))}}))}}},u=d,m=(a("a98e"),a("2877")),f=Object(m["a"])(u,i,n,!1,null,"591b5254",null);t["default"]=f.exports},ba00:function(e,t,a){"use strict";a("423e")},bb27:function(e,t,a){"use strict";a.r(t);a("a434"),a("a9e3"),a("b680");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-card",[t("el-row",{attrs:{gutter:20,type:"flex",justify:"center",align:"bottom"}},[t("el-col",{attrs:{span:5}},[t("div",{staticClass:"stati-value"},[e._v(e._s(e.formData.cusName))])]),t("el-col",{attrs:{span:7}},[t("div",{staticClass:"grid-content bg-purple title-item"},[e._v(" 流水号："+e._s(e.formData.billCode)+" ")])]),t("el-col",{attrs:{span:5}},[t("div",{staticClass:"grid-content bg-purple title-item"},[e._v(" 账期："+e._s(e.formData.billDate)+" ")])]),t("el-col",{attrs:{span:7}},[t("div",{staticClass:"grid-content bg-purple title-item"},[e._v(" 合同："+e._s(e.formData.contractNo)+" ")])])],1),e._l(e.spaceCodes,(function(a,i){return t("el-tag",{key:i,staticStyle:{"margin-right":"20px"}},[e._v(e._s(a))])})),t("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",[t("div",{staticClass:"stati-value"},[e._v(e._s(e.filterStatus(e.formData.payStatus)))])]),t("el-col",[t("div",{staticClass:"line"}),t("div",{staticClass:"ml"},[t("div",{staticClass:"stati-label"},[e._v("应收金额")]),t("div",{staticClass:"stati-value"},[e._v(" "+e._s(Number(e.formData.receivableAmt).toFixed(2))+" ")])])]),t("el-col",[t("div",{staticClass:"line"}),t("div",{staticClass:"ml"},[t("div",{staticClass:"stati-label"},[e._v("已收")]),t("div",{staticClass:"stati-value"},[e._v(" "+e._s(Number(e.formData.receiptAmt).toFixed(2))+" ")])])]),t("el-col",[t("div",{staticClass:"line"}),t("div",{staticClass:"ml"},[t("div",{staticClass:"stati-label"},[e._v("待收")]),t("div",{staticClass:"stati-value"},[e._v(" "+e._s(Number(e.formData.pendingAmt).toFixed(2))+" ")])])]),t("el-col",[t("div",{staticClass:"line"}),t("div",{staticClass:"ml"},[t("div",{staticClass:"stati-label"},[e._v("出账日")]),t("div",{staticClass:"stati-value"},[e._v(e._s(e.formData.billingDate))])])]),t("el-col",[t("div",{staticClass:"line"}),t("div",{staticClass:"ml"},[t("div",{staticClass:"stati-label"},[e._v("最晚缴款日")]),t("div",{staticClass:"stati-value"},[e._v(e._s(e.formData.lateDate))])])]),t("el-col",[t("div",{staticClass:"line"}),t("div",{staticClass:"ml"},[t("div",{staticClass:"stati-label"},[e._v("结清日")]),2!==e.formData.payStatus?t("div",{staticClass:"stati-value"},[e._v("无")]):t("div",{staticClass:"stati-value"},[e._v(" "+e._s(e.formData.payDate?e.formData.payDate:"无")+" ")])])])],1)],2),e.reviewAgainList.length>0?t("el-card",{staticClass:"mt"},[t("p",{staticStyle:{"font-weight":"600"}},[e._v("重新复核原因:")]),t("p",[e._v(" "+e._s(e.reviewAgainList[0].remark)+" ")])]):e._e(),t("el-card",{staticClass:"mt"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"账单信息",name:"first"}},[t("div",{staticClass:"mt flex"},[t("div",[e._v("费用合计")])]),t("el-table",{staticClass:"mt",attrs:{border:"",data:e.formData.billJoinDetailList,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{label:"费项",prop:"itemName",width:"140"}}),t("el-table-column",{attrs:{label:"原含税金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(a.row.oriReceivableTaxAmt.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"调整金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(2===a.row.adjType||4===a.row.adjType?"-".concat(a.row.adjAmt.toFixed(2)):a.row.adjAmt.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"含税金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(a.row.receivableTaxAmt.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"计费周期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(a.row.billPeriodStart)+" ~ "+e._s(a.row.billPeriodEnd)+" ")])]}}])})],1),t("div",{staticClass:"flex mt"},[t("div",[e._v("费用明细")]),"before"!=e.enterParams.opt||1!=e.formData.billSource&&3!=e.formData.billSource&&4!=e.formData.billSource?e._e():t("div",{staticClass:"flex"},[!e.isEditShow&&e.$_has(e.editCode)?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.adjustment}},[e._v("调整")]):e._e(),e.isEditShow?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.adjustmentSubimt}},[e._v("保存")]):e._e(),e.isEditShow?t("el-button",{attrs:{size:"small"},on:{click:e.adjustmentCancel}},[e._v("取消")]):e._e()],1)]),t("el-table",{staticClass:"mt",attrs:{border:"",data:e.formData.billDetailList,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[e.isEditShow?t("el-table-column",{attrs:{label:"删除",width:"70"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger",size:"mini",plain:!0,icon:"el-icon-delete"},on:{click:function(){e.formData.billDetailList.splice(a.$index,1)}}})]}}],null,!1,4066239090)}):e._e(),t("el-table-column",{attrs:{label:"费项",prop:"itemName",width:"120"}}),t("el-table-column",{attrs:{label:"房源编码",prop:"spaceCode",width:"180"}}),t("el-table-column",{attrs:{label:"用量",prop:"qty",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(8==t.row.itemExpId?"":t.row.qty)+" ")]}}])}),t("el-table-column",{attrs:{label:"单价(元)",prop:"price",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(8==t.row.itemExpId?"":t.row.price)+" ")]}}])}),t("el-table-column",{attrs:{label:"原含税金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){var i;return[t("span",[e._v(" "+e._s(null===(i=a.row.oriReceivableTaxAmt)||void 0===i?void 0:i.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"原不含税金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){var i;return[t("span",[e._v(" "+e._s(null===(i=a.row.oriReceivableAmt)||void 0===i?void 0:i.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"原税额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){var i;return[t("span",[e._v(" "+e._s(null===(i=a.row.oriTaxAmount)||void 0===i?void 0:i.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"金额调整",width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{display:"flex"}},[t("el-select",{staticStyle:{width:"140"},attrs:{size:"small",disabled:!e.isEditShow},on:{change:function(t){return e.handleAdjTypeChange(a.row)}},model:{value:a.row.adjType,callback:function(t){e.$set(a.row,"adjType",t)},expression:"scope.row.adjType"}},e._l([{label:"无调整",value:0},{label:"上调比率",value:1},{label:"下调比率",value:2},{label:"上调金额",value:3},{label:"下调金额",value:4}],(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1),1===a.row.adjType||2===a.row.adjType?t("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!e.isEditShow,size:"small",controls:!1,min:0,precision:2},on:{change:function(){var e=a.row;e.adjAmt=e.oriReceivableTaxAmt*(e.adjRate/100),1===a.row.adjType?e.receivableTaxAmt=e.oriReceivableTaxAmt+e.adjAmt:e.receivableTaxAmt=e.oriReceivableTaxAmt-e.adjAmt,e.receivableAmt=e.receivableTaxAmt/(1+e.taxRate/100),e.taxAmount=e.receivableTaxAmt-e.receivableAmt}},model:{value:a.row.adjRate,callback:function(t){e.$set(a.row,"adjRate",t)},expression:"scope.row.adjRate"}}):e._e(),3===a.row.adjType||4===a.row.adjType?t("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!e.isEditShow,size:"small",controls:!1,min:0,precision:2},on:{change:function(){var e=a.row;0===e.receivableTaxAmt?e.adjRate=0:e.adjRate=(e.adjAmt/e.receivableTaxAmt).toFixed(2),3===a.row.adjType?e.receivableTaxAmt=e.oriReceivableTaxAmt+e.adjAmt:e.receivableTaxAmt=e.oriReceivableTaxAmt-e.adjAmt,e.receivableAmt=e.receivableTaxAmt/(1+e.taxRate/100),e.taxAmount=e.receivableTaxAmt-e.receivableAmt}},model:{value:a.row.adjAmt,callback:function(t){e.$set(a.row,"adjAmt",t)},expression:"scope.row.adjAmt"}}):e._e()],1)]}}])}),t("el-table-column",{attrs:{label:"调整额",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.adjType?t("span",[e._v(" 0 ")]):1===a.row.adjType||3===a.row.adjType?t("span",[e._v(" "+e._s(a.row.adjAmt.toFixed(2))+" ")]):2===a.row.adjType||4===a.row.adjType?t("span",[e._v(" - "+e._s(a.row.adjAmt.toFixed(2))+" ")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"含税金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){var i;return[t("span",[e._v(" "+e._s(null===(i=a.row.receivableTaxAmt)||void 0===i?void 0:i.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"不含税金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){var i;return[t("span",[e._v(" "+e._s(null===(i=a.row.receivableAmt)||void 0===i?void 0:i.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"税额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){var i;return[t("span",[e._v(" "+e._s(null===(i=a.row.taxAmount)||void 0===i?void 0:i.toFixed(2))+" ")])]}}])}),t("el-table-column",{attrs:{label:"备注",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{disabled:!e.isEditShow,type:"textarea",rows:2,placeholder:"备注"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark",t)},expression:"scope.row.remark"}})]}}])})],1),e.formData&&4!==e.formData.billSource?t("div",{staticClass:"mt"},[e._v(" 能耗明细 ")]):e._e(),e.formData&&4!==e.formData.billSource?t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",staticClass:"mt",attrs:{sort:"",border:"",data:e.listData,columns:e.billDetailColumns,isShowPagination:!1,align:"center"}}):e._e()],1),t("el-tab-pane",{attrs:{label:"账单日志",name:"second"}},[t("div",{staticClass:"mt"},[e._v("账单日志")]),t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",staticClass:"mt",attrs:{sort:"",border:"",data:e.billRecordsList,columns:e.billRecordsListColumns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)}},model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)],1),e.isEditShow?e._e():t("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:"before"==e.enterParams.opt&&e.$_has(e.reviewCode)&&(1==e.formData.billSource||3==e.formData.billSource||4==e.formData.billSource),expression:"\n          enterParams.opt == 'before' &&\n          $_has(reviewCode) &&\n          (formData.billSource == 1 ||\n            formData.billSource == 3 ||\n            formData.billSource == 4)\n        "}],attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v("复核")]),e.$_has(e.receiptCode)&&2!=e.formData.payStatus&&"before"!=e.enterParams.opt&&"customerShow"!=e.enterParams.customerShow?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmColl}},[e._v("收款")]):e._e(),t("el-button",{attrs:{type:"info",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1),t("receiptDialog",{attrs:{dataSource:e.receiptList},on:{success:function(){return e.getDetail(e.enterParams.id)}},model:{value:e.visReceiptDialog,callback:function(t){e.visReceiptDialog=t},expression:"visReceiptDialog"}})],1)],1)},n=[],r=a("c7eb"),s=a("1da1"),l=a("2909"),o=(a("d3b7"),a("159b"),a("2f32")),c=a("376f"),d=a("f186"),u=(a("c1df"),{components:{expdetailtable:o["default"],receiptDialog:d["default"]},props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},data:function(){return{reviewCode:["adm:finance:bill:review"],receiptCode:["adm:finance:bill:receipt"],editCode:["adm:finance:bill:edit"],loading:!1,listData:[],columns:[{name:"费项",desc:"itemName"},{name:"应收金额(元)",desc:"receivableAmt"},{name:"调整金额(元)",desc:"adjAmt"},{name:"计费周期",desc:"billPeriodStart,billPeriodEnd",filter:function(e,t){return t[e[0]]+"~"+t[e[1]]}}],billDetailColumns:[{name:"表名",desc:"meterName"},{name:"表编码",desc:"meterNumber"},{name:"表类型",desc:"property",filter:function(e){return["未知","单元","公共"][e]}},{name:"用量",desc:"publicAmt"},{name:"单价",desc:"unitPrice"},{name:"金额",desc:"publicPrice"},{name:"抄表日期",desc:"recordDate"}],billRecordsList:[],billRecordsListColumns:[{name:"操作人",desc:"operator"},{name:"操作时间",desc:"operateTime"},{name:"日志分类",desc:"recordType",filter:function(e){return["创建账单","确认收款","开收据"][e]}},{name:"日志描述",desc:"recordDesc"}],total:0,queryParams:{pageNum:1,pageSize:10},formData:{},activeName:"first",spaceCodes:[],listDataAll:[],isEditShow:!1,idsId:[],isShowBillCode:"",visReceiptDialog:!1,receiptList:[],reviewAgainList:[]}},created:function(){this.getDetail(this.enterParams.id),this.getEnergeDetail(this.enterParams.id)},methods:{getReviewAgainHis:function(e){var t=this;Object(c["z"])({billId:e}).then((function(e){t.reviewAgainList=e.data||[]}))},feeItemsStat:function(){if(this.formData&&this.formData.billDetailList&&this.formData.billDetailList.length>0){var e={};this.formData.billDetailList.forEach((function(t){e[t.spaceCode]?e[t.spaceCode].push(t):e[t.spaceCode]=[t]}));var t=[];for(var a in e)t.push.apply(t,Object(l["a"])(e[a]));this.formData.billDetailList=t}},getDetail:function(e){var t=this;this.loading=!0,this.getReviewAgainHis(e),Object(c["r"])({id:e}).then(function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(a){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===a.code?(t.formData=a.data,t.spaceCodes=a.data.spaceCodes.split(","),t.billRecordsList=a.data.billRecordsList,t.total=a.data.billRecordsList.length,t.feeItemsStat()):t.$message.error(a.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loading=!1}))},getEnergeDetail:function(e){var t=this;Object(c["g"])({billId:e}).then((function(e){0==e.code&&(t.listData=e.data)}))},handleAdjTypeChange:function(e){e.adjAmt=0,e.adjRate=0,e.receivableTaxAmt=e.oriReceivableTaxAmt,e.receivableAmt=e.oriReceivableAmt},adjustment:function(){this.isEditShow=!0},getListData:function(e){this.billDetailList=e},adjustmentSubimt:function(){var e=this,t={billDetailList:this.billDetailList||this.formData.billDetailList,id:this.enterParams.id};Object(c["p"])(t).then((function(t){0==t.code&&(e.$message.success("保存成功"),e.isEditShow=!1,e.getDetail(e.enterParams.id))}))},adjustmentCancel:function(){this.getDetail(this.enterParams.id),this.isEditShow=!1},handleSave:function(){var e=this;this.$confirm("确定对".concat(this.formData.cusName,"账单进行复核吗？"),"账单复核",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["t"])({ids:[e.enterParams.id]}).then((function(t){0===t.code?(e.$message.success("复核成功"),e.goBack()):e.$message.error(t.msg)}))}))},confirmColl:function(){this.receiptList=[{id:this.formData.id,billCode:this.formData.billCode}],this.visReceiptDialog=!0},goBack:function(){"customerShow"==this.enterParams.customerShow||"customerEdit"==this.enterParams.customerEdit?this.forward("subBill",{id:this.enterParams.settleId||this.enterParams.cusId}):this.forward("List")},filterStatus:function(e){var t={0:"未缴费",1:"已欠费",2:"已缴费",3:"部分缴费"};return t[e]}}}),m=u,f=(a("b734"),a("2877")),p=Object(f["a"])(m,i,n,!1,null,"ab86fb0a",null);t["default"]=p.exports},bbe4:function(e,t,a){},bbe44:function(e,t,a){},bd5f:function(e,t,a){},be3a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t(e.subComponent,{tag:"component",attrs:{enterParams:e.subParams,forward:e.navigat}})],1)},n=[],r=a("92d7"),s=a("c490"),l=a("bb27"),o=a("f7af"),c={components:{list:s["default"],subBill:r["default"],FormDetail:l["default"],ViewForm:o["default"]},data:function(){return{subComponent:"list",subParams:{}}},methods:{navigat:function(e,t){this.subComponent=e,this.subParams=t||{}}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=m.exports},be3c:function(e,t,a){},be4b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("ns-drawer",{attrs:{loading:e.loading,title:"查看收费项详情","top-resume":{title:e.form.itemName,list:[{label:"所属项目",value:e.form.areaName},{label:"费项分类",value:e.form.expName}]}},on:{close:e.hide},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-list"},[t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("费项名称")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.itemName)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("税率")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("isEmpty")(e.form.taxRate)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("费项单位")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.selectDictLabel(e.unitOption,e.form.unit)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("计费周期")]),t("div",{staticClass:"item-value"},[e._v(e._s(e._f("findForCodeFilter")(e.form.billCycle,e.billCycleOption)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("滞纳金")]),t("div",{staticClass:"item-value"},[e._v(e._s(0==e.form.lateFree?"仅计算":"收取")+" "+e._s(e.form.lateRate)+" %")])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("收款方")]),t("div",{staticClass:"item-value"},[e._v(e._s(e.payeefilter(e.form.payeeId)))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("计算标准")]),t("div",{staticClass:"item-value"},[e._v(e._s(1==e.form.standard?"公式":"一房一价"))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("不足月按天计算")]),t("div",{staticClass:"item-value"},[e._v(e._s(0==e.form.method?"否":"是"))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("精度保留法")]),t("div",{staticClass:"item-value"},[e._v(e._s(1==e.form.accuracy?"四舍五入":2==e.form.accuracy?"去尾":"进一"))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("保留位数")]),t("div",{staticClass:"item-value"},[e._v(e._s(1==e.form.digit?"取整数":2==e.form.digit?"保留1位小数":"保留2位小数"))])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("出账日")]),t("div",{staticClass:"item-value"},[e._v(" "+e._s(("1"==e.form.billing?"按天数":"按日期")+"/"+e.cycleFilter(e.form.billingCycle)+"/"+("1"==e.form.billing?"第"+e.form.billingDay+"天":e.form.billingDate+"号"))+" ")])]),t("div",{staticClass:"custom-drawer-list-item"},[t("div",{staticClass:"item-label"},[e._v("最晚缴款日")]),t("div",{staticClass:"item-value"},[e._v(" "+e._s(("1"==e.form.lasting?"按天数":"按日期")+"/出账单日后/"+("1"==e.form.lasting?"第"+e.form.lastDay+"天":e.form.lastDate+"号"))+" ")])])])]),1==e.form.standard?t("div",{staticClass:"custom-drawer-body"},[t("div",{staticClass:"custom-drawer-light-color"},[e._v("公式属性")]),t("div",{staticClass:"custom-drawer-dark-color",staticStyle:{padding:"20px 10px 30px"}},[t("ns-table",{ref:"bxzTable",attrs:{data:e.form.formulaList,columns:e.columns,align:"center",size:"small","page-size":10,border:"","is-show-pagination":!1}})],1)]):e._e()])},n=[],r=a("c7eb"),s=a("1da1"),l=(a("7db0"),a("d3b7"),a("39cc")),o={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},filters:{findForCodeFilter:function(e,t){var a=t.find((function(t){return t.value==e}));return a?a.label:"--"}},data:function(){return{unitOption:[],billCycleOption:[{label:"年",value:"year"},{label:"季度",value:"quarter"},{label:"双月",value:"moons"},{label:"月",value:"month"},{label:"日",value:"day"}],payeeOption:[],loading:!1,isShow:!1,form:{},columns:[{name:"公式名称",desc:"formulaName"},{name:"计算公式",desc:"formulaView"},{name:"计算条件",desc:"conditionView"},{name:"生效时间",desc:"effDate"},{name:"失效时间",desc:"expDate"}]}},watch:{value:function(e){this.isShow=e,e&&(this.getPayeeAll(this.enterParam.areaId),this.getDetail())},isShow:function(e){this.$emit("input",e)}},created:function(){var e=this;this.getDicts({code:"fee_unit"}).then((function(t){0==t.code&&(e.unitOption=t.data.items||[])}))},methods:{hide:function(){this.isShow=!1},cycleFilter:function(e){var t={1:"周期前",2:"周期",3:"周期后"};return t[e]},payeefilter:function(e){var t=this.payeeOption.find((function(t){return t.id===e}));return t?t.payeeName:"--"},getPayeeAll:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var i;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["F"])({areaId:e});case 2:i=a.sent,0==i.code&&(t.payeeOption=i.data);case 4:case"end":return a.stop()}}),a)})))()},getDetail:function(){var e=this;this.loading=!0,Object(l["j"])({id:this.enterParam.rowId}).then((function(t){e.loading=!1,0===t.code?e.form=t.data:e.$message.error(t.msg)})).catch((function(t){e.loading=!1,console.log(t)}))}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},bf17:function(e,t,a){"use strict";a("86c7")},bfec:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return c}));var i=a("b775"),n={schemeList:"/adm-service/finance/charge/scheme/list",schemeAdd:"/adm-service/finance/charge/scheme/add",schemeEdit:"/adm-service/finance/charge/scheme/edit",schemeDel:"/adm-service/finance/charge/scheme/del",schemeDetail:"/adm-service/finance/charge/scheme/get",schemeImp:"/adm-service/finance/charge/scheme/imp",schemeListItem:"/adm-service/finance/charge/scheme/listItem"},r=function(e){return i["a"].post(n.schemeList,e)},s=function(e){return i["a"].post(n.schemeAdd,e)},l=function(e){return i["a"].post(n.schemeEdit,e)},o=function(e){return i["a"].post(n.schemeDel,e)},c=function(e){return i["a"].post(n.schemeImp,e)}},bfed:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})},n=[],r=a("c42e"),s={name:"receipt",components:{List:r["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},c041:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})},n=[],r=a("0f1f"),s={name:"analysisArea",components:{List:r["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},c239:function(e,t,a){},c23a:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l}));var i=a("b775"),n="/adm-service/finance/fee/",r={itemsList:n+"items/list",itemsListAll:n+"items/listAll",itemsListItem:n+"items/listItem",itemsEnable:n+"items/enable",itemsAdd:n+"items/add",itemsGet:n+"items/get",itemsEdit:n+"items/edit",itemsDel:n+"items/del"},s=function(e){return i["a"].post(r.itemsList,e)},l=function(e){return i["a"].post(r.itemsListItem,e)}},c23b:function(e,t,a){"use strict";a.r(t);a("4de4"),a("a434"),a("b680"),a("d3b7");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("div",{staticClass:"form-body"},[e._m(0),t("div",[t("div",{staticClass:"text-title"},[e._v("基础信息：")]),t("el-form",{ref:"formData",staticClass:"formBox",attrs:{model:e.formData,rules:e.rules,"label-width":"100px","label-position":"right"}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"contractNo",label:"合同编号"}},[t("el-input",{attrs:{placeholder:"请选择合同编号"},on:{focus:e.changeContractId},model:{value:e.formData.contractNo,callback:function(t){e.$set(e.formData,"contractNo",t)},expression:"formData.contractNo"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"entName",label:"客户名称"}},[t("el-input",{attrs:{disabled:"",placeholder:"选择合同自动带出"},model:{value:e.formData.entName,callback:function(t){e.$set(e.formData,"entName",t)},expression:"formData.entName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"billDate",label:"账期"}},[t("el-date-picker",{attrs:{type:"month",placeholder:"请选择账期"},model:{value:e.formData.billDate,callback:function(t){e.$set(e.formData,"billDate",t)},expression:"formData.billDate"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"times",label:"计费周期"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.formData.times,callback:function(t){e.$set(e.formData,"times",t)},expression:"formData.times"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"lateDate",label:"最晚缴款日"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择账期","value-format":"yyyy-MM-dd","picker-options":e.lateDateOpts},model:{value:e.formData.lateDate,callback:function(t){e.$set(e.formData,"lateDate",t)},expression:"formData.lateDate"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"bababa",label:"选择房源"}},[t("div",e._l(e.subjectMatterList,(function(a,i){return t("el-tag",{key:a.id,attrs:{type:a.isAdd?"":"info"},on:{click:function(t){return e.checkAdd(a,i)}}},[e._v(" "+e._s(a.spaceCode))])})),1)])],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"groupId",label:"费项"}},[t("div",{staticStyle:{display:"flex"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"选择账单组"},on:{change:e.getBillGounp},model:{value:e.formData.groupId,callback:function(t){e.$set(e.formData,"groupId",t)},expression:"formData.groupId"}},e._l(e.groupOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}})})),1),t("el-checkbox-group",{staticStyle:{"margin-left":"10px"},on:{change:e.changeCharges},model:{value:e.chargeSchemeList,callback:function(t){e.chargeSchemeList=t},expression:"chargeSchemeList"}},e._l(e.chargesList.filter((function(e){return!e.expId||"2"!=e.expId&&"8"!=e.expId})),(function(a,i){return t("el-checkbox",{key:i,attrs:{label:a}},[e._v(e._s(a.itemName))])})),1)],1)])],1)],1)],1)],1),t("div",[t("div",{staticClass:"text-title"},[e._v(" 费用明细： "),t("el-button",{attrs:{disabled:!e.renderBillDetailComp,size:"mini",type:"primary"},on:{click:e.renderBillDetailData}},[e._v("生成费用明细 ")])],1),t("el-table",{attrs:{border:"",data:e.formData.billDetailList,"show-summary":"","summary-method":e.getSummaries,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{label:"删除",width:"70"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger",size:"mini",plain:!0,icon:"el-icon-delete"},on:{click:function(){e.formData.billDetailList.splice(a.$index,1)}}})]}}])}),t("el-table-column",{attrs:{label:"费项",prop:"itemName",width:"120"}}),t("el-table-column",{attrs:{label:"房源编码",prop:"spaceCode",width:"180"}}),t("el-table-column",{attrs:{label:"数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini",controls:!1,min:0,precision:2},on:{change:function(){var e=a.row;e.price=(e.oriReceivableTaxAmt/e.qty).toFixed(2)}},model:{value:a.row.qty,callback:function(t){e.$set(a.row,"qty",t)},expression:"scope.row.qty"}})]}}])}),t("el-table-column",{attrs:{label:"含税单价(元)",prop:"price",width:"100"}}),t("el-table-column",{attrs:{label:"含税金额(元)",prop:"oriReceivableTaxAmt",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini",controls:!1,min:0,precision:2},on:{change:function(){var e=a.row;e.price=(e.oriReceivableTaxAmt/e.qty).toFixed(2),e.oriReceivableAmt=(e.oriReceivableTaxAmt/(1+e.taxRate/100)).toFixed(2),e.oriTaxAmt=(e.oriReceivableTaxAmt-e.oriReceivableAmt).toFixed(2)}},model:{value:a.row.oriReceivableTaxAmt,callback:function(t){e.$set(a.row,"oriReceivableTaxAmt",t)},expression:"scope.row.oriReceivableTaxAmt"}})]}}])}),t("el-table-column",{attrs:{label:"税率(%)",prop:"taxRate",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(a.row.taxRate)+" "),t("b",[e._v("%")])])]}}])}),t("el-table-column",{attrs:{label:"税前金额(元)",prop:"oriReceivableAmt",width:"160"}}),t("el-table-column",{attrs:{label:"税额(元)",prop:"oriTaxAmt",width:"100"}}),t("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark",t)},expression:"scope.row.remark"}})]}}])})],1)],1),t("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t("el-button",{attrs:{type:"primary",size:"small",disabled:!(e.formData.billDetailList&&e.formData.billDetailList.length>0)},on:{click:e.handleSave}},[e._v("保存")]),t("el-button",{attrs:{type:"info",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1)]),t("contactDialog",{on:{getContractId:e.getContractId},model:{value:e.contractShow,callback:function(t){e.contractShow=t},expression:"contractShow"}}),t("ChargeDislog",{on:{selectChanged:e.hangleFeeChargeSelectChanged},model:{value:e.chargeSelectShow,callback:function(t){e.chargeSelectShow=t},expression:"chargeSelectShow"}})],1)},n=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"font-size":"20px","line-height":"20px","margin-bottom":"16px",color:"#1e2027"}},[t("div",[e._v("新增账单")])])}],r=a("5530"),s=a("2909"),l=(a("d81d"),a("13d5"),a("a9e3"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("376f")),o=a("c1df"),c=a.n(o),d=a("2824"),u=a("2f32"),m=a("fa4e"),f=a("39cc"),p={name:"FormOld",components:{contactDialog:d["default"],expdetailtable:u["default"],ChargeDislog:m["default"]},props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},data:function(){return{fileList:[],formData:{contractId:"",contractNo:"",billDate:"",groupId:null,times:"",lateDate:"",subjectMatterType:null,billDetailList:[]},rules:{billDate:[{required:!0,message:"请选择账期",trigger:"change"}],contractNo:[{required:!0,message:"请选择合同编号",trigger:"change"}],times:[{required:!0,message:"请选择计费周期",trigger:"change"}],lateDate:[{required:!0,message:"请选择最晚缴款日",trigger:"change"}]},contractShow:!1,subjectMatterList:[],chargeSchemeList:[],groupOption:[],chargesList:[],contractChargesList:[],curAreaId:null,lateDateOpts:{disabledDate:function(e){return e.getTime()<c()().startOf("day")}},chargeSelectShow:!1}},computed:{renderBillDetailComp:{get:function(){return this.subjectMatterList&&this.subjectMatterList.length>0&&this.chargeSchemeList&&this.chargeSchemeList.length>0}}},methods:{getBillGroupAll:function(e){var t=this;Object(f["b"])({areaId:e}).then((function(e){0==e.code&&(t.groupOption=e.data||[])}))},getBillGounp:function(e){var t=this;console.log("getBillGounp===>>",e),this.chargeSchemeList=[];var a={pageNum:1,pageSize:100,billGroupId:this.formData.groupId,areaId:this.curAreaId,status:0};Object(l["j"])(a).then((function(e){t.chargesList=e.data.items})),this.formData.billDetailList=[]},changeCharges:function(){this.formData.billDetailList=[]},handleDebug:function(e){console.log(e)},closeCharge:function(e){this.chargeSchemeList.splice(e,1)},chargeSelect:function(){this.chargeSelectShow=!0},hangleFeeChargeSelectChanged:function(e){this.chargeSchemeList=e},feeItemsStat:function(){if(this.formData&&this.formData.billDetailList&&this.formData.billDetailList.length>0){var e={};this.formData.billDetailList.forEach((function(t){e[t.spaceCode]?e[t.spaceCode].push(t):e[t.spaceCode]=[t]}));var t=[];for(var a in e)t.push.apply(t,Object(s["a"])(e[a]));this.formData.billDetailList=t}},renderBillDetailData:function(){var e=this;this.$refs.formData.validate((function(t){if(t){var a={billDate:c()(e.formData.billDate).format("YYYY-MM"),contractId:e.formData.contractId,billGroupId:e.formData.groupId};Object(l["b"])(a).then((function(t){console.log("checkBillDate",t),t.data&&e.$message.warning("该账单已生成过，请确认是否生成账单")})),e.formData.billDetailList=[];for(var i=0;i<e.subjectMatterList.length;i++)for(var n=e.subjectMatterList[i],r=0;r<e.chargeSchemeList.length;r++){var s=e.chargeSchemeList[r];console.log(s,"chargeScheme===>>>"),e.formData.billDetailList.push({billDate:e.formData.billDate,collectOverdue:s.lateFree||0,spaceId:n.spaceId,spaceName:n.spaceName,spaceCode:n.spaceCode,price:0,qty:1,oriReceivableAmt:0,oriReceivableTaxAmt:0,oriTaxAmt:0,itemId:s.itemId||s.id,payeeId:s.payeeId,payeeName:s.payeeName,groupId:s.groupId,groupName:s.groupName,formulaValue:s.formulaValue,formulaId:s.formulaId,itemName:s.itemName,taxRate:s.taxRate})}e.feeItemsStat()}}))},getSummaries:function(e){var t=e.columns,a=e.data,i=[],n=new Set(["oriReceivableAmt","oriReceivableTaxAmt","oriTaxAmt"]);return t.forEach((function(e,t){if(0!==t)if(n.has(e.property)){var r=a.map((function(t){return Number(t[e.property])}));r.every((function(e){return isNaN(e)}))?i[t]="N/A":(i[t]=r.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),i[t]=i[t].toFixed(2)+" 元")}else i[t]="";else i[t]="总价"})),i},changeContractId:function(e){e&&(this.contractShow=!0)},getContractId:function(e){this.subjectMatterList=[],this.chargeSchemeList=[],this.formData.billDetailList=[],this.groupOption=[],this.formData.groupId=null,this.chargesList=[],e.applyUserId?(this.curAreaId!=e.areaId&&(this.curAreaId=e.areaId,this.formData["groupId"]=null,this.getBillGroupAll(this.curAreaId),this.formData.billDetailList=[]),this.subjectMatterList.push(Object(r["a"])(Object(r["a"])({},e),{},{isAdd:!0,roomName:e.spaceName,spaceId:e.spaceId})),this.formData.contractNo=e.contractNo,this.formData.subjectMatterType=1,this.formData.entName=e.applyUserRealName):(this.curAreaId!=e.bentSubjectMatterList[0].areaId&&(this.curAreaId=e.bentSubjectMatterList[0].areaId,this.formData["groupId"]=null,this.getBillGroupAll(this.curAreaId),this.formData.billDetailList=[]),this.subjectMatterList=e.bentSubjectMatterList.map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{isAdd:!0})})),this.formData.contractNo=e.contractNo,this.formData.subjectMatterType=2,this.formData.entName=e.entName),this.formData.contractId=e.id},handleSave:function(){var e=this;this.formData.billDetailList.length<=0?this.$message.warning("请生成费用明细再提交"):this.$refs.formData.validate((function(t){if(t){var a=Object(r["a"])(Object(r["a"])({},e.formData),{},{billDate:c()(e.formData.billDate).format("YYYY-MM"),billPeriodStart:e.formData.times[0],billPeriodEnd:e.formData.times[1]});Object(l["l"])(a).then((function(t){0==t.code&&(e.$message.success("保存成功"),e.goBack())}))}}))},checkAdd:function(e){e.isAdd=!e.isAdd},goBack:function(){this.forward("List")},expTableDataCreate:function(){var e=this;this.$refs.formData.validate((function(t){if(t){var a=[];e.bentSubjectMatterList.forEach((function(e){1==e.isAdd&&a.push(e.spaceId)}));var i=[];e.chargeSchemeList.forEach((function(e){1==e.isAdd&&i.push(e.itemId)})),e.formData.billPeriodEnd=e.formData.times[1],e.formData.billPeriodStart=e.formData.times[0];var n={billPeriodEnd:e.formData.times[1],billPeriodStart:e.formData.times[0],contractId:e.formData.contractId,itemIds:i,spaceIds:a,subjectMatterType:e.formData.subjectMatterType};console.log(e.$refs.expTable,"this.$refs.expTable"),e.$refs.expTable.createTable(n,1)}}))},listData:function(e){this.formData.billDetailList=e,console.log(e,"数据")}},mounted:function(){var e=c()();this.formData.billDate=e.format("YYYY-MM-DD"),this.formData.lateDate=e.add(3,"days").format("YYYY-MM-DD"),this.formData.times=[e.startOf("month").format("YYYY-MM-DD"),e.endOf("month").format("YYYY-MM-DD")]}},h=p,b=(a("6a25"),a("2877")),v=Object(b["a"])(h,i,n,!1,null,"519876ee",null);t["default"]=v.exports},c25d:function(e,t,a){"use strict";a("5579")},c369:function(e,t,a){"use strict";a("18a1")},c3df:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.isShow,width:"800px",align:"center","append-to-body":""},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",{staticStyle:{padding:"20px 0"}},[t("el-form",{ref:"form",staticStyle:{width:"60%"},attrs:{model:e.impParams,rules:e.rules,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"所属位置:"}},[e._v(" "+e._s(e.enterParam.pathName)+" ")]),t("el-form-item",{attrs:{label:"收费项目:",prop:"itemId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择收费项目"},model:{value:e.impParams.itemId,callback:function(t){e.$set(e.impParams,"itemId",t)},expression:"impParams.itemId"}},e._l(e.itemOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.itemName,value:e.id}})})),1)],1)],1),t("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",action:e.upload.url,headers:e.upload.headers,"file-list":e.fileList,disabled:e.upload.isUploading,"on-progress":e.handleProgress,"on-success":e.handleRequest,data:e.upload.uploadParam,drag:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip text-center",attrs:{slot:"tip"},slot:"tip"},[t("span",[e._v("仅允许导入xls、xlsx格式文件。")]),t("a",{staticClass:"el-link el-link--primary",staticStyle:{"font-size":"12px","vertical-align":"baseline"},attrs:{href:e.downloadUrl,target:"_blank",download:"一房一价导入模板.xlsx"}},[t("span",{staticClass:"el-link--inner"},[e._v("下载模板")])])])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{disabled:e.upload.isUploading,loading:e.upload.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")]),t("el-button",{attrs:{disabled:e.upload.loading},on:{click:e.hide}},[e._v("取 消")])],1)],1)],1)},n=[],r=(a("7db0"),a("d3b7"),a("5f87")),s=a("bfec"),l=a("39cc"),o={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},watch:{value:function(e){e&&(this.isShow=e,this.impParams.areaId=this.enterParam.areaId,this.impParams.areaName=this.enterParam.areaName,this.getItemsOption(this.impParams.areaId))},isShow:function(e){this.$emit("input",e)}},data:function(){return{isShow:!1,title:"一房一价批量导入",fileList:[],impParams:{areaId:"",areaName:"",fileId:"",itemId:""},itemOptions:[],rules:{itemId:[{required:!0,message:"请选择所属项目",trigger:"change"}]},upload:{loading:!1,isUploading:!1,percent:0,headers:{token:Object(r["d"])(),deviceId:3},uploadParam:{busSubType:"1106"},url:"/prod-api/adm-service/system/file/upl"},downloadUrl:"/finance/items_import_template.xlsx"}},methods:{getItemsOption:function(e){var t=this;Object(l["h"])({areaId:e,standard:2}).then((function(e){0==e.code?t.itemOptions=e.data:t.$message.error(e.msg)}))},handleProgress:function(e){this.upload.isUploading=!0,this.upload.percent=Math.floor(e.percent)},handleRequest:function(e){console.log("uploat:",e),this.upload.isUploading=!1,0==e.code?(this.$message.success("文件导入成功!"),this.impParams.fileId=e.data.fileId):(this.$refs.upload.clearFiles(),this.loading=!1,this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}))},handleSubmit:function(){var e=this;this.impParams.fileId?this.$refs["form"].validate((function(t){if(t){var a=e.itemOptions.find((function(t){return t.id===e.impParams.itemId}));console.log("items:",a),e.impParams.itemReqList=[{itemId:a.id,itemName:a.itemName,standard:a.standard}],Object(s["d"])(e.impParams).then((function(t){0===t.code?(e.$message.success("导入成功"),setTimeout((function(){e.$emit("refresh"),e.hide()}),300)):e.$message.error(t.msg)}))}})):this.$message.error("请先上传数据文件")},cleanFileNode:function(){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.upload.loading=!1,this.impParams.fileId=""},hide:function(){this.cleanFileNode(),this.isShow=!1}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,"5a69ef9a",null);t["default"]=u.exports},c401d:function(e,t,a){},c42e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleSearch,onReset:e.handleReset}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div",{staticStyle:{display:"flex"}},[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(t){e.checkDiaShow=!0}}},[e._v("自定义表头 ")])],1)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{sort:"",border:"",data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch,printData:e.changePringData},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleShow(i.row)}}},[e._v("查看")]),1==i.row.status&&e.$_has(e.delReceiptCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),t("el-popconfirm",{attrs:{title:"确定要作废这条收据吗",icon:"el-icon-info","icon-color":"red"},on:{confirm:function(t){return e.handleDelete(i.row)}}},[1==i.row.status&&e.$_has(e.delReceiptCode)?t("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("作废")]):e._e()],1)]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)]),t("CheckDialog",{attrs:{checkList:e.allColumns,label:"name",title:"切换表格显示字段"},on:{save:e.checkColumnSave},model:{value:e.checkDiaShow,callback:function(t){e.checkDiaShow=t},expression:"checkDiaShow"}}),t("IssueReceiptDialog",{attrs:{contractInfo:{},billId:e.curRow&&e.curRow.boundId,receiptType:e.curRow.receiptType,receiptCode:e.curRow.receiptCode,type:"view",status:e.curRow.status},on:{success:e.getList},model:{value:e.showReceipt,callback:function(t){e.showReceipt=t},expression:"showReceipt"}})],1)},n=[],r=a("2909"),s=(a("d81d"),a("e9c4"),a("b680"),a("b64b"),a("c1df"),a("53ba")),l=a("71a6"),o=a("5089"),c=a("33a1"),d={name:"analysisAreaPage",props:{forward:Function},mixins:[s["a"]],components:{CheckDialog:o["a"],IssueReceiptDialog:c["a"]},data:function(){return{delReceiptCode:["adm:finance:receiptEdit"],colModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]},{columnId:"status",displayName:"收据状态",searchType:"select",placeholder:"请选择收据状态",options:[{value:null,label:"全部"},{value:1,label:"正常"},{value:2,label:"已作废"}]},{columnId:"receiptType",displayName:"收据类型",searchType:"select",placeholder:"请选择收据类型",options:[{value:1,label:"账单"},{value:2,label:"押金"}]},{columnId:"receiptCode",displayName:"收据编号",searchType:"input",placeholder:"请输入收据编号"},{columnId:"customerName",displayName:"客户名称",searchType:"input",placeholder:"请输入客户名称"},{columnId:"contractCode",displayName:"合同编号",searchType:"input",placeholder:"请输入合同编号"},{columnId:"boundCode",displayName:"账单流水号",searchType:"input",placeholder:"请输入账单流水号"}],queryParams:{pageNum:1,pageSize:10},checkDiaShow:!1,columns:[{type:"selection"},{name:"收据编号",desc:"receiptCode",width:"100"},{name:"原单据流水号",desc:"boundCode",width:"130"},{name:"客户名称",desc:"customerName",width:"130"},{name:"合同编号",desc:"contractCode",width:"130"},{name:"收据类型",desc:"receiptType",width:"100",filter:function(e){return 1==e?"账单":2==e?"押金":""}},{name:"账期",desc:"auditPeriod",width:"100"},{name:"已收金额(元)",desc:"money",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"开票人",desc:"drawer",width:"100"},{name:"财务",desc:"finance",width:"100"},{name:"经手人",desc:"agent",width:"100"},{name:"状态",desc:"status",filter:function(e){switch(e){case"1":case 1:return"正常";case"2":case 2:return"已作废";default:return""}}},{name:"创建人",desc:"createUserName",width:"100"},{name:"创建时间",desc:"createTime",width:"150"},{name:"操作",slotName:"action",fixed:"right",width:100}],allColumns:[],total:0,loading:!1,reviewList:[],listData:[],curRow:{},showReceipt:!1}},created:function(){this.colModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e})),this.allColumns=Object(r["a"])(this.columns),this.handleSearch({})},methods:{handleShow:function(e){this.curRow=e,this.showReceipt=!0},checkColumnSave:function(e){this.columns=e},changePringData:function(e){this.reviewList=e},toReview:function(e){if(1==e){if(this.reviewList.length<=0)return void this.$message.warning("请先勾选收据")}else if(this.listData.length<=0)return void this.$message.warning("当前没有收据");var t=1==e?this.reviewList.map((function(e){return e.id})):this.listData.map((function(e){return e.id}));console.log(t,"ids===>>")},handleSearch:function(e){this.queryParams.pageNum=1,this.getList(e)},handleDelete:function(e){var t=this;if(e){var a=JSON.parse(JSON.stringify(e));a["status"]=2,Object(l["d"])(a).then((function(e){0==e.code&&(t.$message.success("作废成功"),t.getList({}))}))}},getList:function(e){var t=this,a=Object.assign({},this.queryParams,e);this.loading=!0,Object(l["e"])(a).then((function(e){0==e.code?(t.total=e.data.total,t.listData=e.data.items,t.loading=!1):t.loading=!1})).catch((function(){t.loading=!1}))},handleReset:function(){this.handleSearch({})}}},u=d,m=(a("9668"),a("2877")),f=Object(m["a"])(u,i,n,!1,null,"7a4786c0",null);t["default"]=f.exports},c490:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleSearch,onReset:e.handleSearch}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")])]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch},scopedSlots:e._u([{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleClick(i.row.cusId)}}},[e._v("子账单")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)])],1)},n=[],r=(a("d81d"),a("b680"),a("d3b7"),a("376f")),s=a("53ba"),l={props:{forward:Function},mixins:[s["a"]],data:function(){return{expCode:["adm:finance:bill:cuslist:exp"],callBillShow:!1,loading:!1,listData:[],total:0,columns:[{name:"客户名称",desc:"cusName"},{name:"应收总额(元)",desc:"receivableAmtSum",format:!0},{name:"已收总额(元)",desc:"receiptAmtSum",format:!0},{name:"待收金额",desc:"pendingAmtSum",format:!0,filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"账单总数",desc:"billNum"},{name:"操作",slotName:"action",fixed:"right",width:200}],colModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]},{displayName:"客户名称",columnId:"cusName",placeholder:"请输入客户名称",searchType:"input"}],queryParams:{pageNum:1,pageSize:10}}},methods:{exportExcel:function(){var e=this;Object(r["h"])(this.queryParams).then((function(t){e.$message.success("导出成功")}))},handleSearch:function(e){var t=this;this.loading=!0,e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);Object(r["f"])(a).then((function(e){0===e.code?(t.listData=e.data.items,t.total=e.data.total):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},handleClick:function(e){this.forward("subBill",{id:e})}},created:function(){this.handleSearch()},mounted:function(){this.colModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},c4ff:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"text-title"},[e._v("基础信息：")]),t("el-form",{staticClass:"formBox",attrs:{model:e.formData,"label-width":"100px","label-position":"right",size:"small"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"cusName",label:"客户名称"}},[e._v(" "+e._s(e.formData.cusName)+" ")])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"contractNo",label:"合同编号"}},[e._v(" "+e._s(e.formData.contractNo)+" ")])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"settleDate",label:"结算日期"}},[e._v(" "+e._s(e.formData.settleDate)+" ")])],1)],1)],1),t("installation-panel",{attrs:{source:e.formData.settleInstallationRecordList,"edit-mode":!1}}),t("meter-panel",{attrs:{source:e.formData.settleMeterEnergyList,"edit-mode":!1}}),t("ar-panel",{attrs:{source:e.formData.settleBillList,"edit-mode":!1,priceTotal:e.priceTotal}}),t("ap-panel",{attrs:{"edit-mode":!1,priceTotal:e.priceTotal,source:e.formData.settleDepositList},model:{value:e.formData.opDeposit,callback:function(t){e.$set(e.formData,"opDeposit",t)},expression:"formData.opDeposit"}}),t("fee-panel",{attrs:{source:e.formData.settleFeeRecordList,"edit-mode":!1,payeeOption:e.payeeOption,priceTotal:e.priceTotal}}),t("sum-panel",{attrs:{priceTotal:e.priceTotal}})],1)},n=[],r=(a("b680"),a("d3b7"),a("159b"),a("ce27")),s=a("0d78"),l=a("d9be"),o=a("f52d"),c=a("8de3"),d=a("e6ee"),u=a("39cc"),m={props:{formData:Object},computed:{priceTotal:function(){var e=0,t=0,a=0,i=0,n=0,r=0,s=0;return this.formData.settleBillList&&this.formData.settleBillList.length>0&&this.formData.settleBillList.forEach((function(i){1==i.settleBillType?e+=+i.pendingAmt:2==i.settleBillType?t+=+i.receiptAmt:3==i.settleBillType&&(a+=+i.pendingAmt)})),this.formData.settleDepositList&&this.formData.settleDepositList.length>0&&this.formData.opDeposit&&this.formData.settleDepositList.forEach((function(e){i+=e.notRefundMoney})),this.formData.settleFeeRecordList&&this.formData.settleFeeRecordList.length>0&&this.formData.settleFeeRecordList.forEach((function(e){1==e.settleType?r+=e.amount:2==e.settleType&&(n+=e.amount)})),s=e-t-i-n+r,this.formData["billArAmount"]=e,this.formData["billApAmount"]=t,this.formData["billBadAmount"]=a,this.formData["depositApAmount"]=i,this.formData["feeApAmount"]=n,this.formData["feeArAmount"]=r,[{billArAmount:e.toFixed(2),billApAmount:t.toFixed(2),billBadAmount:a.toFixed(2),depositApAmount:i.toFixed(2),feeApAmount:n.toFixed(2),feeArAmount:r.toFixed(2),allTotal:s.toFixed(2)}]}},components:{ApPanel:r["default"],ArPanel:s["default"],FeePanel:l["default"],InstallationPanel:o["default"],SumPanel:c["default"],MeterPanel:d["default"]},data:function(){return{payeeOption:[]}},mounted:function(){var e=this;this.$nextTick((function(){e.formData["areaId"]=e.formData["settleMeterEnergyList"]&&e.formData["settleMeterEnergyList"].length>0?e.formData["settleMeterEnergyList"][0].areaId:null,e.getPayeeAll(e.formData.areaId)}))},methods:{getPayeeAll:function(e){var t=this;Object(u["F"])({areaId:e}).then((function(e){0==e.code&&(t.payeeOption=e.data||[])}))}}},f=m,p=a("2877"),h=Object(p["a"])(f,i,n,!1,null,null,null);t["default"]=h.exports},c500:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"size",align:"center",title:"企业用电分析",visible:e.isShow,width:"900px"},on:{"update:visible":function(t){e.isShow=t}}},[t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.sourceData,border:""}},[t("el-table-column",{attrs:{prop:"cusName",align:"center",label:"客户名称"}}),t("el-table-column",{attrs:{prop:"qty",align:"center",width:"100px",label:"本期用电量（Kwh）"}}),t("el-table-column",{attrs:{prop:"beforeQty",align:"center",width:"100px",label:"上期用电量（Kwh）"}}),t("el-table-column",{attrs:{prop:"avgQty",align:"center",label:"过去6个月平均用电量（Kwh）",width:"150px"}}),t("el-table-column",{attrs:{prop:"chainRate",align:"center",label:"环比降低（%）",width:"120px"}}),t("el-table-column",{attrs:{label:"用电走势",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleView(a.row)}}},[e._v("查看")])]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("EnergyDialog",{attrs:{areaId:e.areaId,curRow:e.curRow},model:{value:e.showEnergy,callback:function(t){e.showEnergy=t},expression:"showEnergy"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("取 消")])],1)],1)},n=[],r=a("76bd"),s=a("b4d5"),l=a("c1df"),o=a.n(l),c={components:{EnergyDialog:s["default"]},props:{value:{type:Boolean,required:!0},areaId:{type:String},month:{type:String}},data:function(){return{showEnergy:!1,curRow:{},queryParams:{pageNum:1,pageSize:10,areaId:null,orderBy:!1},total:0,isShow:!1,loading:!1,sourceData:[],selection:[]}},watch:{value:function(e){e&&(this.isShow=e,this.queryParams.pageNum=1,this.queryParams.areaId=this.areaId,this.getList())},isShow:function(e){this.$emit("input",e)}},methods:{handleView:function(e){this.curRow=e,this.showEnergy=!0},getList:function(){var e=this;this.loading=!0,this.queryParams.month=o()(this.month||new Date).format("YYYY-MM-DD"),Object(r["a"])(this.queryParams).then((function(t){0===t.code&&(e.sourceData=t.data.items,e.total=t.data.total),e.loading=!1})).catch((function(t){e.loading=!1}))}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=m.exports},c642:function(e,t,a){"use strict";a("3c5c")},c6f8:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"按账单催缴",name:"period"}}),t("el-tab-pane",{attrs:{label:"按客户催缴",name:"cust"}}),t("el-tab-pane",{attrs:{label:"催缴记录",name:"record"}})],1),t(e.subComponent,{tag:"component",attrs:{enterParams:e.subParams,forward:e.forward}})],1)},n=[],r=a("2c4e"),s=a("abf3"),l=a("6756"),o={props:{forward:Function},components:{cust:r["default"],period:s["default"],record:l["default"]},data:function(){return{activeName:"period",subComponent:"period",subParams:{}}},methods:{navigat:function(e,t){this.subComponent=e,this.subParams=t||{}},handleClick:function(e,t){this.navigat(this.activeName)}}},c=o,d=(a("4408"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"685ef34b",null);t["default"]=u.exports},c8dc:function(e,t,a){"use strict";a("1dc6")},ca1f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[e._v("2019年11月收缴率")]),t("div",{staticClass:"chartStyle",staticStyle:{height:"320px"},attrs:{id:e.barId}})])},n=[],r=(a("a9e3"),a("313e")),s=a("2302"),l={mixins:[s["a"]],props:{rentRate:Number,barId:String},data:function(){return{myChart3:{}}},watch:{rentRate:function(){this.init()}},methods:{init:function(){var e=this;this.myChart3=r["init"](document.getElementById(this.barId));var t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["某个项","另一个项"]},series:[{name:"Direct",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[31,55]},{name:"Mail Ad",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[69,45]}],color:["#6ea2f7","#73dcb3"]};setTimeout((function(){e.myChart3.setOption(t),e.myChart3.resize()}))},resize:function(){this.myChart3.resize()}},mounted:function(){this.init()}},o=l,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},cada:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.searchModel,seachData:e.queryParams},on:{search:e.handleQuery,onReset:e.handleQuery}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"tool-rows mb10"},[t("span",[e._v("共 "),t("span",[e._v(e._s(e.total))]),e._v(" 条")]),t("div",[e.$_has(e.addCode)?t("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-plus"},on:{click:e.handlerAdd}},[e._v("新增")]):e._e()],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData}},[t("el-table-column",{attrs:{prop:"groupName",align:"center",label:"账单组名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"areaName",align:"center",label:"所属项目","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"payeeName",align:"center",label:"收款方","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.$_has(e.editCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row)}}},[e._v("编辑")]):e._e(),e.$_has(e.delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")]):e._e()]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("edit-dialog",{attrs:{enterParam:e.params},on:{refreshList:function(t){return e.getList()}},model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}})],1)},n=[],r=(a("d81d"),a("53ba")),s=a("39cc"),l=a("90eb"),o={components:{editDialog:l["default"]},mixins:[r["a"]],data:function(){return{addCode:["adm:finance:billGroup:add"],editCode:["adm:finance:billGroup:edit"],delCode:["adm:finance:billGroup:del"],detailShow:!1,updateShow:!1,params:{},loading:!1,total:0,listData:[],queryParams:{pageNum:1,pageSize:10,groupName:void 0},searchModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]},{displayName:"账单组",columnId:"groupName",placeholder:"请输入账单组名称",searchType:"input"}],rowId:""}},created:function(){this.handleQuery()},mounted:function(){this.searchModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(s["f"])(this.queryParams).then((function(t){e.loading=!1,0===t.code?(e.total=t.data.total,e.listData=t.data.items):e.$message.error(t.msg)})).catch((function(){e.loading=!1,e.$message.error("系统繁忙，请稍后重试")}))},handlerDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])({id:e.id}).then((function(e){0===e.code?(t.$message.success("删除成功!"),t.getList()):t.$message.error(e.msg)}))}))},handlerView:function(e){this.updateShow=!0,this.params={type:"view",row:e}},handlerEdit:function(e){this.updateShow=!0,this.params={type:"edit",row:e}},handlerAdd:function(){this.updateShow=!0,this.params={type:"add"}},handleRefresh:function(){this.resetForm("formData"),this.handleQuery()}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,"19deacf4",null);t["default"]=u.exports},cb37:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return d}));var i=a("b775"),n={buildingList:"/adm-service/area/building/all",buildingDel:"/adm-service/area/building/del",buildingAdd:"/adm-service/area/building/add",buildingEdit:"/adm-service/area/building/edit",buildDetail:"/adm-service/area/building/get",buildImport:"/adm-service/area/building/imp",unitAll:"/adm-service/area/building/unit/all",unitAdd:"/adm-service/area/building/unit/add",unitEdit:"/adm-service/area/building/unit/edit",unitDel:"/adm-service/area/building/unit/del",floorList:"/adm-service/area/building/floor/all",floorPages:"/adm-service/area/building/floor/list",floorAdd:"/adm-service/area/building/floor/add",floorEdit:"/adm-service/area/building/floor/edit",floorDel:"/adm-service/area/building/floor/del",floorDetail:"/adm-service/area/building/floor/get",roomList:"/adm-service/area/building/rooms/all",roomPages:"/adm-service/area/building/rooms/list",roomAdd:"/adm-service/area/building/rooms/add",roomEdit:"/adm-service/area/building/rooms/edit",roomDel:"/adm-service/area/building/rooms/del",roomDetail:"/adm-service/area/building/rooms/get",roomCount:"/adm-service/area/building/rooms/allcount",roomImport:"/adm-service/area/building/rooms/imp",leaseAnaly:"/adm-service/area/room/space/leaseAnaly"},r=function(e){return i["a"].post(n.leaseAnaly,e)};function s(e){return Object(i["a"])({url:n.roomList,method:"post",data:e})}var l=function(e){return i["a"].post(n.buildingList,e)},o=function(e){return i["a"].post(n.unitAll,e)},c=function(e){return i["a"].post(n.floorList,e)},d=function(e){return i["a"].post(n.roomCount,e)}},cd67:function(e,t,a){"use strict";a("00a7")},ce27:function(e,t,a){"use strict";a.r(t);a("498a");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-ar-panel settle-panel"},[t("div",{staticClass:"text-title mt-20 item-title"},[e.editMode?t("el-switch",{model:{value:e.vis,callback:function(t){e.vis=t},expression:"vis"}}):e._e(),e._v(" 押金清算 ")],1),e.vis?t("el-table",{attrs:{data:e.source,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{label:"押金编号",prop:"depositNo",align:"center"}}),t("el-table-column",{attrs:{label:"押金类型",prop:"depositType",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.selectType(t.row.depositType,e.depositList))+" ")]}}],null,!1,1870297914)}),t("el-table-column",{attrs:{prop:"money",label:"总额(元)",align:"center"}}),t("el-table-column",{attrs:{prop:"refundMoney",label:"已退(元)",align:"center"}}),t("el-table-column",{attrs:{prop:"notRefundMoney",label:"未退(元)",align:"center"}}),t("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input",{attrs:{placeholder:"备注",size:"mini"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark","string"===typeof t?t.trim():t)},expression:"scope.row.remark"}}):t("span",[e._v(" "+e._s(a.row.remark)+" ")])]}}],null,!1,3557161066)})],1):e._e(),e.vis?t("div",{staticClass:"tableBorderBox"},[e._v(" 押金应付："+e._s(e.priceTotal.length>0?e.priceTotal[0].depositApAmount:null)+" ")]):e._e()],1)},n=[],r=(a("a434"),a("a9e3"),a("2934")),s={props:{source:{type:Array},editMode:{type:Boolean,default:!1},value:{type:null|Number},priceTotal:{type:Array}},computed:{vis:{get:function(){return 1==this.value},set:function(e){this.$emit("input",e?1:0),this.$emit("changeDeposit")}}},data:function(){return{showYajin:!0,depositList:[]}},created:function(){var e=this;this.getDicts({code:"deposit_type"}).then((function(t){0==t.code&&(e.depositList=t.data.items||[])}))},methods:{selectType:function(e,t){return r["a"].selectType(e,t)},handleAdd:function(){this.source.push({itemName:"",amount:0,memo:""})},handleDel:function(e){this.source.splice(e,1)}}},l=s,o=(a("5aa8"),a("2877")),c=Object(o["a"])(l,i,n,!1,null,"a9a7d156",null);t["default"]=c.exports},ce80:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"h",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"d",(function(){return m}));var i=a("b775"),n={settleList:"/adm-service/finance/settle/info/list",addSettle:"/adm-service/finance/settle/info/add",editSettle:"/adm-service/finance/settle/info/edit",settleDetele:"/adm-service/finance/settle/info/del",settleInvalid:"/adm-service/finance/settle/info/invalid",getSettleInfo:"/adm-service/finance/settle/info/get",settleSubmit:"/adm-service/finance/settle/info/submit",queryContract:"/adm-service/finance/settle/info/query/contract"},r=function(e){return i["a"].post(n.settleList,e)},s=function(e){return i["a"].get(n.getSettleInfo,{params:e})},l=function(e){return i["a"].post(n.addSettle,e)},o=function(e){return i["a"].post(n.editSettle,e)},c=function(e){return i["a"].post(n.settleSubmit,e)},d=function(e){return i["a"].post(n.settleDetele,e)},u=function(e){return i["a"].post(n.settleInvalid,e)},m=function(e){return i["a"].post(n.queryContract,e)}},d2b6:function(e,t,a){"use strict";a.r(t);a("b680");var i=function(){var e=this,t=e._self._c;return t("el-card",[t("div",[t("span",{staticClass:"echartTitle"},[e._v(" 租控分析 ")]),t("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择项目"},on:{change:e.handleChange},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("div",{staticClass:"chartBox"},[t("div",{staticClass:"chartleft"},[t("div",{attrs:{id:"rentCharts"}})]),t("div",{staticClass:"chartRight"},[t("div",{staticClass:"items"},[t("div",{staticClass:"label"},[e._v("总面积")]),t("div",{staticClass:"value"},[e._v(" "+e._s(e.dataJson.sumArea?e.dataJson.sumArea:0)+" "),t("span",{staticClass:"unit"},[e._v("㎡")])])]),t("div",{staticClass:"items"},[t("div",{staticClass:"label"},[e._v("已出租面积")]),t("div",{staticClass:"value"},[e._v(" "+e._s(((e.dataJson.sumArea||0)-(e.dataJson.sumWaitArea||0)).toFixed(2))+" "),t("span",{staticClass:"unit"},[e._v("㎡")])])]),t("div",{staticClass:"items",staticStyle:{color:"#d31c0a"}},[t("div",{staticClass:"label"},[e._v("待出租面积")]),t("div",{staticClass:"value"},[e._v(" "+e._s(e.dataJson.sumWaitArea?e.dataJson.sumWaitArea:0)+" "),t("span",{staticClass:"unit"},[e._v("㎡")])])]),t("div",{staticClass:"items"},[t("div",{staticClass:"label"},[e._v("总房间数")]),t("div",{staticClass:"value"},[e._v(" "+e._s(e.dataJson.roomSpaceNum?e.dataJson.roomSpaceNum:0)+" "),t("span",{staticClass:"unit"},[e._v("间")])])]),t("div",{staticClass:"items"},[t("div",{staticClass:"label"},[e._v("已出租房间数")]),t("div",{staticClass:"value"},[e._v(" "+e._s(((e.dataJson.roomSpaceNum||0)-(e.dataJson.roomSpaceLeaseNum||0)).toFixed(0))+" "),t("span",{staticClass:"unit"},[e._v("间")])])]),t("div",{staticClass:"items",staticStyle:{color:"#d31c0a"}},[t("div",{staticClass:"label"},[e._v("待出租房间数")]),t("div",{staticClass:"value"},[e._v(" "+e._s(e.dataJson.roomSpaceLeaseNum?e.dataJson.roomSpaceLeaseNum:0)+" "),t("span",{staticClass:"unit"},[e._v("间")])])])])])])},n=[],r=a("5530"),s=(a("d81d"),a("e9c4"),a("b64b"),a("d3b7"),a("159b"),a("cb37")),l=a("5f87"),o={data:function(){return{areaId:null,areaList:[],buildingList:[],floorList:[],cascaderProps:{lazy:!0,checkStrictly:!0,value:"id",label:"label",lazyLoad:this.cascLazyLoad},dataJson:{},roomStati:[{name:"独立空间",count:0,unit:"间"},{name:"已租",count:0,unit:"间"},{name:"空置",count:0,unit:"间"},{name:"锁定",count:0,unit:"间"},{name:"留置",count:0,unit:"间"},{name:"工位",count:0,unit:"个"},{name:"已租",count:0,unit:"个"},{name:"空置",count:0,unit:"个"},{name:"锁定",count:0,unit:"个"},{name:"留置",count:0,unit:"个"}]}},computed:{parks:function(){return Object(l["a"])()}},created:function(){this.getAreaList()},mounted:function(){var e=this;setTimeout((function(){e.getInit()}),200)},methods:{getAreaList:function(){var e=JSON.parse(JSON.stringify(this.parks));this.areaList=e.map((function(e){return e.label=e.areaName,e.id=e.areaId,e})),this.areaList.length>0&&(this.areaId=this.areaList[0].id,this.handleChange())},handleChange:function(e){var t=this;if(this.areaId){var a={areaId:this.areaId};Object(s["c"])(a).then((function(e){if(0==e.code){t.dataJson=e.data;var a=e.data,i={name:"",count:0},n=[-1,1,0,3,4,-1,1,0,3,4],s=["独立空间","已租","空置","锁定","留置","工位","已租","空置","锁定","留置"];t.roomStati=n.map((function(e,t){var n=Object(r["a"])(Object(r["a"])({},i),{},{name:s[t],unit:~s[t].indexOf("空间")?"间":"个"});return a.roomSpaceGroupStatusResps.length&&a.roomSpaceGroupStatusResps.forEach((function(a){a.leaseStatus!=e&&-1!=e||(t>=5&&"0"===a.spaceSubType||t<=4&&"1"==a.spaceSubType)&&(n.count+=a.num)})),n})),t.getInit()}}))}},getInit:function(){console.log("进来啦===》》");var e={series:[{name:"出租率",type:"pie",radius:"90%",label:{position:"center",formatter:"{b|"+(this.dataJson.rentRate||0)+"%}\n{a|出租率}",rich:{a:{fontSize:14,lineHeight:20},b:{fontSize:20,lineHeight:30}}},stillShowZeroSum:!1,color:["#dae3f3","#92d050"],data:[{value:100-(this.dataJson.rentRate||0),name:"未出租"},{value:this.dataJson.rentRate||0,name:"已出租"}]}]},t=this.$echarts.init(document.getElementById("rentCharts"));t.setOption(e),window.onresize=function(){t.resize()}},cascLazyLoad:function(e,t){var a=this;if(3!=e.level){var i=[],n=e.level;e&&this&&1==n?Object(s["a"])({areaId:e.value}).then((function(e){var t=e.data.items;i=t.map((function(e){return e.label=e.buildingName,e})),a.getInit()})).finally((function(){t(i)})):e&&this&&2==n&&Object(s["b"])({buildingId:e.value}).then((function(e){var t=e.data.items;i=t.map((function(e){return e.label=e.floorName,e.leaf=n>=1,e})),a.getInit()})).finally((function(){t(i)}))}else e.loading=!1}}},c=o,d=(a("ecd2"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"4229be39",null);t["default"]=u.exports},d2b8:function(e,t,a){"use strict";a("3edf")},d46f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.handleSearch,onReset:e.handleSearch}}),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.tableData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch},scopedSlots:e._u([{key:"amount",fn:function(t){var a=t.scope;return[e._v(" "+e._s((a.row.settleAmount,e.fmtMoney(a.row.apAmount-a.row.arAmount)))+" ")]}},{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleView(i.row)}}},[e._v("查看")]),10===i.row.status||30===i.row.status?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),10===i.row.status||30===i.row.status?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleClick(i.row)}}},[e._v("编辑")]):e._e(),10===i.row.status||30===i.row.status?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),10===i.row.status||30===i.row.status?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleSubmit(i.row)}}},[e._v("送审")]):e._e(),10===i.row.status||30===i.row.status?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),10===i.row.status||30===i.row.status?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDelete(i.row)}}},[e._v("删除")]):e._e()]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)])],1)},n=[],r=(a("d81d"),a("d3b7"),a("ce80")),s=a("ed08"),l=a("53ba"),o={props:{forward:Function},mixins:[l["a"]],data:function(){return{loading:!1,callBillShow:!1,tableData:[],total:0,columns:[{name:"客户名称",desc:"cusName"},{name:"合同编号",desc:"contractNo"},{name:"账单应收金额",desc:"billArAmount",format:!0},{name:"账单应付金额",desc:"billApAmount",format:!0},{name:"账单坏账金额",desc:"billBadAmount",format:!0},{name:"押金应付",desc:"depositApAmount",format:!0},{name:"其他费项应付",desc:"feeApAmount",format:!0},{name:"其他费项应收",desc:"feeArAmount",format:!0},{name:"结算日期",desc:"settleDate"},{name:"审批状态",desc:"status",filter:function(e){switch(e){case 10:return"待送审";case 20:return"已送审";case 30:return"驳回";case 40:return"审批通过";default:return""}}},{name:"结算状态",desc:"settleStatus",filter:function(e){switch(e){case 0:return"未结算";case 1:return"已结算";default:return""}}},{name:"操作",slotName:"action",fixed:"right",width:200}],billId:"",colModel:[{columnId:"areaId",displayName:"项目",searchType:"select",placeholder:"请选择项目",options:[]},{displayName:"客户名称",columnId:"cusName",placeholder:"请输入客户名称",searchType:"input"},{displayName:"结算日期",columnId:"settleDateBetween",placeholder:"请选择结算日期",searchType:"dateArray",options:[]},{displayName:"审批状态",columnId:"status",placeholder:"请选择审批状态",searchType:"select",options:[{value:10,label:"待送审"},{value:20,label:"已送审"},{value:30,label:"驳回"},{value:40,label:"审批通过"}]},{displayName:"结算状态",columnId:"settleStatus",placeholder:"请选择结算状态",searchType:"select",options:[{value:"0",label:"未结算"},{value:1,label:"已结算"}]}],queryParams:{pageNum:1,pageSize:10}}},methods:{fmtMoney:function(e){return Object(s["c"])(e)},handleSearch:function(e){var t=this;this.loading=!0,e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);Object(r["g"])(a).then((function(e){0===e.code?(t.tableData=e.data.items,t.total=e.data.total):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},handleClick:function(e){this.forward("Form",{type:"edit",rowId:e.id})},handleView:function(e){this.forward("ViewForm",{type:"view",rowId:e.id})},handleSubmit:function(e){var t=this,a=e.id;this.loading=!0,Object(r["h"])({id:a}).then((function(e){0===e.code&&(t.$message.success("送审成功."),t.handleSearch())})).finally((function(){t.loading=!1}))},handleDelete:function(e){var t=this;this.$confirm("确定要删除此结算记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=e.id,i=e.status,n=10===i?r["e"]:r["f"];t.loading=!0,n({id:a}).then((function(e){0===e.code&&(t.$message.success("删除成功."),t.handleSearch())})).finally((function(){t.loading=!1}))}))},handleAdd:function(){this.forward("Form",{type:"add"})}},created:function(){this.handleSearch()},mounted:function(){this.colModel[0].options=this.areaList.map((function(e){return e.value=e.areaId,e.label=e.areaName,e}))}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},d47c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-row",{staticStyle:{display:"flex"}},[t("el-col",{staticClass:"box-left"},[t("div",{staticClass:"box-top"},[t("el-select",{attrs:{placeholder:"请选择项目",clearable:"",size:"small"},on:{change:function(t){return e.getAreaId()}},model:{value:e.queryParams.areaId,callback:function(t){e.$set(e.queryParams,"areaId",t)},expression:"queryParams.areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1),t("div",{staticClass:"scroll-box"},[t("div",{staticClass:"treeList"},[t("div",{staticStyle:{padding:"0 10px"}},[t("el-tree",{ref:"treeRef",attrs:{lazy:"",data:e.treeOptions,props:e.defaultProps,load:e.loadTreeData,"expand-on-click-node":!1,"highlight-current":!0,"default-expand-all":!1,"default-expanded-keys":e.nodeKey,"node-key":"id"},on:{"node-click":e.handleNodeClick}})],1)])])]),t("el-col",{staticClass:"box-right"},[t("div",{staticClass:"container"},[t("div",{staticClass:"treeList"},[t("div",{staticStyle:{padding:"20px 20px 0"}},[t("el-form",{ref:"formData",staticClass:"elForm",attrs:{inline:!0,model:e.queryParams,"label-width":"80px",size:"mini"}},[t("div",[t("el-form-item",{attrs:{prop:"roomName"}},[t("el-input",{staticClass:"inputWidth",attrs:{placeholder:"房号",clearable:""},model:{value:e.queryParams.roomName,callback:function(t){e.$set(e.queryParams,"roomName",t)},expression:"queryParams.roomName"}})],1),t("el-form-item",{attrs:{prop:"cusName"}},[t("el-input",{staticClass:"inputWidth",attrs:{placeholder:"产权人姓名",clearable:""},model:{value:e.queryParams.cusName,callback:function(t){e.$set(e.queryParams,"cusName",t)},expression:"queryParams.cusName"}})],1),t("el-form-item",{attrs:{label:"计费标准",prop:"standard"}},[t("el-select",{attrs:{placeholder:"计费标准",clearable:"",size:"small"},on:{change:function(t){return e.handleQuery()}},model:{value:e.queryParams.standard,callback:function(t){e.$set(e.queryParams,"standard",t)},expression:"queryParams.standard"}},e._l(e.standardOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-button",{staticClass:"eliminate",attrs:{type:"default"},on:{click:e.handleRefresh}},[e._v("清除条件")])],1),t("el-form-item",[t("el-button",{staticClass:"inquire",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.handleQuery()}}})],1)],1)],1),t("div",{staticClass:"tool-rows",staticStyle:{height:"60px","box-sizing":"border-box"}},[t("span",[e.curNode?t("span",{staticClass:"text-nav"},[t("i",{staticClass:"el-icon-location-outline"}),e._v(" "+e._s(e.curNode.path))]):e._e()]),t("div",[e.$_has(e.addCode)?t("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")]):e._e(),e.$_has(e.impCode)?t("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.impPermit,plain:""},on:{click:function(t){return e.handleImport()}}},[e._v("导入")]):e._e()],1)]),t("div",{staticClass:"tableContainer"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",size:"mini",data:e.dataList}},[t("el-table-column",{attrs:{prop:"roomNum",align:"center",label:"房源编码",width:"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"roomName",align:"center",label:"房号",width:"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"物业类型",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.selectDictLabel(e.propertyTypeOption,t.row.propertyType))+" ")]}}])}),t("el-table-column",{attrs:{prop:"cusName",align:"center",label:"产权人",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"area",align:"center",label:"建筑面积",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"计费主体",width:"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.isBillingMain?"否":"是")+" ")]}}])}),t("el-table-column",{attrs:{prop:"itemName",align:"center",label:"收费项目",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"计算标准",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return["1"==a.row.standard?t("div",[e._v("公式")]):t("div",{staticClass:"textcss",on:{click:function(t){return e.handlerView(a.row)}}},[e._v(e._s("一房一价 | "+(a.row.amount?a.row.amount:"待定")))])]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.$_has(e.editCode)&&"2"==a.row.standard?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerEdit(a.row)}}},[e._v("编辑")]):e._e(),e.$_has(e.editCode)&&"2"==a.row.standard&&e.$_has(e.delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)?t("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.handlerDel(a.row)}}},[e._v("删除")]):e._e()]}}])})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)])])])],1),t("add-dialog",{attrs:{enterParam:e.params},on:{refreshList:function(t){return e.getList()}},model:{value:e.addShow,callback:function(t){e.addShow=t},expression:"addShow"}}),t("edit-dialog",{attrs:{enterParam:e.params},on:{refreshList:function(t){return e.getList()}},model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}}),t("import-dialog",{attrs:{enterParam:e.params},on:{refresh:function(t){return e.getList()}},model:{value:e.importShow,callback:function(t){e.importShow=t},expression:"importShow"}})],1)},n=[],r=a("c7eb"),s=a("1da1"),l=(a("7db0"),a("d81d"),a("d3b7"),a("53ba")),o=a("9a58"),c=a("1eb8"),d=a("c3df"),u=a("cb37"),m=a("bfec"),f={name:"AdmDeviceLedger",props:{forward:Function},components:{addDialog:c["default"],editDialog:o["default"],importDialog:d["default"]},mixins:[l["a"]],data:function(){return{addCode:["adm:finance:chargescheme:add"],editCode:["adm:finance:chargescheme:edit"],delCode:["adm:finance:chargescheme:del"],impCode:["adm:finance:chargescheme:imp"],propertyTypeOption:[],standardOption:[{label:"公式",value:"1"},{label:"指定金额",value:"2"}],loading:!1,queryParams:{pageNum:1,pageSize:10,areaId:"",propertyType:void 0,roomName:void 0,cusName:void 0,standard:void 0,buildingId:void 0,unitId:void 0,floorId:void 0,roomId:void 0},treeOptions:[],defaultProps:{children:"children",label:"typeName"},nodeKey:[],curNode:null,total:0,dataList:[],addShow:!1,updateShow:!1,viewShow:!1,impPermit:!1,importShow:!1,params:{},rowId:"",areaName:""}},created:function(){var e=this;this.getDicts({code:"property_type"}).then((function(t){0==t.code&&(e.propertyTypeOption=t.data.items||[])}))},mounted:function(){console.log("areaList: ",this.areaList),this.areaList&&this.areaList.length>0&&(this.queryParams.areaId=this.areaList[0].areaId,this.getAreaId(this.queryParams.areaId))},methods:{getAreaId:function(e){var t=this;if(e){var a=this.areaList.find((function(t){return t.areaId===e}));a?(this.impPermit=!0,this.areaName=a.areaName,this.treeOptions=[{areaId:a.areaId,id:a.areaId,typeName:a.areaName,path:a.areaName}],this.nodeKey=[a.areaId],this.curNode=this.treeOptions[0],this.queryParams={pageNum:1,pageSize:10,areaId:a.areaId},this.handleQuery(),this.$nextTick((function(){t.$refs.treeRef.setCurrentKey(a.areaId)}))):(this.impPermit=!1,this.treeOptions=[],this.curNode=null,this.areaName="")}},loadTreeData:function(e,t){var a=this;return Object(s["a"])(Object(r["a"])().mark((function i(){var n,s,l,o,c;return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=a,0!=e.level){i.next=4;break}i.next=45;break;case 4:if(1!=e.level){i.next=15;break}return i.next=7,Object(u["a"])({areaId:e.data.id});case 7:if(s=i.sent,0!=s.code){i.next=12;break}return i.abrupt("return",t(s.data.items.map((function(t){return n.$set(t,"typeName",t.buildingName),n.$set(t,"path",e.data.path+" / "+t.buildingName),t}))));case 12:return i.abrupt("return",t([]));case 13:i.next=45;break;case 15:if(2!=e.level){i.next=26;break}return i.next=18,Object(u["f"])({buildingId:e.data.id});case 18:if(l=i.sent,0!=l.code){i.next=23;break}return i.abrupt("return",t(l.data.items.map((function(t){return n.$set(t,"typeName",t.unitName),n.$set(t,"path",e.data.path+" / "+t.unitName),t}))));case 23:return i.abrupt("return",t([]));case 24:i.next=45;break;case 26:if(3!=e.level){i.next=37;break}return i.next=29,Object(u["b"])({unitId:e.data.id});case 29:if(o=i.sent,0!=o.code){i.next=34;break}return i.abrupt("return",t(o.data.items.map((function(t){return n.$set(t,"typeName",t.floorName),n.$set(t,"path",e.data.path+" / "+t.floorName),t}))));case 34:return i.abrupt("return",t([]));case 35:i.next=45;break;case 37:return i.next=39,Object(u["e"])({floorId:e.data.id});case 39:if(c=i.sent,0!=c.code){i.next=44;break}return i.abrupt("return",t(c.data.items.map((function(t){return n.$set(t,"areaId",a.queryParams.areaId),n.$set(t,"typeName",t.roomName),n.$set(t,"path",e.data.path+" / "+t.roomName),t}))));case 44:return i.abrupt("return",t([]));case 45:case"end":return i.stop()}}),i)})))()},handleNodeClick:function(e,t){console.log("handleNodeClick data:",e),console.log("handleNodeClick node:",t),this.curNode=e,this.queryParams={pageNum:1,pageSize:10,areaId:e.areaId},2==t.level?this.queryParams.buildingId=e.id:3==t.level?(this.queryParams.buildingId=e.buildingId,this.queryParams.unitId=e.id):4==t.level?(this.queryParams.buildingId=e.buildingId,this.queryParams.unitId=e.unitId,this.queryParams.floorId=e.id):5==t.level&&(this.queryParams.buildingId=e.buildingId,this.queryParams.unitId=e.unitId,this.queryParams.floorId=e.floorId,this.queryParams.roomId=e.id),this.handleQuery()},handleRefresh:function(){this.resetForm("formData"),this.handleQuery()},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(m["e"])(this.queryParams).then((function(t){e.loading=!1,0==t.code?(e.total=t.data.total,e.dataList=t.data.items):e.$message.error(t.msg)})).catch((function(){e.loading=!1}))},handlerEdit:function(e){this.updateShow=!0,this.params={type:"edit",id:e.id,amount:e.amount,effDate:e.effDate,expDate:e.expDate}},handlerView:function(e){this.updateShow=!0,this.params={type:e.amount?"view":"edit",id:e.id,amount:e.amount,effDate:e.effDate,expDate:e.expDate}},handlerDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={delType:0,schemeIdIn:[e.id]};Object(m["b"])(a).then((function(e){0===e.code?(t.$message.success("删除成功!"),t.getList()):t.$message.error(e.msg)}))}))},handleAdd:function(){this.queryParams.areaId?(this.addShow=!0,this.params={path:this.curNode.path,areaId:this.queryParams.areaId,areaName:this.areaName,buildingId:this.queryParams.buildingId,unitId:this.queryParams.unitId,floorId:this.queryParams.floorId,roomId:this.queryParams.roomId}):this.$message.info("请选择项目!")},handleImport:function(){this.importShow=!0,this.params={areaId:this.queryParams.areaId,areaName:this.areaName,pathName:this.curNode.path}}}},p=f,h=(a("6702"),a("2877")),b=Object(h["a"])(p,i,n,!1,null,"80de6572",null);t["default"]=b.exports},d54b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-body"},[t("div",{staticClass:"amount-box"},[t("div",{staticClass:"amount-item"},[t("div",{staticClass:"text-box"},[t("div",{staticClass:"amount"},[e._v(" "+e._s(e.data.oreaAmount?e.fmoney(e.data.oreaAmount):0)+" ")]),t("div",[e._v("应收金额")])])]),t("div",{staticClass:"interval-col"}),t("div",{staticClass:"amount-item"},[t("div",{staticClass:"text-box"},[t("div",{staticClass:"amount"},[e._v(" "+e._s(e.data.recAmount?e.fmoney(e.data.recAmount):0)+" ")]),t("div",[e._v("已收金额")])])]),t("div",{staticClass:"interval-col"}),t("div",{staticClass:"amount-item"},[t("div",{staticClass:"text-box"},[t("div",{staticClass:"amount"},[e._v(" "+e._s(e.data.adjustAmount?e.fmoney(e.data.adjustAmount):0)+" ")]),t("div",[e._v("未收金额")])])])])])},n=[],r=(a("39b4"),a("ed08"),{props:{data:{type:Object,default:function(){return{}}}},data:function(){return{listData:{}}}}),s=r,l=(a("201a"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"a0a71b6c",null);t["default"]=o.exports},d56e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})},n=[],r=a("0687"),s={name:"analysisArea",components:{List:r["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},d6f8:function(e,t,a){},d7a5:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"1000px",title:e.enterParam.conditionView?"编辑计算条件":"新增计算条件",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[e.enterParam.conditionView?t("div",{staticStyle:{"margin-bottom":"20px"}},[t("span",{staticClass:"text-nav"},[e._v("原计算条件: "),t("span",{staticStyle:{"margin-left":"10px",color:"red"}},[e._v(e._s(e.enterParam.conditionView))])])]):e._e(),t("el-form-item",{attrs:{size:"mini","label-width":"0"}},e._l(e.conditionList,(function(a,i){return t("el-row",{key:i,staticStyle:{"margin-bottom":"10px"},attrs:{gutter:5}},[t("el-col",{attrs:{span:2}},[i>0?t("el-tag",{attrs:{size:"small"}},[e._v("或者")]):e._e()],1),t("el-col",{attrs:{span:2,offset:0==i?2:0}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.buildingkey,callback:function(t){e.buildingkey=t},expression:"buildingkey"}},e._l(e.buildingSel,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:2}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"value"},model:{value:a.buildingOpt,callback:function(t){e.$set(a,"buildingOpt",t)},expression:"item.buildingOpt"}},e._l(e.buildingOpt,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e}})})),1)],1),t("el-col",{attrs:{span:5}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"id",multiple:"","collapse-tags":""},model:{value:a.buildingValue,callback:function(t){e.$set(a,"buildingValue",t)},expression:"item.buildingValue"}},e._l(e.buildingOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.buildingName,value:e}})})),1)],1),t("el-col",{attrs:{span:2.5}},[t("el-checkbox",{model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"item.checked"}},[t("el-tag",{attrs:{type:a.checked?"":"info",size:"small"}},[e._v("并且")])],1)],1),t("el-col",{attrs:{span:2}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!a.checked},model:{value:e.floorKey,callback:function(t){e.floorKey=t},expression:"floorKey"}},e._l(e.floorSel,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:2}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"value",disabled:!a.checked},model:{value:a.floorOpt,callback:function(t){e.$set(a,"floorOpt",t)},expression:"item.floorOpt"}},e._l(e.floorOpt,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e}})})),1)],1),t("el-col",{attrs:{span:3}},[t("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!a.checked},model:{value:a.floorValue,callback:function(t){e.$set(a,"floorValue",t)},expression:"item.floorValue"}})],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-minus"},on:{click:function(t){return e.removeItem(i)}}})],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addItem(i)}}})],1)],1)})),1),t("el-form-item",{attrs:{"label-width":"0",prop:"formula"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("el-input",{attrs:{size:"small",placeholder:"表达式",readonly:""},model:{value:e.form.formula,callback:function(t){e.$set(e.form,"formula",t)},expression:"form.formula"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:e.formulaFormat}},[e._v("生成表达式")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:e.clearFormula}},[e._v("清空")])],1)])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)],1)},n=[],r=(a("a15b"),a("d81d"),a("a434"),a("e9c4"),a("d3b7"),a("159b"),a("cb37")),s={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},data:function(){return{buildingOption:[],buildingSel:[{label:"楼栋",value:"building"}],floorSel:[{label:"楼层",value:"floor"}],buildingkey:"building",floorKey:"floor",buildingOpt:[{label:"包含",value:"="}],floorOpt:[{label:"=",value:"="},{label:"<",value:"<"},{label:">",value:">"},{label:">=",value:">="},{label:"<=",value:"<="}],isShow:!1,form:{id:"",formula:"",pattern:""},conditionList:[{buildingOpt:{label:"包含",value:"="},buildingValue:[],floorOpt:{label:"=",value:"="},floorValue:"",checked:!1}]}},watch:{value:function(e){this.isShow=e,e&&(this.form.id=this.enterParam.id,this.getBuildingAll(this.enterParam.areaId))},isShow:function(e){this.$emit("input",e)}},created:function(){console.log("param: ",this.enterParam)},methods:{getBuildingAll:function(e){var t=this;Object(r["a"])({areaId:e}).then((function(e){0==e.code&&(t.buildingOption=e.data.items)}))},addItem:function(){this.conditionList.push({buildingOpt:{label:"包含",value:"="},buildingValue:[],floorOpt:{label:"=",value:"="},floorValue:"",checked:!1})},removeItem:function(e){this.conditionList.length>1&&this.conditionList.splice(e,1)},formulaFormat:function(){var e=[],t=[];this.conditionList.forEach((function(a,i){var n={},r={},s="";i>0&&(t.push("|"),e.push("或者")),e.push("(","楼栋","="),console.log("item.building: ",a.buildingValue),a.buildingValue&&a.buildingValue.length>0&&(n={building:a.buildingValue.map((function(e){return e.id})).join(",")},e.push(a.buildingValue.map((function(e){return e.buildingName})))),t.push(JSON.stringify(n)),a.checked&&(t.push("&"),e.push("并且","楼层"),a.floorOpt&&(s+=a.floorOpt.value,e.push(a.floorOpt.label)),a.floorValue&&(s+=","+a.floorValue,e.push(a.floorValue)),r={floor:s},t.push(JSON.stringify(r))),e.push(")")})),this.form.formula=e.join(" "),this.form.pattern=t.join(""),console.log("form:",this.form)},submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=JSON.stringify(e.form);e.$emit("getData",a),setTimeout((function(){e.$message.success("保存成功"),e.hide()}),500)}}))},clearFormula:function(){this.form={id:this.enterParam.id,formula:"",pattern:""},this.conditionList=[{buildingOpt:{label:"包含",value:"="},buildingValue:[],floorOpt:{label:"=",value:"="},floorValue:"",checked:!1}]},hide:function(){this.isShow=!1,this.resetForm("form"),this.clearFormula()},handleChange:function(e){console.log(e)}}},l=s,o=(a("a663"),a("2877")),c=Object(o["a"])(l,i,n,!1,null,"723421cf",null);t["default"]=c.exports},d8d8:function(e,t,a){"use strict";a("b1bd")},d9be:function(e,t,a){"use strict";a.r(t);a("498a");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-fee-panel settle-panel"},[t("div",{staticClass:"text-title mt-20 item-title"},[e._v("其他费用（其他费用的收取）")]),e.editMode?t("div",[t("el-button",{attrs:{type:"text",icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")])],1):e._e(),t("el-table",{attrs:{data:e.source,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{label:"收费类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:a.row.settleType,callback:function(t){e.$set(a.row,"settleType",t)},expression:"scope.row.settleType"}},[t("el-option",{attrs:{label:"应收",value:1}}),t("el-option",{attrs:{label:"应付",value:2}})],1):t("span",[e._v(" "+e._s(1==a.row.settleType?"应收":2==a.row.settleType?"应付":"")+" ")])]}}])}),t("el-table-column",{attrs:{label:"收费项",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input",{attrs:{placeholder:"请输入收费项",size:"mini"},model:{value:a.row.itemName,callback:function(t){e.$set(a.row,"itemName","string"===typeof t?t.trim():t)},expression:"scope.row.itemName"}}):t("span",[e._v(" "+e._s(a.row.itemName)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"amount",label:"金额(元)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input-number",{attrs:{min:0,precision:2,max:9999999999,size:"mini"},model:{value:a.row.amount,callback:function(t){e.$set(a.row,"amount","string"===typeof t?t.trim():t)},expression:"scope.row.amount"}}):t("span",[e._v(" "+e._s(a.row.amount)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"payeeId",label:"收款方",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"mini"},model:{value:a.row.payeeId,callback:function(t){e.$set(a.row,"payeeId",t)},expression:"scope.row.payeeId"}},e._l(e.payeeOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.payeeName,value:e.id}})})),1):t("span",[e._v(e._s(e.fileterPayee(a.row.payeeId,e.payeeOption)))])]}}])}),t("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input",{attrs:{placeholder:"备注",size:"mini"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark","string"===typeof t?t.trim():t)},expression:"scope.row.remark"}}):t("span",[e._v(" "+e._s(a.row.remark)+" ")])]}}])}),e.editMode?t("el-table-column",{attrs:{label:"操作",align:"center",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDel(a.$index)}}},[e._v("删除")])]}}],null,!1,697213870)}):e._e()],1),t("div",{staticClass:"tableBorderBox"},[e._v(" 其他应收： "+e._s(e.priceTotal[0].feeArAmount)+" "),t("span",{staticStyle:{padding:"0 20px"}},[e._v(" 其他应付："+e._s(e.priceTotal[0].feeApAmount)+" ")])])],1)},n=[],r=(a("4de4"),a("d81d"),a("13d5"),a("a434"),a("a9e3"),a("b680"),a("d3b7"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),{props:{source:{type:Array,default:function(){return[]}},payeeOption:{type:Array,default:function(){return[]}},editMode:{type:Boolean,default:!1},priceTotal:{type:Array,default:function(){return[]}}},methods:{fileterPayee:function(e,t){if(!e||!t||0==t.length)return"";var a=t.filter((function(t){return t.id==e}));return a&&a.length>0?a[0].payeeName:" "},handleAdd:function(){this.source.push({itemName:"",amount:0,memo:""})},handleDel:function(e){this.source.splice(e,1)},getSummaries:function(e){var t=e.columns,a=e.data,i=[],n=new Set(["amount"]);return t.forEach((function(e,t){if(0!==t)if(n.has(e.property)){var r=a.map((function(t){return Number(t[e.property])}));r.every((function(e){return isNaN(e)}))?i[t]="N/A":(i[t]=r.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),i[t]=i[t].toFixed(2))}else i[t]="";else i[t]="合计"})),i}}}),s=r,l=(a("c642"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"55e23d88",null);t["default"]=o.exports},dd53:function(e,t,a){"use strict";a("b0a8")},e142:function(e,t,a){"use strict";a.r(t),a.d(t,"bankList",(function(){return i}));var i=[{value:"交通银行",label:"交通银行"},{value:"招商银行",label:"招商银行"},{value:"中国银行",label:"中国银行"},{value:"建设银行",label:"建设银行"},{value:"邮政银行",label:"邮政银行"},{value:"工商银行",label:"工商银行"}]},e15f:function(e,t,a){"use strict";a("f67d")},e268:function(e,t,a){"use strict";a("6e60")},e671:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t(e.subComponent,{tag:"component",attrs:{enterParams:e.subParams,forward:e.navigat}})],1)},n=[],r=a("6bb6"),s=a("d46f"),l=a("f7af"),o={components:{List:s["default"],Form:r["default"],ViewForm:l["default"]},data:function(){return{subComponent:"List",subParams:{}}},methods:{navigat:function(e,t){this.subComponent=e,this.subParams=t||{}}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},e6ee:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-meter-panel settle-panel"},[t("div",{staticClass:"text-title item-title"},[e._v("能耗确认（确定终止合同能耗读数）")]),t("el-table",{attrs:{data:e.source,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{prop:"spaceCode",label:"所属房源"}}),t("el-table-column",{attrs:{prop:"meterName",label:"能耗表"}}),t("el-table-column",{attrs:{prop:"recordDate",label:"读数日期"}}),t("el-table-column",{attrs:{prop:"preMete",label:"上期读数"}}),t("el-table-column",{attrs:{prop:"recordMete",label:"本期读数"}}),t("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark",t)},expression:"scope.row.remark"}}):t("span",[e._v(" "+e._s(a.row.remark)+" ")])]}}])})],1)],1)},n=[],r={props:{source:{type:Array,default:function(){return[]}},editMode:{type:Boolean,default:!1}}},s=r,l=(a("e268"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"3664e469",null);t["default"]=o.exports},e78d:function(e,t,a){"use strict";a.r(t);a("498a");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-ar-panel settle-panel"},[t("div",{staticClass:"text-title mt-20 item-title"},[e._v("应付清算（包含保证金）")]),e.editMode?t("div",[t("el-button",{attrs:{type:"text",icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")])],1):e._e(),t("el-table",{attrs:{data:e.source,"show-summary":"","summary-method":e.getSummaries,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{label:"费项名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input",{attrs:{placeholder:"请输入收费项",size:"mini"},model:{value:a.row.itemName,callback:function(t){e.$set(a.row,"itemName","string"===typeof t?t.trim():t)},expression:"scope.row.itemName"}}):t("span",[e._v(" "+e._s(a.row.itemName)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"amount",label:"金额(元)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input-number",{attrs:{min:0,precision:2,size:"mini"},model:{value:a.row.amount,callback:function(t){e.$set(a.row,"amount","string"===typeof t?t.trim():t)},expression:"scope.row.amount"}}):t("span",[e._v(" "+e._s(a.row.amount)+" ")])]}}])}),t("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input",{attrs:{placeholder:"备注",size:"mini"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark","string"===typeof t?t.trim():t)},expression:"scope.row.remark"}}):t("span",[e._v(" "+e._s(a.row.remark)+" ")])]}}])}),e.editMode?t("el-table-column",{attrs:{label:"操作",align:"center",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDel(a.$index)}}},[e._v("删除")])]}}],null,!1,697213870)}):e._e()],1)],1)},n=[],r=(a("d81d"),a("13d5"),a("a434"),a("a9e3"),a("b680"),a("d3b7"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),{props:{source:{type:Array,default:function(){return[]}},editMode:{type:Boolean,default:!1}},methods:{handleAdd:function(){this.source.push({itemName:"",amount:0,memo:""})},handleDel:function(e){this.source.splice(e,1)},getSummaries:function(e){var t=e.columns,a=e.data,i=[],n=new Set(["amount"]);return t.forEach((function(e,t){if(0!==t)if(n.has(e.property)){var r=a.map((function(t){return Number(t[e.property])}));r.every((function(e){return isNaN(e)}))?i[t]="N/A":(i[t]=r.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),i[t]=i[t].toFixed(2))}else i[t]="";else i[t]="合计"})),i}}}),s=r,l=(a("69c5"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"d07624ba",null);t["default"]=o.exports},e8d3:function(e,t,a){"use strict";a("09dc")},e932:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.getList,onReset:e.getList}}),t("el-card",[t("div",{staticClass:"body"},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div",[e.$_has(e.addCode)?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新增")]):e._e()],1)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch},scopedSlots:e._u([{key:"clienteleType",fn:function(t){var a=t.scope;return[e._v(" "+e._s(1==a.row.clienteleType?"企业":"个人")+" ")]}},{key:"depositType",fn:function(t){var a=t.scope;return[e._v(" "+e._s(e.selectType(a.row.depositType,e.depositList))+" ")]}},{key:"refundStatus",fn:function(t){var a=t.scope;return[e._v(" "+e._s(e.selectType(a.row.refundStatus,e.refundStatusList))+" ")]}},{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleView(i.row)}}},[e._v("查看")]),2!=i.row.settleStatus?t("span",[e.$_has(e.editCode)&&1==i.row.refundStatus?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.editCode)&&1==i.row.refundStatus?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleEdit(i.row)}}},[e._v("编辑")]):e._e(),e.$_has(e.addReceiptCode)&&i.row.payeeName&&3!==i.row.refundStatus?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.addReceiptCode)&&i.row.payeeName&&3!==i.row.refundStatus?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleReceipt(i.row)}}},[e._v("收据")]):e._e(),e.$_has(e.addRefundCode)&&3!==i.row.refundStatus?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.addRefundCode)&&3!==i.row.refundStatus?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.refundClick(i.row)}}},[e._v("退还")]):e._e(),e.$_has(e.delCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.delCode)?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDel(i.row.id)}}},[e._v("删除")]):e._e()],1):e._e()]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)]),t("formDialog",{attrs:{opt:e.formOpt,enterParams:e.currentData},on:{refresh:e.getList},model:{value:e.formDiaShow,callback:function(t){e.formDiaShow=t},expression:"formDiaShow"}}),t("refundFormDialog",{attrs:{opt:"add",enterParams:e.currentData},on:{refresh:e.getList},model:{value:e.refundFormDiaShow,callback:function(t){e.refundFormDiaShow=t},expression:"refundFormDiaShow"}}),t("IssueReceiptDialog",{attrs:{contractInfo:e.curContractInfo,billId:e.curContractInfo&&e.curContractInfo.id,receiptType:2,type:e.curType},on:{success:e.getList},model:{value:e.showReceipt,callback:function(t){e.showReceipt=t},expression:"showReceipt"}}),t("MoreReceipt",{attrs:{dataList:e.rowData},model:{value:e.showMoreReceipt,callback:function(t){e.showMoreReceipt=t},expression:"showMoreReceipt"}})],1)],1)},n=[],r=(a("b680"),a("d3b7"),a("b887")),s=a("0002"),l=a("7602"),o=a("53ba"),c=a("1d8b"),d=a("33a1"),u=a("2934"),m=a("71a6"),f={components:{formDialog:s["default"],refundFormDialog:r["default"],IssueReceiptDialog:d["a"],MoreReceipt:c["a"]},mixins:[o["a"]],data:function(){return{addReceiptCode:["adm:finance:receiptAdd"],addCode:["adm:finance:deposit:add"],addRefundCode:["adm:finance:deposit:addRefund"],editCode:["adm:finance:deposit:edit"],delCode:["adm:finance:deposit:del"],formDiaShow:!1,formOpt:"",refundFormDiaShow:!1,currentData:{},loading:!1,listData:[],total:0,columns:[{name:"所属园区",desc:"areaName"},{name:"押金编号",desc:"depositNo"},{name:"客户名称",desc:"clienteleName"},{name:"客户类型",desc:"clienteleType",slotName:"clienteleType"},{name:"合同编号",desc:"contractNo"},{name:"收款方",desc:"payeeName"},{name:"押金类型",desc:"depositType",slotName:"depositType"},{name:"押金总额(元)",desc:"money",format:!0},{name:"已退金额(元)",desc:"refundMoney",format:!0},{name:"未退金额(元)",desc:"money,refundMoney",filter:function(e,t){return(t[e[0]]-t[e[1]]).toFixed(2)}},{name:"押金状态",desc:"refundStatus",slotName:"refundStatus"},{name:"结算状态",desc:"settleStatus",filter:function(e){return 2==e?"结算中":3==e?"已结算":void 0}},{name:"操作",slotName:"action",fixed:"right",width:230}],colModel:[{columnId:"areaId",displayName:"所属项目",placeholder:"请选择所属项目",searchType:"select",labelName:"areaName",valueName:"areaId",options:[]},{columnId:"depositType",displayName:"押金类型",placeholder:"请选择押金类型",searchType:"select",labelName:"name",valueName:"code",options:[]},{columnId:"payeeName",displayName:"收款方",placeholder:"请输入收款方名称",searchType:"input"},{columnId:"clienteleName",displayName:"客户名称",placeholder:"请输入客户名称",searchType:"input"},{columnId:"refundStatus",displayName:"押金状态",placeholder:"请选择押金状态",searchType:"select",labelName:"label",valueName:"id",options:[{label:"未退款",id:"1"},{label:"部分退款",id:"2"},{label:"已退还",id:"3"}]},{columnId:"clienteleType",displayName:"客户类型",placeholder:"请选择客户类型",searchType:"select",labelName:"label",valueName:"id",options:[{label:"企业",id:"1"},{label:"个人",id:"2"}]}],queryParams:{pageNum:1,pageSize:10},depositList:[],refundStatusList:[{name:"未退款",code:1},{name:"部分退款",code:2},{name:"已退还",code:3}],showReceipt:!1,curType:"view",curContractInfo:{},rowData:[],showMoreReceipt:!1}},created:function(){var e=this;this.getDicts({code:"deposit_type"}).then((function(t){0==t.code&&(e.depositList=t.data.items||[],e.colModel[1].options=e.depositList)}))},methods:{handleReceipt:function(e){var t=this;if(console.log("handleReceipt",e),this.curType=e.receiptHisAmt==e.money?"view":"edit","view"==this.curType){var a={pageSize:20,pageNum:1,receiptType:2};a["boundId"]=e.id,a["status"]=1,Object(m["e"])(a).then((function(e){0==e.code&&(t.rowData=e.data.items,t.showMoreReceipt=!0)}))}else this.curContractInfo=e,this.showReceipt=!0},selectType:function(e,t){return u["a"].selectType(e,t)},getList:function(e){this.queryParams.pageNum=1,this.handleSearch(e||{})},handleSearch:function(e){var t=this;e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);this.loading=!0,Object(l["d"])(a).then((function(e){0===e.code?(t.listData=e.data.items,t.total=e.data.total):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},handleAdd:function(){this.formOpt="add",this.formDiaShow=!0},handleEdit:function(e){this.formOpt="edit",this.currentData=e,this.formDiaShow=!0},handleView:function(e){this.formOpt="view",this.currentData=e,this.formDiaShow=!0},handleDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(l["b"])({id:e}).then((function(e){if(0===e.code){t.$message.success("删除成功");var a=t.queryParams,i=a.pageNum,n=a.pageSize;1!=i&&t.total==(i-1)*n+1&&(i-=1),t.handleSearch({pageNum:i})}else t.$message.error(e.msg)})).finally((function(){t.loading=!1}))}))},refundClick:function(e){this.currentData=e,this.refundFormDiaShow=!0}},mounted:function(){this.handleSearch(),this.colModel[0].options=this.areaList}},p=f,h=a("2877"),b=Object(h["a"])(p,i,n,!1,null,null,null);t["default"]=b.exports},eac3:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("ns-search-bar",{attrs:{columns:e.colModel,seachData:e.queryParams},on:{search:e.getList,onReset:e.getList}}),t("el-card",[t("div",{staticClass:"body"},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch},scopedSlots:e._u([{key:"clienteleType",fn:function(t){var a=t.scope;return[e._v(" "+e._s(1==a.row.clienteleType?"企业":"个人")+" ")]}},{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleView(i.row)}}},[e._v("查看")]),t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleEdit(i.row)}}},[e._v("编辑")]),t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDel(i.row.id)}}},[e._v("删除")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}},[e._v('" ')])],1)])]),t("formDialog",{attrs:{opt:e.formDiaOpt,enterParams:e.currentData},on:{refresh:e.getList},model:{value:e.receiptShow,callback:function(t){e.receiptShow=t},expression:"receiptShow"}})],1)},n=[],r=(a("d3b7"),a("b887")),s=a("53ba"),l=a("7602"),o={components:{formDialog:r["default"]},mixins:[s["a"]],data:function(){return{addCode:["adm:finance:deposit:addRefund"],editCode:["adm:finance:deposit:editRefund"],delCode:["adm:finance:deposit:delRefund"],receiptShow:!1,viewDraShow:!1,currentData:{},formDiaOpt:"",currentRowId:"",loading:!1,listData:[],total:0,columns:[{name:"押金编号",desc:"depositNo"},{name:"所属园区",desc:"areaName"},{name:"客户名称",desc:"clienteleName"},{name:"客户类型",desc:"clienteleType",slotName:"clienteleType"},{name:"合同编号",desc:"contractNo"},{name:"已退金额",desc:"refund",format:!0},{name:"操作人",desc:"createUserName"},{name:"操作时间",desc:"createTime"},{name:"操作",slotName:"action",fixed:"right",width:200}],colModel:[{columnId:"areaId",displayName:"所属项目",placeholder:"请选择所属项目",searchType:"select",labelName:"areaName",valueName:"areaId",options:[]},{columnId:"clienteleType",displayName:"客户类型",searchType:"select",placeholder:"请选择客户类型",labelName:"label",valueName:"id",options:[{label:"企业",id:1},{label:"个人",id:2}]},{columnId:"clienteleName",displayName:"客户名称",placeholder:"请输入客户名称",searchType:"input"}],queryParams:{pageNum:1,pageSize:10}}},methods:{getList:function(e){this.queryParams.pageNum=1,this.handleSearch(e||{})},handleSearch:function(e){var t=this;e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);this.loading=!0,Object(l["h"])(a).then((function(e){0===e.code?(t.listData=e.data.items,t.total=e.data.total):t.$message.error(e.msg)})).finally((function(){t.loading=!1}))},handleAdd:function(){this.currentData=null,this.formDiaOpt="add",this.receiptShow=!0},handleEdit:function(e){this.receiptShow=!0,this.currentData=e,this.formDiaOpt="edit"},handleView:function(e){this.receiptShow=!0,this.currentData=e,this.formDiaOpt="view"},handleDel:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(l["f"])({refundId:e}).then((function(e){if(0===e.code){t.$message.success("删除成功");var a=t.queryParams,i=a.pageNum,n=a.pageSize;1!=i&&t.total==(i-1)*n+1&&(i-=1),t.handleSearch({pageNum:i})}else t.$message.error(e.msg)})).finally((function(){t.loading=!1}))}))}},mounted:function(){this.handleSearch(),this.colModel[0].options=this.areaList}},c=o,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},eb3f:function(e,t,a){"use strict";a("50e8")},ecd2:function(e,t,a){"use strict";a("1767")},ed13:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-card",{staticClass:"mb10",attrs:{shadow:"never"}},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"账单推送配置",name:"First"}})],1),t(e.subComponent,{tag:"component",attrs:{navigator:e.navigator}})],1)],1)},n=[],r=a("6662"),s=a("09bb"),l=a("b5c9"),o={components:{First:r["default"],Second:s["default"],Third:l["default"]},data:function(){return{activeName:"First",subComponent:"First"}},mounted:function(){this.enterParams&&(this.activeName=this.enterParams.activeName||"First",this.subComponent=this.enterParams.activeName||"First")},methods:{navigator:function(e,t){this.forward(e,t)},handleClick:function(){this.subComponent=this.activeName}}},c=o,d=(a("67de"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"f3125ec0",null);t["default"]=u.exports},ed70:function(e,t,a){"use strict";a("403b")},eddf:function(e,t,a){},ef2b:function(e,t,a){"use strict";a("315d")},ef3c:function(e,t,a){"use strict";a.r(t);a("ac1f"),a("5319");var i,n,r={created:function(){var e=this.$route,t=e.params,a=e.query,i=t.path;this.$router.replace({path:"/"+i,query:a})},render:function(e){return e()}},s=r,l=a("2877"),o=Object(l["a"])(s,i,n,!1,null,null,null);t["default"]=o.exports},f036:function(e,t,a){},f186:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.vis,width:"480px","show-close":!1},on:{"update:visible":function(t){e.vis=t}}},[t("div",{staticStyle:{"background-color":"#fdf6ec","align-items":"center","flex-direction":"column","justify-content":"center",display:"flex",padding:"10px 0",margin:"0 10px"}},[t("i",{staticClass:"el-icon-warning-outline",staticStyle:{"font-size":"80px",color:"#e6a23c","font-weight":"bold",padding:"20px 0"}}),t("div",{staticStyle:{color:"#e6a23c","font-size":"20px"}},[t("span",[e._v("确定要对以下账单进行"),t("B",[e._v(" "+e._s(e.isPush?"催缴":"结清")+" ")]),e._v("操作吗?")],1)]),t("div",{staticStyle:{"line-height":"28px",color:"#f56c6c","padding-right":"40px","font-size":"16px"}},[t("ul",e._l(this.dataSource,(function(a){return t("li",{key:a.id},[e._v(" "+e._s(a.billCode)+" ")])})),0)])]),e.allClear||e.isPush?e._e():t("div",{staticStyle:{padding:"20px","box-sizing":"border-box"}},[e._v(" 收款金额："),t("el-input-number",{staticStyle:{width:"80%"},attrs:{size:"mini",max:e.maxMoney,controls:!1,placeholder:"请输入收款金额"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}},[t("template",{slot:"append"},[e._v("元")])],2)],1),t("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[t("div"),t("div",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSubmit}},[e._v(e._s(e.isPush?"催缴":"收款"))]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.vis=!1}}},[e._v("取消")])],1)])])},n=[],r=(a("d81d"),a("b680"),a("d3b7"),a("159b"),a("376f")),s=a("b472"),l={props:{value:{type:Boolean,required:!0},dataSource:{type:Array,default:function(){return[]}},isPush:{type:Boolean,default:!1},allClear:{type:Boolean,default:!1}},computed:{vis:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{vis:function(e){if(e){var t=0;this.dataSource.forEach((function(e){t=+(+(e.pendingAmt||0)+t).toFixed(2)})),this.amount=t,this.maxMoney=t,this.collectLateAmt=!1}}},data:function(){return{maxMoney:0,collectLateAmt:!1,amount:null}},methods:{handleSubmit:function(){var e=this;if(this.isPush)Object(s["g"])(this.dataSource.map((function(e){return e.id}))).then((function(t){0==t.code&&(e.$message.success("催缴成功"),e.$emit("success"),e.vis=!1)}));else{var t=this.allClear||this.maxMoney==this.amount,a={ids:this.dataSource.map((function(e){return e.id})),collectLateAmtType:this.collectLateAmt?0:1,allClear:t,amount:t?null:this.amount};Object(r["d"])(a).then((function(a){0===a.code?(e.$message.success(t?"账单已结清":"付款成功"),e.$emit("success"),e.vis=!1):e.$message.error(a.msg)}))}}}},o=l,c=(a("498c"),a("2877")),d=Object(c["a"])(o,i,n,!1,null,"8048a45c",null);t["default"]=d.exports},f387:function(e,t,a){"use strict";a.r(t);var i=a("8468"),n=function(){var e=this,t=e._self._c;return t("ns-table",{ref:"bxzTable",attrs:{data:e.data,columns:e.columns,align:"center",isShowPagination:!1,highlightCurrentRow:!1,border:""},on:{editInput:e.editInput},scopedSlots:e._u([{key:"action",fn:function(a){return Object(i["a"])(a),[t("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v("删除")])]}}])})},r=[],s=(a("c23a"),{props:{data:{type:Array,default:function(){return[]}}},data:function(){return{initRow:{itemId:"",qty:1,price:0},columns:[{name:"收费项目",desc:"itemName"},{name:"数量",desc:"qty",edit:!0,editType:"input",disabFilter:function(e){return 0==e.qtyFlag}},{name:"单价(元)",desc:"price",format:!0},{name:"操作",slotName:"action"}]}},methods:{rowDel:function(e){},editInput:function(e,t){}}}),l=s,o=a("2877"),c=Object(o["a"])(l,n,r,!1,null,null,null);t["default"]=c.exports},f482:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-card",{staticClass:"mb10",attrs:{shadow:"never"}},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"催收通知开关",name:"First"}}),t("el-tab-pane",{attrs:{label:"催收推送时间",name:"PushTimePanel"}}),t("el-tab-pane",{attrs:{label:"催收消息设置",name:"Second"}})],1),t(e.subComponent,{tag:"component",attrs:{navigator:e.navigator}})],1)],1)},n=[],r=a("a3d6"),s=a("b4bf"),l=a("3b0a"),o={props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},components:{First:r["default"],Second:s["default"],PushTimePanel:l["default"]},data:function(){return{activeName:"First",subComponent:"First"}},mounted:function(){this.enterParams&&(this.activeName=this.enterParams.activeName||"First",this.subComponent=this.enterParams.activeName||"First")},methods:{navigator:function(e,t){this.forward(e,t)},handleClick:function(){this.subComponent=this.activeName}}},c=o,d=(a("1c10"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"736b4c63",null);t["default"]=u.exports},f483:function(e,t,a){},f52d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"settle-installation-panel settle-panel"},[t("div",{staticClass:"text-title item-title"},[e._v("设施确认（确认入驻时配套设施是否完好）")]),t("div",{staticClass:"item-table"},[t("el-table",{attrs:{data:e.source,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{prop:"spaceCode",label:"所属房源"}}),t("el-table-column",{attrs:{prop:"installationName",label:"配套设施"}}),t("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:a.row.qty,callback:function(t){e.$set(a.row,"qty",t)},expression:"scope.row.qty"}}):t("span",[e._v(" "+e._s(a.row.qty)+" ")])]}}])}),t("el-table-column",{attrs:{label:"是否完好"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":1,"inactive-value":0},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}}):t("span",[e._v(" "+e._s(1===a.row.status?"是":"否")+" ")])]}}])}),t("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.editMode?t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注"},model:{value:a.row.remark,callback:function(t){e.$set(a.row,"remark",t)},expression:"scope.row.remark"}}):t("span",[e._v(" "+e._s(a.row.remark)+" ")])]}}])})],1)],1)])},n=[],r={props:{source:{type:Array,default:function(){return[]}},editMode:{type:Boolean,default:!1}}},s=r,l=(a("af08"),a("2877")),o=Object(l["a"])(s,i,n,!1,null,"4c3ad6a5",null);t["default"]=o.exports},f67d:function(e,t,a){},f75c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-tabs",{on:{"tab-click":e.tabChange},model:{value:e.payStatus,callback:function(t){e.payStatus=t},expression:"payStatus"}},[t("el-tab-pane",{attrs:{label:"应收费项",name:"1"}}),t("el-tab-pane",{attrs:{label:"已收费项",name:"2"}}),t("el-tab-pane",{attrs:{label:"未收费项",name:"0"}}),t("div",{staticClass:"stati-box"},[t("div",{staticClass:"pie-box"},[t("PieChart",{ref:"pieChart",attrs:{data:e.pieData}})],1),t("div",{staticClass:"list-box"},[t("div",{staticClass:"title"},[e._v("未按时缴款房源")]),t("el-button",{staticClass:"more",attrs:{type:"text"},on:{click:function(t){return e.moveTo("/propertyCenter/finance/urge")}}},[e._v("更多...")]),e._l(e.roomList,(function(a){return t("div",{key:a.billId,staticClass:"item"},[t("div",{staticClass:"label"},[e._v(e._s(a.roomNum))]),t("div",{staticClass:"value"},[e._v(e._s(a.reaAmount))])])}))],2)])],1)},n=[],r=a("9cbe"),s=a("b472"),l={components:{PieChart:r["default"]},data:function(){return{payStatus:"1",roomList:[],pieData:[]}},methods:{resize:function(){this.$refs.pieChart.resize()},tabChange:function(){this.$emit("tabChange","1"==this.payStatus?"":this.payStatus)},moveTo:function(e){this.$router.push(e)}},mounted:function(){var e=this;Object(s["b"])({pageNum:1,pageSize:7}).then((function(t){0===t.code?e.roomList=t.data.items:e.$message.error(t.msg)}))}},o=l,c=(a("ba00"),a("2877")),d=Object(c["a"])(o,i,n,!1,null,"80977c18",null);t["default"]=d.exports},f7af:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tabel-container"},[t("div",{staticStyle:{display:"flex",background:"#fff",padding:"8px"}},[t("el-tabs",{attrs:{activeName:"first"}},[t("el-tab-pane",{attrs:{label:"查看结算单",name:"first"}},[t("settleView",{attrs:{"form-data":e.formData}}),t("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t("el-button",{attrs:{type:"info",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1)],1),10!==e.formData.status?t("el-tab-pane",{attrs:{label:"流程记录",name:"second"}},[t("WorkFlowView",{attrs:{procInsId:e.formData.procInsId}}),t("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t("el-button",{attrs:{type:"info",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1)],1):e._e()],1)],1)])},n=[],r=(a("d3b7"),a("c4ff")),s=a("ce80"),l={components:{settleView:r["default"]},props:{forward:Function,enterParams:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,formData:{contractId:"",contractNo:"",cusName:"",settleDate:"",opDeposit:!0,subjectMatterType:1,settleArRecordList:[],settleApRecordList:[],settleBillDetailVoList:[],settleBillList:[],settleDepositList:[],settleFeeRecordList:[],settleInstallationRecordList:[],settleMeterEnergyList:[]},compShow:!1,open:!0,taskForm:{}}},mounted:function(){this.initData()},methods:{clearForm:function(){this.formData={contractId:"",contractNo:"",cusName:"",settleDate:"",subjectMatterType:1,settleFeeRecordList:[],settleMeterEnergyList:[],settleArRecordList:[],settleApRecordList:[],settleInstallationRecordList:[]}},goBack:function(){this.clearForm(),"subBill"==this.enterParams.opt?this.forward("subBill",{id:this.enterParams.cusId}):this.forward("List")},handleSelect:function(){this.compShow=!0},initData:function(){var e=this;this.loading=!0;var t=null;t=("before"==this.enterParams.opt||"after"==this.enterParams.opt||this.enterParams.opt,{id:this.enterParams.rowId,byContract:!1}),t["payeeId"]=this.enterParams["payeeId"]||null,Object(s["c"])(t).then((function(t){0==t.code&&(e.formData=t.data)})).finally((function(){e.loading=!1}))}}},o=l,c=(a("d2b8"),a("2877")),d=Object(c["a"])(o,i,n,!1,null,"8efb1b06",null);t["default"]=d.exports},f7eb:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return e.refresh?t("el-dialog",{attrs:{id:"size","append-to-body":"",title:"选择合同",visible:e.isShow,width:"1000px",top:"20px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"queryForm",staticClass:"mb10",attrs:{inline:!0,model:e.queryParams,size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"合同分类"}},[t("el-select",{attrs:{size:"small"},on:{change:function(t){return e.handleQuery()}},model:{value:e.contractType,callback:function(t){e.contractType=t},expression:"contractType"}},e._l(e.typeOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"合同编号",prop:"contractNo"}},[t("el-input",{staticClass:"inputWidth",attrs:{placeholder:"请输入合同编号",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery()}},model:{value:e.queryParams["contractNo"],callback:function(t){e.$set(e.queryParams,"contractNo",t)},expression:"queryParams['contractNo']"}})],1),1==e.contractType?t("el-form-item",{attrs:{label:"客户名称",prop:"applyUserRealNameLike"}},[t("el-input",{staticClass:"inputWidth",attrs:{placeholder:"请输入客户名称",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery()}},model:{value:e.queryParams["applyUserRealNameLike"],callback:function(t){e.$set(e.queryParams,"applyUserRealNameLike",t)},expression:"queryParams['applyUserRealNameLike']"}})],1):t("el-form-item",{attrs:{label:"客户名称",prop:"entNameLike"}},[t("el-input",{staticClass:"inputWidth",attrs:{placeholder:"请输入客户名称",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery()}},model:{value:e.queryParams["entNameLike"],callback:function(t){e.$set(e.queryParams,"entNameLike",t)},expression:"queryParams['entNameLike']"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.handleQuery()}}},[e._v("搜索")]),t("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.handleRefresh}},[e._v("重置")])],1)],1)],1),t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"selectMultipleTable",attrs:{data:e.dataList,"row-key":"id"},on:{"row-click":e.handleSingleSelected}},[t("el-table-column",{attrs:{label:"",width:"30",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:a.row.id},model:{value:e.selectedUserId,callback:function(t){e.selectedUserId=t},expression:"selectedUserId"}})]}}],null,!1,4129568078)}),t("el-table-column",{attrs:{prop:"contractNo",label:"合同编号",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"entName",label:"客户姓名",align:"center"}}),t("el-table-column",{attrs:{prop:"startTime",label:"开始日期",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"contact",label:"联系人",align:"center"}}),t("el-table-column",{attrs:{prop:"phone",label:"联系电话",align:"center"}})],1),t("ns-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保 存")])],1)],1):e._e()},n=[],r=(a("d81d"),a("0a20")),s={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,isShow:!1,refresh:!0,typeOption:[{label:"公寓合同",value:"1"},{label:"企业合同",value:"2"}],queryParams:{pageNum:1,pageSize:20,applyUserRealNameLike:null,entNameLike:null,contractNo:null,statusIn:[40,60],settleStatus:0,suspendStatus:0,settleInStatus:30},contractType:"1",total:0,dataList:[],selectedUserId:"",selectedRow:{}}},watch:{value:function(e){this.isShow=e,e&&(this.refresh=!0,this.handleQuery())},isShow:function(e){this.$emit("input",e)}},methods:{hide:function(){this.selectedRow={},this.selectedUserId="",this.refresh=!1,this.isShow=!1},handleRefresh:function(){this.resetForm("queryForm"),this.handleQuery()},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0;var t=function(t){e.loading=!1,0===t.code&&(e.total=t.data.total,"1"===e.contractType?e.dataList=t.data.items.map((function(e){return{id:e.id,contractNo:e.contractNo,entName:e.applyUserRealName,startTime:e.startTime,contact:e.applyUserRealName,phone:e.applyUserPhone}})):e.dataList=t.data.items)};"1"===this.contractType?Object(r["a"])(this.queryParams).then(t).catch((function(){e.loading=!1})):Object(r["b"])(this.queryParams).then(t).catch((function(){e.loading=!1}))},handleSingleSelected:function(e){this.selectedRow={contractId:e.id,contractNo:e.contractNo,cusName:e.entName,earnestAmount:e.earnestAmount||0,contractType:this.contractType}},handleSubmit:function(){this.selectedUserId?(this.$emit("getData",this.selectedRow),this.hide()):this.$alert("请选择合同!","提醒",{confirmButtonText:"确定"})}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,"2a8ad159",null);t["default"]=c.exports},f817:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container activeBox"},[t("bar",{attrs:{columns:e.colModel,seachData:e.queryParams,autoFixPosition:!0},on:{search:e.handleSearch,showDate:e.showDate,onReset:e.handleReset}}),t("el-card",{staticStyle:{"margin-bottom":"10px",padding:"10px"},attrs:{shadow:"never"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("div",{staticClass:"stati-label"},[e._v("应收（"+e._s(e.formData.receivableNum)+"笔）")]),t("div",{staticClass:"stati-value"},[e._v(e._s(e.formData.receivableAmtSum))])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"stati-label",class:{activelabel:1==e.queryParams.isAdjustBill},staticStyle:{cursor:"pointer"},on:{click:e.handleSearchBill}},[e._v(" 调整 ")]),t("div",{staticClass:"stati-value activelabel",staticStyle:{cursor:"pointer"},on:{click:e.handleSearchBill}},[e._v(" "+e._s(e.formData.adjAmt||"0.00")+" ")])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"stati-label"},[e._v("已收")]),t("div",{staticClass:"stati-value"},[e._v(e._s(e.formData.receiptAmtSum))])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"stati-label"},[e._v("待收")]),t("div",{staticClass:"stati-value"},[e._v(e._s(e.formData.pendingAmtSum))])])],1)],1),t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"mb-10 tool-rows"},[t("span",[e._v(" 共 "),t("span",{staticClass:"text-blue"},[e._v(e._s(e.total))]),e._v(" 条 ")]),t("div",{staticStyle:{display:"flex"}},[e.$_has(e.receiptCode)?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSettle}},[e._v("一键结清")]):e._e(),t("el-dropdown",{staticStyle:{"margin-left":"10px"},on:{command:e.handleExport}},[e.$_has(e.expCode)?t("el-button",{attrs:{type:"primary",size:"small"}},[e._v(" 导出"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e(),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"1"}},[e._v("导出所选")]),t("el-dropdown-item",{attrs:{command:"2"}},[e._v("导出全部")])],1)],1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(t){e.checkDiaShow=!0}}},[e._v("自定义表头 ")])],1)]),t("div",{staticClass:"bxz-table-bg"},[t("ns-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bxzTable",attrs:{sort:"",border:"",data:e.listData,columns:e.columns,total:e.total,"page-size":e.queryParams.pageSize,align:"center"},on:{"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},searchList:e.handleSearch,printData:e.changePringData},scopedSlots:e._u([{key:"billSource",fn:function(a){var i=a.scope;return[e._v(" "+e._s(e._f("filterBillSource")(i.row.billSource))+" "),2==i.row.settleStatus||3==i.row.settleStatus?t("div",[e._v(" "+e._s(e._f("filterSettleStatus")(i.row.settleStatus))+" ")]):e._e()]}},{key:"payStatus",fn:function(a){var i=a.scope;return[2===i.row.payStatus?t("el-tag",{attrs:{type:"success"}},[e._v("已缴")]):1===i.row.payStatus?t("el-tag",{attrs:{type:"danger"}},[e._v("欠费")]):0===i.row.payStatus?t("el-tag",{attrs:{type:"danger"}},[e._v("未缴")]):3===i.row.payStatus?t("el-tag",{attrs:{type:"warning"}},[e._v("部分已缴")]):e._e()]}},{key:"roomJoinName",fn:function(a){var i=a.scope;return e._l(i.row.roomJoinName.split(","),(function(a,i){return t("el-tag",{key:i,staticStyle:{width:"100px"},attrs:{size:"mini"}},[e._v(e._s(a))])}))}},{key:"action",fn:function(a){var i=a.scope;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleShow(i.row)}}},[e._v("查看")]),t("span",{directives:[{name:"show",rawName:"v-show",value:2!=i.row.settleStatus&&3!=i.row.settleStatus,expression:"\n              scope.row.settleStatus != 2 && scope.row.settleStatus != 3\n            "}]},[2!=i.row.payStatus&&e.$_has(e.receiptCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),2!=i.row.payStatus&&e.$_has(e.receiptCode)?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirmColl(i.row)}}},[e._v("收款")]):e._e(),2!=i.row.payStatus&&3!=i.row.payStatus||!e.$_has(e.addReceiptCode)?e._e():t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}),2!=i.row.payStatus&&3!=i.row.payStatus||!e.$_has(e.addReceiptCode)?e._e():t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleReceipt(i.row)}}},[e._v("收据")]),e.$_has(e.printReceiptCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),e.$_has(e.printReceiptCode)?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldePrint(i.row)}}},[e._v("通知单")]):e._e(),i.row.payStatus<2&&2!=i.row.billSource&&e.$_has(e.reviewAgainCode)?t("div",{staticClass:"el-divider el-divider--vertical",attrs:{direction:"vertical"}}):e._e(),i.row.payStatus<2&&2!=i.row.billSource&&e.$_has(e.reviewAgainCode)?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleReviewAgain(i.row)}}},[e._v("重新复核")]):e._e()],1)]}},{key:"lateDate_",fn:function(a){var i=a.scope;return[t("span",[e._v(" "+e._s(i.row.payStatus<2?e.filterDateDiff(i.row.lateDate):"-")+" ")])]}}]),model:{value:e.queryParams.pageNum,callback:function(t){e.$set(e.queryParams,"pageNum",t)},expression:"queryParams.pageNum"}})],1)]),t("CheckDialog",{attrs:{checkList:e.allColumns,label:"name",title:"切换表格显示字段"},on:{save:e.checkColumnSave},model:{value:e.checkDiaShow,callback:function(t){e.checkDiaShow=t},expression:"checkDiaShow"}}),t("el-dialog",{attrs:{visible:e.isShowDate,width:"50%",center:""},on:{"update:visible":function(t){e.isShowDate=t}}},[t("div",{staticClass:"diabox"},[t("div",{staticClass:"date"},[t("i",{staticClass:"el-icon-arrow-left",on:{click:e.delYear}}),t("span",[e._v(e._s(e.year))]),t("i",{staticClass:"el-icon-arrow-right",on:{click:e.addYear}})]),t("div",{staticClass:"datelist"},e._l([1,2,3,4,5,6,7,8,9,10,11,12],(function(a,i){return t("div",{key:i,staticClass:"dateitem"},[t("div",{staticClass:"title"},[e._v(e._s(i+1)+"月")]),t("div",{staticClass:"flex"},[t("div",[e._v("未缴账单")]),t("div",[e._v("0")])]),t("div",{staticClass:"flex"},[t("div",[e._v("欠缴账单")]),t("div",[e._v("0")])]),t("div",{staticClass:"flex"},[t("div",[e._v("已缴账单")]),t("div",[e._v("0")])])])})),0)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isShowDate=!1}}},[e._v("关闭")])],1)]),t("el-dialog",{attrs:{visible:e.showReviewAgain,width:"50%","custom-class":"borderDialog",title:"重新复核"},on:{"update:visible":function(t){e.showReviewAgain=t}}},[t("div",[t("div",{staticClass:"flexBox"},[t("div",{staticStyle:{"font-size":"16px","font-weight":"600"}},[e._v(" "+e._s(e.curRow.cusName)+" ")]),t("div",[e._v("合同："+e._s(e.curRow.contractNo))]),t("div",[e._v("账期："+e._s(e.curRow.billDate))])]),e.curRow.spaceCodes?t("div",{staticStyle:{padding:"10px 0"}},e._l(e.curRow.spaceCodes.split(","),(function(a,i){return t("el-tag",{key:i},[e._v(e._s(a))])})),1):e._e(),t("div",[t("el-input",{attrs:{type:"textarea",placeholder:"请输入重新复核原因",maxlength:"150","show-word-limit":""},model:{value:e.reviewRemark,callback:function(t){e.reviewRemark=t},expression:"reviewRemark"}})],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.showReviewAgain=!1}}},[e._v("关闭")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmReviewAgain}},[e._v("确 定")])],1)]),t("receiptDialog",{attrs:{allClear:e.allClear,dataSource:e.receiptList,isPush:e.isPush},on:{success:e.getList},model:{value:e.visReceiptDialog,callback:function(t){e.visReceiptDialog=t},expression:"visReceiptDialog"}}),t("IssueReceiptDialog",{attrs:{contractInfo:e.curContractInfo,billId:e.curContractInfo&&e.curContractInfo.id,receiptType:1,type:e.curType},on:{success:e.getList},model:{value:e.showReceipt,callback:function(t){e.showReceipt=t},expression:"showReceipt"}}),t("BillDetail",{attrs:{type:e.curType,billDate:e.curContractInfo&&e.curContractInfo.billDate,billId:e.curContractInfo&&e.curContractInfo.id},model:{value:e.showBill,callback:function(t){e.showBill=t},expression:"showBill"}}),t("MoreReceipt",{attrs:{dataList:e.rowData},model:{value:e.showMoreReceipt,callback:function(t){e.showMoreReceipt=t},expression:"showMoreReceipt"}})],1)},n=[],r=a("2909"),s=(a("4de4"),a("d81d"),a("e9c4"),a("b680"),a("b64b"),a("d3b7"),a("498a"),a("c1df")),l=a.n(s),o=a("376f"),c=a("b472"),d=a("2002"),u=a("f186"),m=a("53ba"),f=a("5089"),p=a("2a82"),h=a("33a1"),b=a("1d8b"),v=a("39cc"),g=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.vis,title:"账单详情","custom-class":"borderDialog","show-close":!1},on:{"update:visible":function(t){e.vis=t}}},[t("div",[e.billDetail.energyMeterHisList&&e.billDetail.energyMeterHisList.length>0&&e.isEdit?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{padding:"10px 0"}},[e._v(" 水电明细："),t("el-switch",{on:{change:e.changeShowEnergy},model:{value:e.billDetail.energyMeter,callback:function(t){e.$set(e.billDetail,"energyMeter",t)},expression:"billDetail.energyMeter"}})],1):e._e(),e.billDetail.sealPic&&e.isEdit?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{padding:"10px 0"}},[e._v(" 加盖印章："),t("el-switch",{model:{value:e.billDetail.seal,callback:function(t){e.$set(e.billDetail,"seal",t)},expression:"billDetail.seal"}})],1):e._e(),t("div",{staticStyle:{border:"1px solid #f5f5f5","margin-bottom":"10px"}},[t("div",{ref:"pdfContent",class:{isPrint:!e.isEdit},staticStyle:{color:"#000"},attrs:{id:"BillBox"}},[t("div",{staticClass:"printPage"},[t("div",{staticClass:"firstTitle"},[t("div",{staticStyle:{"text-align":"center",position:"relative"}},[t("span",{staticStyle:{"font-size":"24px","line-height":"28px","font-weight":"600"}},[e._v(" "+e._s(e.billDetail.payeeName)+" "+e._s(2==e.billDetail.billSource?"结算通知单":"收费通知单")+" ")])]),t("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"10px 0"}},[t("span",[e._v("客户名称："+e._s(e.billDetail.cusName))]),t("span",[e._v(" "+e._s(2==e.billDetail.billSource?"结算日期":"打印日期：")+" "+e._s(e.moment(new Date).format("YYYY-MM-DD"))+" ")])]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v(" 房间代码： "+e._s(e.billDetail.spaceCodes)+" ")]),t("table",{staticStyle:{"border-collapse":"collapse","text-align":"center"},attrs:{border:"1"}},[t("tr",[t("td",{staticStyle:{padding:"5px"}},[e._v("缴费项目")]),t("td",{staticStyle:{padding:"5px"},attrs:{colspan:"2"}},[e._v("计费期间")]),t("td",{staticStyle:{padding:"5px"}},[e._v("应交合计（元）")])]),e._l(e.billDetail.detailList,(function(a,i){return t("tr",{key:i},[t("td",{staticStyle:{padding:"5px"}},[e._v(e._s(a.itemName))]),t("td",{staticStyle:{padding:"5px"}},[e._v(e._s(a.billPeriodStart))]),t("td",{staticStyle:{padding:"5px"}},[e._v(e._s(a.billPeriodEnd))]),t("td",{staticStyle:{padding:"5px"}},[e._v(" "+e._s(a.receivableTaxAmt.toFixed(2))+" ")])])})),t("tr",[t("td",{staticStyle:{padding:"5px","text-align":"left"},attrs:{colspan:"3"}},[e._v(" 合计金额小写： ")]),t("td",{staticStyle:{padding:"5px"}},[e._v(e._s(e.totalMoney()))])]),t("tr",[t("td",{staticStyle:{padding:"5px","text-align":"left"}},[e._v("合计金额大写：")]),t("td",{staticStyle:{padding:"5px","text-align":"left"},attrs:{colspan:"3"}},[e._v(" "+e._s(e.dealBigMoney(e.totalMoney()))+" ")])]),t("tr",[t("td",{staticStyle:{padding:"5px","text-align":"left"},attrs:{colspan:"4"}},[e._v(" 备注： ")])]),t("tr",{staticStyle:{height:"155px","min-height":"4.5cm"}},[t("td",{staticStyle:{padding:"5px","text-align":"left"},attrs:{colspan:"3"}},[e.isEdit?e._e():t("div",{staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word",width:"100%",height:"80px","min-height":"80px"},domProps:{innerHTML:e._s(e.billDetail["remark"])}}),e.isEdit?t("el-input",{staticStyle:{width:"100%",height:"80px","min-height":"80px"},attrs:{resize:"none",autosize:{minRows:3,maxRows:3},maxlength:"200",type:"textarea"},model:{value:e.billDetail["remark"],callback:function(t){e.$set(e.billDetail,"remark",t)},expression:"billDetail['remark']"}}):e._e(),t("div",{staticStyle:{"padding-top":"5px"}},[e._v(" 公司名称： "+e._s(e.billDetail.payeeName)+" ")]),t("div",{staticStyle:{padding:"5px 0"}},[e._v(" 银行账号： "+e._s(e.billDetail.bankNo)+" ")]),t("div",[e._v("开户银行： "+e._s(e.billDetail.bank))])],1),t("td",{staticStyle:{"min-width":"4.7cm",width:"4.7cm"}},[this.billDetail&&this.billDetail.sealPic?t("div",{staticStyle:{"min-width":"4.7cm","min-height":"4.7cm",position:"relative"}},[e.returnSrc?t("el-image",{staticStyle:{width:"4.7cm",height:"4.7cm",position:"absolute",bottom:"0",right:"0"},attrs:{src:e.returnSrc,fit:"cover"}}):e._e()],1):e._e()])])],2),e.billDetail.energyMeterHisList&&e.billDetail.energyMeterHisList.length>0&&e.billDetail.energyMeter?t("div",{staticStyle:{margin:"20px 0 0"}},[e._v(" 注：水电明细表 ")]):e._e()]),e.billDetail.energyMeterHisList&&e.billDetail.energyMeterHisList.length>0?t("table",{staticClass:"energyBox energyShow",staticStyle:{"border-collapse":"collapse","text-align":"center"},attrs:{border:"1"}},[t("tr",[t("td",{staticStyle:{padding:"5px"}}),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v("上月读数")]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v("本月读数")]),t("td",{staticStyle:{width:"60px",padding:"5px"}},[e._v("倍率")]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v("用量")]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v("单价（元）")]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v("合计（元）")])]),e._l(e.billDetail.energyMeterHisList,(function(a,i){return t("tr",{key:i+1,class:i+1+"item"},[t("td",{class:"tdItem"+i+201,staticStyle:{padding:"5px"}},[e._v(" "+e._s(a.meterName)+" ")]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v(" "+e._s(2==a.property?"":a.preMete)+" ")]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v(" "+e._s(2==a.property?"":a.recordMete)+" ")]),t("td",{staticStyle:{width:"60px",padding:"5px"}},[e._v(" "+e._s(a.multiplyRate||1)+" ")]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v(e._s(a.publicAmt))]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v(e._s(a.unitPrice))]),t("td",{staticStyle:{width:"110px",padding:"5px"}},[e._v(" "+e._s(a.publicPrice)+" ")])])}))],2):e._e()])])])]),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-button",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],staticStyle:{display:"none"},attrs:{id:"printBtn2"}},[e._v("打印")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.vis=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSubmit("download")}}},[e._v("下载")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSubmit("print")}}},[e._v("打印")])],1)])])},y=[],w=a("c7eb"),x=a("1da1"),D=(a("ace4"),a("ac1f"),a("3ca3"),a("466d"),a("5319"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("159b"),a("ddb0"),a("5f87")),_=a("c0e9"),S=a.n(_),k=a("8baf"),N=a("0b2d"),C={props:{value:{type:Boolean,required:!0},billId:{type:String,default:""},billDate:{type:String},type:{type:String,default:"view"}},computed:{vis:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},returnSrc:function(){return this.billDetail&&this.billDetail.sealPic&&this.billDetail.sealPic.id&&this.billDetail.seal?"/prod-api/adm-service/system/file/image?fileId="+this.billDetail.sealPic.id+"&token="+Object(D["d"])():null}},watch:{vis:function(e){e&&(this.remark=null,this.loading=!1,this.billDetail={detailList:[],energyMeterHisList:[]},this.pdfTempDetail={},"edit"==this.type?(this.isEdit=!0,this.beforeEdit=!0):(this.isEdit=!1,this.beforeEdit=!1),this.getDatil())}},data:function(){return{isEdit:!0,beforeEdit:!0,loading:!1,printObj:{id:"#BillBox",popTitle:"账单",closeCallback:this.openBack},billDetail:{detailList:[],energyMeterHisList:[],seal:!0,remark:null,energyMeter:!0,fileId:null},pdfTempDetail:{},curType:null}},methods:{changeShowEnergy:function(){if(this.billDetail.energyMeter){var e=document.getElementsByClassName("energyShow");e.forEach((function(e){e.style.display="inline-table"}))}else{var t=document.getElementsByClassName("energyShow");t.forEach((function(e){e.style.display="none"}))}},totalMoney:function(){var e=0;return this.billDetail.detailList.length>0&&this.billDetail.detailList.forEach((function(t){e+=t.receivableTaxAmt})),e.toFixed(2)},moment:l.a,getDatil:function(){var e=this;Object(o["k"])({billId:this.billId}).then((function(t){t.data?(console.log("getPdf",t),e.pdfTempDetail=t.data,e.billDetail=JSON.parse(t.data.dataJson),e.isEdit=!1,e.beforeEdit=!1,e.$nextTick((function(){e.splicePage()}))):Object(o["x"])({billId:e.billId}).then((function(t){0==t.code&&(e.pdfTempDetail=t.data,e.billDetail=JSON.parse(t.data.dataJson),console.log(e.billDetail),e.$nextTick((function(){e.splicePage()})))}))}))},openBack:function(){this.loading=!1,this.isEdit=this.beforeEdit},splicePage:function(){var e=document.getElementById("BillBox").clientHeight,t=0,a=29;if(e>1040){var i=window.getComputedStyle(document.getElementsByClassName("firstTitle")[0]).height;console.log("firstHeight==>",i),t+=Math.ceil(parseInt(i));var n=document.getElementsByTagName("tr");n.forEach((function(e){if(e.className&&!(e.className&&parseFloat(0+e.className||0)<1)){var i=e.clientHeight;t+=Math.ceil(i||0)||a,t>1040&&(console.log(t,"===>"),t=Math.ceil(i||0)||a,document.getElementById("BillBox").innerHTML=document.getElementById("BillBox").innerHTML.replace(e.innerHTML,'</table></div> <div class="printPage energyShow"> <table  class="newTable"  border="1"  style="border-collapse: collapse; text-align: center;"  >'+e.innerHTML))}}))}},handleDown:function(){var e=this;return Object(x["a"])(Object(w["a"])().mark((function t(){var a,i,n;return Object(w["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=document.getElementsByClassName("printPage"),i=new k["a"]({orientation:"portrait",unit:"px",format:"a4"}),n=[],a.forEach((function(e){return n.push(S()(e,{scale:2,dpi:192,imageQuality:1}))})),t.next=6,Promise.all(n).then((function(t){t.forEach((function(e,t){var n=e.toDataURL("image/jpeg",1),r=i.getImageProperties(n),s=i.internal.pageSize.getWidth(),l=(r.height-40)*s/(r.width-40);i.addImage(n,"JPG",20,20,s-40,l-40),a.length>0&&t<a.length-1&&i.addPage()}));var n=e.convertBase64ToFile(i.output("datauristring"),e.billDetail.cusName+"-"+e.billDetail.payeeName+"-"+(e.billDetail.billDate||e.billDate)+"-收费通知单");e.hanldeUploadFile(n)}));case 6:case"end":return t.stop()}}),t)})))()},hanldeUploadFile:function(e){var t=this,a=new FormData;a.append("busSubType","9033"),a.append("file",e),Object(N["b"])(a).then((function(e){if(0===e.code){t.pdfTempDetail.fileId=e.data.fileId,t.billDetail.fileId=e.data.fileId,t.billDetail["fileName"]=e.data.fileName;var a=JSON.parse(JSON.stringify(t.pdfTempDetail));a["dataJson"]=JSON.stringify(t.billDetail),Object(o["A"])(a).then((function(){t.handleAction()}))}else t.$message.error("开具失败")}))},handleAction:function(){"download"==this.curType?(Object(N["a"])(this.billDetail.fileId||this.pdfTempDetail.fileId,this.billDetail.cusName+"-"+this.billDetail.payeeName+"-"+(this.billDetail.billDate||this.billDate)+"-收费通知单.pdf"),this.$message.success("下载成功"),this.isEdit=this.beforeEdit,this.loading=!1):"print"==this.curType&&document.getElementById("printBtn2").click()},convertBase64ToFile:function(e,t){var a=e.split("base64,"),i=a[0].match(/:(.*?);/)[1],n=i.split("/")[1],r=atob(a[1]),s=r.length,l=new Uint8Array(s);while(s--)l[s]=r.charCodeAt(s);return new File([l],t+"."+n,{type:i})},handleSubmit:function(e){var t=this;this.loading=!0,this.isEdit=!1,this.$forceUpdate(),this.curType=e,this.billDetail.fileId?this.handleAction():setTimeout((function(){t.handleDown()}),300)}}},I=C,P=(a("9222"),a("30a2"),a("2877")),L=Object(P["a"])(I,g,y,!1,null,"2a8942a8",null),z=L.exports,A=a("71a6"),O={mixins:[m["a"]],components:{viewDrawer:d["default"],CheckDialog:f["a"],bar:p["a"],receiptDialog:u["default"],BillDetail:z,MoreReceipt:b["a"],IssueReceiptDialog:h["a"]},props:{forward:Function},filters:{filterBillSource:function(e){switch(e){case 1:return"首期账单";case 2:return"结算账单";case 3:return"账期账单";case 4:return"手工账单";default:return""}},filterSettleStatus:function(e){switch(e){case"2":case 2:return"结算中";case"3":case 3:return"已结算";default:return""}}},data:function(){return{addCode:["adm:finance:bill:add"],addReceiptCode:["adm:finance:receiptAdd"],printReceiptCode:["adm:finance:bill:getPdf"],pushBillCode:["adm:finance:pushByBillId"],editCode:["adm:finance:bill:edit"],delCode:["adm:finance:bill:del"],receiptCode:["adm:finance:bill:receipt"],expCode:["adm:finance:bill:exp"],reviewAgainCode:["adm:finance:bill:reviewAgain"],total:0,checkDiaShow:!1,loading:!1,showReceipt:!1,curContractInfo:{},curType:"view",listData:[],allColumns:[],columns:[{type:"selection"},{name:"账单来源",slotName:"billSource"},{name:"账期",desc:"billDate",width:"100"},{name:"缴费状态",desc:"payStatus",slotName:"payStatus"},{name:"项目-楼栋",desc:"buildingJoinName",width:"200"},{name:"楼层-房间-空间",desc:"roomJoinName",tooltip:!1,slotName:"roomJoinName",width:"150"},{name:"客户名称",desc:"cusName",width:"140"},{name:"合同编号",desc:"contractNo",width:"150"},{name:"账单组",desc:"groupName",width:"150"},{name:"应收金额(元)",desc:"receivableAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"调整金额(元)",desc:"reduceAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"待收金额(元)",desc:"pendingAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"已收金额(元)",desc:"receiptAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"滞纳金(元)",desc:"overdueAmt",width:"120",filter:function(e){return(+(null===e||void 0===e?void 0:e.toFixed(2))).toFixed(2)}},{name:"计费周期",desc:"billPeriodStart,billPeriodEnd",filter:function(e,t){return t[e[0]]+"~"+t[e[1]]},width:"200"},{name:"出账日",desc:"billingDate",width:"120"},{name:"最晚还款日",desc:"lateDate",width:"120"},{name:"逾期天数",slotName:"lateDate_"},{name:"账单流水号",desc:"billCode",width:"120"},{name:"操作",slotName:"action",fixed:"right",width:330}],queryParams:{pageNum:1,pageSize:10,groupId:null,payStatus:null,daysOverdue:""},colModel:[[{columnId:"areaId",displayName:"项目:",searchType:"select",placeholder:"请选择项目",className:"active",options:[]},{columnId:"billingDate",displayName:"账期:",searchType:"date",format:"yyyy-MM",className:"active",type:"month",placeholder:"请选择账期"},{columnId:"payStatus",displayName:"结清状态:",searchType:"select",className:"active",placeholder:"请选择缴费状态",options:[{value:null,label:"全部"},{value:1,label:"未结清"},{value:2,label:"已结清"}]},{columnId:"daysOverdue",displayName:"是否逾期:",searchType:"select",className:"active",placeholder:"请选择逾期天数",options:[{value:"",label:"不限"},{value:0,label:"30天内"},{value:1,label:"30到60天"},{value:2,label:"60到90天"},{value:3,label:"90天以上"}]}],[{columnId:"subjectMatterType",displayName:"房源类型",searchType:"select",placeholder:"请选择房源类型",options:[{value:1,label:"公寓"},{value:2,label:"商办空间"}]},{columnId:"groupId",displayName:"账单组",searchType:"select",placeholder:"请选择账单组",options:[]},{columnId:"billSourceIn",displayName:"账单类型",searchType:"select",placeholder:"请选择账单来源",multiple:!0,options:[{value:1,label:"首期账单"},{value:2,label:"结算账单"},{value:3,label:"账期账单"},{value:4,label:"手工账单"}]},{columnId:"cusName",displayName:"客户名称",placeholder:"请输入客户名称",searchType:"input"},{columnId:"contractNo",displayName:"合同编号",placeholder:"请输入合同编号",searchType:"input"},{columnId:"billCode",displayName:"账单流水号",placeholder:"请输入账单流水号",searchType:"input"}]],isShowDate:!1,year:0,reviewList:[],idsId:[],isShowBillCode:"",formData:{},visReceiptDialog:!1,receiptList:[],allClear:!1,curRow:{},showReviewAgain:!1,reviewRemark:"",curAreaId:null,isPush:!1,showBill:!1,rowData:[],showMoreReceipt:!1}},methods:{handlePushBill:function(e){var t=this;console.log("handlePushBill",e),Object(c["g"])([e.id]).then((function(e){0==e.code&&t.$message.success("催缴成功")}))},hanldePrint:function(e){this.curContractInfo=JSON.parse(JSON.stringify(e)),this.curType="edit",this.showBill=!0},handleDownload:function(e){this.curContractInfo=JSON.parse(JSON.stringify(e)),this.curType="edit",this.showBill=!0},handleReceipt:function(e){var t=this;if(console.log("handleReceipt",e),this.curType=e.receiptHisAmt==e.receiptAmt?"view":"edit","view"==this.curType){var a={pageSize:20,pageNum:1,receiptType:1};a["boundId"]=e.id,a["status"]=1,Object(A["e"])(a).then((function(e){0==e.code&&(t.rowData=e.data.items,t.showMoreReceipt=!0)}))}else this.curContractInfo=e,this.showReceipt=!0},getBillGroupAll:function(e){var t=this;Object(v["b"])({areaId:e}).then((function(e){0==e.code&&(t.colModel[1][1].options=e.data.map((function(e){return{label:e.groupName,value:e.id}})))}))},handleReviewAgain:function(e){this.curRow=e,console.log(e,"row===>"),this.reviewRemark=null,this.showReviewAgain=!0},confirmReviewAgain:function(){var e=this;if(!this.reviewRemark||""===this.reviewRemark.trim())return this.$message.error("请输入重新复核原因");var t={ids:[this.curRow.id],remark:this.reviewRemark};Object(o["y"])(t).then((function(t){0==t.code&&(e.$message.success("重新复核成功"),e.getList(),e.showReviewAgain=!1,e.curRow={},e.reviewRemark=null)}))},checkColumnSave:function(e){this.columns=e},handleReset:function(){this.queryParams={pageNum:1,pageSize:this.queryParams.pageSize,areaId:null,payStatus:null,daysOverdue:""},this.getInitQuery(),this.handleSearch({})},handleSearchBill:function(){this.queryParams.isAdjustBill?delete this.queryParams.isAdjustBill:this.queryParams["isAdjustBill"]=!0,this.handleSearch({})},handleSearch:function(e){var t=this;console.log("queryparma:",this.queryParams,"searchObj:",e),e&&e.pageNum&&(this.queryParams.pageNum=e.pageNum);var a=Object.assign({},this.queryParams,e);a.billPeriodStart&&2===a.billPeriodStart.length&&(a.billPeriodEnd=l()(a.billPeriodStart[1]).format("YYYY-MM-DD"),a.billPeriodStart=l()(a.billPeriodStart[0]).format("YYYY-MM-DD")),a["billingDate"]&&(a["billDateBetween"]=[l()(a.billingDate).format("YYYY-MM"),l()(a.billingDate).format("YYYY-MM")]),1==a["payStatus"]?a["payStatusIn"]=[0,1,3]:2==a["payStatus"]?a["payStatusIn"]=[2]:a["payStatusIn"]=null,this.queryParams.areaId!==this.curAreaId&&this.queryParams.areaId?(this.getBillGroupAll(this.queryParams.areaId),this.curAreaId=this.queryParams.areaId,a["groupId"]=null,this.queryParams.groupId=null):this.queryParams.areaId||(this.queryParams["groupId"]=null,this.colModel[1][1].options=[]),this.$forceUpdate(),this.loading=!0,Object(o["u"])(a).then((function(e){0===e.code?(t.total=e.data.total,t.listData=e.data?e.data.items:[]):t.$message.error(e.msg)})).finally((function(){t.loading=!1}));var i=JSON.parse(JSON.stringify(a));i["billingDate"]&&(i["billDateBetween"]=[l()(i.billingDate).format("YYYY-MM"),l()(i.billingDate).format("YYYY-MM")]),this.getInfoReviewedStat(i)},getInfoReviewedStat:function(e){var t=this;Object(o["v"])(null!==e&&void 0!==e?e:this.queryParams).then((function(e){0==e.code&&(t.formData=e.data,t.formData.receivableAmtSum=t.formartNum(t.formData.receivableAmtSum||0),t.formData.overdueAmtSum=t.formartNum(t.formData.overdueAmtSum||0),t.formData.receiptAmtSum=t.formartNum(t.formData.receiptAmtSum||0),t.formData.pendingAmtSum=t.formartNum(t.formData.pendingAmtSum||0))}))},formartNum:function(e){return 0==e.toFixed(2)?"0.00":null!==(t=null===e||void 0===e?void 0:e.toFixed(2))&&void 0!==t?t:"0.00";var t},handleShow:function(e){2==e.billSource?this.forward("ViewForm",{opt:"after",rowId:e.settleId,payeeId:e.payeeId}):this.forward("FormDetail",{opt:"after",id:e.id})},changePringData:function(e){this.reviewList=e},showDate:function(e){this.isShowDate=e;var t=new Date;this.year=t.getFullYear(),Object(o["w"])({year:this.year}).then((function(e){}))},addYear:function(){this.year++},delYear:function(){this.year--},handleExport:function(e){var t=this;console.log(e),1==e&&this.reviewList.length<=0?this.$message.warning("请先勾选账单"):this.$confirm("确定对".concat(1==e?this.reviewList.length+"个":"全部","账单进行导出吗？"),"账单导出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};1==e?a.ids=t.reviewList.map((function(e){return e.id})):a.queryReq=t.queryParams,Object(o["q"])(a).then((function(e){console.log(e),t.$message.success("导出成功")}))}))},handlePushBillAll:function(){this.reviewList.length<=0?this.$message.warning("请先勾选账单"):(this.receiptList=this.reviewList.filter((function(e){return 2!=e.payStatus&&(e.settleStatus||0)<2})).map((function(e){return{id:e.id,billCode:e.billCode}})),0!==this.receiptList.length?(this.allClear=!1,this.visReceiptDialog=!0,this.isPush=!0):this.$message.warning("选中的账单已结清."))},handleSettle:function(){this.reviewList.length<=0?this.$message.warning("请先勾选账单"):(this.receiptList=this.reviewList.filter((function(e){return 2!=e.payStatus&&(e.settleStatus||0)<2})).map((function(e){return{id:e.id,billCode:e.billCode}})),0!==this.receiptList.length?(this.allClear=!0,this.visReceiptDialog=!0,this.isPush=!1):this.$message.warning("选中的账单已结清."))},confirmColl:function(e){this.receiptList=[{id:e.id,billCode:e.billCode,pendingAmt:e.pendingAmt.toFixed(2)}],this.allClear=!1,this.visReceiptDialog=!0},getList:function(){var e=this.queryParams,t=e.pageNum,a=e.pageSize;1!=t&&this.total==(t-1)*a+1&&(t-=1),this.$refs.bxzTable.clearSelection(),this.reviewList=[],this.handleSearch({pageNum:t})},filterDateDiff:function(e){if(null!=e){var t=l()().diff(l()(e),"days");if(t>0)return t}return"-"},getInitQuery:function(){this.queryParams["daysOverdue"]="",this.queryParams["areaId"]=this.colModel[0][0].options[0].value,this.queryParams["payStatus"]=1}},created:function(){this.colModel[0][0].options=this.areaList.map((function(e,t){return e.value=e.areaId,e.label=e.areaName,e})),this.getInitQuery(),this.handleSearch(),this.allColumns=Object(r["a"])(this.columns)}},T=O,j=(a("c8dc"),Object(P["a"])(T,i,n,!1,null,"fc988760",null));t["default"]=j.exports},f8b9:function(e,t,a){"use strict";a.r(t);a("b680");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabel-container"},[t("el-card",[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},["2"===e.activeName||"3"===e.activeName?t("SearchComp",{attrs:{index:e.activeName,billDate:e.queryParams.billDateArr},on:{getTableData:e.getTableData,exportTable:e.exportTable}}):t("search",{attrs:{index:e.activeName,billDate:e.queryParams.billDate},on:{getTableData:e.getTableData,exportTable:e.exportTable}}),t("el-tab-pane",{attrs:{label:"企业应收费用明细表",name:"2"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.feeList,border:""}},[t("el-table-column",{attrs:{prop:"areaName",label:"分区名称",align:"center"}}),t("el-table-column",{attrs:{prop:"buildingName",label:"楼栋名称",align:"center"}}),t("el-table-column",{attrs:{prop:"cusName",label:"客户名称",align:"center"}}),t("el-table-column",{attrs:{prop:"spaceCode",label:"资源代码",align:"center"}}),t("el-table-column",{attrs:{prop:"spaceArea",label:"建筑面积",align:"center"}}),e._l(e.financeList,(function(a,i){return t("el-table-column",{key:i,attrs:{label:a.itemName,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(e.toFixed(i.row.feeItems[a.id])))])]}}],null,!0)})}))],2),t("ns-pagination",{attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:function(t){return e.getFeeList()}}})],1),t("el-tab-pane",{attrs:{label:"公寓应收费用明细表",name:"3"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.staffFeeList,border:""}},[t("el-table-column",{attrs:{prop:"areaName",label:"分区名称",align:"center"}}),t("el-table-column",{attrs:{prop:"buildingName",label:"楼栋名称",align:"center"}}),t("el-table-column",{attrs:{prop:"cusName",label:"客户名称",align:"center"}}),t("el-table-column",{attrs:{prop:"spaceCode",label:"资源代码",align:"center"}}),t("el-table-column",{attrs:{prop:"spaceArea",label:"建筑面积",align:"center"}}),e._l(e.financeList,(function(a,i){return t("el-table-column",{key:i,attrs:{label:a.itemName,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(e.toFixed(i.row.feeItems[a.id])))])]}}],null,!0)})}))],2),t("ns-pagination",{attrs:{total:e.staffTotal,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:function(t){return e.getStaffFeeList()}}})],1)],1)],1)],1)},n=[],r=a("5530"),s=(a("d3b7"),a("b775")),l=a("2934"),o=a("c1df"),c=a.n(o),d=function(e){return s["a"].post("/adm-service/finance/rpt/bent/energy",e)},u=function(e){return Object(l["b"])("/adm-service/finance/rpt/bent/energy/exp",e,"商办空间能耗明细表".concat(c()().format("YYYYMMDD"),"_导出.xls"))},m=function(e){return s["a"].post("/adm-service/finance/rpt/bent/fee",e)},f=function(e){return Object(l["b"])("/adm-service/finance/rpt/bent/fee/exp",e,"企业应收费用明细表".concat(c()().format("YYYYMMDD"),"_导出.xls"))},p=function(e){return s["a"].post("/adm-service/finance/rpt/meter/public",e)},h=function(e){return Object(l["b"])("/adm-service/finance/rpt/meter/public/exp",e,"电表公摊明细表".concat(c()().format("YYYYMMDD"),"_导出.xls"))},b=function(e){return s["a"].post("/adm-service/finance/rpt/staff/fee",e)},v=function(e){return Object(l["b"])("/adm-service/finance/rpt/staff/fee/exp",e,"公寓应收费用明细表".concat(c()().format("YYYYMMDD"),"_导出.xls"))},g=a("376f"),y=a("6371"),w=a("6421"),x={name:"financeFormPage",props:{forward:Function},components:{SearchComp:w["default"],search:y["default"]},data:function(){return{activeName:"2",loading:!1,total:0,listData:[],publicList:[],financeList:[],feeList:[],staffFeeList:[],columns:[{name:"企业名称",desc:"cusName"},{name:"面积",desc:"spaceArea"},{name:"分摊水费",desc:"waterPublicAmt"},{name:"水费",desc:"waterPublicPrice"},{name:"分摊电量",desc:"electricPublicAmt"},{name:"分摊电费",desc:"electricPublicPrice"},{name:"实用电量",desc:"electricAmt"},{name:"电单价",desc:"electricUnitPrice"},{name:"基本电费",desc:"electricPrice"},{name:"合计电量",slotName:"electricPublicAmtSlot"},{name:"合计电费",slotName:"electricPriceSlot"},{name:"用电管理费",desc:"electricManagerialFee"}],columns2:[{name:"表号",desc:"meterNumber"},{name:"总表电量",desc:"totalMete"},{name:"装表地址",desc:"waterPublicAmt"},{name:"用电企业",desc:"cusName"},{name:"建筑面积",desc:"spaceArea"},{name:"电量",desc:"electricAmt"},{name:"电费",desc:"electricPrice"}],queryParams:{billDate:"",pageNum:1,pageSize:10,billDateArr:[]},staffTotal:0}},created:function(){var e=c()().format("YYYY-MM");this.queryParams.billDate=e,this.queryParams.billDateArr=[e,e],this.handleClick({index:this.activeName})},methods:{getEnergyList:function(){var e=this;this.loading=!0,d(this.queryParams).then((function(t){0==t.code&&(e.listData=t.data.items,e.total=t.data.total)})).finally((function(){e.loading=!1}))},getPublicList:function(){var e=this;this.loading=!0,p(this.queryParams).then((function(t){0==t.code&&(e.publicList=t.data.items,e.total=t.data.total)})).finally((function(){e.loading=!1}))},getFinanceList:function(){var e=this,t={pageNum:1,pageSize:100,status:0};Object(g["j"])(t).then((function(t){0==t.code&&(e.financeList=t.data.items)}))},getFeeList:function(){var e=this;this.loading=!0;var t=Object(r["a"])({},this.queryParams);delete t.billDate,m(t).then((function(t){0==t.code&&(e.feeList=t.data.items,e.total=t.data.total)})).finally((function(){e.loading=!1}))},getStaffFeeList:function(){var e=this;this.loading=!0,b(this.queryParams).then((function(t){0==t.code&&(e.staffFeeList=t.data.items,e.staffTotal=t.data.total)})).finally((function(){e.loading=!1}))},handleClick:function(e,t){switch(this.queryParams.pageNum=1,e.index){case"0":this.getEnergyList();break;case"1":this.getPublicList();break;case"2":this.getFinanceList(),this.getFeeList();break;case"3":this.getFinanceList(),this.getStaffFeeList();break}},getTableData:function(e,t){switch("2"===e||"3"===e?(this.queryParams.billDateArr=null===t.billDateArr?[]:t.billDateArr,this.queryParams.cusName=t.cusName,this.queryParams.spaceCode=t.spaceCode):this.queryParams.billDate=t,e){case"0":this.getEnergyList();break;case"1":this.getPublicList();break;case"2":this.getFinanceList(),this.getFeeList();break;case"3":this.getFinanceList(),this.getStaffFeeList();break}},exportTable:function(e,t){switch(e){case"0":u(this.queryParams).then((function(e){console.log(e)}));break;case"1":h(this.queryParams).then((function(e){console.log(e)}));break;case"2":f(this.queryParams).then((function(e){console.log(e)}));break;case"3":v(this.queryParams).then((function(e){console.log(e)}));break}},toFixed:function(e){return e?e.toFixed(2):0}}},D=x,_=a("2877"),S=Object(_["a"])(D,i,n,!1,null,"72186dcc",null);t["default"]=S.exports},f923:function(e,t,a){},f97e:function(e,t,a){},fa4e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"size",align:"center",title:"选择费项",visible:e.isShow,width:"700px"},on:{"update:visible":function(t){e.isShow=t}}},[t("el-card",[t("el-table",{attrs:{border:"",data:e.chargeItems,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"expName",label:"分类",width:"180"}}),t("el-table-column",{attrs:{prop:"itemName",label:"费项名称"}}),t("el-table-column",{attrs:{prop:"taxRate",label:"税率",width:"80"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.isShow=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSelect}},[e._v("确 定")])],1)],1)},n=[],r=a("c23a"),s={props:{value:{type:Boolean,required:!0}},data:function(){return{isShow:!1,chargeItems:[],selection:[]}},watch:{value:function(e){e&&(this.isShow=e,this.loadData())},isShow:function(e){this.$emit("input",e)}},methods:{loadData:function(){var e=this;Object(r["a"])({pageNum:1,pageSize:100,status:0}).then((function(t){0===t.code?e.chargeItems=t.data.items:e.$message.error("加载错误:".concat(t.msg))})).catch((function(t){e.$message.error("加载费项异常!")}))},handleSelectionChange:function(e){this.selection=e},handleSelect:function(){this.$emit("selectChanged",this.selection),this.isShow=!1}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},fa9d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.activeName==e.subComponent,expression:"activeName == subComponent"}],on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"已复核",name:"reviewAfter"}}),t("el-tab-pane",{attrs:{label:"待复核",name:"reviewBefore"}})],1),t(e.subComponent,{tag:"component",attrs:{enterParams:e.subParams,forward:e.navigat}})],1)},n=[],r=a("3ec6"),s=a("0013"),l=a("8fdc"),o=a("c23b"),c=a("bb27"),d=a("92d7"),u=a("f7af"),m={components:{reviewBefore:s["default"],reviewAfter:r["default"],Form:l["default"],FormDetail:c["default"],subBill:d["default"],ViewForm:u["default"],FormOld:o["default"]},data:function(){return{activeName:"reviewAfter",subComponent:"reviewAfter",subParams:{}}},methods:{navigat:function(e,t){this.subComponent=e,this.subParams=t||{}},handleClick:function(e,t){this.navigat(this.activeName)}}},f=m,p=(a("ed70"),a("2877")),h=Object(p["a"])(f,i,n,!1,null,"746648ef",null);t["default"]=h.exports},fb15:function(e,t,a){},fb64:function(e,t,a){"use strict";a("a938")},fbc4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t(e.curComponent,{tag:"component",attrs:{enterParams:e.enterParams,forward:e.forward}})},n=[],r=a("d47c"),s={name:"AdmFinanceScheme",components:{List:r["default"]},data:function(){return{curComponent:"List",enterParams:{}}},methods:{forward:function(e,t){this.curComponent=e,this.enterParams=t||{}}}},l=s,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},fc06:function(e,t,a){},ffb0:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"1000px",title:"edit"==e.enterParam.type?"编辑收款方":"新增收款方",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},close:e.hide}},[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"130px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属项目:",prop:"areaId"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{disabled:"add"!==e.enterParam.type,placeholder:"请选择项目",clearable:""},on:{change:e.getAreaId},model:{value:e.form.areaId,callback:function(t){e.$set(e.form,"areaId",t)},expression:"form.areaId"}},e._l(e.parks,(function(e){return t("el-option",{key:e.areaId,attrs:{label:e.areaName,value:e.areaId}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"收款方名称:",prop:"payeeName"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入收款方名称"},model:{value:e.form.payeeName,callback:function(t){e.$set(e.form,"payeeName",t)},expression:"form.payeeName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"纳税人识别号:",prop:"taxpayerNo"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入纳税人识别号"},model:{value:e.form.taxpayerNo,callback:function(t){e.$set(e.form,"taxpayerNo",t)},expression:"form.taxpayerNo"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"账号:",prop:"bankNo"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入账号"},model:{value:e.form.bankNo,callback:function(t){e.$set(e.form,"bankNo",t)},expression:"form.bankNo"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"开户行:",prop:"bank"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入开户行"},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"核算银行账号编码:",prop:"bankCode"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入核算银行账号编码"},model:{value:e.form.bankCode,callback:function(t){e.$set(e.form,"bankCode",t)},expression:"form.bankCode"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"金融机构:",prop:"mechanism"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择金融机构"},model:{value:e.form.mechanism,callback:function(t){e.$set(e.form,"mechanism",t)},expression:"form.mechanism"}},e._l(e.bankOption,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"开户行地址:",prop:"bankAddress"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入开户行地址"},model:{value:e.form.bankAddress,callback:function(t){e.$set(e.form,"bankAddress",t)},expression:"form.bankAddress"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"收款人:",prop:"payee"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入收款人"},model:{value:e.form.payee,callback:function(t){e.$set(e.form,"payee",t)},expression:"form.payee"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"复核人:",prop:"reviewer"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入复核人"},model:{value:e.form.reviewer,callback:function(t){e.$set(e.form,"reviewer",t)},expression:"form.reviewer"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"收款方地址:",prop:"payeeAddress"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入收款方地址"},model:{value:e.form.payeeAddress,callback:function(t){e.$set(e.form,"payeeAddress",t)},expression:"form.payeeAddress"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"印章图片:",prop:"sealPic"}},[t("ns-file-upload",{staticStyle:{width:"100%"},attrs:{busSubType:9022,token:e.getToken(),limit:1,fileList:e.fileList,showViewer:!0,downloadFunc:e.dFile,uploadUrl:e.getBaseApi()}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态:",prop:"status"}},[t("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[t("el-radio",{attrs:{label:0}},[e._v("启用")]),t("el-radio",{attrs:{label:1}},[e._v("禁用")])],1)],1)],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hide}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)],1)},n=[],r=a("5530"),s=(a("7db0"),a("e9c4"),a("b64b"),a("d3b7"),a("39cc")),l=a("5f87"),o=a("0b2d"),c={props:{value:{type:Boolean,required:!0},enterParam:{type:Object,default:function(){return{}}}},computed:{parks:function(){return Object(l["a"])()}},data:function(){return{fileList:[],isShow:!1,bankOption:[],form:{areaId:"",areaName:"",payeeName:"",taxpayerNo:"",bankNo:"",bank:"",mechanism:"",phone:"",bankAddress:"",payee:"",reviewer:"",payeeAddress:"",status:0},rules:{areaId:[{required:!0,message:"请选择所属项目",trigger:"chagne"}],payeeName:[{required:!0,message:"收款方名称不能为空",trigger:"blur"}],taxpayerNo:[{required:!0,message:"纳税人识别号不能为空",trigger:"blur"}],bankNo:[{required:!0,message:"账号不能为空",trigger:"blur"}],bank:[{required:!0,message:"开户行不能为空",trigger:"blur"}]}}},watch:{value:function(e){e&&(this.isShow=e,this.fileList=[],"edit"==this.enterParam.type&&this.getDetail())},isShow:function(e){this.$emit("input",e)}},created:function(){var e=this;this.getDicts({code:"biz_bank"}).then((function(t){0==t.code&&(e.bankOption=t.data.items||[])}))},methods:{getToken:l["d"],getBaseApi:function(){return"/prod-api"},dFile:function(e){Object(o["a"])(e.fileId,e.fileName)},getAreaId:function(e){var t=this.parks.find((function(t){return t.areaId===e}));this.form.areaName=t.areaName},getDetail:function(){var e=this;Object(s["H"])({id:this.enterParam.rowId}).then((function(t){0==t.code?(e.form=t.data,t.data.sealPicFile&&t.data.sealPicFile.id&&(e.fileList=[Object(r["a"])(Object(r["a"])({},t.data.sealPicFile),{},{fileId:t.data.sealPicFile.id})]||!1)):e.$message.error(t.msg)}))},submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=JSON.parse(JSON.stringify(e.form));e.fileList.length>0?a["sealPic"]=e.fileList[0].fileId:(a["sealPic"]="",a["sealPicFile"]=null);var i=function(t){0===t.code?(e.$message.success("保存成功"),e.$emit("refreshList"),e.hide()):e.$message.error(t.msg)};"edit"===e.enterParam.type?Object(s["I"])(a).then(i):Object(s["E"])(a).then(i)}}))},hide:function(){this.resetForm("form"),this.form={areaId:"",areaName:"",payeeName:"",taxpayerNo:"",bankNo:"",bank:"",mechanism:"",phone:"",bankAddress:"",payee:"",reviewer:"",payeeAddress:"",status:0},this.isShow=!1},handleChange:function(e){console.log(e)}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=m.exports},ffcd:function(e,t,a){}}]);