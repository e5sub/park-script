(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0971dca7"],{1343:function(t,e,o){"use strict";o("4d92")},"261a":function(t,e,o){"use strict";o("51ac")},"4d92":function(t,e,o){},"51ac":function(t,e,o){},"60bb":function(t,e,o){t.exports=o.p+"static/img/bgImg.462d7145.png"},"81d5":function(t,e,o){"use strict";var i=o("7b0b"),n=o("23cb"),r=o("50c4");t.exports=function(t){var e=i(this),o=r(e.length),s=arguments.length,a=n(s>1?arguments[1]:void 0,o),d=s>2?arguments[2]:void 0,l=void 0===d?o:n(d,o);while(l>a)e[a++]=t;return e}},"9ed6":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"particles-js",attrs:{id:"particles-js"}},[o("div",{staticClass:"login-container",attrs:{id:"keyBox"}},[t._m(0),o("div",{staticClass:"right-bg"},["login"==t.formType?o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"auto-complete":"on","label-position":"left"}},[o("div",{staticClass:"body"},[o("h1",{staticClass:"title-login"},[t._v(" 园区资产运营管理系统 ")]),o("el-form-item",{staticClass:"mb-lg",attrs:{prop:"username"}},[o("el-input",{ref:"username",attrs:{placeholder:"用户名/手机号",name:"username",type:"text",tabindex:"1","auto-complete":"on"},on:{input:function(e){return t.loginForm.username=e.replace(/\s+/g,"")}},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),o("el-form-item",{staticClass:"mb-lg",attrs:{prop:"password"}},[o("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,placeholder:"密码",name:"password",tabindex:"2","auto-complete":"on"},on:{input:function(e){return t.loginForm.password=e.replace(/\s+/g,"")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),o("div",{staticClass:"verification"},[o("el-form-item",{staticClass:"yanzhenma mb-lg",attrs:{prop:"verifycode"}},[o("el-input",{staticClass:"identifyinput",attrs:{maxlength:"4",placeholder:"验证码","auto-complete":"on"},model:{value:t.loginForm.verifycode,callback:function(e){t.$set(t.loginForm,"verifycode",e)},expression:"loginForm.verifycode"}}),o("div",{staticClass:"identify",on:{click:t.refreshCode}},[o("s-identify",{attrs:{"identify-code":t.identifyCode}})],1)],1)],1),o("div",{staticStyle:{width:"100%","text-align":"center"}},[o("el-button",{staticClass:"loginbutton",staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登录")])],1)],1)]):o("el-form",{ref:"resetFormRef",staticClass:"login-form",attrs:{model:t.dataForm,rules:t.resetRules,"auto-complete":"on","label-position":"left"}},[o("div",{staticClass:"body"},[o("h1",{staticClass:"title-login"},[t._v("找回密码")]),o("el-form-item",{staticClass:"mb-md",attrs:{prop:"phone"}},[o("el-input",{attrs:{placeholder:"请输入手机号",maxlength:"11"},model:{value:t.dataForm.phone,callback:function(e){t.$set(t.dataForm,"phone","string"===typeof e?e.trim():e)},expression:"dataForm.phone"}})],1),o("el-form-item",{staticClass:"mb-md",attrs:{prop:"code"}},[o("div",{staticClass:"bind_code"},[o("el-input",{staticClass:"bind_code_input code",attrs:{placeholder:"请输入验证码",maxlength:"10"},model:{value:t.dataForm.code,callback:function(e){t.$set(t.dataForm,"code","string"===typeof e?e.trim():e)},expression:"dataForm.code"}}),o("el-button",{staticClass:"bind_code_gain",attrs:{disabled:t.disabled},nativeOn:{click:function(e){return e.preventDefault(),t.bindforgetSendCode(e)}}},[t._v(" "+t._s(t.btnText)+" ")])],1)]),o("el-form-item",{staticClass:"mb-md",attrs:{prop:"newPwd1"}},[o("el-input",{attrs:{placeholder:"请输入新密码（6-16位字符）",maxlength:"16",type:"password","show-password":""},model:{value:t.dataForm.newPwd1,callback:function(e){t.$set(t.dataForm,"newPwd1","string"===typeof e?e.trim():e)},expression:"dataForm.newPwd1"}})],1),o("el-form-item",{attrs:{prop:"newPwd2"}},[o("el-input",{attrs:{placeholder:"再次输入",maxlength:"16",type:"password","show-password":""},model:{value:t.dataForm.newPwd2,callback:function(e){t.$set(t.dataForm,"newPwd2","string"===typeof e?e.trim():e)},expression:"dataForm.newPwd2"}})],1),o("div",{staticStyle:{float:"right",padding:"0px 40px 0px 0",width:"100%"}},[o("el-button",{staticStyle:{float:"right",color:"#791cb3","font-size":"14px","font-weight":"500"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.returnBack()}}},[t._v("返回登录")])],1),o("div",{staticStyle:{width:"100%","text-align":"center"}},[o("el-button",{staticClass:"loginbutton",attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[t._v("提交")])],1)],1)])],1),o("div",{staticClass:"erCode"})]),o("el-footer",[t._v(" "+t._s(t.copyRight||"Copyright © 深圳市网信数字科技有限公司 版权所有")+" ")])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left-bg"},[i("img",{staticClass:"leftImg",attrs:{src:o("60bb")}})])}],r=o("5530"),s=(o("fb6a"),o("d3b7"),o("25f0"),o("b531")),a=o("2f62"),d=o("bac7"),l=o("c24f"),c=o("ed08"),m={name:"Login",components:{SIdentify:s["default"]},computed:Object(r["a"])({},Object(a["b"])(["loginFileId","systemName","copyRight"])),data:function(){var t=this,e=function(e,o,i){t.dataForm.newPwd1!==o?i(new Error("两次输入的密码不一致")):i()};return{loginForm:{username:"",password:"",verifycode:""},loginRules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifycode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},loading:!1,passwordType:"password",redirect:void 0,identifyCodes:"1234567890ABCDEFGHIGKLMNoPQRSTUVWXYZ",identifyCode:"",title:"",formType:"login",dataForm:{code:"",newPwd1:"",newPwd2:"",phone:""},disabled:!1,btnText:"获取验证码",resetRules:{phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],newPwd1:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],newPwd2:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:e,trigger:"blur"}]}}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0},systemName:{handler:function(t){t&&(document.title=t)},immediate:!0}},mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4),this.init();var t=this;document.getElementById("keyBox").onkeyup=function(e){"Enter"!=e.code&&13!=e.keyCode||t.handleLogin()}},methods:{init:function(){},checkCapslock:function(t){var e=t.key;this.capsTooltip=e&&1===e.length&&e>="A"&&e<="Z"},randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(t,e){for(var o=0;o<e;o++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},resetPwd:function(){this.formType="reset"},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return console.log("error submit!!"),t.refreshCode(),!1;t.loginForm.verifycode.toLocaleLowerCase()===t.identifyCode.toLocaleLowerCase()?(t.loading=!0,t.$store.dispatch("user/login",t.loginForm).then((function(){t.$router.push({path:"/dashboard"}),t.loading=!1})).catch((function(e){t.refreshCode(),t.$message.warning(e.toString()),t.loading=!1}))):t.$message.warning("验证码不正确")}))},bindforgetSendCode:function(){var t=this;this.$refs.resetFormRef.validateField("phone",(function(e){if(e)return!1;var o=parseInt((new Date).getTime()/1e3),i=Object(c["b"])(t.dataForm.phone),n=i.slice(16),r=t.dataForm.phone+"#"+o,s=Object(c["a"])(r,n);Object(d["a"])({check:s,phone:t.dataForm.phone,sendType:1}).then((function(e){0==e.code?(t.$message.success("已发送验证码，请查收"),t.disabled=!0,t.btnText="请稍候...",setTimeout((function(){t.doLoop(60)}),500)):t.$message.error(e.msg)})).catch((function(){}))}))},doLoop:function(t){var e=this;t=t||60,this.btnText=t+"s";var o=setInterval((function(){t>0?(e.btnText=t+"s",--t):(e.btnText="获取验证码",e.disabled=!1,clearInterval(o))}),1e3)},handleSubmit:function(){var t=this;this.$refs["resetFormRef"].validate((function(e){e&&(t.loading=!0,Object(l["f"])(t.dataForm).then((function(e){t.loading=!1,0==e.code?(t.resetForm("resetFormRef"),t.formType="login",t.$message.success("密码重置成功!")):t.$message.error(e.msg)})).catch((function(e){console.log("errrrrrrr:",e),t.loading=!1,t.$message.error("系统繁忙，请稍后重试")})))}))},returnBack:function(){this.resetForm("resetFormRef"),this.formType="login"}}},u=m,f=(o("1343"),o("261a"),o("2877")),h=Object(f["a"])(u,i,n,!1,null,"77e5768e",null);e["default"]=h.exports},b531:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"s-canvas"},[o("canvas",{attrs:{id:"s-canvas",width:t.contentWidth,height:t.contentHeight}})])},n=[],r=(o("cb29"),o("a9e3"),{name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:28},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:240},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:1},colorMax:{type:Number,default:1},lineColorMin:{type:Number,default:255},lineColorMax:{type:Number,default:255},dotColorMin:{type:Number,default:255},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:100},contentHeight:{type:Number,default:38}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()},methods:{randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor:function(t,e){var o=this.randomNum(t,e),i=this.randomNum(t,e),n=this.randomNum(t,e);return"rgb("+o+","+i+","+n+")"},drawPic:function(){var t=document.getElementById("s-canvas"),e=t.getContext("2d");e.textBaseline="bottom",e.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),e.fillRect(0,0,this.contentWidth,this.contentHeight);for(var o=0;o<this.identifyCode.length;o++)this.drawText(e,this.identifyCode[o],o);this.drawLine(e),this.drawDot(e)},drawText:function(t,e,o){t.fillStyle=this.randomColor(this.colorMin,this.colorMax),t.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var i=(o+1)*(this.contentWidth/(this.identifyCode.length+1)),n=this.randomNum(this.fontSizeMax,this.contentHeight-5),r=this.randomNum(-30,30);t.translate(i,n),t.rotate(r*Math.PI/270),t.fillText(e,0,0),t.rotate(-r*Math.PI/270),t.translate(-i,-n)},drawLine:function(t){for(var e=0;e<2;e++)t.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),t.beginPath(),t.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.stroke()},drawDot:function(t){for(var e=0;e<20;e++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()}}}),s=r,a=o("2877"),d=Object(a["a"])(s,i,n,!1,null,null,null);e["default"]=d.exports},bac7:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var i=o("b775"),n={smsInfo:"/adm-service/system/msg/sms/get",smsList:"/adm-service/system/msg/sms/list",smsSend:"/adm-service/system/msg/sms/send"};function r(t){return i["a"].post(n.smsSend,t)}},cb29:function(t,e,o){var i=o("23e7"),n=o("81d5"),r=o("44d2");i({target:"Array",proto:!0},{fill:n}),r("fill")}}]);